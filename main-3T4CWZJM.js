import{A as ze,a as j,b as de,c as iD,d as Up,e as N,f as oD,g as ol,h as sD,i as aD,j as uD,k as Bp,l as cD,m as Va,n as $p,o as sl,p as lD,q as dD,r as qp,s as Ve,t as Ei,u as Mn,v as al,w as La,x as hD,y as fD,z as xr}from"./chunk-LIK74K6L.js";function pD(n,e){return Object.is(n,e)}var ot=null,ul=!1,cl=1,Xn=Symbol("SIGNAL");function _e(n){let e=ot;return ot=n,e}function gD(){return ot}var Ua={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gp(n){if(ul)throw new Error("");if(ot===null)return;ot.consumerOnSignalRead(n);let e=ot.nextProducerIndex++;if(fl(ot),e<ot.producerNode.length&&ot.producerNode[e]!==n&&ja(ot)){let t=ot.producerNode[e];hl(t,ot.producerIndexOfThis[e])}ot.producerNode[e]!==n&&(ot.producerNode[e]=n,ot.producerIndexOfThis[e]=ja(ot)?_D(n,ot,e):0),ot.producerLastReadVersion[e]=n.version}function uP(){cl++}function mD(n){if(!(ja(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===cl)){if(!n.producerMustRecompute(n)&&!Qp(n)){n.dirty=!1,n.lastCleanEpoch=cl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=cl}}function yD(n){if(n.liveConsumerNode===void 0)return;let e=ul;ul=!0;try{for(let t of n.liveConsumerNode)t.dirty||cP(t)}finally{ul=e}}function vD(){return ot?.consumerAllowSignalWrites!==!1}function cP(n){n.dirty=!0,yD(n),n.consumerMarkedDirty?.(n)}function dl(n){return n&&(n.nextProducerIndex=0),_e(n)}function Wp(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ja(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Qp(n){fl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(mD(t),r!==t.version))return!0}return!1}function Kp(n){if(fl(n),ja(n))for(let e=0;e<n.producerNode.length;e++)hl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function _D(n,e,t){if(wD(n),n.liveConsumerNode.length===0&&ED(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=_D(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function hl(n,e){if(wD(n),n.liveConsumerNode.length===1&&ED(n))for(let r=0;r<n.producerNode.length;r++)hl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];fl(i),i.producerIndexOfThis[r]=e}}function ja(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function wD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function ED(n){return n.producerNode!==void 0}function ID(n){let e=Object.create(lP);e.computation=n;let t=()=>{if(mD(e),Gp(e),e.value===ll)throw e.error;return e.value};return t[Xn]=e,t}var Hp=Symbol("UNSET"),zp=Symbol("COMPUTING"),ll=Symbol("ERRORED"),lP=de(j({},Ua),{value:Hp,dirty:!0,error:null,equal:pD,producerMustRecompute(n){return n.value===Hp||n.value===zp},producerRecomputeValue(n){if(n.value===zp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=zp;let t=dl(n),r;try{r=n.computation()}catch(i){r=ll,n.error=i}finally{Wp(n,t)}if(e!==Hp&&e!==ll&&r!==ll&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function dP(){throw new Error}var DD=dP;function CD(){DD()}function bD(n){DD=n}var hP=null;function TD(n){let e=Object.create(SD);e.value=n;let t=()=>(Gp(e),e.value);return t[Xn]=e,t}function Yp(n,e){vD()||CD(),n.equal(n.value,e)||(n.value=e,fP(n))}function AD(n,e){vD()||CD(),Yp(n,e(n.value))}var SD=de(j({},Ua),{equal:pD,value:void 0});function fP(n){n.version++,uP(),yD(n),hP?.()}function ne(n){return typeof n=="function"}function So(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pl=So(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ii(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof pl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{MD(o)}catch(s){e=e??[],s instanceof pl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)MD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ii(t,e)}remove(e){let{_finalizers:t}=this;t&&Ii(t,e),e instanceof n&&e._removeParent(this)}};qe.EMPTY=(()=>{let n=new qe;return n.closed=!0,n})();var Zp=qe.EMPTY;function gl(n){return n instanceof qe||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function MD(n){ne(n)?n():n.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mo={setTimeout(n,e,...t){let{delegate:r}=Mo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Mo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ml(n){Mo.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(n);else throw n})}function Ba(){}var xD=Jp("C",void 0,void 0);function RD(n){return Jp("E",void 0,n)}function ND(n){return Jp("N",n,void 0)}function Jp(n,e,t){return{kind:n,value:e,error:t}}var Di=null;function xo(n){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Di;if(e&&(Di={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Di;if(Di=null,t)throw r}}else n()}function PD(n){fn.useDeprecatedSynchronousErrorHandling&&Di&&(Di.errorThrown=!0,Di.error=n)}var Ci=class extends qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gl(e)&&e.add(this)):this.destination=mP}static create(e,t,r){return new er(e,t,r)}next(e){this.isStopped?eg(ND(e),this):this._next(e)}error(e){this.isStopped?eg(RD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?eg(xD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pP=Function.prototype.bind;function Xp(n,e){return pP.call(n,e)}var tg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yl(r)}else yl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yl(t)}}},er=class extends Ci{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Xp(e.next,o),error:e.error&&Xp(e.error,o),complete:e.complete&&Xp(e.complete,o)}):i=e}this.destination=new tg(i)}};function yl(n){fn.useDeprecatedSynchronousErrorHandling?PD(n):ml(n)}function gP(n){throw n}function eg(n,e){let{onStoppedNotification:t}=fn;t&&Mo.setTimeout(()=>t(n,e))}var mP={closed:!0,next:Ba,error:gP,complete:Ba};var Ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tt(n){return n}function ng(...n){return rg(n)}function rg(n){return n.length===0?Tt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=vP(t)?t:new er(t,r,i);return xo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=OD(r),new r((i,o)=>{let s=new er({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ro](){return this}pipe(...t){return rg(t)(this)}toPromise(t){return t=OD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function OD(n){var e;return(e=n??fn.Promise)!==null&&e!==void 0?e:Promise}function yP(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function vP(n){return n&&n instanceof Ci||yP(n)&&gl(n)}function ig(n){return ne(n?.lift)}function ae(n){return e=>{if(ig(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new og(n,e,t,r,i)}var og=class extends Ci{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function No(){return ae((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Po=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ig(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qe;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qe.EMPTY)}return e}refCount(){return No()(this)}};var kD=So(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new kD}next(t){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Zp:(this.currentObservers=null,o.push(t),new qe(()=>{this.currentObservers=null,Ii(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new vl(e,t),n})(),vl=class extends Le{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Zp}};var ft=class extends Le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $a={now(){return($a.delegate||Date).now()},delegate:void 0};var _l=class extends Le{constructor(e=1/0,t=1/0,r=$a){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var wl=class extends qe{constructor(e,t){super()}schedule(e,t=0){return this}};var qa={setInterval(n,e,...t){let{delegate:r}=qa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=qa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Oo=class extends wl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return qa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&qa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ii(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ko=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ko.now=$a.now;var Fo=class extends ko{constructor(e,t=ko.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ha=new Fo(Oo);var El=class extends Oo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Il=class extends Fo{};var sg=new Il(El);var At=new he(n=>n.complete());function FD(n){return n&&ne(n.schedule)}function ag(n){return n[n.length-1]}function Dl(n){return ne(ag(n))?n.pop():void 0}function xn(n){return FD(ag(n))?n.pop():void 0}function VD(n,e){return typeof ag(n)=="number"?n.pop():e}var Cl=n=>n&&typeof n.length=="number"&&typeof n!="function";function bl(n){return ne(n?.then)}function Tl(n){return ne(n[Ro])}function Al(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function Sl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _P(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=_P();function xl(n){return ne(n?.[Ml])}function Rl(n){return sD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ol(t.read());if(i)return yield ol(void 0);yield yield ol(r)}}finally{t.releaseLock()}})}function Nl(n){return ne(n?.getReader)}function Pe(n){if(n instanceof he)return n;if(n!=null){if(Tl(n))return wP(n);if(Cl(n))return EP(n);if(bl(n))return IP(n);if(Al(n))return LD(n);if(xl(n))return DP(n);if(Nl(n))return CP(n)}throw Sl(n)}function wP(n){return new he(e=>{let t=n[Ro]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function EP(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function IP(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ml)})}function DP(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function LD(n){return new he(e=>{bP(n,e).catch(t=>e.error(t))})}function CP(n){return LD(Rl(n))}function bP(n,e){var t,r,i,o;return oD(this,void 0,void 0,function*(){try{for(t=aD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ot(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Xt(n,e=0){return ae((t,r)=>{t.subscribe(ue(r,i=>Ot(r,n,()=>r.next(i),e),()=>Ot(r,n,()=>r.complete(),e),i=>Ot(r,n,()=>r.error(i),e)))})}function pn(n,e=0){return ae((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function jD(n,e){return Pe(n).pipe(pn(e),Xt(e))}function UD(n,e){return Pe(n).pipe(pn(e),Xt(e))}function BD(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function $D(n,e){return new he(t=>{let r;return Ot(t,e,()=>{r=n[Ml](),Ot(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function Pl(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Ot(t,e,()=>{let r=n[Symbol.asyncIterator]();Ot(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function qD(n,e){return Pl(Rl(n),e)}function HD(n,e){if(n!=null){if(Tl(n))return jD(n,e);if(Cl(n))return BD(n,e);if(bl(n))return UD(n,e);if(Al(n))return Pl(n,e);if(xl(n))return $D(n,e);if(Nl(n))return qD(n,e)}throw Sl(n)}function ge(n,e){return e?HD(n,e):Pe(n)}function Z(...n){let e=xn(n);return ge(n,e)}function Vo(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function ug(n){return!!n&&(n instanceof he||ne(n.lift)&&ne(n.subscribe))}var tr=So(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return ae((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:TP}=Array;function AP(n,e){return TP(e)?n(...e):n(e)}function Ol(n){return X(e=>AP(n,e))}var{isArray:SP}=Array,{getPrototypeOf:MP,prototype:xP,keys:RP}=Object;function kl(n){if(n.length===1){let e=n[0];if(SP(e))return{args:e,keys:null};if(NP(e)){let t=RP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function NP(n){return n&&typeof n=="object"&&MP(n)===xP}function Fl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function za(...n){let e=xn(n),t=Dl(n),{args:r,keys:i}=kl(n);if(r.length===0)return ge([],e);let o=new he(PP(r,e,i?s=>Fl(i,s):Tt));return t?o.pipe(Ol(t)):o}function PP(n,e,t=Tt){return r=>{zD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)zD(e,()=>{let l=ge(n[u],e),h=!1;l.subscribe(ue(r,f=>{o[u]=f,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function zD(n,e,t){n?Ot(t,n,e):e()}function GD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=S=>l<r?D(S):u.push(S),D=S=>{o&&e.next(S),l++;let M=!1;Pe(t(S,h++)).subscribe(ue(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let V=u.shift();s?Ot(e,s,()=>D(V)):D(V)}g()}catch(V){e.error(V)}}))};return n.subscribe(ue(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Je(n,e,t=1/0){return ne(e)?Je((r,i)=>X((o,s)=>e(r,o,i,s))(Pe(n(r,i))),t):(typeof e=="number"&&(t=e),ae((r,i)=>GD(r,i,n,t)))}function Rr(n=1/0){return Je(Tt,n)}function WD(){return Rr(1)}function Lo(...n){return WD()(ge(n,xn(n)))}function Vl(n){return new he(e=>{Pe(n()).subscribe(e)})}function cg(...n){let e=Dl(n),{args:t,keys:r}=kl(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let f=!1;Pe(t[h]).subscribe(ue(o,g=>{f||(f=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Fl(r,a):a),o.complete())}))}});return e?i.pipe(Ol(e)):i}function lg(...n){let e=xn(n),t=VD(n,1/0),r=n;return r.length?r.length===1?Pe(r[0]):Rr(t)(ge(r,e)):At}function lt(n,e){return ae((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Nr(n){return ae((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=Pe(n(s,Nr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function QD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ue(s,h=>{let f=l++;u=a?n(u,h,f):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Pr(n,e){return ne(e)?Je(n,e,1):Je(n,1)}function Or(n){return ae((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function nr(n){return n<=0?()=>At:ae((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dg(n){return X(()=>n)}function hg(n,e=Tt){return n=n??OP,ae((t,r)=>{let i,o=!0;t.subscribe(ue(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function OP(n,e){return n===e}function Ll(n=kP){return ae((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kP(){return new tr}function jo(n){return ae((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function qt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Tt,nr(1),t?Or(e):Ll(()=>new tr))}function Uo(n){return n<=0?()=>At:ae((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Tt,Uo(1),t?Or(e):Ll(()=>new tr))}function Ga(){return ae((n,e)=>{let t,r=!1;n.subscribe(ue(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function bi(n,e){return ae(QD(n,e,arguments.length>=2,!0))}function KD(n={}){let{connector:e=()=>new Le,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,h=f=!1},D=()=>{let S=s;y(),S?.unsubscribe()};return ae((S,M)=>{l++,!f&&!h&&g();let V=u=u??e();M.add(()=>{l--,l===0&&!f&&!h&&(a=pg(D,i))}),V.subscribe(M),!s&&l>0&&(s=new er({next:H=>V.next(H),error:H=>{f=!0,g(),a=pg(y,t,H),V.error(H)},complete:()=>{h=!0,g(),a=pg(y,r),V.complete()}}),Pe(S).subscribe(s))})(o)}}function pg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new er({next:()=>{r.unsubscribe(),n()}});return Pe(e(...t)).subscribe(r)}function jl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,KD({connector:()=>new _l(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ti(...n){let e=xn(n);return ae((t,r)=>{(e?Lo(n,t,e):Lo(n,t)).subscribe(r)})}function je(n,e){return ae((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;Pe(n(u,h)).subscribe(i=ue(r,f=>r.next(e?e(u,f,h,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ul(n,e){return ne(e)?je(()=>n,e):je(()=>n)}function gg(n){return ae((e,t)=>{Pe(n).subscribe(ue(t,()=>t.complete(),Ba)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Tt}var FP="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,t){super(Sd(e,t)),this.code=e}};function Sd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function iu(n){return{toString:n}.toString()}var Bl="__parameters__";function VP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function V0(n,e,t){return iu(()=>{let r=VP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let f=u.hasOwnProperty(Bl)?u[Bl]:Object.defineProperty(u,Bl,{value:[]})[Bl];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ur=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function LP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Mt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function YD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var jP=Se({__forward_ref__:Se});function ou(n){return n.__forward_ref__=ou,n.toString=function(){return Mt(this())},n}function St(n){return L0(n)?n():n}function L0(n){return typeof n=="function"&&n.hasOwnProperty(jP)&&n.__forward_ref__===ou}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function st(n){return{providers:n.providers||[],imports:n.imports||[]}}function Md(n){return ZD(n,U0)||ZD(n,B0)}function j0(n){return Md(n)!==null}function ZD(n,e){return n.hasOwnProperty(e)?n[e]:null}function UP(n){let e=n&&(n[U0]||n[B0]);return e||null}function JD(n){return n&&(n.hasOwnProperty(XD)||n.hasOwnProperty(BP))?n[XD]:null}var U0=Se({\u0275prov:Se}),XD=Se({\u0275inj:Se}),B0=Se({ngInjectableDef:Se}),BP=Se({ngInjectorDef:Se}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $0(n){return n&&!!n.\u0275providers}var $P=Se({\u0275cmp:Se}),qP=Se({\u0275dir:Se}),HP=Se({\u0275pipe:Se}),zP=Se({\u0275mod:Se}),Xl=Se({\u0275fac:Se}),Ka=Se({__NG_ELEMENT_ID__:Se}),e0=Se({__NG_ENV_ID__:Se});function ed(n){return typeof n=="string"?n:n==null?"":String(n)}function GP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ed(n)}function WP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Q(-200,n)}function xm(n,e){throw new Q(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),Rg;function q0(){return Rg}function en(n){let e=Rg;return Rg=n,e}function H0(n,e,t){let r=Md(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;xm(n,"Injector")}var QP={},Za=QP,Ng="__NG_DI_FLAG__",td="ngTempTokenPath",KP="ngTokenPath",YP=/\n/gm,ZP="\u0275",t0="__source",zo;function JP(){return zo}function kr(n){let e=zo;return zo=n,e}function XP(n,e=le.Default){if(zo===void 0)throw new Q(-203,!1);return zo===null?H0(n,void 0,e):zo.get(n,e&le.Optional?null:void 0,e)}function L(n,e=le.Default){return(q0()||XP)(St(n),e)}function k(n,e=le.Default){return L(n,xd(e))}function xd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Pg(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=eO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function z0(n,e){return n[Ng]=e,n.prototype[Ng]=e,n}function eO(n){return n[Ng]}function tO(n,e,t,r){let i=n[td];throw e[t0]&&i.unshift(e[t0]),n.message=nO(`
`+n.message,i,t,r),n[KP]=i,n[td]=null,n}function nO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==ZP?n.slice(2):n;let i=Mt(e);if(Array.isArray(e))i=e.map(Mt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Mt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(YP,`
  `)}`}var ji=z0(V0("Optional"),8);var Rd=z0(V0("SkipSelf"),4);function Wo(n,e){let t=n.hasOwnProperty(Xl);return t?n[Xl]:null}function rO(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function iO(n){return n.flat(Number.POSITIVE_INFINITY)}function Rm(n,e){n.forEach(t=>Array.isArray(t)?Rm(t,e):e(t))}function G0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function nd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function oO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function sO(n,e,t){let r=su(n,e);return r>=0?n[r|1]=t:(r=~r,oO(n,r,e,t)),r}function mg(n,e){let t=su(n,e);if(t>=0)return n[t|1]}function su(n,e){return aO(n,e,1)}function aO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Qo={},Ht=[],Si=new q(""),W0=new q("",-1),Q0=new q(""),rd=class{get(e,t=Za){if(t===Za){let r=new Error(`NullInjectorError: No provider for ${Mt(e)}!`);throw r.name="NullInjectorError",r}return t}},K0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(K0||{}),Pn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pn||{}),Vr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Vr||{});function uO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Og(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];lO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function cO(n){return n===3||n===4||n===6}function lO(n){return n.charCodeAt(0)===64}function Ja(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?n0(n,t,i,null,e[++r]):n0(n,t,i,null,null))}}return n}function n0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Y0="ng-template";function dO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&uO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Nm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Nm(n){return n.type===4&&n.value!==Y0}function hO(n,e,t){let r=n.type===4&&!t?Y0:n.value;return e===r}function fO(n,e,t){let r=4,i=n.attrs,o=i!==null?mO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!gn(r)&&!gn(u))return!1;if(s&&gn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!hO(n,u,t)||u===""&&e.length===1){if(gn(r))return!1;s=!0}}else if(r&8){if(i===null||!dO(n,i,u,t)){if(gn(r))return!1;s=!0}}else{let l=e[++a],h=pO(u,i,Nm(n),t);if(h===-1){if(gn(r))return!1;s=!0;continue}if(l!==""){let f;if(h>o?f="":f=i[h+1].toLowerCase(),r&2&&l!==f){if(gn(r))return!1;s=!0}}}}return gn(r)||s}function gn(n){return(n&1)===0}function pO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return yO(e,n)}function gO(n,e,t=!1){for(let r=0;r<e.length;r++)if(fO(n,e[r],t))return!0;return!1}function mO(n){for(let e=0;e<n.length;e++){let t=n[e];if(cO(t))return e}return n.length}function yO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function r0(n,e){return n?":not("+e.trim()+")":e}function vO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!gn(s)&&(e+=r0(o,i),i=""),r=s,o=o||!gn(r);t++}return i!==""&&(e+=r0(o,i)),e}function _O(n){return n.map(vO).join(",")}function wO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!gn(i))break;i=o}r++}return{attrs:e,classes:t}}function Br(n){return iu(()=>{let e=tC(n),t=de(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===K0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pn.Emulated,styles:n.styles||Ht,_:null,schemas:n.schemas||null,tView:null,id:""});nC(t);let r=n.dependencies;return t.directiveDefs=o0(r,!1),t.pipeDefs=o0(r,!0),t.id=DO(t),t})}function EO(n){return Lr(n)||Z0(n)}function IO(n){return n!==null}function at(n){return iu(()=>({type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function i0(n,e){if(n==null)return Qo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Vr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Vr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Wt(n){return iu(()=>{let e=tC(n);return nC(e),e})}function Lr(n){return n[$P]||null}function Z0(n){return n[qP]||null}function J0(n){return n[HP]||null}function X0(n){let e=Lr(n)||Z0(n)||J0(n);return e!==null?e.standalone:!1}function eC(n,e){let t=n[zP]||null;if(!t&&e===!0)throw new Error(`Type ${Mt(n)} does not have '\u0275mod' property.`);return t}function tC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Qo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:i0(n.inputs,e),outputs:i0(n.outputs),debugInfo:null}}function nC(n){n.features?.forEach(e=>e(n))}function o0(n,e){if(!n)return null;let t=e?J0:EO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(IO)}function DO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function au(n){return{\u0275providers:n}}function CO(...n){return{\u0275providers:rC(!0,n),\u0275fromNgModule:!0}}function rC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Rm(e,s=>{let a=s;kg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iC(i,o),t}function iC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Pm(i,o=>{e(o,r)})}}function kg(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=JD(n),s=!o&&Lr(n);if(!o&&!s){let u=n.ngModule;if(o=JD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)kg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rm(o.imports,h=>{kg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&iC(l,e)}if(!a){let l=Wo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ht},i),e({provide:Q0,useValue:i,multi:!0},i),e({provide:Si,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Pm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Pm(n,e){for(let t of n)$0(t)&&(t=t.\u0275providers),Array.isArray(t)?Pm(t,e):e(t)}var bO=Se({provide:String,useValue:Se});function oC(n){return n!==null&&typeof n=="object"&&bO in n}function TO(n){return!!(n&&n.useExisting)}function AO(n){return!!(n&&n.useFactory)}function Ko(n){return typeof n=="function"}function SO(n){return!!n.useClass}var Nd=new q(""),Ql={},MO={},yg;function Om(){return yg===void 0&&(yg=new rd),yg}var zt=class{},Xa=class extends zt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vg(e,s=>this.processProvider(s)),this.records.set(W0,Bo(void 0,this)),i.has("environment")&&this.records.set(zt,Bo(void 0,this));let o=this.records.get(Nd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Q0,Ht,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=kr(this),r=en(void 0),i;try{return e()}finally{kr(t),en(r)}}get(e,t=Za,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(e0))return e[e0](this);r=xd(r);let i,o=kr(this),s=en(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=OO(e)&&Md(e);l&&this.injectableDefInScope(l)?u=Bo(Fg(e),Ql):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?Om():this.parent;return t=r&le.Optional&&t===Za?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[td]=a[td]||[]).unshift(Mt(e)),o)throw a;return tO(a,e,"R3InjectorError",this.source)}else throw a}finally{en(s),kr(o)}}resolveInjectorInitializers(){let e=_e(null),t=kr(this),r=en(void 0),i;try{let o=this.get(Si,Ht,le.Self);for(let s of o)s()}finally{kr(t),en(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Mt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=St(e);let t=Ko(e)?e:St(e&&e.provide),r=RO(e);if(!Ko(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Bo(void 0,Ql,!0),i.factory=()=>Pg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===Ql&&(t.value=MO,t.value=t.factory()),typeof t.value=="object"&&t.value&&PO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Fg(n){let e=Md(n),t=e!==null?e.factory:Wo(n);if(t!==null)return t;if(n instanceof q)throw new Q(204,!1);if(n instanceof Function)return xO(n);throw new Q(204,!1)}function xO(n){if(n.length>0)throw new Q(204,!1);let t=UP(n);return t!==null?()=>t.factory(n):()=>new n}function RO(n){if(oC(n))return Bo(void 0,n.useValue);{let e=sC(n);return Bo(e,Ql)}}function sC(n,e,t){let r;if(Ko(n)){let i=St(n);return Wo(i)||Fg(i)}else if(oC(n))r=()=>St(n.useValue);else if(AO(n))r=()=>n.useFactory(...Pg(n.deps||[]));else if(TO(n))r=()=>L(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(NO(n))r=()=>new i(...Pg(n.deps));else return Wo(i)||Fg(i)}return r}function Bo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function NO(n){return!!n.deps}function PO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function OO(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Vg(n,e){for(let t of n)Array.isArray(t)?Vg(t,e):t&&$0(t)?Vg(t.\u0275providers,e):e(t)}function wn(n,e){n instanceof Xa&&n.assertNotDestroyed();let t,r=kr(n),i=en(void 0);try{return e()}finally{kr(r),en(i)}}function aC(){return q0()!==void 0||JP()!=null}function kO(n){if(!aC())throw new Q(-203,!1)}function FO(n){let e=ur.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function VO(n){return typeof n=="function"}var Gt=0,ie=1,te=2,pt=3,mn=4,En=5,On=6,id=7,vn=8,Yo=9,rr=10,Ue=11,eu=12,s0=13,rs=14,nn=15,Mi=16,$o=17,ir=18,Pd=19,uC=20,Fr=21,vg=22,tn=23,Ft=25,cC=1,tu=6,or=7,od=8,Zo=9,kt=10,sd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(sd||{});function yn(n){return Array.isArray(n)&&typeof n[cC]=="object"}function Fn(n){return Array.isArray(n)&&n[cC]===!0}function lC(n){return(n.flags&4)!==0}function uu(n){return n.componentOffset>-1}function km(n){return(n.flags&1)===1}function jr(n){return!!n.template}function ad(n){return(n[te]&512)!==0}var Lg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function dC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function is(){return hC}function hC(n){return n.type.prototype.ngOnChanges&&(n.setInput=jO),LO}is.ngInherit=!0;function LO(){let n=pC(this),e=n?.current;if(e){let t=n.previous;if(t===Qo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function jO(n,e,t,r,i){let o=this.declaredInputs[r],s=pC(n)||UO(n,{previous:Qo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Lg(l&&l.currentValue,t,u===Qo),dC(n,e,i,t)}var fC="__ngSimpleChanges__";function pC(n){return n[fC]||null}function UO(n,e){return n[fC]=e}var a0=null;var Rn=function(n,e,t){a0?.(n,e,t)},BO="svg",$O="math";function _n(n){for(;Array.isArray(n);)n=n[Gt];return n}function gC(n,e){return _n(e[n])}function rn(n,e){return _n(e[n.index])}function mC(n,e){return n.data[e]}function $r(n,e){let t=e[n];return yn(t)?t:t[Gt]}function qO(n){return(n[te]&4)===4}function Fm(n){return(n[te]&128)===128}function HO(n){return Fn(n[pt])}function ud(n,e){return e==null?null:n[e]}function yC(n){n[$o]=0}function vC(n){n[te]&1024||(n[te]|=1024,Fm(n)&&kd(n))}function zO(n,e){for(;n>0;)e=e[rs],n--;return e}function Od(n){return!!(n[te]&9216||n[tn]?.dirty)}function jg(n){n[rr].changeDetectionScheduler?.notify(8),n[te]&64&&(n[te]|=1024),Od(n)&&kd(n)}function kd(n){n[rr].changeDetectionScheduler?.notify(0);let e=xi(n);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Fm(e)));)e=xi(e)}function _C(n,e){if((n[te]&256)===256)throw new Q(911,!1);n[Fr]===null&&(n[Fr]=[]),n[Fr].push(e)}function GO(n,e){if(n[Fr]===null)return;let t=n[Fr].indexOf(e);t!==-1&&n[Fr].splice(t,1)}function xi(n){let e=n[pt];return Fn(e)?e[pt]:e}var ce={lFrame:RC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wC=!1;function WO(){return ce.lFrame.elementDepthCount}function QO(){ce.lFrame.elementDepthCount++}function KO(){ce.lFrame.elementDepthCount--}function EC(){return ce.bindingsEnabled}function cu(){return ce.skipHydrationRootTNode!==null}function YO(n){return ce.skipHydrationRootTNode===n}function ZO(n){ce.skipHydrationRootTNode=n}function JO(){ce.skipHydrationRootTNode=null}function Te(){return ce.lFrame.lView}function Lt(){return ce.lFrame.tView}function IC(n){return ce.lFrame.contextLView=n,n[vn]}function DC(n){return ce.lFrame.contextLView=null,n}function jt(){let n=CC();for(;n!==null&&n.type===64;)n=n.parent;return n}function CC(){return ce.lFrame.currentTNode}function XO(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function lu(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function bC(){return ce.lFrame.isParent}function ek(){ce.lFrame.isParent=!1}function TC(){return wC}function u0(n){wC=n}function tk(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function nk(){return ce.lFrame.bindingIndex}function rk(n){return ce.lFrame.bindingIndex=n}function Vm(){return ce.lFrame.bindingIndex++}function AC(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ik(){return ce.lFrame.inI18n}function ok(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ug(e)}function sk(){return ce.lFrame.currentDirectiveIndex}function Ug(n){ce.lFrame.currentDirectiveIndex=n}function ak(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function SC(){return ce.lFrame.currentQueryIndex}function Lm(n){ce.lFrame.currentQueryIndex=n}function uk(n){let e=n[ie];return e.type===2?e.declTNode:e.type===1?n[En]:null}function MC(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=uk(o),i===null||(o=o[rs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=xC();return r.currentTNode=e,r.lView=n,!0}function jm(n){let e=xC(),t=n[ie];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xC(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?RC(n):e}function RC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function NC(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var PC=NC;function Um(){let n=NC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ck(n){return(ce.lFrame.contextLView=zO(n,ce.lFrame.contextLView))[vn]}function Ui(){return ce.lFrame.selectedIndex}function Ri(n){ce.lFrame.selectedIndex=n}function OC(){let n=ce.lFrame;return mC(n.tView,n.selectedIndex)}function kC(){return ce.lFrame.currentNamespace}var FC=!0;function Bm(){return FC}function qr(n){FC=n}function lk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=hC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function $m(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Kl(n,e,t){VC(n,e,3,t)}function Yl(n,e,t,r){(n[te]&3)===t&&VC(n,e,t,r)}function _g(n,e){let t=n[te];(t&3)===e&&(t&=16383,t+=1,n[te]=t)}function VC(n,e,t,r){let i=r!==void 0?n[$o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[$o]+=65536),(a<o||o==-1)&&(dk(n,t,e,u),n[$o]=(n[$o]&4294901760)+u+2),u++}function c0(n,e){Rn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),Rn(5,n,e)}}function dk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[te]>>14<n[$o]>>16&&(n[te]&3)===e&&(n[te]+=16384,c0(a,o)):c0(a,o)}var Go=-1,Ni=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function hk(n){return n instanceof Ni}function fk(n){return(n.flags&8)!==0}function pk(n){return(n.flags&16)!==0}var wg={},Bg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xd(r);let i=this.injector.get(e,wg,r);return i!==wg||t===wg?i:this.parentInjector.get(e,t,r)}};function LC(n){return n!==Go}function cd(n){return n&32767}function gk(n){return n>>16}function ld(n,e){let t=gk(n),r=e;for(;t>0;)r=r[rs],t--;return r}var $g=!0;function l0(n){let e=$g;return $g=n,e}var mk=256,jC=mk-1,UC=5,yk=0,Nn={};function vk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ka)&&(r=t[Ka]),r==null&&(r=t[Ka]=yk++);let i=r&jC,o=1<<i;e.data[n+(i>>UC)]|=o}function dd(n,e){let t=BC(n,e);if(t!==-1)return t;let r=e[ie];r.firstCreatePass&&(n.injectorIndex=e.length,Eg(r.data,n),Eg(e,null),Eg(r.blueprint,null));let i=qm(n,e),o=n.injectorIndex;if(LC(i)){let s=cd(i),a=ld(i,e),u=a[ie].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Eg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function BC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function qm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=GC(i),r===null)return Go;if(t++,i=i[rs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Go}function qg(n,e,t){vk(n,e,t)}function $C(n,e,t){if(t&le.Optional||n!==void 0)return n;xm(e,"NodeInjector")}function qC(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[Yo],o=en(void 0);try{return i?i.get(e,r,t&le.Optional):H0(e,r,t&le.Optional)}finally{en(o)}}return $C(r,e,t)}function HC(n,e,t,r=le.Default,i){if(n!==null){if(e[te]&2048&&!(r&le.Self)){let s=Ik(n,e,t,r,Nn);if(s!==Nn)return s}let o=zC(n,e,t,r,Nn);if(o!==Nn)return o}return qC(e,t,r,i)}function zC(n,e,t,r,i){let o=wk(t);if(typeof o=="function"){if(!MC(e,n,r))return r&le.Host?$C(i,t,r):qC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))xm(t);else return s}finally{PC()}}else if(typeof o=="number"){let s=null,a=BC(n,e),u=Go,l=r&le.Host?e[nn][En]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?qm(n,e):e[a+8],u===Go||!h0(r,!1)?a=-1:(s=e[ie],a=cd(u),e=ld(u,e)));a!==-1;){let h=e[ie];if(d0(o,a,h.data)){let f=_k(a,e,t,s,r,l);if(f!==Nn)return f}u=e[a+8],u!==Go&&h0(r,e[ie].data[a+8]===l)&&d0(o,a,e)?(s=h,a=cd(u),e=ld(u,e)):a=-1}}return i}function _k(n,e,t,r,i,o){let s=e[ie],a=s.data[n+8],u=r==null?uu(a)&&$g:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=Zl(a,s,t,u,l);return h!==null?Pi(e,s,h,a):Nn}function Zl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,f=r?a:a+h,g=i?a+h:l;for(let y=f;y<g;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&jr(y)&&y.type===t)return u}return null}function Pi(n,e,t,r){let i=n[t],o=e.data;if(hk(i)){let s=i;s.resolving&&WP(GP(o[t]));let a=l0(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?en(s.injectImpl):null,h=MC(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&lk(t,o[t],e)}finally{l!==null&&en(l),l0(a),s.resolving=!1,PC()}}return i}function wk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ka)?n[Ka]:void 0;return typeof e=="number"?e>=0?e&jC:Ek:e}function d0(n,e,t){let r=1<<n;return!!(t[e+(n>>UC)]&r)}function h0(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var Ai=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return HC(this._tNode,this._lView,e,xd(r),t)}};function Ek(){return new Ai(jt(),Te())}function du(n){return iu(()=>{let e=n.prototype.constructor,t=e[Xl]||Hg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Xl]||Hg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Hg(n){return L0(n)?()=>{let e=Hg(St(n));return e&&e()}:Wo(n)}function Ik(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=zC(o,s,t,r|le.Self,Nn);if(a!==Nn)return a;let u=o.parent;if(!u){let l=s[uC];if(l){let h=l.get(t,Nn,r);if(h!==Nn)return h}u=GC(s),s=s[rs]}o=u}return i}function GC(n){let e=n[ie],t=e.type;return t===2?e.declTNode:t===1?n[En]:null}function f0(n,e=null,t=null,r){let i=WC(n,e,t,r);return i.resolveInjectorInitializers(),i}function WC(n,e=null,t=null,r,i=new Set){let o=[t||Ht,CO(n)];return r=r||(typeof n=="object"?void 0:Mt(n)),new Xa(o,e||Om(),r||null,i)}var Vt=class n{static{this.THROW_IF_NOT_FOUND=Za}static{this.NULL=new rd}static create(e,t){if(Array.isArray(e))return f0({name:""},t,e,"");{let r=e.name??"";return f0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>L(W0)})}static{this.__NG_ELEMENT_ID__=-1}};var Dk=new q("");Dk.__NG_ELEMENT_ID__=n=>{let e=jt();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new Q(204,!1)};var Ck="ngOriginalError";function Ig(n){return n[Ck]}var QC=!0,Hm=(()=>{class n{static{this.__NG_ELEMENT_ID__=bk}static{this.__NG_ENV_ID__=t=>t}}return n})(),zg=class extends Hm{constructor(e){super(),this._lView=e}onDestroy(e){return _C(this._lView,e),()=>GO(this._lView,e)}};function bk(){return new zg(Te())}var Bi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ft(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Gg=class extends Le{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,aC()&&(this.destroyRef=k(Hm,{optional:!0})??void 0,this.pendingTasks=k(Bi,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Xe=Gg;function hd(...n){}function KC(n){let e,t;function r(){n=hd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function p0(n){return queueMicrotask(()=>n()),()=>{n=hd}}var zm="isAngularZone",fd=zm+"_ID",Tk=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=QC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Mk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Ak,hd,hd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Ak={};function Gm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Sk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){KC(()=>{n.callbackScheduled=!1,Wg(n),n.isCheckStableRunning=!0,Gm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Wg(n)}function Mk(n){let e=()=>{Sk(n)},t=Tk++;n._inner=n._inner.fork({name:"angular",properties:{[zm]:!0,[fd]:t,[fd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(xk(u))return r.invokeTask(o,s,a,u);try{return g0(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),m0(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return g0(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Rk(u)&&e(),m0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Wg(n),Gm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Wg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function g0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function m0(n){n._nesting--,Gm(n)}var pd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function xk(n){return YC(n,"__ignore_ng_zone__")}function Rk(n){return YC(n,"__scheduler_tick__")}function YC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function Nk(n="zone.js",e){return n==="noop"?new pd:n==="zone.js"?new pe(e):n}var sr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ig(e);for(;t&&Ig(t);)t=Ig(t);return t||null}},Pk=new q("",{providedIn:"root",factory:()=>{let n=k(pe),e=k(sr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Ok(){return os(jt(),Te())}function os(n,e){return new on(rn(n,e))}var on=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Ok}}return n})();function kk(n){return n instanceof on?n.nativeElement:n}function Fk(){return this._results[Symbol.iterator]()}var Qg=class n{get changes(){return this._changes??=new Xe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Fk)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=iO(e);(this._changesDetected=!rO(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Vk="ngSkipHydration",Lk="ngskiphydration";function ZC(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Lk)return!0}return!1}function JC(n){return n.hasAttribute(Vk)}function gd(n){return(n.flags&128)===128}function jk(n){if(gd(n))return!0;let e=n.parent;for(;e;){if(gd(n)||ZC(e))return!0;e=e.parent}return!1}var XC=new Map,Uk=0;function Bk(){return Uk++}function $k(n){XC.set(n[Pd],n)}function Kg(n){XC.delete(n[Pd])}var y0="__ngContext__";function Oi(n,e){yn(e)?(n[y0]=e[Pd],$k(e)):n[y0]=e}function eb(n){return nb(n[eu])}function tb(n){return nb(n[mn])}function nb(n){for(;n!==null&&!Fn(n);)n=n[mn];return n}var Yg;function rb(n){Yg=n}function Fd(){if(Yg!==void 0)return Yg;if(typeof document<"u")return document;throw new Q(210,!1)}var hu=new q("",{providedIn:"root",factory:()=>qk}),qk="ng",Wm=new q(""),gt=new q("",{providedIn:"platform",factory:()=>"unknown"});var Qm=new q("",{providedIn:"root",factory:()=>Fd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Hk(){let n=new ss;return k(gt)==="browser"&&(n.store=zk(Fd(),k(hu))),n}var ss=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=W({token:n,providedIn:"root",factory:Hk})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function zk(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var ib="h",ob="b",Zg=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Zg||{}),Gk="e",Wk="t",Km="c",sb="x",md="r",Qk="i",Kk="n",ab="d";var Yk="__nghData__",ub=Yk,Dg="ngh",Zk="nghm",cb=()=>null;function Jk(n,e,t=!1){let r=n.getAttribute(Dg);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,u={};if(r!==""){let h=e.get(ss,null,{optional:!0});h!==null&&(u=h.get(ub,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Vd(l,0,n.nextSibling)),a?n.setAttribute(Dg,a):n.removeAttribute(Dg),l}function Xk(){cb=Jk}function Ym(n,e,t=!1){return cb(n,e,t)}function e1(n){let e=n._lView;return e[ie].type===2?null:(ad(e)&&(e=e[Ft]),e)}function t1(n){return n.textContent?.replace(/\s/gm,"")}function n1(n){let e=Fd(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=t1(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Vd(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Jg(n,e){return n.segmentHeads?.[e]??null}function r1(n,e){let t=n.data,r=t[Gk]?.[e]??null;return r===null&&t[Km]?.[e]&&(r=Zm(n,e)),r}function lb(n,e){return n.data[Km]?.[e]??null}function Zm(n,e){let t=lb(n,e)??[],r=0;for(let i of t)r+=i[md]*(i[sb]??1);return r}function i1(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[ab];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function fu(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[ab];n.disconnectedNodes=t?new Set(t):null}return!!i1(n)?.has(e)}var $l=new q(""),db=!1,hb=new q("",{providedIn:"root",factory:()=>db});var Xg=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FP})`}};function Jm(n){return n instanceof Xg?n.changingThisBreaksApplicationSecurity:n}var o1=/^>|^->|<!--|-->|--!>|<!-$/g,s1=/(<|>)/g,a1="\u200B$1\u200B";function u1(n){return n.replace(o1,e=>e.replace(s1,a1))}function c1(n){return n.ownerDocument.body}function fb(n){return n instanceof Function?n():n}function Wa(n){return(n??k(Vt)).get(gt)==="browser"}var kn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(kn||{}),l1;function Xm(n,e){return l1(n,e)}function qo(n,e,t,r,i){if(r!=null){let o,s=!1;Fn(r)?o=r:yn(r)&&(s=!0,r=r[Gt]);let a=_n(r);n===0&&t!==null?i==null?_b(e,t,a):yd(e,t,a,i||null,!0):n===1&&t!==null?yd(e,t,a,i||null,!0):n===2?ry(e,a,s):n===3&&e.destroyNode(a),o!=null&&b1(e,n,o,t,i)}}function pb(n,e){return n.createText(e)}function d1(n,e,t){n.setValue(e,t)}function gb(n,e){return n.createComment(u1(e))}function ey(n,e,t){return n.createElement(e,t)}function h1(n,e){mb(n,e),e[Gt]=null,e[En]=null}function f1(n,e,t,r,i,o){r[Gt]=i,r[En]=e,Ld(n,r,t,1,i,o)}function mb(n,e){e[rr].changeDetectionScheduler?.notify(9),Ld(n,e,e[Ue],2,null,null)}function p1(n){let e=n[eu];if(!e)return Cg(n[ie],n);for(;e;){let t=null;if(yn(e))t=e[eu];else{let r=e[kt];r&&(t=r)}if(!t){for(;e&&!e[mn]&&e!==n;)yn(e)&&Cg(e[ie],e),e=e[pt];e===null&&(e=n),yn(e)&&Cg(e[ie],e),t=e&&e[mn]}e=t}}function g1(n,e,t,r){let i=kt+r,o=t.length;r>0&&(t[i-1][mn]=e),r<o-kt?(e[mn]=t[i],G0(t,kt+r,e)):(t.push(e),e[mn]=null),e[pt]=t;let s=e[Mi];s!==null&&t!==s&&yb(s,e);let a=e[ir];a!==null&&a.insertView(n),jg(e),e[te]|=128}function yb(n,e){let t=n[Zo],r=e[pt];if(yn(r))n[te]|=sd.HasTransplantedViews;else{let i=r[pt][nn];e[nn]!==i&&(n[te]|=sd.HasTransplantedViews)}t===null?n[Zo]=[e]:t.push(e)}function ty(n,e){let t=n[Zo],r=t.indexOf(e);t.splice(r,1)}function em(n,e){if(n.length<=kt)return;let t=kt+e,r=n[t];if(r){let i=r[Mi];i!==null&&i!==n&&ty(i,r),e>0&&(n[t-1][mn]=r[mn]);let o=nd(n,kt+e);h1(r[ie],r);let s=o[ir];s!==null&&s.detachView(o[ie]),r[pt]=null,r[mn]=null,r[te]&=-129}return r}function vb(n,e){if(!(e[te]&256)){let t=e[Ue];t.destroyNode&&Ld(n,e,t,3,null,null),p1(e)}}function Cg(n,e){if(e[te]&256)return;let t=_e(null);try{e[te]&=-129,e[te]|=256,e[tn]&&Kp(e[tn]),y1(n,e),m1(n,e),e[ie].type===1&&e[Ue].destroy();let r=e[Mi];if(r!==null&&Fn(e[pt])){r!==e[pt]&&ty(r,e);let i=e[ir];i!==null&&i.detachView(n)}Kg(e)}finally{_e(t)}}function m1(n,e){let t=n.cleanup,r=e[id];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[id]=null);let i=e[Fr];if(i!==null){e[Fr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function y1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ni)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Rn(4,a,u);try{u.call(a)}finally{Rn(5,a,u)}}else{Rn(4,i,o);try{o.call(i)}finally{Rn(5,i,o)}}}}}function v1(n,e,t){return _1(n,e.parent,t)}function _1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Gt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Pn.None||o===Pn.Emulated)return null}return rn(r,t)}}function yd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function _b(n,e,t){n.appendChild(e,t)}function v0(n,e,t,r,i){r!==null?yd(n,e,t,r,i):_b(n,e,t)}function wb(n,e){return n.parentNode(e)}function w1(n,e){return n.nextSibling(e)}function E1(n,e,t){return D1(n,e,t)}function I1(n,e,t){return n.type&40?rn(n,t):null}var D1=I1,_0;function ny(n,e,t,r){let i=v1(n,r,e),o=e[Ue],s=r.parent||e[En],a=E1(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)v0(o,i,t[u],a,!1);else v0(o,i,t,a,!1);_0!==void 0&&_0(o,r,e,t,i)}function Qa(n,e){if(e!==null){let t=e.type;if(t&3)return rn(e,n);if(t&4)return tm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Qa(n,r);{let i=n[e.index];return Fn(i)?tm(-1,i):_n(i)}}else{if(t&128)return Qa(n,e.next);if(t&32)return Xm(e,n)()||_n(n[e.index]);{let r=Eb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=xi(n[nn]);return Qa(i,r)}else return Qa(n,e.next)}}}return null}function Eb(n,e){if(e!==null){let r=n[nn][En],i=e.projection;return r.projection[i]}return null}function tm(n,e){let t=kt+n+1;if(t<e.length){let r=e[t],i=r[ie].firstChild;if(i!==null)return Qa(r,i)}return e[or]}function ry(n,e,t){n.removeChild(null,e,t)}function Ib(n){n.textContent=""}function iy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Oi(_n(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)iy(n,e,t.child,r,i,o,!1),qo(e,n,i,a,o);else if(u&32){let l=Xm(t,r),h;for(;h=l();)qo(e,n,i,h,o);qo(e,n,i,a,o)}else u&16?C1(n,e,r,t,i,o):qo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ld(n,e,t,r,i,o){iy(t,r,n.firstChild,e,i,o,!1)}function C1(n,e,t,r,i,o){let s=t[nn],u=s[En].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];qo(e,n,i,h,o)}else{let l=u,h=s[pt];gd(r)&&(l.flags|=128),iy(n,e,l,h,i,o,!0)}}function b1(n,e,t,r,i){let o=t[or],s=_n(t);o!==s&&qo(e,n,r,o,i);for(let a=kt;a<t.length;a++){let u=t[a];Ld(u[ie],u,n,e,r,o)}}function T1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:kn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=kn.Important),n.setStyle(t,r,i,o))}}function A1(n,e,t){n.setAttribute(e,"style",t)}function Db(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Cb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Og(n,e,r),i!==null&&Db(n,e,i),o!==null&&A1(n,e,o)}var cr={};function xe(n=1){bb(Lt(),Te(),Ui()+n,!1)}function bb(n,e,t,r){if(!r)if((e[te]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Kl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Yl(e,o,0,t)}Ri(t)}function Ee(n,e=le.Default){let t=Te();if(t===null)return L(n,e);let r=jt();return HC(r,t,St(n),e)}function Tb(){let n="invalid";throw new Error(n)}function Ab(n,e,t,r,i,o){let s=_e(null);try{let a=null;i&Vr.SignalBased&&(a=e[r][Xn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Vr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):dC(e,a,r,o)}finally{_e(s)}}function S1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ri(~i);else{let o=i,s=t[++r],a=t[++r];ok(s,o);let u=e[o];a(2,u)}}}finally{Ri(-1)}}function jd(n,e,t,r,i,o,s,a,u,l,h){let f=e.blueprint.slice();return f[Gt]=i,f[te]=r|4|128|8|64,(l!==null||n&&n[te]&2048)&&(f[te]|=2048),yC(f),f[pt]=f[rs]=n,f[vn]=t,f[rr]=s||n&&n[rr],f[Ue]=a||n&&n[Ue],f[Yo]=u||n&&n[Yo]||null,f[En]=o,f[Pd]=Bk(),f[On]=h,f[uC]=l,f[nn]=e.type==2?n[nn]:f,f}function Ud(n,e,t,r,i){let o=n.data[e];if(o===null)o=M1(n,e,t,r,i),ik()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=XO();o.injectorIndex=s===null?-1:s.injectorIndex}return lu(o,!0),o}function M1(n,e,t,r,i){let o=CC(),s=bC(),a=s?o:o&&o.parent,u=n.data[e]=F1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function Sb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Mb(n,e,t,r,i){let o=Ui(),s=r&2;try{Ri(-1),s&&e.length>Ft&&bb(n,e,Ft,!1),Rn(s?2:0,i),t(r,i)}finally{Ri(o),Rn(s?3:1,i)}}function xb(n,e,t){if(lC(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function Rb(n,e,t){EC()&&($1(n,e,t,rn(t,e)),(t.flags&64)===64&&Lb(n,e,t))}function Nb(n,e,t=rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Pb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=oy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function oy(n,e,t,r,i,o,s,a,u,l,h){let f=Ft+r,g=f+i,y=x1(f,g),D=typeof l=="function"?l():l;return y[ie]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function x1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:cr);return t}function R1(n,e,t,r){let o=r.get(hb,db)||t===Pn.ShadowDom,s=n.selectRootElement(e,o);return N1(s),s}function N1(n){Ob(n)}var Ob=()=>null;function P1(n){JC(n)?Ib(n):n1(n)}function O1(){Ob=P1}function k1(n,e,t,r){let i=Bb(e);i.push(t),n.firstCreatePass&&$b(n).push(r,i.length-1)}function F1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return cu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function w0(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Vr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?E0(r,t,l,a,u):E0(r,t,l,a)}return r}function E0(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function V1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let f=o[h],g=t?t.get(f):null,y=g?g.inputs:null,D=g?g.outputs:null;u=w0(0,f.inputs,h,u,y),l=w0(1,f.outputs,h,l,D);let S=u!==null&&s!==null&&!Nm(e)?Z1(u,h,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function L1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function kb(n,e,t,r,i,o,s,a){let u=rn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(sy(n,t,h,r,i),uu(e)&&j1(t,e.index)):e.type&3?(r=L1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function j1(n,e){let t=$r(e,n);t[te]&16||(t[te]|=64)}function Fb(n,e,t,r){if(EC()){let i=r===null?null:{"":-1},o=H1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Vb(n,e,t,s,i,a),i&&z1(t,r,i)}t.mergedAttrs=Ja(t.mergedAttrs,t.attrs)}function Vb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)qg(dd(t,e),n,r[l].type);W1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=Sb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Ja(t.mergedAttrs,h.hostAttrs),Q1(n,t,e,u,h),G1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let f=h.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}V1(n,t,o)}function U1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;B1(s)!=a&&s.push(a),s.push(t,r,o)}}function B1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;uu(t)&&K1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||dd(t,e),Oi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Pi(e,n,a,t);if(Oi(l,e),s!==null&&Y1(e,a-i,l,u,t,s),jr(u)){let h=$r(t.index,e);h[vn]=Pi(e,n,a,t)}}}function Lb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=sk();try{Ri(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Ug(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&q1(u,l)}}finally{Ri(-1),Ug(s)}}function q1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function H1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(gO(e,s.selectors,!1))if(r||(r=[]),jr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;nm(n,e,u)}else r.unshift(s),nm(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function nm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function z1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}}function G1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;jr(e)&&(t[""]=n)}}function W1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Q1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Wo(i.type,!0)),s=new Ni(o,jr(i),Ee);n.blueprint[r]=s,t[r]=s,U1(n,e,r,Sb(n,t,i.hostVars,cr),i)}function K1(n,e,t){let r=rn(e,n),i=Pb(t),o=n[rr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Bd(n,jd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Y1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],f=s[a++];Ab(r,t,u,l,h,f)}}function Z1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function jb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Ub(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Lm(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Bd(n,e){return n[eu]?n[s0][mn]=e:n[eu]=e,n[s0]=e,e}function rm(n,e,t){Lm(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function Bb(n){return n[id]??=[]}function $b(n){return n.cleanup??=[]}function qb(n,e){let t=n[Yo],r=t?t.get(sr,null):null;r&&r.handleError(e)}function sy(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];Ab(h,l,r,a,u,i)}}function Hb(n,e,t){let r=gC(e,n);d1(n[Ue],r,t)}function J1(n,e){let t=$r(e,n),r=t[ie];X1(r,t);let i=t[Gt];i!==null&&t[On]===null&&(t[On]=Ym(i,t[Yo])),ay(r,t,t[vn])}function X1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ay(n,e,t){jm(e);try{let r=n.viewQuery;r!==null&&rm(1,r,t);let i=n.template;i!==null&&Mb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ir]?.finishViewCreation(n),n.staticContentQueries&&Ub(n,e),n.staticViewQueries&&rm(2,n.viewQuery,t);let o=n.components;o!==null&&eF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[te]&=-5,Um()}}function eF(n,e){for(let t=0;t<e.length;t++)J1(n,e[t])}function tF(n,e,t,r){let i=_e(null);try{let o=e.tView,a=n[te]&4096?4096:16,u=jd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Mi]=l;let h=n[ir];return h!==null&&(u[ir]=h.createEmbeddedView(o)),ay(o,u,t),u}finally{_e(i)}}function I0(n,e){return!e||e.firstChild===null||gd(n)}function nF(n,e,t,r=!0){let i=e[ie];if(g1(i,e,n,t),r){let s=tm(t,n),a=e[Ue],u=wb(a,n[or]);u!==null&&f1(i,n[En],a,e,u,s)}let o=e[On];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(_n(o)),Fn(o)&&rF(o,r);let s=t.type;if(s&8)vd(n,e,t.child,r);else if(s&32){let a=Xm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Eb(e,t);if(Array.isArray(a))r.push(...a);else{let u=xi(e[nn]);vd(u[ie],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function rF(n,e){for(let t=kt;t<n.length;t++){let r=n[t],i=r[ie].firstChild;i!==null&&vd(r[ie],r,i,e)}n[or]!==n[Gt]&&e.push(n[or])}var zb=[];function iF(n){return n[tn]??oF(n)}function oF(n){let e=zb.pop()??Object.create(aF);return e.lView=n,e}function sF(n){n.lView[tn]!==n&&(n.lView=null,zb.push(n))}var aF=de(j({},Ua),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kd(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function uF(n){let e=n[tn]??Object.create(cF);return e.lView=n,e}var cF=de(j({},Ua),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=xi(n.lView);for(;e&&!Gb(e[ie]);)e=xi(e);e&&vC(e)},consumerOnSignalRead(){this.lView[tn]=this}});function Gb(n){return n.type!==2}var lF=100;function Wb(n,e=!0,t=0){let r=n[rr],i=r.rendererFactory,o=!1;o||i.begin?.();try{dF(n,t)}catch(s){throw e&&qb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function dF(n,e){let t=TC();try{u0(!0),im(n,e);let r=0;for(;Od(n);){if(r===lF)throw new Q(103,!1);r++,im(n,1)}}finally{u0(t)}}function hF(n,e,t,r){let i=e[te];if((i&256)===256)return;let o=!1,s=!1;!o&&e[rr].inlineEffectRunner?.flush(),jm(e);let a=!0,u=null,l=null;o||(Gb(n)?(l=iF(e),u=dl(l)):gD()===null?(a=!1,l=uF(e),u=dl(l)):e[tn]&&(Kp(e[tn]),e[tn]=null));try{yC(e),rk(n.bindingStartIndex),t!==null&&Mb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Kl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Yl(e,y,0,null),_g(e,0)}if(s||fF(e),Qb(e,0),n.contentQueries!==null&&Ub(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Kl(e,y)}else{let y=n.contentHooks;y!==null&&Yl(e,y,1),_g(e,1)}S1(n,e);let f=n.components;f!==null&&Yb(e,f,0);let g=n.viewQuery;if(g!==null&&rm(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Kl(e,y)}else{let y=n.viewHooks;y!==null&&Yl(e,y,2),_g(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[vg]){for(let y of e[vg])y();e[vg]=null}o||(e[te]&=-73)}catch(h){throw o||kd(e),h}finally{l!==null&&(Wp(l,u),a&&sF(l)),Um()}}function Qb(n,e){for(let t=eb(n);t!==null;t=tb(t))for(let r=kt;r<t.length;r++){let i=t[r];Kb(i,e)}}function fF(n){for(let e=eb(n);e!==null;e=tb(e)){if(!(e[te]&sd.HasTransplantedViews))continue;let t=e[Zo];for(let r=0;r<t.length;r++){let i=t[r];vC(i)}}}function pF(n,e,t){let r=$r(e,n);Kb(r,t)}function Kb(n,e){Fm(n)&&im(n,e)}function im(n,e){let r=n[ie],i=n[te],o=n[tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Qp(o)),s||=!1,o&&(o.dirty=!1),n[te]&=-9217,s)hF(r,n,r.template,n[vn]);else if(i&8192){Qb(n,1);let a=r.components;a!==null&&Yb(n,a,1)}}function Yb(n,e,t){for(let r=0;r<e.length;r++)pF(n,e[r],t)}function uy(n,e){let t=TC()?64:1088;for(n[rr].changeDetectionScheduler?.notify(e);n;){n[te]|=t;let r=xi(n);if(ad(n)&&!r)return n;n=r}return null}var ki=class{get rootNodes(){let e=this._lView,t=e[ie];return vd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(e){this._lView[vn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(Fn(e)){let t=e[od],r=t?t.indexOf(this):-1;r>-1&&(em(e,r),nd(t,r))}this._attachedToViewContainer=!1}vb(this._lView[ie],this._lView)}onDestroy(e){_C(this._lView,e)}markForCheck(){uy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){jg(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Wb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ad(this._lView),t=this._lView[Mi];t!==null&&!e&&ty(t,this._lView),mb(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=ad(this._lView),r=this._lView[Mi];r!==null&&!t&&yb(r,this._lView),jg(this._lView)}},Fi=(()=>{class n{static{this.__NG_ELEMENT_ID__=yF}}return n})(),gF=Fi,mF=class extends gF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=tF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ki(i)}};function yF(){return cy(jt(),Te())}function cy(n,e){return n.type&4?new mF(e,n,os(n,e)):null}var vF=new RegExp(`^(\\d+)*(${ob}|${ib})*(.*)`);function _F(n){let e=n.match(vF),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let f=parseInt(h,10)||1;a.push(l,f)}return[s,...a]}function wF(n){return!n.prev&&n.parent?.type===8}function bg(n){return n.index-Ft}function EF(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function $d(n,e,t,r){let i=bg(r),o=EF(n,i);if(o===void 0){let s=n.data[Kk];if(s?.[i])o=DF(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(wF(r)){let l=bg(r.parent);o=Jg(n,l)}else{let l=rn(u,t);if(a)o=l.firstChild;else{let h=bg(u),f=Jg(n,h);if(u.type===2&&f){let y=Zm(n,h)+1;o=qd(y,f)}else o=l.nextSibling}}}}return o}function qd(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function IF(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Zg.FirstChild:t=t.firstChild;break;case Zg.NextSibling:t=t.nextSibling;break}}return t}function DF(n,e){let[t,...r]=_F(n),i;if(t===ib)i=e[nn][Gt];else if(t===ob)i=c1(e[nn][Gt]);else{let o=Number(t);i=_n(e[o+Ft])}return IF(i,r)}var CF=!1;function bF(n){CF=n}function TF(n){let e=n[On];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Ue];for(let o of r.values())AF(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function AF(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ft);i&&ry(n,i,!1)}}function Zb(n){let e=n[tu]??[],r=n[pt][Ue];for(let i of e)SF(i,r);n[tu]=Ht}function SF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[md];for(;t<i;){let o=r.nextSibling;ry(e,r,!1),r=o,t++}}}function Jb(n){Zb(n);let e=n[Gt];yn(e)&&_d(e);for(let t=kt;t<n.length;t++)_d(n[t])}function _d(n){TF(n);let e=n[ie];for(let t=Ft;t<e.bindingStartIndex;t++)if(Fn(n[t])){let r=n[t];Jb(r)}else yn(n[t])&&_d(n[t])}function MF(n){let e=n._views;for(let t of e){let r=e1(t);r!==null&&r[Gt]!==null&&(yn(r)?_d(r):Jb(r))}}function xF(n,e){let t=[];for(let r of e)for(let i=0;i<(r[sb]??1);i++){let o={data:r,firstChild:null};r[md]>0&&(o.firstChild=n,n=qd(r[md],n)),t.push(o)}return[n,t]}var Xb=()=>null;function RF(n,e){let t=n[tu];return!e||t===null||t.length===0?null:t[0].data[Qk]===e?t.shift():(Zb(n),null)}function NF(){Xb=RF}function D0(n,e){return Xb(n,e)}var Jo=class{},eT=new q("",{providedIn:"root",factory:()=>!1});var tT=new q(""),nT=new q(""),om=class{},wd=class{};function PF(n){let e=Error(`No component factory found for ${Mt(n)}.`);return e[OF]=n,e}var OF="ngComponent";var sm=class{resolveComponentFactory(e){throw PF(e)}},Xo=class{static{this.NULL=new sm}},es=class{},Hr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>kF()}}return n})();function kF(){let n=Te(),e=jt(),t=$r(e.index,n);return(yn(t)?t:n)[Ue]}var FF=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function am(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=YD(i,a);else if(o==2){let u=a,l=e[++s];r=YD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ed=class extends Xo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Lr(e);return new ts(t,this.ngModule)}};function C0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Vr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Vr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function VF(n){let e=n.toLowerCase();return e==="svg"?BO:e==="math"?$O:null}var ts=class extends wd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=C0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return C0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_O(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof zt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Bg(e,s):e,u=a.get(es,null);if(u===null)throw new Q(407,!1);let l=a.get(FF,null),h=a.get(Jo,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?R1(g,r,this.componentDef.encapsulation,a):ey(g,y,VF(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let M=null;D!==null&&(M=Ym(D,a,!0));let V=oy(0,null,null,1,0,null,null,null,null,null,null),H=jd(null,V,null,S,null,null,f,g,a,null,M);jm(H);let F,G,ee=null;try{let Y=this.componentDef,E,v=null;Y.findHostDirectiveDefs?(E=[],v=new Map,Y.findHostDirectiveDefs(Y,E,v),E.push(Y)):E=[Y];let w=LF(H,D);ee=jF(w,D,Y,E,H,f,g),G=mC(V,Ft),D&&$F(g,Y,D,r),t!==void 0&&qF(G,this.ngContentSelectors,t),F=BF(ee,Y,E,v,H,[HF]),ay(V,H,null)}catch(Y){throw ee!==null&&Kg(ee),Kg(H),Y}finally{Um()}return new um(this.componentType,F,os(G,H),H,G)}finally{_e(o)}}},um=class extends om{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ki(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;sy(o[ie],o,i,e,t),this.previousInputValues.set(e,t);let s=$r(this._tNode.index,o);uy(s,1)}}get injector(){return new Ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function LF(n,e){let t=n[ie],r=Ft;return n[r]=e,Ud(t,r,2,"#host",null)}function jF(n,e,t,r,i,o,s){let a=i[ie];UF(r,n,e,s);let u=null;e!==null&&(u=Ym(e,i[Yo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let f=jd(i,Pb(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&nm(a,n,r.length-1),Bd(i,f),i[n.index]=f}function UF(n,e,t,r){for(let i of n)e.mergedAttrs=Ja(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(am(e,e.mergedAttrs,!0),t!==null&&Cb(r,t,e))}function BF(n,e,t,r,i,o){let s=jt(),a=i[ie],u=rn(s,i);Vb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let f=s.directiveStart+h,g=Pi(i,a,f,s);Oi(g,i)}Lb(a,i,s),u&&Oi(u,i);let l=Pi(i,a,s.directiveStart+s.componentOffset,s);if(n[vn]=i[vn]=l,o!==null)for(let h of o)h(l,e);return xb(a,s,i),l}function $F(n,e,t,r){if(r)Og(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:o}=wO(e.selectors[0]);i&&Og(n,t,i),o&&o.length>0&&Db(n,t,o.join(" "))}}function qF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function HF(){let n=jt();$m(Te()[ie],n)}var zr=(()=>{class n{static{this.__NG_ELEMENT_ID__=zF}}return n})();function zF(){let n=jt();return iT(n,Te())}var GF=zr,rT=class extends GF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return os(this._hostTNode,this._hostLView)}get injector(){return new Ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=qm(this._hostTNode,this._hostLView);if(LC(e)){let t=ld(e,this._hostLView),r=cd(e),i=t[ie].data[r+8];return new Ai(i,t)}else return new Ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=b0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-kt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=D0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,I0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!VO(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new ts(Lr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(zt,null);S&&(o=S)}let h=Lr(u.componentType??{}),f=D0(this._lContainer,h?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,I0(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(HO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[pt],l=new rT(u,u[En],u[pt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return nF(s,i,o,r),e.attachToViewContainerRef(),G0(Tg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=b0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=em(this._lContainer,t);r&&(nd(Tg(this._lContainer),t),vb(r[ie],r))}detach(e){let t=this._adjustIndex(e,-1),r=em(this._lContainer,t);return r&&nd(Tg(this._lContainer),t)!=null?new ki(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function b0(n){return n[od]}function Tg(n){return n[od]||(n[od]=[])}function iT(n,e){let t,r=e[n.index];return Fn(r)?t=r:(t=jb(r,e,null,n),e[n.index]=t,Bd(e,t)),oT(t,e,n,r),new rT(t,n,e)}function WF(n,e){let t=n[Ue],r=t.createComment(""),i=rn(e,n),o=wb(t,i);return yd(t,o,r,w1(t,i),!1),r}var oT=sT,ly=()=>!1;function QF(n,e,t){return ly(n,e,t)}function sT(n,e,t,r){if(n[or])return;let i;t.type&8?i=_n(r):i=WF(e,t),n[or]=i}function KF(n,e,t){if(n[or]&&n[tu])return!0;let r=t[On],i=e.index-Ft;if(!r||jk(e)||fu(r,i))return!1;let s=Jg(r,i),a=r.data[Km]?.[i],[u,l]=xF(s,a);return n[or]=u,n[tu]=l,!0}function YF(n,e,t,r){ly(n,t,e)||sT(n,e,t,r)}function ZF(){oT=YF,ly=KF}var cm=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},lm=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)dy(e,t).matches!==null&&this.queries[t].setDirty()}},dm=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=oV(e):this.predicate=e}},hm=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},fm=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,JF(t,o)),this.matchTNodeWithReadOption(e,t,Zl(t,e,o,!1,!1))}else r===Fi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===on||i===zr||i===Fi&&t.type&4)this.addMatch(t.index,-2);else{let o=Zl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function JF(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function XF(n,e){return n.type&11?os(n,e):n.type&4?cy(n,e):null}function eV(n,e,t,r){return t===-1?XF(e,n):t===-2?tV(n,e,r):Pi(n,n[ie],t,e)}function tV(n,e,t){if(t===on)return os(e,n);if(t===Fi)return cy(e,n);if(t===zr)return iT(e,n)}function aT(n,e,t,r){let i=e[ir].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(eV(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function pm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=aT(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let f=kt;f<h.length;f++){let g=h[f];g[Mi]===g[pt]&&pm(g[ie],g,l,r)}if(h[Zo]!==null){let f=h[Zo];for(let g=0;g<f.length;g++){let y=f[g];pm(y[ie],y,l,r)}}}}}return r}function nV(n,e){return n[ir].queries[e].queryList}function rV(n,e,t){let r=new Qg((t&4)===4);return k1(n,e,r,r.destroy),(e[ir]??=new lm).queries.push(new cm(r))-1}function iV(n,e,t){let r=Lt();return r.firstCreatePass&&(sV(r,new dm(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),rV(r,Te(),e)}function oV(n){return n.split(",").map(e=>e.trim())}function sV(n,e,t){n.queries===null&&(n.queries=new hm),n.queries.track(new fm(e,t))}function dy(n,e){return n.queries.getByIndex(e)}function aV(n,e){let t=n[ie],r=dy(t,e);return r.crossesNgTemplate?pm(t,n,e,[]):aT(t,n,r,e)}var T0=new Set;function Gr(n){T0.has(n)||(T0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function uV(n){return typeof n=="function"&&n[Xn]!==void 0}function Hd(n,e){Gr("NgSignals");let t=TD(n),r=t[Xn];return e?.equal&&(r.equal=e.equal),t.set=i=>Yp(r,i),t.update=i=>AD(r,i),t.asReadonly=cV.bind(t),t}function cV(){let n=this[Xn];if(n.readonlyFn===void 0){let e=()=>this();e[Xn]=n,n.readonlyFn=e}return n.readonlyFn}function uT(n){return uV(n)&&typeof n.set=="function"}function lV(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(pV))}return o}return Id.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,h.splice(h.indexOf(f),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>gV(o));e.push(u)}),hV(),Promise.all(e).then(()=>{})}var Id=new Map,dV=new Set;function hV(){let n=Id;return Id=new Map,n}function fV(){return Id.size===0}function pV(n){return typeof n=="string"?n:n.text()}function gV(n){dV.delete(n)}function mV(n){return Object.getPrototypeOf(n.prototype).constructor}function as(n){let e=mV(n.type),t=!0,r=[n];for(;e;){let i;if(jr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ql(n.inputs),s.inputTransforms=ql(n.inputTransforms),s.declaredInputs=ql(n.declaredInputs),s.outputs=ql(n.outputs);let a=i.hostBindings;a&&EV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&_V(n,u),l&&wV(n,l),yV(n,i),LP(n.outputs,i.outputs),jr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===as&&(t=!1)}}e=Object.getPrototypeOf(e)}vV(r)}function yV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function vV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ja(i.hostAttrs,t=Ja(t,i.hostAttrs))}}function ql(n){return n===Qo?{}:n===Ht?[]:n}function _V(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function wV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function EV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Ur=class{},nu=class{};var Dd=class extends Ur{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ed(this);let o=eC(e);this._bootstrapComponents=fb(o.bootstrap),this._r3Injector=WC(e,t,[{provide:Ur,useValue:this},{provide:Xo,useValue:this.componentFactoryResolver},...r],Mt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cd=class extends nu{constructor(e){super(),this.moduleType=e}create(e){return new Dd(this.moduleType,e,[])}};function IV(n,e,t){return new Dd(n,e,t,!1)}var gm=class extends Ur{constructor(e){super(),this.componentFactoryResolver=new Ed(this),this.instance=null;let t=new Xa([...e.providers,{provide:Ur,useValue:this},{provide:Xo,useValue:this.componentFactoryResolver}],e.parent||Om(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zd(n,e,t=null){return new gm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function cT(n){return hy(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function DV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function hy(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function CV(n,e,t){return n[e]=t}function Vi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function bV(n,e,t,r){let i=Vi(n,e,t);return Vi(n,e+1,r)||i}function pu(n){return(n.flags&32)===32}function TV(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Ud(e,n,4,s||null,a||null);Fb(e,t,h,ud(l,u)),$m(e,h);let f=h.tView=oy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}function AV(n,e,t,r,i,o,s,a,u,l){let h=t+Ft,f=e.firstCreatePass?TV(h,e,n,r,i,o,s,a,u):e.data[h];lu(f,!1);let g=lT(e,n,f,t);Bm()&&ny(e,n,g,f),Oi(g,n);let y=jb(g,n,g,f);return n[h]=y,Bd(n,y),QF(y,f,n),km(f)&&Rb(e,n,f),u!=null&&Nb(n,f,l),f}function $i(n,e,t,r,i,o,s,a){let u=Te(),l=Lt(),h=ud(l.consts,o);return AV(u,l,n,e,t,r,i,h,s,a),$i}var lT=dT;function dT(n,e,t,r){return qr(!0),e[Ue].createComment("")}function SV(n,e,t,r){let i=e[On],o=!i||cu()||pu(t)||fu(i,r);if(qr(o),o)return dT(n,e,t,r);let s=i.data[Wk]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=$d(i,n,e,t);Vd(i,r,a);let u=Zm(i,r);return qd(u,a)}function MV(){lT=SV}var Ho=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ho||{}),hT=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),mm=class n{constructor(){this.ngZone=k(pe),this.scheduler=k(Jo),this.errorHandler=k(sr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ho.EarlyRead,Ho.Write,Ho.MixedReadWrite,Ho.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},ym=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function fy(n,e){!e?.injector&&kO(fy);let t=e?.injector??k(Vt);return Wa(t)?(Gr("NgAfterNextRender"),RV(n,t,e,!0)):NV}function xV(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function RV(n,e,t,r){let i=e.get(hT);i.impl??=e.get(mm);let o=t?.phase??Ho.MixedReadWrite,s=new ym(i.impl,xV(n,o),r,e.get(Hm));return i.impl.register(s),s}var NV={destroy(){}};function PV(n,e,t,r){return Vi(n,Vm(),t)?e+ed(t)+r:cr}function OV(n,e,t,r,i,o){let s=nk(),a=bV(n,s,t,i);return AC(2),a?e+ed(t)+r+ed(i)+o:cr}function Hl(n,e){return n<<17|e<<2}function Li(n){return n>>17&32767}function kV(n){return(n&2)==2}function FV(n,e){return n&131071|e<<17}function vm(n){return n|2}function ns(n){return(n&131068)>>2}function Ag(n,e){return n&-131069|e<<2}function VV(n){return(n&1)===1}function _m(n){return n|1}function LV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Li(s),u=ns(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let f=t;h=f[1],(h===null||su(f,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=Li(n[a+1]);n[r+1]=Hl(g,a),g!==0&&(n[g+1]=Ag(n[g+1],r)),n[a+1]=FV(n[a+1],r)}else n[r+1]=Hl(a,0),a!==0&&(n[a+1]=Ag(n[a+1],r)),a=r;else n[r+1]=Hl(u,0),a===0?a=r:n[u+1]=Ag(n[u+1],r),u=r;l&&(n[r+1]=vm(n[r+1])),A0(n,h,r,!0),A0(n,h,r,!1),jV(e,h,n,r,o),s=Hl(a,u),o?e.classBindings=s:e.styleBindings=s}function jV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&su(o,e)>=0&&(t[r+1]=_m(t[r+1]))}function A0(n,e,t,r){let i=n[t+1],o=e===null,s=r?Li(i):ns(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];UV(u,e)&&(a=!0,n[s+1]=r?_m(l):vm(l)),s=r?Li(l):ns(l)}a&&(n[t+1]=r?vm(i):_m(i))}function UV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?su(n,e)>=0:!1}function xt(n,e,t){let r=Te(),i=Vm();if(Vi(r,i,e)){let o=Lt(),s=OC();kb(o,s,r,n,e,r[Ue],t,!1)}return xt}function S0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";sy(n,t,o[s],s,r)}function py(n,e){return BV(n,e,null,!0),py}function BV(n,e,t,r){let i=Te(),o=Lt(),s=AC(2);if(o.firstUpdatePass&&qV(o,n,s,r),e!==cr&&Vi(i,s,e)){let a=o.data[Ui()];QV(o,a,i,i[Ue],n,i[s+1]=KV(e,t),r,s)}}function $V(n,e){return e>=n.expandoStartIndex}function qV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ui()],s=$V(n,t);YV(o,r)&&e===null&&!s&&(e=!1),e=HV(i,o,e,r),LV(i,o,e,t,s,r)}}function HV(n,e,t,r){let i=ak(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Sg(null,n,e,t,r),t=ru(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Sg(i,n,e,t,r),o===null){let u=zV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Sg(null,n,e,u[1],r),u=ru(u,e.attrs,r),GV(n,e,r,u))}else o=WV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function zV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ns(r)!==0)return n[Li(r)]}function GV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Li(i)]=r}function WV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ru(r,s,t)}return ru(r,e.attrs,t)}function Sg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ru(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ru(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sO(n,s,t?!0:e[++o]))}return n===void 0?null:n}function QV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=VV(l)?M0(u,e,t,i,ns(l),s):void 0;if(!bd(h)){bd(o)||kV(l)&&(o=M0(u,null,t,i,a,s));let f=gC(Ui(),t);T1(r,s,f,i,o)}}function M0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,f=h===null,g=t[i+1];g===cr&&(g=f?Ht:void 0);let y=f?mg(g,r):h===r?g:void 0;if(l&&!bd(y)&&(y=mg(u,r)),bd(y)&&(a=y,s))return a;let D=n[i+1];i=s?Li(D):ns(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=mg(u,r))}return a}function bd(n){return n!==void 0}function KV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mt(Jm(n)))),n}function YV(n,e){return(n.flags&(e?8:16))!==0}function ZV(n,e,t,r,i,o){let s=e.consts,a=ud(s,i),u=Ud(e,n,2,r,a);return Fb(e,t,u,ud(s,o)),u.attrs!==null&&am(u,u.attrs,!1),u.mergedAttrs!==null&&am(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ce(n,e,t,r){let i=Te(),o=Lt(),s=Ft+n,a=i[Ue],u=o.firstCreatePass?ZV(s,o,i,e,t,r):o.data[s],l=fT(o,i,u,a,e,n);i[s]=l;let h=km(u);return lu(u,!0),Cb(a,l,u),!pu(u)&&Bm()&&ny(o,i,l,u),WO()===0&&Oi(l,i),QO(),h&&(Rb(o,i,u),xb(o,u,i)),r!==null&&Nb(i,u),Ce}function Ie(){let n=jt();bC()?ek():(n=n.parent,lu(n,!1));let e=n;YO(e)&&JO(),KO();let t=Lt();return t.firstCreatePass&&($m(t,n),lC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&fk(e)&&S0(t,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&pk(e)&&S0(t,e,Te(),e.stylesWithoutHost,!1),Ie}function qi(n,e,t,r){return Ce(n,e,t,r),Ie(),qi}var fT=(n,e,t,r,i,o)=>(qr(!0),ey(r,i,kC()));function JV(n,e,t,r,i,o){let s=e[On],a=!s||cu()||pu(t)||fu(s,o);if(qr(a),a)return ey(r,i,kC());let u=$d(s,n,e,t);return lb(s,o)&&Vd(s,o,u.nextSibling),s&&(ZC(t)||JC(u))&&uu(t)&&(ZO(t),Ib(u)),u}function XV(){fT=JV}var eL=(n,e,t,r)=>(qr(!0),gb(e[Ue],""));function tL(n,e,t,r){let i,o=e[On],s=!o||cu()||fu(o,r)||pu(t);if(qr(s),s)return gb(e[Ue],"");let a=$d(o,n,e,t),u=r1(o,r);return Vd(o,r,a),i=qd(u,a),i}function nL(){eL=tL}function pT(){return Te()}var Td="en-US";var rL=Td;function iL(n){typeof n=="string"&&(rL=n.toLowerCase().replace(/_/g,"-"))}var oL=(n,e,t)=>{};function sn(n,e,t,r){let i=Te(),o=Lt(),s=jt();return gT(o,i,i[Ue],s,n,e,r),sn}function sL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[id],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function gT(n,e,t,r,i,o,s){let a=km(r),l=n.firstCreatePass&&$b(n),h=e[vn],f=Bb(e),g=!0;if(r.type&3||s){let S=rn(r,e),M=s?s(S):S,V=f.length,H=s?G=>s(_n(G[r.index])):r.index,F=null;if(!s&&a&&(F=sL(n,e,i,r.index)),F!==null){let G=F.__ngLastListenerFn__||F;G.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,g=!1}else{o=R0(r,e,h,o),oL(S,i,o);let G=t.listen(M,i,o);f.push(o,G),l&&l.push(i,H,V,V+1)}}else o=R0(r,e,h,o);let y=r.outputs,D;if(g&&y!==null&&(D=y[i])){let S=D.length;if(S)for(let M=0;M<S;M+=2){let V=D[M],H=D[M+1],ee=e[V][H].subscribe(o),Y=f.length;f.push(o,ee),l&&l.push(i,r.index,Y,-(Y+1))}}}function x0(n,e,t,r){let i=_e(null);try{return Rn(6,e,t),t(r)!==!1}catch(o){return qb(n,o),!1}finally{Rn(7,e,t),_e(i)}}function R0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?$r(n.index,e):e;uy(s,5);let a=x0(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=x0(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function lr(n=1){return ck(n)}function mT(n,e,t){iV(n,e,t)}function gy(n){let e=Te(),t=Lt(),r=SC();Lm(r+1);let i=dy(t,r);if(n.dirty&&qO(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=aV(e,r);n.reset(o,kk),n.notifyOnChanges()}return!0}return!1}function my(){return nV(Te(),SC())}function We(n,e=""){let t=Te(),r=Lt(),i=n+Ft,o=r.firstCreatePass?Ud(r,i,1,e,null):r.data[i],s=yT(r,t,o,e,n);t[i]=s,Bm()&&ny(r,t,s,o),lu(o,!1)}var yT=(n,e,t,r,i)=>(qr(!0),pb(e[Ue],r));function aL(n,e,t,r,i){let o=e[On],s=!o||cu()||pu(t)||fu(o,i);return qr(s),s?pb(e[Ue],r):$d(o,n,e,t)}function uL(){yT=aL}function gu(n){return Vn("",n,""),gu}function Vn(n,e,t){let r=Te(),i=PV(r,n,e,t);return i!==cr&&Hb(r,Ui(),i),Vn}function mu(n,e,t,r,i){let o=Te(),s=OV(o,n,e,t,r,i);return s!==cr&&Hb(o,Ui(),s),mu}function us(n,e,t){uT(e)&&(e=e());let r=Te(),i=Vm();if(Vi(r,i,e)){let o=Lt(),s=OC();kb(o,s,r,n,e,r[Ue],t,!1)}return us}function yu(n,e){let t=uT(n);return t&&n.set(e),t}function cs(n,e){let t=Te(),r=Lt(),i=jt();return gT(r,t,t[Ue],i,n,e),cs}function cL(n,e,t){let r=Lt();if(r.firstCreatePass){let i=jr(n);wm(t,r.data,r.blueprint,i,!0),wm(e,r.data,r.blueprint,i,!1)}}function wm(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)wm(n[o],e,t,r,i);else{let o=Lt(),s=Te(),a=jt(),u=Ko(n)?n:St(n.provide),l=sC(n),h=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ko(n)||!n.multi){let y=new Ni(l,i,Ee),D=xg(u,e,i?h:h+g,f);D===-1?(qg(dd(a,s),o,u),Mg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=xg(u,e,h+g,f),D=xg(u,e,h,h+g),S=y>=0&&t[y],M=D>=0&&t[D];if(i&&!M||!i&&!S){qg(dd(a,s),o,u);let V=hL(i?dL:lL,t.length,i,r,l);!i&&M&&(t[D].providerFactory=V),Mg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=vT(t[i?D:y],l,!i&&r);Mg(o,n,y>-1?y:D,V)}!i&&r&&M&&t[D].componentProviders++}}}function Mg(n,e,t,r){let i=Ko(e),o=SO(e);if(i||o){let u=(o?St(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function vT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function xg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function lL(n,e,t,r){return Em(this.multi,[])}function dL(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Pi(t,t[ie],this.providerFactory.index,r);o=a.slice(0,s),Em(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Em(i,o);return o}function Em(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function hL(n,e,t,r,i){let o=new Ni(n,t,Ee);return o.multi=[],o.index=e,o.componentProviders=0,vT(o,i,r&&!t),o}function yy(n,e=[]){return t=>{t.providersResolver=(r,i)=>cL(r,i?i(n):n,e)}}var fL=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=rC(!1,t.type),i=r.length>0?zd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(L(zt))})}}return n})();function _T(n){Gr("NgStandalone"),n.getStandaloneInjector=e=>e.get(fL).getOrCreateStandaloneInjector(n)}function vy(n,e,t,r){return gL(Te(),tk(),n,e,t,r)}function pL(n,e){let t=n[e];return t===cr?void 0:t}function gL(n,e,t,r,i,o){let s=e+t;return Vi(n,s,i)?CV(n,s+1,o?r.call(o,i):r(i)):pL(n,s+1)}var zl=null;function mL(n){zl!==null&&(n.defaultEncapsulation!==zl.defaultEncapsulation||n.preserveWhitespaces!==zl.preserveWhitespaces)||(zl=n)}var ar=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},wT=new ar("18.2.5");var Gd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var _y=new q(""),vu=new q(""),Wd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,wy||(yL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(pe),L(Qd),L(vu))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Qd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return wy?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function yL(n){wy=n}var wy;function Hi(n){return!!n&&typeof n.then=="function"}function ET(n){return!!n&&typeof n.subscribe=="function"}var Kd=new q(""),IT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k(Kd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Hi(o))t.push(o);else if(ET(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ls=new q("");function vL(){bD(()=>{throw new Q(600,!1)})}function _L(n){return n.isBoundToModule}var wL=10;function EL(n,e,t){try{let r=t();return Hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function DT(n,e){return Array.isArray(e)?e.reduce(DT,n):j(j({},n),e)}var In=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(Pk),this.afterRenderManager=k(hT),this.zonelessEnabled=k(eT),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=k(Bi).hasPendingTasks.pipe(X(t=>!t)),this._injector=k(zt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof wd;if(!this._injector.get(IT).done){let g=!i&&X0(t),y=!1;throw new Q(405,y)}let s;i?s=t:s=this._injector.get(Xo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=_L(s)?void 0:this._injector.get(Ur),u=r||s.selector,l=s.create(Vt.NULL,[],u,a),h=l.location.nativeElement,f=l.injector.get(_y,null);return f?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Jl(this.components,l),f?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(es,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<wL;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)IL(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Od(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Jl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ls,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Jl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Gl;function Yd(n){Gl??=new WeakMap;let e=Gl.get(n);if(e)return e;let t=n.isStable.pipe(qt(r=>r)).toPromise().then(()=>{});return Gl.set(n,t),n.onDestroy(()=>Gl?.delete(n)),t}function IL(n,e,t,r){if(!t&&!Od(n))return;Wb(n,e,t&&!r?0:1)}var Im=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Zd=(()=>{class n{compileModuleSync(t){return new Cd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=eC(t),o=fb(i.declarations).reduce((s,a)=>{let u=Lr(a);return u&&s.push(new ts(u)),s},[]);return new Im(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DL=new q("");function CL(n,e,t){let r=new Cd(t);return Promise.resolve(r)}function N0(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var bL=(()=>{class n{constructor(){this.zone=k(pe),this.changeDetectionScheduler=k(Jo),this.applicationRef=k(In)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function TL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(de(j({},CT()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:Si,multi:!0,useFactory:()=>{let r=k(bL,{optional:!0});return()=>r.initialize()}},{provide:Si,multi:!0,useFactory:()=>{let r=k(AL);return()=>{r.initialize()}}},e===!0?{provide:tT,useValue:!0}:[],{provide:nT,useValue:t??QC}]}function CT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var AL=(()=>{class n{constructor(){this.subscription=new qe,this.initialized=!1,this.zone=k(pe),this.pendingTasks=k(Bi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var SL=(()=>{class n{constructor(){this.appRef=k(In),this.taskService=k(Bi),this.ngZone=k(pe),this.zonelessEnabled=k(eT),this.disableScheduling=k(tT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new qe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(fd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(nT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof pd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?p0:KC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(fd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,p0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ML(){return typeof $localize<"u"&&$localize.locale||Td}var Ey=new q("",{providedIn:"root",factory:()=>k(Ey,le.Optional|le.SkipSelf)||ML()});var Iy=new q("");function Wl(n){return!!n.platformInjector}function xL(n){let e=Wl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{Wl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(sr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Wl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Iy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else n.moduleRef.onDestroy(()=>{Jl(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return EL(r,t,()=>{let o=e.get(IT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ey,Td);if(iL(s||Td),Wl(n)){let a=e.get(In);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return RL(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function RL(n,e){let t=n.injector.get(In);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}var bT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>Nk(r?.ngZone,de(j({},CT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[TL({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Jo,useExisting:SL}],u=IV(t.moduleType,this.injector,a);return xL({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(t,r=[]){let i=DT({},r);return CL(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Iy,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(Vt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ya=null,TT=new q("");function NL(n){if(Ya&&!Ya.get(TT,!1))throw new Q(400,!1);vL(),Ya=n;let e=n.get(bT);return kL(n),e}function Dy(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=AT();if(!s||s.injector.get(TT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):NL(PL(a,r))}return OL(i)}}function PL(n=[],e){return Vt.create({name:e,providers:[{provide:Nd,useValue:"platform"},{provide:Iy,useValue:new Set([()=>Ya=null])},...n]})}function OL(n){let e=AT();if(!e)throw new Q(401,!1);return e}function AT(){return Ya?.get(bT)??null}function kL(n){n.get(Wm,null)?.forEach(t=>t())}function Cy(){return!1}var zi=(()=>{class n{static{this.__NG_ELEMENT_ID__=FL}}return n})();function FL(n){return VL(jt(),Te(),(n&16)===16)}function VL(n,e,t){if(uu(n)&&!t){let r=$r(n.index,e);return new ki(r,r)}else if(n.type&175){let r=e[nn];return new ki(r,e)}return null}var Dm=class{constructor(){}supports(e){return cT(e)}create(e){return new Cm(e)}},LL=(n,e)=>e,Cm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||LL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<P0(r,i,o)?t:r,a=P0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;h<=D&&D<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cT(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,DV(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new bm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ad),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ad),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},bm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Tm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ad=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Tm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function P0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Am=class{constructor(){}supports(e){return e instanceof Map||hy(e)}create(){return new Sm}},Sm=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||hy(e)))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Mm(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Mm=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function O0(){return new by([new Dm])}var by=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:O0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||O0()),deps:[[n,new Rd,new ji]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Q(901,!1)}}return n})();function k0(){return new Ty([new Am])}var Ty=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:k0})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||k0()),deps:[[n,new Rd,new ji]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Q(901,!1)}}return n})();var ST=Dy(null,"core",[]),MT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(In))}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})();var xT=new q("");var F0=!1;function jL(){F0||(F0=!0,Xk(),XV(),uL(),nL(),MV(),ZF(),NF(),O1())}function UL(n,e){return Yd(n)}function RT(){return au([{provide:$l,useFactory:()=>{let n=!0;return Wa()&&(n=!!k(ss,{optional:!0})?.get(ub,null)),n&&Gr("NgHydration"),n}},{provide:Si,useValue:()=>{bF(!1),Wa()&&k($l)&&(BL(),jL())},multi:!0},{provide:hb,useFactory:()=>Wa()&&k($l)},{provide:ls,useFactory:()=>{if(Wa()&&k($l)){let n=k(In),e=k(Vt);return()=>{UL(n,e).then(()=>{MF(n)})}}return()=>{}},multi:!0}])}function BL(){let n=Fd(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===Zk){e=t;break}if(!e)throw new Q(-507,!1)}function Jd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Xd(n,e){Gr("NgSignals");let t=ID(n);return e?.equal&&(t[Xn].equal=e.equal),t}function Wr(n){let e=_e(null);try{return n()}finally{_e(e)}}function NT(n){let e=Lr(n);if(!e)return null;let t=new ts(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var LT=null;function Ln(){return LT}function jT(n){LT??=n}var eh=class{};var Et=new q(""),Ny=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(HL),providedIn:"platform"})}}return n})(),UT=new q(""),HL=(()=>{class n extends Ny{constructor(){super(),this._doc=k(Et),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ln().getBaseHref(this._doc)}onPopState(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Py(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function PT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function dr(n){return n&&n[0]!=="?"?"?"+n:n}var Gi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(Oy),providedIn:"root"})}}return n})(),BT=new q(""),Oy=(()=>{class n extends Gi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Py(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Ny),L(BT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$T=(()=>{class n extends Gi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Py(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Ny),L(BT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),ds=(()=>{class n{constructor(t){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=WL(PT(OT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+dr(r))}normalize(t){return n.stripTrailingSlash(GL(this._basePath,OT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+dr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=dr}static{this.joinWithSlash=Py}static{this.stripTrailingSlash=PT}static{this.\u0275fac=function(r){return new(r||n)(L(Gi))}}static{this.\u0275prov=W({token:n,factory:()=>zL(),providedIn:"root"})}}return n})();function zL(){return new ds(L(Gi))}function GL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function OT(n){return n.replace(/\/index.html$/,"")}function WL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function ky(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ay=/\s+/,kT=[],qT=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=kT,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Ay):kT}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Ay):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Ay).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Ee(on),Ee(Hr))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Sy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},HT=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Sy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),FT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);FT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ee(zr),Ee(Fi),Ee(by))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function FT(n,e){n.context.$implicit=e.item}var nh=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new My,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){VT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){VT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ee(zr),Ee(Fi))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),My=class{constructor(){this.$implicit=null,this.ngIf=null}};function VT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Mt(e)}'.`)}var zT=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:kn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Ee(on),Ee(Ty),Ee(Hr))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var GT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})(),Fy="browser",QL="server";function KL(n){return n===Fy}function hr(n){return n===QL}var WT=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>KL(k(gt))?new xy(k(Et),window):new Ry})}}return n})(),xy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=YL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function YL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Ry=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},th=class{};var ih=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var nA=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(nA||{}),Vy=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new ih,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var oh=class n extends Vy{constructor(e={}){super(e),this.type=nA.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var ZL=new q("");var JL=new q(""),KT="b",YT="h",ZT="s",JT="st",XT="u",eA="rt",rh=new q(""),XL=["GET","HEAD"];function e2(n,e){let y=k(rh),{isCacheActive:t}=y,r=iD(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!XL.includes(o)||!r.includeRequestsWithAuthHeaders&&t2(n)||r.filter?.(n)===!1)return e(n);let s=k(ss),a=k(JL,{optional:!0}),u=hr(k(gt));if(a&&!u)throw new Q(2803,!1);let l=u&&a?o2(n.url,a):n.url,h=r2(n,l),f=s.get(h,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),f){let{[KT]:D,[eA]:S,[YT]:M,[ZT]:V,[JT]:H,[XT]:F}=f,G=D;switch(S){case"arraybuffer":G=new TextEncoder().encode(D).buffer;break;case"blob":G=new Blob([D]);break}let ee=new ih(M);return Z(new oh({body:G,headers:ee,status:V,statusText:H,url:F}))}return e(n).pipe(Ge(D=>{D instanceof oh&&u&&s.set(h,{[KT]:D.body,[YT]:n2(D.headers,g),[ZT]:D.status,[JT]:D.statusText,[XT]:l,[eA]:n.responseType})}))}function t2(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function n2(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function tA(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function r2(n,e){let{params:t,method:r,responseType:i}=n,o=tA(t),s=n.serializeBody();s instanceof URLSearchParams?s=tA(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=i2(a);return u}function i2(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function rA(n){return[{provide:rh,useFactory:()=>(Gr("NgHttpTransferCache"),j({isCacheActive:!0},n))},{provide:ZL,useValue:e2,multi:!0,deps:[ss,rh]},{provide:ls,multi:!0,useFactory:()=>{let e=k(In),t=k(rh);return()=>{Yd(e).then(()=>{t.isCacheActive=!1})}}}]}function o2(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var Uy=class extends eh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},By=class n extends Uy{static makeCurrent(){jT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=s2();return t==null?null:a2(t)}resetBaseElement(){_u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ky(document.cookie,e)}},_u=null;function s2(){return _u=_u||document.querySelector("base"),_u?_u.getAttribute("href"):null}function a2(n){return new URL(n,document.baseURI).pathname}var $y=class{addToWindow(e){ur.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Q(5103,!1);return o},ur.getAllAngularTestabilities=()=>e.getAllTestabilities(),ur.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=ur.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};ur.frameworkStabilizers||(ur.frameworkStabilizers=[]),ur.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ln().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},u2=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),sh=new q(""),aA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(sh),L(pe))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),wu=class{constructor(e){this._doc=e}},Ly="ng-app-id",uA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hr(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ly}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Ly),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Ly,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Et),L(hu),L(Qm,8),L(gt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),jy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},zy=/%COMP%/g,cA="%COMP%",c2=`_nghost-${cA}`,l2=`_ngcontent-${cA}`,d2=!0,h2=new q("",{providedIn:"root",factory:()=>d2});function f2(n){return l2.replace(zy,n)}function p2(n){return c2.replace(zy,n)}function lA(n,e){return e.map(t=>t.replace(zy,n))}var iA=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=hr(a),this.defaultRenderer=new Eu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Pn.ShadowDom&&(r=de(j({},r),{encapsulation:Pn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ah?i.applyToHost(t):i instanceof Iu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Pn.Emulated:o=new ah(u,l,r,this.appId,h,s,a,f);break;case Pn.ShadowDom:return new qy(u,l,t,r,s,a,this.nonce,f);default:o=new Iu(u,l,r,h,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(aA),L(uA),L(hu),L(h2),L(Et),L(gt),L(pe),L(Qm))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Eu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(jy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(oA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=jy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=jy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(kn.DashCase|kn.Important)?e.style.setProperty(t,r,i&kn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&kn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ln().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function oA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qy=class extends Eu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=lA(i.id,i.styles);for(let h of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Iu=class extends Eu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?lA(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ah=class extends Iu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=f2(l),this.hostAttr=p2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},g2=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),m2=(()=>{class n extends wu{constructor(t){super(t),this.delegate=k(xT,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,r,i){return this.delegate.addEventListener(t,r,i)}removeEventListener(t,r,i){return this.delegate.removeEventListener(t,r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),sA=["alt","control","meta","shift"],y2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_2=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ln().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),sA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=y2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),sA.forEach(s=>{if(s!==i){let a=v2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function w2(){By.makeCurrent()}function E2(){return new sr}function I2(){return rb(document),document}var D2=[{provide:gt,useValue:Fy},{provide:Wm,useValue:w2,multi:!0},{provide:Et,useFactory:I2,deps:[]}],dA=Dy(ST,"browser",D2),C2=new q(""),b2=[{provide:vu,useClass:$y,deps:[]},{provide:_y,useClass:Wd,deps:[pe,Qd,vu]},{provide:Wd,useClass:Wd,deps:[pe,Qd,vu]}],T2=[{provide:Nd,useValue:"root"},{provide:sr,useFactory:E2,deps:[]},{provide:sh,useClass:g2,multi:!0,deps:[Et,pe,gt]},{provide:sh,useClass:_2,multi:!0,deps:[Et]},{provide:sh,useClass:m2,multi:!0},iA,uA,aA,{provide:es,useExisting:iA},{provide:th,useClass:u2,deps:[]},[]],hA=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:hu,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(C2,12))}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({providers:[...T2,...b2],imports:[GT,MT]})}}return n})();var fA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hy=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Hy||{});function pA(...n){let e=[],t=new Set,r=t.has(Hy.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return au([[],RT(),t.has(Hy.NoHttpTransferCache)||r?[]:rA({}),e])}var se="primary",Vu=Symbol("RouteTitle"),Yy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ys(n){return new Yy(n)}function S2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function M2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jn(n[t],e[t]))return!1;return!0}function jn(n,e){let t=n?Zy(n):void 0,r=e?Zy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!TA(n[i],e[i]))return!1;return!0}function Zy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function TA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function AA(n){return n.length>0?n[n.length-1]:null}function Kr(n){return ug(n)?n:Hi(n)?ge(Promise.resolve(n)):Z(n)}var x2={exact:MA,subset:xA},SA={exact:R2,subset:N2,ignored:()=>!0};function mA(n,e,t){return x2[t.paths](n.root,e.root,t.matrixParams)&&SA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function R2(n,e){return jn(n,e)}function MA(n,e,t){if(!Qi(n.segments,e.segments)||!lh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!MA(n.children[r],e.children[r],t))return!1;return!0}function N2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TA(n[t],e[t]))}function xA(n,e,t){return RA(n,e,e.segments,t)}function RA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Qi(i,t)||e.hasChildren()||!lh(i,t,r))}else if(n.segments.length===t.length){if(!Qi(n.segments,t)||!lh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!xA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Qi(n.segments,i)||!lh(n.segments,i,r)||!n.children[se]?!1:RA(n.children[se],e,o,r)}}function lh(n,e,t){return e.every((r,i)=>SA[t](n[i].parameters,r.parameters))}var pr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ys(this.queryParams),this._queryParamMap}toString(){return k2.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dh(this)}},Wi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ys(this.parameters),this._parameterMap}toString(){return PA(this)}};function P2(n,e){return Qi(n,e)&&n.every((t,r)=>jn(t.parameters,e[r].parameters))}function Qi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function O2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==se&&(t=t.concat(e(i,r)))}),t}var Lu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new vs,providedIn:"root"})}}return n})(),vs=class{parse(e){let t=new Xy(e);return new pr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Du(e.root,!0)}`,r=L2(e.queryParams),i=typeof e.fragment=="string"?`#${F2(e.fragment)}`:"";return`${t}${r}${i}`}},k2=new vs;function dh(n){return n.segments.map(e=>PA(e)).join("/")}function Du(n,e){if(!n.hasChildren())return dh(n);if(e){let t=n.children[se]?Du(n.children[se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Du(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=O2(n,(r,i)=>i===se?[Du(n.children[se],!1)]:[`${i}:${Du(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[se]!=null?`${dh(n)}/${t[0]}`:`${dh(n)}/(${t.join("//")})`}}function NA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uh(n){return NA(n).replace(/%3B/gi,";")}function F2(n){return encodeURI(n)}function Jy(n){return NA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hh(n){return decodeURIComponent(n)}function yA(n){return hh(n.replace(/\+/g,"%20"))}function PA(n){return`${Jy(n.path)}${V2(n.parameters)}`}function V2(n){return Object.entries(n).map(([e,t])=>`;${Jy(e)}=${Jy(t)}`).join("")}function L2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${uh(t)}=${uh(i)}`).join("&"):`${uh(t)}=${uh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var j2=/^[^\/()?;#]+/;function Gy(n){let e=n.match(j2);return e?e[0]:""}var U2=/^[^\/()?;=#]+/;function B2(n){let e=n.match(U2);return e?e[0]:""}var $2=/^[^=?&#]+/;function q2(n){let e=n.match($2);return e?e[0]:""}var H2=/^[^&#]+/;function z2(n){let e=n.match(H2);return e?e[0]:""}var Xy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[se]=new De(e,t)),r}parseSegment(){let e=Gy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Wi(hh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=B2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Gy(this.remaining);i&&(r=i,this.capture(r))}e[hh(t)]=hh(r)}parseQueryParam(e){let t=q2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=z2(this.remaining);s&&(r=s,this.capture(r))}let i=yA(t),o=yA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[se]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function OA(n){return n.segments.length>0?new De([],{[se]:n}):n}function kA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=kA(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return G2(t)}function G2(n){if(n.numberOfChildren===1&&n.children[se]){let e=n.children[se];return new De(n.segments.concat(e.segments),e.children)}return n}function Mu(n){return n instanceof pr}function W2(n,e,t=null,r=null){let i=FA(n);return VA(i,e,t,r)}function FA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=OA(r);return e??i}function VA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Wy(i,i,i,t,r);let o=Q2(e);if(o.toRoot())return Wy(i,i,new De([],{}),t,r);let s=K2(o,i,n),a=s.processChildren?Tu(s.segmentGroup,s.index,o.commands):jA(s.segmentGroup,s.index,o.commands);return Wy(i,s.segmentGroup,a,t,r)}function fh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function xu(n){return typeof n=="object"&&n!=null&&n.outlets}function Wy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=LA(n,e,t);let a=OA(kA(s));return new pr(a,o,i)}function LA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=LA(o,e,t)}),new De(n.segments,r)}var ph=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fh(r[0]))throw new Q(4003,!1);let i=r.find(xu);if(i&&i!==AA(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Q2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ph(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ph(t,e,r)}var ps=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function K2(n,e,t){if(n.isAbsolute)return new ps(e,!0,0);if(!t)return new ps(e,!1,NaN);if(t.parent===null)return new ps(t,!0,0);let r=fh(n.commands[0])?0:1,i=t.segments.length-1+r;return Y2(t,i,n.numberOfDoubleDots)}function Y2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new ps(r,!1,i-o)}function Z2(n){return xu(n[0])?n[0].outlets:{[se]:n}}function jA(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Tu(n,e,t);let r=J2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[se]=new De(n.segments.slice(r.pathIndex),n.children),Tu(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?ev(n,e,t):r.match?Tu(n,0,i):ev(n,e,t)}function Tu(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=Z2(t),i={};if(Object.keys(r).some(o=>o!==se)&&n.children[se]&&n.numberOfChildren===1&&n.children[se].segments.length===0){let o=Tu(n.children[se],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=jA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function J2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(xu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!_A(u,l,s))return o;r+=2}else{if(!_A(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ev(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(xu(o)){let u=X2(o.outlets);return new De(r,u)}if(i===0&&fh(t[0])){let u=n.segments[e];r.push(new Wi(u.path,vA(t[0]))),i++;continue}let s=xu(o)?o.outlets[se]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&fh(a)?(r.push(new Wi(s,vA(a))),i+=2):(r.push(new Wi(s,{})),i++)}return new De(r,{})}function X2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ev(new De([],{}),0,r))}),e}function vA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _A(n,e,t){return n==t.path&&jn(e,t.parameters)}var Au="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),an=class{constructor(e,t){this.id=e,this.url=t}},_s=class extends an{constructor(e,t,r="imperative",i=null){super(e,t),this.type=dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gr=class extends an{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Yt||{}),gh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(gh||{}),fr=class extends an{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qr=class extends an{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationSkipped}},Ru=class extends an{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mh=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tv=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nv=class extends an{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rv=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iv=class extends an{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ov=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sv=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},av=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uv=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cv=class{constructor(e){this.snapshot=e,this.type=dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lv=class{constructor(e){this.snapshot=e,this.type=dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Nu=class{},ws=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ej(n,e){return n.providers&&!n._injector&&(n._injector=zd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dn(n){return n.outlet||se}function tj(n,e){let t=n.filter(r=>Dn(r)===e);return t.push(...n.filter(r=>Dn(r)!==e)),t}function ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dv=class{get injector(){return ju(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Uu(this.rootInjector),this.attachRef=null}},Uu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(zt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=hv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=hv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=fv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fv(e,this._root).map(t=>t.value)}};function hv(n,e){if(n===e.value)return e;for(let t of e.children){let r=hv(n,t);if(r)return r}return null}function fv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=fv(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function fs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var _h=class extends vh{constructor(e,t){super(e),this.snapshot=t,Iv(this,e)}toString(){return this.snapshot.toString()}};function UA(n){let e=nj(n),t=new ft([new Wi("",{})]),r=new ft({}),i=new ft({}),o=new ft({}),s=new ft(""),a=new Es(t,r,o,s,i,se,n,e.root);return a.snapshot=e.root,new _h(new Kt(a,[]),e)}function nj(n){let e={},t={},r={},i="",o=new gs([],e,r,i,t,se,n,null,{});return new Eh("",new Kt(o,[]))}var Es=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[Vu]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>ys(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>ys(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&$A(i)&&(r.resolve[Vu]=i.title),r}var gs=class{get title(){return this.data?.[Vu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ys(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ys(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Eh=class extends vh{constructor(e,t){super(t),this.url=e,Iv(this,t)}toString(){return BA(this._root)}};function Iv(n,e){e.value._routerState=n,e.children.forEach(t=>Iv(n,t))}function BA(n){let e=n.children.length>0?` { ${n.children.map(BA).join(", ")} } `:"";return`${n.value}${e}`}function Qy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jn(e.params,t.params)||n.paramsSubject.next(t.params),M2(e.url,t.url)||n.urlSubject.next(t.url),jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function pv(n,e){let t=jn(n.params,e.params)&&P2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||pv(n.parent,e.parent))}function $A(n){return typeof n.title=="string"||n.title===null}var Dv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=k(Uu),this.location=k(zr),this.changeDetector=k(zi),this.inputBinder=k(Th,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new gv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[is]})}}return n})(),gv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Es?this.route:e===Uu?this.childContexts:this.parent.get(e,t)}},Th=new q(""),wA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=za([r.queryParams,r.params,r.data]).pipe(je(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=NT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function rj(n,e,t){let r=Pu(n,e._root,t?t._root:void 0);return new _h(r,e)}function Pu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ij(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Pu(n,a)),s}}let r=oj(e.value),i=e.children.map(o=>Pu(n,o));return new Kt(r,i)}}function ij(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Pu(n,r,i);return Pu(n,r)})}function oj(n){return new Es(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var Ou=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},qA="ngNavigationCancelingError";function Ih(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Mu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HA(!1,Yt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function HA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[qA]=!0,t.cancellationCode=e,t}function sj(n){return zA(n)&&Mu(n.url)}function zA(n){return!!n&&n[qA]}var aj=(n,e,t,r)=>X(i=>(new mv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),mv=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Qy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=fs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=fs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new lv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new uv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Qy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Qy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Dh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ms=class{constructor(e,t){this.component=e,this.route=t}};function uj(n,e,t){let r=n._root,i=e?e._root:null;return Cu(r,i,t,[r.value])}function cj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ds(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!j0(n)?n:e.get(n):r}function Cu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=fs(e);return n.children.forEach(s=>{lj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Su(a,t.getContext(s),i)),i}function lj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=dj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Dh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Cu(n,e,a?a.children:null,r,i):Cu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ms(a.outlet.component,s))}else s&&Su(e,a,i),i.canActivateChecks.push(new Dh(r)),o.component?Cu(n,null,a?a.children:null,r,i):Cu(n,null,t,r,i);return i}function dj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Qi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qi(n.url,e.url)||!jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pv(n,e)||!jn(n.queryParams,e.queryParams);case"paramsChange":default:return!pv(n,e)}}function Su(n,e,t){let r=fs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Su(s,e.children.getContext(o),t):Su(s,null,t):Su(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ms(e.outlet.component,i)):t.canDeactivateChecks.push(new ms(null,i)):t.canDeactivateChecks.push(new ms(null,i))}function Bu(n){return typeof n=="function"}function hj(n){return typeof n=="boolean"}function fj(n){return n&&Bu(n.canLoad)}function pj(n){return n&&Bu(n.canActivate)}function gj(n){return n&&Bu(n.canActivateChild)}function mj(n){return n&&Bu(n.canDeactivate)}function yj(n){return n&&Bu(n.canMatch)}function GA(n){return n instanceof tr||n?.name==="EmptyError"}var ch=Symbol("INITIAL_VALUE");function Is(){return je(n=>za(n.map(e=>e.pipe(nr(1),Ti(ch)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===ch)return ch;if(t===!1||vj(t))return t}return!0}),lt(e=>e!==ch),nr(1)))}function vj(n){return Mu(n)||n instanceof Ou}function _j(n,e){return Je(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(de(j({},t),{guardsResult:!0})):wj(s,r,i,n).pipe(Je(a=>a&&hj(a)?Ej(r,o,n,e):Z(a)),X(a=>de(j({},t),{guardsResult:a})))})}function wj(n,e,t,r){return ge(n).pipe(Je(i=>Tj(i.component,i.route,t,e,r)),qt(i=>i!==!0,!0))}function Ej(n,e,t,r){return ge(e).pipe(Pr(i=>Lo(Dj(i.route.parent,r),Ij(i.route,r),bj(n,i.path,t),Cj(n,i.route,t))),qt(i=>i!==!0,!0))}function Ij(n,e){return n!==null&&e&&e(new cv(n)),Z(!0)}function Dj(n,e){return n!==null&&e&&e(new av(n)),Z(!0)}function Cj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Vl(()=>{let s=ju(e)??t,a=Ds(o,s),u=pj(a)?a.canActivate(e,n):wn(s,()=>a(e,n));return Kr(u).pipe(qt())}));return Z(i).pipe(Is())}function bj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>cj(s)).filter(s=>s!==null).map(s=>Vl(()=>{let a=s.guards.map(u=>{let l=ju(s.node)??t,h=Ds(u,l),f=gj(h)?h.canActivateChild(r,n):wn(l,()=>h(r,n));return Kr(f).pipe(qt())});return Z(a).pipe(Is())}));return Z(o).pipe(Is())}function Tj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=ju(e)??i,l=Ds(a,u),h=mj(l)?l.canDeactivate(n,e,t,r):wn(u,()=>l(n,e,t,r));return Kr(h).pipe(qt())});return Z(s).pipe(Is())}function Aj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ds(s,n),u=fj(a)?a.canLoad(e,t):wn(n,()=>a(e,t));return Kr(u)});return Z(o).pipe(Is(),WA(r))}function WA(n){return ng(Ge(e=>{if(typeof e!="boolean")throw Ih(n,e)}),X(e=>e===!0))}function Sj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ds(s,n),u=yj(a)?a.canMatch(e,t):wn(n,()=>a(e,t));return Kr(u)});return Z(o).pipe(Is(),WA(r))}var ku=class{constructor(e){this.segmentGroup=e||null}},Fu=class extends Error{constructor(e){super(),this.urlTree=e}};function hs(n){return Vo(new ku(n))}function Mj(n){return Vo(new Q(4e3,!1))}function xj(n){return Vo(HA(!1,Yt.GuardRejected))}var yv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[se])return Mj(`${e.redirectTo}`);i=i.children[se]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:f,outlet:g,params:y,data:D,title:S}=i,M=wn(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:h,url:f,outlet:g,title:S}));if(M instanceof pr)throw new Fu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Fu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new pr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},vv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rj(n,e,t,r,i){let o=QA(n,e,t);return o.matched?(r=ej(e,r),Sj(r,e,t,i).pipe(X(s=>s===!0?o:j({},vv)))):Z(o)}function QA(n,e,t){if(e.path==="**")return Nj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},vv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||S2)(t,n,e);if(!i)return j({},vv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Nj(n){return{matched:!0,parameters:n.length>0?AA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function EA(n,e,t,r){return t.length>0&&kj(n,t,r)?{segmentGroup:new De(e,Oj(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&Fj(n,t,r)?{segmentGroup:new De(n.segments,Pj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function Pj(n,e,t,r){let i={};for(let o of t)if(Ah(n,e,o)&&!r[Dn(o)]){let s=new De([],{});i[Dn(o)]=s}return j(j({},r),i)}function Oj(n,e){let t={};t[se]=e;for(let r of n)if(r.path===""&&Dn(r)!==se){let i=new De([],{});t[Dn(r)]=i}return t}function kj(n,e,t){return t.some(r=>Ah(n,e,r)&&Dn(r)!==se)}function Fj(n,e,t){return t.some(r=>Ah(n,e,r))}function Ah(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Vj(n,e,t){return e.length===0&&!n.children[t]}var _v=class{};function Lj(n,e,t,r,i,o,s="emptyOnly"){return new wv(n,e,t,r,i,s,o).recognize()}var jj=31,wv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new yv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=EA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Eh("",i),s=W2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new gs([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,t).pipe(X(r=>({children:r,rootSnapshot:t})),Nr(r=>{if(r instanceof Fu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ku?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ge(o).pipe(Pr(s=>{let a=r.children[s],u=tj(t,s);return this.processSegmentGroup(e,u,a,s,i)}),bi((s,a)=>(s.push(...a),s)),Or(null),fg(),Je(s=>{if(s===null)return hs(r);let a=KA(s);return Uj(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return ge(t).pipe(Pr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Nr(l=>{if(l instanceof ku)return Z(null);throw l}))),qt(u=>!!u),Nr(u=>{if(GA(u))return Vj(r,i,o)?Z(new _v):hs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Dn(r)!==s&&(s===se||!Ah(i,o,r))?hs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):hs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:f,remainingSegments:g}=QA(t,i,o);if(!u)return hs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jj&&(this.allowRedirects=!1));let y=new gs(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,IA(i),Dn(i),i.component??i._loadedComponent??null,i,DA(i)),D=wh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(Je(M=>this.processSegment(e,r,t,M.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Rj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(je(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(je(({routes:l})=>{let h=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,D=new gs(g,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,IA(r),Dn(r),r.component??r._loadedComponent??null,r,DA(r)),S=wh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(S.params),D.data=Object.freeze(S.data);let{segmentGroup:M,slicedSegments:V}=EA(t,g,y,l);if(V.length===0&&M.hasChildren())return this.processChildren(h,l,M,D).pipe(X(F=>new Kt(D,F)));if(l.length===0&&V.length===0)return Z(new Kt(D,[]));let H=Dn(r)===o;return this.processSegment(h,l,M,V,H?se:o,!0,D).pipe(X(F=>new Kt(D,F instanceof Kt?[F]:[])))}))):hs(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):Aj(e,t,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,t).pipe(Ge(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):xj(t))):Z({routes:[],injector:e})}};function Uj(n){n.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function Bj(n){let e=n.value.routeConfig;return e&&e.path===""}function KA(n){let e=[],t=new Set;for(let r of n){if(!Bj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=KA(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function IA(n){return n.data||{}}function DA(n){return n.resolve||{}}function $j(n,e,t,r,i,o){return Je(s=>Lj(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>de(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function qj(n,e){return Je(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of YA(u))s.add(l);let a=0;return ge(s).pipe(Pr(u=>o.has(u)?Hj(u,r,n,e):(u.data=wh(u,u.parent,n).resolve,Z(void 0))),Ge(()=>a++),Uo(1),Je(u=>a===s.size?Z(t):At))})}function YA(n){let e=n.children.map(t=>YA(t)).flat();return[n,...e]}function Hj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!$A(i)&&(o[Vu]=i.title),zj(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=wh(n,n.parent,t).resolve,null)))}function zj(n,e,t,r){let i=Zy(n);if(i.length===0)return Z({});let o={};return ge(i).pipe(Je(s=>Gj(n[s],e,t,r).pipe(qt(),Ge(a=>{if(a instanceof Ou)throw Ih(new vs,a);o[s]=a}))),Uo(1),dg(o),Nr(s=>GA(s)?At:Vo(s)))}function Gj(n,e,t,r){let i=ju(e)??r,o=Ds(n,i),s=o.resolve?o.resolve(e,t):wn(i,()=>o(e,t));return Kr(s)}function Ky(n){return je(e=>{let t=n(e);return t?ge(t).pipe(X(()=>e)):Z(e)})}var ZA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===se);return r}getResolvedTitleForRoute(t){return t.data[Vu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(Wj),providedIn:"root"})}}return n})(),Wj=(()=>{class n extends ZA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(fA))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$u=new q("",{providedIn:"root",factory:()=>({})}),Qj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Br({type:n,selectors:[["ng-component"]],standalone:!0,features:[_T],decls:1,vars:0,template:function(r,i){r&1&&qi(0,"router-outlet")},dependencies:[Dv],encapsulation:2})}}return n})();function Cv(n){let e=n.children&&n.children.map(Cv),t=e?de(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=Qj),t}var Ch=new q(""),bv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Zd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Kr(t.loadComponent()).pipe(X(JA),Ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),jo(()=>{this.componentLoaders.delete(t)})),i=new Po(r,()=>new Le).pipe(No());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Kj(r,this.compiler,t,this.onLoadEndListener).pipe(jo(()=>{this.childrenLoaders.delete(r)})),s=new Po(o,()=>new Le).pipe(No());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Kj(n,e,t,r){return Kr(n.loadChildren()).pipe(X(JA),Je(i=>i instanceof nu||Array.isArray(i)?Z(i):ge(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ch,[],{optional:!0,self:!0}).flat()),{routes:s.map(Cv),injector:o}}))}function Yj(n){return n&&typeof n=="object"&&"default"in n}function JA(n){return Yj(n)?n.default:n}var Tv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(Zj),providedIn:"root"})}}return n})(),Zj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XA=new q(""),eS=new q("");function Jj(n,e,t){let r=n.get(eS),i=n.get(Et);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Xj(n))),{onViewTransitionCreated:u}=r;return u&&wn(n,()=>u({transition:a,from:e,to:t})),s})}function Xj(n){return new Promise(e=>{fy({read:()=>setTimeout(e)},{injector:n})})}var eU=new q(""),Av=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=k(bv),this.environmentInjector=k(zt),this.urlSerializer=k(Lu),this.rootContexts=k(Uu),this.location=k(ds),this.inputBindingEnabled=k(Th,{optional:!0})!==null,this.titleStrategy=k(ZA),this.options=k($u,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(Tv),this.createViewTransition=k(XA,{optional:!0}),this.navigationErrorHandler=k(eU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new ov(i)),r=i=>this.events.next(new sv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(de(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ft({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Au,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),X(o=>de(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),je(o=>{let s=!1,a=!1;return Z(o).pipe(je(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Yt.SupersededByNewNavigation),At;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?de(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new Qr(u.id,this.urlSerializer.serialize(u.rawUrl),f,gh.IgnoredSameUrlNavigation)),u.resolve(!1),At}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(je(f=>{let g=this.transitions?.getValue();return this.events.next(new _s(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?At:Promise.resolve(f)}),$j(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=de(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new mh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:D,extras:S}=u,M=new _s(f,this.urlSerializer.serialize(g),y,D);this.events.next(M);let V=UA(this.rootComponentType).snapshot;return this.currentTransition=o=de(j({},u),{targetSnapshot:V,urlAfterRedirects:g,extras:de(j({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Z(o)}else{let f="";return this.events.next(new Qr(u.id,this.urlSerializer.serialize(u.extractedUrl),f,gh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),At}}),Ge(u=>{let l=new tv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),X(u=>(this.currentTransition=o=de(j({},u),{guards:uj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),_j(this.environmentInjector,u=>this.events.next(u)),Ge(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Ih(this.urlSerializer,u.guardsResult);let l=new nv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),lt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Yt.GuardRejected),!1)),Ky(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(Ge(l=>{let h=new rv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),je(l=>{let h=!1;return Z(l).pipe(qj(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Yt.NoDataFromResolver)}}))}),Ge(l=>{let h=new iv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Ky(u=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ge(g=>{h.component=g}),X(()=>{})));for(let g of h.children)f.push(...l(g));return f};return za(l(u.targetSnapshot.root)).pipe(Or(null),nr(1))}),Ky(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ge(h).pipe(X(()=>o)):Z(o)}),X(u=>{let l=rj(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=de(j({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ge(()=>{this.events.next(new Nu)}),aj(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),nr(1),Ge({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),gg(this.transitionAbortSubject.pipe(Ge(u=>{throw u}))),jo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nr(u=>{if(a=!0,zA(u))this.events.next(new fr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),sj(u)?this.events.next(new ws(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ru(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=wn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ou){let{message:f,cancellationCode:g}=Ih(this.urlSerializer,h);this.events.next(new fr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,g)),this.events.next(new ws(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return At}))}))}cancelNavigationTransition(t,r,i){let o=new fr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tU(n){return n!==Au}var nU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(rU),providedIn:"root"})}}return n})(),Ev=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rU=(()=>{class n extends Ev{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=du(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(iU),providedIn:"root"})}}return n})(),iU=(()=>{class n extends tS{constructor(){super(...arguments),this.location=k(ds),this.urlSerializer=k(Lu),this.options=k($u,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(Tv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=UA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof _s)this.stateMemento=this.createStateMemento();else if(t instanceof Qr)this.rawUrlTree=r.initialUrl;else if(t instanceof mh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Nu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof fr&&(t.code===Yt.GuardRejected||t.code===Yt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ru?this.restoreHistory(r,!0):t instanceof gr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof pr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=du(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bu||{});function nS(n,e){n.events.pipe(lt(t=>t instanceof gr||t instanceof fr||t instanceof Ru||t instanceof Qr),X(t=>t instanceof gr||t instanceof Qr?bu.COMPLETE:(t instanceof fr?t.code===Yt.Redirect||t.code===Yt.SupersededByNewNavigation:!1)?bu.REDIRECTING:bu.FAILED),lt(t=>t!==bu.REDIRECTING),nr(1)).subscribe(()=>{e()})}function oU(n){throw n}var sU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ki=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(Gd),this.stateManager=k(tS),this.options=k($u,{optional:!0})||{},this.pendingTasks=k(Bi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(Av),this.urlSerializer=k(Lu),this.location=k(ds),this.urlHandlingStrategy=k(Tv),this._events=new Le,this.errorHandler=this.options.errorHandler||oU,this.navigated=!1,this.routeReuseStrategy=k(nU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Ch,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(Th,{optional:!0}),this.eventsSubscription=new qe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof fr&&r.code!==Yt.Redirect&&r.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gr)this.navigated=!0;else if(r instanceof ws){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tU(i.source)},s);this.scheduleNavigation(a,Au,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Au,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Cv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=FA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return VA(f,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Mu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Au,null,r)}navigate(t,r={skipLocationChange:!1}){return uU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},sU):r===!1?i=j({},aU):i=r,Mu(t))return mA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return mA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let h=this.pendingTasks.add();return nS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function cU(n){return!(n instanceof Nu)&&!(n instanceof ws)}var bh=class{};var lU=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof gr),Pr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=zd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ge(i).pipe(Rr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(Je(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ge([o,s]).pipe(Rr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(Ki),L(Zd),L(zt),L(bh),L(bv))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rS=new q(""),dU=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Qr&&t.code===gh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Tb()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function hU(n){return n.routerState.root}function qu(n,e){return{\u0275kind:n,\u0275providers:e}}function fU(){let n=k(Vt);return e=>{let t=n.get(In);if(e!==t.components[0])return;let r=n.get(Ki),i=n.get(iS);n.get(Sv)===1&&r.initialNavigation(),n.get(oS,null,le.Optional)?.setUpPreloading(),n.get(rS,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iS=new q("",{factory:()=>new Le}),Sv=new q("",{providedIn:"root",factory:()=>1});function pU(){return qu(2,[{provide:Sv,useValue:0},{provide:Kd,multi:!0,deps:[Vt],useFactory:e=>{let t=e.get(UT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ki),o=e.get(iS);nS(i,()=>{r(!0)}),e.get(Av).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function gU(){return qu(3,[{provide:Kd,multi:!0,useFactory:()=>{let e=k(Ki);return()=>{e.setUpLocationChangeListener()}}},{provide:Sv,useValue:2}])}var oS=new q("");function mU(n){return qu(0,[{provide:oS,useExisting:lU},{provide:bh,useExisting:n}])}function yU(){return qu(8,[wA,{provide:Th,useExisting:wA}])}function vU(n){let e=[{provide:XA,useValue:Jj},{provide:eS,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return qu(9,e)}var CA=new q("ROUTER_FORROOT_GUARD"),_U=[ds,{provide:Lu,useClass:vs},Ki,Uu,{provide:Es,useFactory:hU,deps:[Ki]},bv,[]],Mv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_U,[],{provide:Ch,multi:!0,useValue:t},{provide:CA,useFactory:DU,deps:[[Ki,new ji,new Rd]]},{provide:$u,useValue:r||{}},r?.useHash?EU():IU(),wU(),r?.preloadingStrategy?mU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?CU(r):[],r?.bindToComponentInputs?yU().\u0275providers:[],r?.enableViewTransitions?vU().\u0275providers:[],bU()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ch,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(CA,8))}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})();function wU(){return{provide:rS,useFactory:()=>{let n=k(WT),e=k(pe),t=k($u),r=k(Av),i=k(Lu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new dU(i,r,n,e,t)}}}function EU(){return{provide:Gi,useClass:$T}}function IU(){return{provide:Gi,useClass:Oy}}function DU(n){return"guarded"}function CU(n){return[n.initialNavigation==="disabled"?gU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?pU().\u0275providers:[]]}var bA=new q("");function bU(){return[{provide:bA,useFactory:fU},{provide:ls,multi:!0,useExisting:bA}]}var AU="firebase",SU="10.13.2";ze.registerVersion(AU,SU,"app-compat");var MU="firebase",xU="10.13.2";xr(MU,xU,"app");var Cs=new ar("ANGULARFIRE2_VERSION");var RU=(n,e)=>{let t=e?[e]:fD(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Yi=class{constructor(){return RU(NU)}},NU="app-check";function xv(){}var Sh=class{zone;delegate;constructor(e,t=sg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Rv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xv,{},xv,xv)),t.pipe(Ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Mh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Sh(Zone.current)),this.insideAngular=t.run(()=>new Sh(Zone.current,Ha)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(pe))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PU(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ut(n){return OU(PU())(n)}function OU(n){return function(t){return t=t.lift(new Rv(n.ngZone)),t.pipe(pn(n.outsideAngular),Xt(n.insideAngular))}}var VU=new Map,LU={activated:!1,tokenObservers:[]},jU={initialized:!1,enabled:!1};function Cn(n){return VU.get(n)||Object.assign({},LU)}function dS(){return jU}var UU="https://content-firebaseappcheck.googleapis.com/v1";var BU="exchangeDebugToken",aS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Y6=24*60*60*1e3;var Pv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Bp,this.pending.promise.catch(t=>{}),yield $U(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Bp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function $U(n){return new Promise(e=>{setTimeout(e,n)})}var qU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Yr=new dD("appCheck","AppCheck",qU);function hS(n){if(!Cn(n).activated)throw Yr.create("use-before-activation",{appName:n.name})}function fS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Yr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Yr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Yr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Yr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function pS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${UU}/projects/${t}/apps/${r}:${BU}?key=${i}`,body:{debug_token:e}}}var HU="firebase-app-check-database",zU=1,Ov="firebase-app-check-store";var xh=null;function GU(){return xh||(xh=new Promise((n,e)=>{try{let t=indexedDB.open(HU,zU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Yr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ov,{keyPath:"compositeKey"})}}}catch(t){e(Yr.create("storage-open",{originalErrorMessage:t?.message}))}}),xh)}function WU(n,e){return QU(KU(n),e)}function QU(n,e){return N(this,null,function*(){let r=(yield GU()).transaction(Ov,"readwrite"),o=r.objectStore(Ov).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Yr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function KU(n){return`${n.options.appId}-${n.name}`}var kv=new al("@firebase/app-check");function Nv(n,e){return sl()?WU(n,e).catch(t=>{kv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gS(){return dS().enabled}function mS(){return N(this,null,function*(){let n=dS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var YU={error:"UNKNOWN_ERROR"};function ZU(n){return uD.encodeString(JSON.stringify(n),!1)}function Fv(n,e=!1){return N(this,null,function*(){let t=n.app;hS(t);let r=Cn(t),i=r.token,o;if(i&&!Hu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Hu(u)?i=u:yield Nv(t,void 0))}if(!e&&i&&Hu(i))return{token:i.token};let s=!1;if(gS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fS(pS(t,yield mS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Nv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Cn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?kv.warn(u.message):kv.error(u),o=u}let a;return i?o?Hu(i)?a={token:i.token,internalError:o}:a=cS(o):(a={token:i.token},r.token=i,yield Nv(t,i)):a=cS(o),s&&tB(t,a),a})}function JU(n){return N(this,null,function*(){let e=n.app;hS(e);let{provider:t}=Cn(e);if(gS()){let r=yield mS(),{token:i}=yield fS(pS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function XU(n,e,t,r){let{app:i}=n,o=Cn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Hu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),uS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>uS(n))}function yS(n,e){let t=Cn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uS(n){let{app:e}=n,t=Cn(e),r=t.tokenRefresher;r||(r=eB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function eB(n){let{app:e}=n;return new Pv(()=>N(this,null,function*(){let t=Cn(e),r;if(t.token?r=yield Fv(n,!0):r=yield Fv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Cn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},aS.RETRIAL_MIN_WAIT,aS.RETRIAL_MAX_WAIT)}function tB(n,e){let t=Cn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Hu(n){return n.expireTimeMillis-Date.now()>0}function cS(n){return{token:ZU(YU),error:n}}var Vv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Cn(this.app);for(let t of e)yS(this.app,t.next);return Promise.resolve()}};function nB(n,e){return new Vv(n,e)}function rB(n){return{getToken:e=>Fv(n,e),getLimitedUseToken:()=>JU(n),addTokenListener:e=>XU(n,"INTERNAL",e),removeTokenListener:e=>yS(n.app,e)}}var iB="@firebase/app-check",oB="0.8.8";var sB="app-check",lS="app-check-internal";function aB(){La(new Ei(sB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return nB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lS).initialize()})),La(new Ei(lS,n=>{let e=n.getProvider("app-check").getImmediate();return rB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xr(iB,oB)}aB();var uB=["localhost","0.0.0.0","127.0.0.1"],uW=typeof window<"u"&&uB.includes(window.location.hostname);var cB=["ngOnDestroy"],wS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(cB.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let f=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Rh=class{constructor(e){return e}},bs=new q("angularfire2.app.options"),Ts=new q("angularfire2.app.name");function zu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=ze.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ze.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;lB("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Rh(s)}var lB=(n,...e)=>{Cy()&&typeof console<"u"&&console[n](...e)},dB={provide:Rh,useFactory:zu,deps:[bs,pe,[new ji,Ts]]},ES=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:bs,useValue:t},{provide:Ts,useValue:r}]}}constructor(t){ze.registerVersion("angularfire",Cs.full,"core"),ze.registerVersion("angularfire",Cs.full,"app-compat"),ze.registerVersion("angular",wT.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(gt))};static \u0275mod=at({type:n});static \u0275inj=st({providers:[dB]})}return n})();function Nh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return hB(i,s)||(_S("error",`${e} was already initialized on the ${t} Firebase App with different settings.${fB?" You may need to reload as Firebase is not HMR aware.":""}`),_S("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function hB(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var fB=typeof module<"u"&&!!module.hot,_S=(n,...e)=>{Cy()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Lv=new q("angularfire2.auth.use-emulator"),jv=new q("angularfire2.auth.settings"),Uv=new q("angularfire2.auth.tenant-id"),Bv=new q("angularfire2.auth.langugage-code"),$v=new q("angularfire2.auth.use-device-language"),qv=new q("angularfire.auth.persistence"),Hv=(n,e,t,r,i,o,s,a)=>Nh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),IS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,f,g,y){let D=new Le,S=Z(void 0).pipe(Xt(s.outsideAngular),je(()=>o.runOutsideAngular(()=>import("./chunk-63EJ5QCV.js"))),X(()=>zu(t,o,r)),X(M=>Hv(M,o,a,l,h,f,u,g)),jl({bufferSize:1,refCount:!1}));if(hr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{S.pipe(qt()).subscribe();let M=S.pipe(je(F=>F.getRedirectResult().then(G=>G,()=>null)),Ut,jl({bufferSize:1,refCount:!1})),V=S.pipe(je(F=>new he(G=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))})))),H=S.pipe(je(F=>new he(G=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))}))));this.authState=M.pipe(Ul(V),pn(s.outsideAngular),Xt(s.insideAngular)),this.user=M.pipe(Ul(H),pn(s.outsideAngular),Xt(s.insideAngular)),this.idToken=this.user.pipe(je(F=>F?ge(F.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(je(F=>F?ge(F.getIdTokenResult()):Z(null))),this.credential=lg(M,D,this.authState.pipe(lt(F=>!F))).pipe(X(F=>F?.user?F:null),pn(s.outsideAngular),Xt(s.insideAngular))}return wS(this,S,o,{spy:{apply:(M,V,H)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&H.then(F=>D.next(F))}}})}static \u0275fac=function(r){return new(r||n)(L(bs),L(Ts,8),L(gt),L(pe),L(Mh),L(Lv,8),L(jv,8),L(Uv,8),L(Bv,8),L($v,8),L(qv,8),L(Yi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var DS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CS={};var Zr,zv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,T){for(var _=Array(arguments.length-2),Yn=2;Yn<arguments.length;Yn++)_[Yn-2]=arguments[Yn];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var T=E.g[3],_=v+(T^w&(C^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[C++]=E.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<v;)if(I[C++]=E[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var T=E[C]|0;I&&T==v||(w[C]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=f,C=0;C<E.length;C+=8){var T=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(S(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(S(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=G(w,v).g;w=V(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function S(E){return E.h==-1}n.l=function(E){return E=V(this,E),S(E)?-1:D(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(g)}n.abs=function(){return S(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var T=I+(this.i(C)&65535)+(E.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(E,v){return E.add(M(v))}n.j=function(E){if(D(this)||D(E))return f;if(S(this))return S(E)?M(this).j(M(E)):M(M(this).j(E));if(S(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var T=this.i(I)>>>16,_=this.i(I)&65535,Yn=E.i(C)>>>16,va=E.i(C)&65535;w[2*I+2*C]+=_*va,H(w,2*I+2*C),w[2*I+2*C+1]+=T*va,H(w,2*I+2*C+1),w[2*I+2*C+1]+=_*Yn,H(w,2*I+2*C+1),w[2*I+2*C+2]+=T*Yn,H(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function H(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function F(E,v){this.g=E,this.h=v}function G(E,v){if(D(v))throw Error("division by zero");if(D(E))return new F(f,f);if(S(E))return v=G(M(E),v),new F(M(v.g),M(v.h));if(S(v))return v=G(E,M(v)),new F(M(v.g),v.h);if(30<E.g.length){if(S(E)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,I=v;0>=I.l(E);)w=ee(w),I=ee(I);var C=Y(w,1),T=Y(I,1);for(I=Y(I,2),w=Y(w,2);!D(I);){var _=T.add(I);0>=_.l(E)&&(C=C.add(w),T=_),I=Y(I,1),w=Y(w,1)}return v=V(E,C.j(v)),new F(C,v)}for(C=f;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);S(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);D(T)&&(T=g),C=C.add(T),E=V(E,_)}return new F(C,E)}n.A=function(E){return G(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ee(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function Y(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],T=0;T<I;T++)C[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zv=CS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Zr=CS.Integer=s}).apply(typeof DS<"u"?DS:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mr={};var Gv,Wv,As,Qv,Gu,Oh,Kv,Yv,Zv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,p){return c==Array.prototype||c==Object.prototype||(c[d]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var d=0;d<c.length;++d){var p=c[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in p))break e;p=p[b]}c=c[c.length-1],m=p[c],d=d(m),d!=m&&d!=null&&e(p,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var p=0,m=!1,b={next:function(){if(!m&&p<c.length){var R=p++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,p){return p})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,p){return c.call.apply(c.bind,arguments)}function f(c,d,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function y(c,d){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,d){function p(){}p.prototype=d.prototype,c.aa=d.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,b,R){for(var U=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)U[Ae-2]=arguments[Ae];return d.prototype[b].apply(m,U)}}function S(c){let d=c.length;if(0<d){let p=Array(d);for(let m=0;m<d;m++)p[m]=c[m];return p}return[]}function M(c,d){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let b=c.length||0,R=m.length||0;c.length=b+R;for(let U=0;U<R;U++)c[b+U]=m[U]}else c.push(m)}}class V{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Y(c,d,p){for(let m in c)d.call(p,c[m],m,c)}function E(c,d){for(let p in c)d.call(void 0,c[p],p,c)}function v(c){let d={};for(let p in c)d[p]=c[p];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)c[p]=m[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function C(c){var d=1;c=c.split(":");let p=[];for(;0<d&&c.length;)p.push(c.shift()),d--;return c.length&&p.push(c.join(":")),p}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=gp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Yn{constructor(){this.h=this.g=null}add(d,p){let m=va.get();m.set(d,p),this.h?this.h.next=m:this.g=m,this.h=m}}var va=new V(()=>new SN,c=>c.reset());class SN{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let _a,wa=!1,gp=new Yn,rI=()=>{let c=a.Promise.resolve(void 0);_a=()=>{c.then(MN)}};var MN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){T(p)}var d=va;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}wa=!1};function Tr(){this.s=this.s,this.C=this.C}Tr.prototype.s=!1,Tr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var xN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return c}();function Ea(c,d){if(yt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{G(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else p=="mouseover"?d=c.fromElement:p=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:RN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ea.aa.h.call(this)}}D(Ea,yt);var RN={2:"touch",3:"pen",4:"mouse"};Ea.prototype.h=function(){Ea.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ia="closure_listenable_"+(1e6*Math.random()|0),NN=0;function PN(c,d,p,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=p,this.capture=!!m,this.ha=b,this.key=++NN,this.da=this.fa=!1}function $c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qc(c){this.src=c,this.g={},this.h=0}qc.prototype.add=function(c,d,p,m,b){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var U=yp(c,d,m,b);return-1<U?(d=c[U],p||(d.fa=!1)):(d=new PN(d,this.src,R,!!m,b),d.fa=p,c.push(d)),d};function mp(c,d){var p=d.type;if(p in c.g){var m=c.g[p],b=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=b)&&Array.prototype.splice.call(m,b,1),R&&($c(d),c.g[p].length==0&&(delete c.g[p],c.h--))}}function yp(c,d,p,m){for(var b=0;b<c.length;++b){var R=c[b];if(!R.da&&R.listener==d&&R.capture==!!p&&R.ha==m)return b}return-1}var vp="closure_lm_"+(1e6*Math.random()|0),_p={};function iI(c,d,p,m,b){if(m&&m.once)return sI(c,d,p,m,b);if(Array.isArray(d)){for(var R=0;R<d.length;R++)iI(c,d[R],p,m,b);return null}return p=Dp(p),c&&c[Ia]?c.K(d,p,l(m)?!!m.capture:!!m,b):oI(c,d,p,!1,m,b)}function oI(c,d,p,m,b,R){if(!d)throw Error("Invalid event type");var U=l(b)?!!b.capture:!!b,Ae=Ep(c);if(Ae||(c[vp]=Ae=new qc(c)),p=Ae.add(d,p,m,U,R),p.proxy)return p;if(m=ON(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)xN||(b=U),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(uI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ON(){function c(p){return d.call(c.src,c.listener,p)}let d=kN;return c}function sI(c,d,p,m,b){if(Array.isArray(d)){for(var R=0;R<d.length;R++)sI(c,d[R],p,m,b);return null}return p=Dp(p),c&&c[Ia]?c.L(d,p,l(m)?!!m.capture:!!m,b):oI(c,d,p,!0,m,b)}function aI(c,d,p,m,b){if(Array.isArray(d))for(var R=0;R<d.length;R++)aI(c,d[R],p,m,b);else m=l(m)?!!m.capture:!!m,p=Dp(p),c&&c[Ia]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],p=yp(R,p,m,b),-1<p&&($c(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ep(c))&&(d=c.g[d.toString()],c=-1,d&&(c=yp(d,p,m,b)),(p=-1<c?d[c]:null)&&wp(p))}function wp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ia])mp(d.i,c);else{var p=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(p,m,c.capture):d.detachEvent?d.detachEvent(uI(p),m):d.addListener&&d.removeListener&&d.removeListener(m),(p=Ep(d))?(mp(p,c),p.h==0&&(p.src=null,d[vp]=null)):$c(c)}}}function uI(c){return c in _p?_p[c]:_p[c]="on"+c}function kN(c,d){if(c.da)c=!0;else{d=new Ea(d,this);var p=c.listener,m=c.ha||c.src;c.fa&&wp(c),c=p.call(m,d)}return c}function Ep(c){return c=c[vp],c instanceof qc?c:null}var Ip="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dp(c){return typeof c=="function"?c:(c[Ip]||(c[Ip]=function(d){return c.handleEvent(d)}),c[Ip])}function vt(){Tr.call(this),this.i=new qc(this),this.M=this,this.F=null}D(vt,Tr),vt.prototype[Ia]=!0,vt.prototype.removeEventListener=function(c,d,p,m){aI(this,c,d,p,m)};function Ct(c,d){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new yt(d,c);else if(d instanceof yt)d.target=d.target||c;else{var b=d;d=new yt(m,c),I(d,b)}if(b=!0,p)for(var R=p.length-1;0<=R;R--){var U=d.g=p[R];b=Hc(U,m,!0,d)&&b}if(U=d.g=c,b=Hc(U,m,!0,d)&&b,b=Hc(U,m,!1,d)&&b,p)for(R=0;R<p.length;R++)U=d.g=p[R],b=Hc(U,m,!1,d)&&b}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var p=c.g[d],m=0;m<p.length;m++)$c(p[m]);delete c.g[d],c.h--}}this.F=null},vt.prototype.K=function(c,d,p,m){return this.i.add(String(c),d,!1,p,m)},vt.prototype.L=function(c,d,p,m){return this.i.add(String(c),d,!0,p,m)};function Hc(c,d,p,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,R=0;R<d.length;++R){var U=d[R];if(U&&!U.da&&U.capture==p){var Ae=U.listener,ht=U.ha||U.src;U.fa&&mp(c.i,U),b=Ae.call(ht,m)!==!1&&b}}return b&&!m.defaultPrevented}function cI(c,d,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function lI(c){c.g=cI(()=>{c.g=null,c.i&&(c.i=!1,lI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class FN extends Tr{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:lI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Da(c){Tr.call(this),this.h=c,this.g={}}D(Da,Tr);var dI=[];function hI(c){Y(c.g,function(d,p){this.g.hasOwnProperty(p)&&wp(d)},c),c.g={}}Da.prototype.N=function(){Da.aa.N.call(this),hI(this)},Da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cp=a.JSON.stringify,VN=a.JSON.parse,LN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function bp(){}bp.prototype.h=null;function fI(c){return c.h||(c.h=c.i())}function pI(){}var Ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tp(){yt.call(this,"d")}D(Tp,yt);function Ap(){yt.call(this,"c")}D(Ap,yt);var yi={},gI=null;function zc(){return gI=gI||new vt}yi.La="serverreachability";function mI(c){yt.call(this,yi.La,c)}D(mI,yt);function ba(c){let d=zc();Ct(d,new mI(d))}yi.STAT_EVENT="statevent";function yI(c,d){yt.call(this,yi.STAT_EVENT,c),this.stat=d}D(yI,yt);function bt(c){let d=zc();Ct(d,new yI(d,c))}yi.Ma="timingevent";function vI(c,d){yt.call(this,yi.Ma,c),this.size=d}D(vI,yt);function Ta(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Aa(){this.g=!0}Aa.prototype.xa=function(){this.g=!1};function jN(c,d,p,m,b,R){c.info(function(){if(c.g)if(R)for(var U="",Ae=R.split("&"),ht=0;ht<Ae.length;ht++){var we=Ae[ht].split("=");if(1<we.length){var _t=we[0];we=we[1];var wt=_t.split("_");U=2<=wt.length&&wt[1]=="type"?U+(_t+"="+we+"&"):U+(_t+"=redacted&")}}else U=null;else U=R;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+p+`
`+U})}function UN(c,d,p,m,b,R,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+p+`
`+R+" "+U})}function Co(c,d,p,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+$N(c,p)+(m?" "+m:"")})}function BN(c,d){c.info(function(){return"TIMEOUT: "+d})}Aa.prototype.info=function(){};function $N(c,d){if(!c.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var U=1;U<b.length;U++)b[U]=""}}}}return Cp(p)}catch{return d}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_I={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sp;function Wc(){}D(Wc,bp),Wc.prototype.g=function(){return new XMLHttpRequest},Wc.prototype.i=function(){return{}},Sp=new Wc;function Ar(c,d,p,m){this.j=c,this.i=d,this.l=p,this.R=m||1,this.U=new Da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wI}function wI(){this.i=null,this.g="",this.h=!1}var EI={},Mp={};function xp(c,d,p){c.L=1,c.v=Zc(Zn(d)),c.m=p,c.P=!0,II(c,null)}function II(c,d){c.F=Date.now(),Qc(c),c.A=Zn(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),FI(p.i,"t",m),c.C=0,p=c.j.J,c.h=new wI,c.g=eD(c.j,p?d:null,!c.m),0<c.O&&(c.M=new FN(g(c.Y,c,c.g),c.O)),d=c.U,p=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(dI[0]=b.toString()),b=dI);for(var R=0;R<b.length;R++){var U=iI(p,b[R],m||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ba(),jN(c.i,c.u,c.A,c.l,c.R,c.m)}Ar.prototype.ca=function(c){c=c.target;let d=this.M;d&&Jn(c)==3?d.j():this.Y(c)},Ar.prototype.Y=function(c){try{if(c==this.g)e:{let wt=Jn(this.g);var d=this.g.Ba();let Ao=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||qI(this.g)))){this.J||wt!=4||d==7||(d==8||0>=Ao?ba(3):ba(2)),Rp(this);var p=this.g.Z();this.X=p;t:if(DI(this)){var m=qI(this.g);c="";var b=m.length,R=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Sa(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,UN(this.i,this.u,this.A,this.l,this.R,wt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,ht=this.g;if((Ae=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ae)){var we=Ae;break t}}we=null}if(p=we)Co(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Np(this,p);else{this.o=!1,this.s=3,bt(12),vi(this),Sa(this);break e}}if(this.P){p=!0;let hn;for(;!this.J&&this.C<U.length;)if(hn=qN(this,U),hn==Mp){wt==4&&(this.s=4,bt(14),p=!1),Co(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==EI){this.s=4,bt(15),Co(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else Co(this.i,this.l,hn,null),Np(this,hn);if(DI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||U.length!=0||this.h.h||(this.s=1,bt(16),p=!1),this.o=this.o&&p,!p)Co(this.i,this.l,U,"[Invalid Chunked Response]"),vi(this),Sa(this);else if(0<U.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Lp(_t),_t.M=!0,bt(11))}}else Co(this.i,this.l,U,null),Np(this,U);wt==4&&vi(this),this.o&&!this.J&&(wt==4?YI(this.j,this):(this.o=!1,Qc(this)))}else sP(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),vi(this),Sa(this)}}}catch{}finally{}};function DI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qN(c,d){var p=c.C,m=d.indexOf(`
`,p);return m==-1?Mp:(p=Number(d.substring(p,m)),isNaN(p)?EI:(m+=1,m+p>d.length?Mp:(d=d.slice(m,m+p),c.C=m+p,d)))}Ar.prototype.cancel=function(){this.J=!0,vi(this)};function Qc(c){c.S=Date.now()+c.I,CI(c,c.I)}function CI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ta(g(c.ba,c),d)}function Rp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ar.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(BN(this.i,this.A),this.L!=2&&(ba(),bt(17)),vi(this),this.s=2,Sa(this)):CI(this,this.S-c)};function Sa(c){c.j.G==0||c.J||YI(c.j,c)}function vi(c){Rp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,hI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Np(c,d){try{var p=c.j;if(p.G!=0&&(p.g==c||Pp(p.h,c))){if(!c.K&&Pp(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)nl(p),el(p);else break e;Vp(p),bt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ta(g(p.Za,p),6e3));if(1>=AI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else wi(p,11)}else if((c.K||p.g==c)&&nl(p),!H(d))for(b=p.Da.g.parse(d),d=0;d<b.length;d++){let we=b[d];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let _t=we[3];_t!=null&&(p.la=_t,p.j.info("VER="+p.la));let wt=we[4];wt!=null&&(p.Aa=wt,p.j.info("SVER="+p.Aa));let Ao=we[5];Ao!=null&&typeof Ao=="number"&&0<Ao&&(m=1.5*Ao,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let hn=c.g;if(hn){let il=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var R=m.h;R.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Op(R,R.h),R.h=null))}if(m.D){let jp=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;jp&&(m.ya=jp,Ne(m.I,m.D,jp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var U=c;if(m.qa=XI(m,m.J?m.ia:null,m.W),U.K){SI(m.h,U);var Ae=U,ht=m.L;ht&&(Ae.I=ht),Ae.B&&(Rp(Ae),Qc(Ae)),m.g=U}else QI(m);0<p.i.length&&tl(p)}else we[0]!="stop"&&we[0]!="close"||wi(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?wi(p,7):Fp(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}ba(4)}catch{}}var HN=class{constructor(c,d){this.g=c,this.map=d}};function bI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function TI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function AI(c){return c.h?1:c.g?c.g.size:0}function Pp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Op(c,d){c.g?c.g.add(d):c.h=d}function SI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}bI.prototype.cancel=function(){if(this.i=MI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function MI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let p of c.g.values())d=d.concat(p.D);return d}return S(c.i)}function zN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],p=c.length,m=0;m<p;m++)d.push(c[m]);return d}d=[],p=0;for(m in c)d[p++]=c[m];return d}function GN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var p=0;p<c;p++)d.push(p);return d}d=[],p=0;for(let m in c)d[p++]=m;return d}}}function xI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var p=GN(c),m=zN(c),b=m.length,R=0;R<b;R++)d.call(void 0,m[R],p&&p[R],c)}var RI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WN(c,d){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),b=null;if(0<=m){var R=c[p].substring(0,m);b=c[p].substring(m+1)}else R=c[p];d(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function _i(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof _i){this.h=c.h,Kc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,p=new Ra;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),NI(this,p),this.m=c.m}else c&&(d=String(c).match(RI))?(this.h=!1,Kc(this,d[1]||"",!0),this.o=Ma(d[2]||""),this.g=Ma(d[3]||"",!0),Yc(this,d[4]),this.l=Ma(d[5]||"",!0),NI(this,d[6]||"",!0),this.m=Ma(d[7]||"")):(this.h=!1,this.i=new Ra(null,this.h))}_i.prototype.toString=function(){var c=[],d=this.j;d&&c.push(xa(d,PI,!0),":");var p=this.g;return(p||d=="file")&&(c.push("//"),(d=this.o)&&c.push(xa(d,PI,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(xa(p,p.charAt(0)=="/"?YN:KN,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",xa(p,JN)),c.join("")};function Zn(c){return new _i(c)}function Kc(c,d,p){c.j=p?Ma(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function NI(c,d,p){d instanceof Ra?(c.i=d,XN(c.i,c.h)):(p||(d=xa(d,ZN)),c.i=new Ra(d,c.h))}function Ne(c,d,p){c.i.set(d,p)}function Zc(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ma(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xa(c,d,p){return typeof c=="string"?(c=encodeURI(c).replace(d,QN),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function QN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var PI=/[#\/\?@]/g,KN=/[#\?:]/g,YN=/[#\?]/g,ZN=/[#\?@]/g,JN=/#/g;function Ra(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Sr(c){c.g||(c.g=new Map,c.h=0,c.i&&WN(c.i,function(d,p){c.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=Ra.prototype,n.add=function(c,d){Sr(this),this.i=null,c=bo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(d),this.h+=1,this};function OI(c,d){Sr(c),d=bo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function kI(c,d){return Sr(c),d=bo(c,d),c.g.has(d)}n.forEach=function(c,d){Sr(this),this.g.forEach(function(p,m){p.forEach(function(b){c.call(d,b,m,this)},this)},this)},n.na=function(){Sr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let m=0;m<d.length;m++){let b=c[m];for(let R=0;R<b.length;R++)p.push(d[m])}return p},n.V=function(c){Sr(this);let d=[];if(typeof c=="string")kI(this,c)&&(d=d.concat(this.g.get(bo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)d=d.concat(c[p])}return d},n.set=function(c,d){return Sr(this),this.i=null,c=bo(this,c),kI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function FI(c,d,p){OI(c,d),0<p.length&&(c.i=null,c.g.set(bo(c,d),S(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var m=d[p];let R=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var b=R;U[m]!==""&&(b+="="+encodeURIComponent(String(U[m]))),c.push(b)}}return this.i=c.join("&")};function bo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function XN(c,d){d&&!c.j&&(Sr(c),c.i=null,c.g.forEach(function(p,m){var b=m.toLowerCase();m!=b&&(OI(this,m),FI(this,b,p))},c)),c.j=d}function eP(c,d){let p=new Aa;if(a.Image){let m=new Image;m.onload=y(Mr,p,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Mr,p,"TestLoadImage: error",!1,d,m),m.onabort=y(Mr,p,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Mr,p,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function tP(c,d){let p=new Aa,m=new AbortController,b=setTimeout(()=>{m.abort(),Mr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(b),R.ok?Mr(p,"TestPingServer: ok",!0,d):Mr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Mr(p,"TestPingServer: error",!1,d)})}function Mr(c,d,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function nP(){this.g=new LN}function rP(c,d,p){let m=p||"";try{xI(c,function(b,R){let U=b;l(b)&&(U=Cp(b)),d.push(m+R+"="+encodeURIComponent(U))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function Na(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Na,bp),Na.prototype.g=function(){return new Jc(this.l,this.j)},Na.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Jc,vt),n=Jc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Oa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;VI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function VI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Pa(this):Oa(this),this.readyState==3&&VI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Pa(this))},n.Qa=function(c){this.g&&(this.response=c,Pa(this))},n.ga=function(){this.g&&Pa(this)};function Pa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Oa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=d.next();return c.join(`\r
`)};function Oa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function LI(c){let d="";return Y(c,function(p,m){d+=m,d+=":",d+=p,d+=`\r
`}),d}function kp(c,d,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=LI(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ne(c,d,p))}function $e(c){vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D($e,vt);var iP=/^https?$/i,oP=["POST","PUT"];n=$e.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sp.g(),this.v=this.o?fI(this.o):fI(Sp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){jI(this,R);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())p.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oP,d,void 0))||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,U]of p)this.g.setRequestHeader(R,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$I(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){jI(this,R)}};function jI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,UI(c),Xc(c)}function UI(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),Xc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?BI(this):this.bb())},n.bb=function(){BI(this)};function BI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Jn(c)!=4||c.Z()!=2)){if(c.u&&Jn(c)==4)cI(c.Ea,0,c);else if(Ct(c,"readystatechange"),Jn(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var m;if(m=U===0){var b=String(c.D).match(RI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!iP.test(b?b.toLowerCase():"")}p=m}if(p)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var R=2<Jn(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",UI(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){$I(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ct(c,"ready");try{p.onreadystatechange=m}catch{}}}function $I(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Jn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),VN(d)}};function qI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function sP(c){let d={};c=(c.g&&2<=Jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var p=C(c[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=d[b]||[];d[b]=R,R.push(p)}E(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(c,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||d}function HI(c){this.Aa=0,this.i=[],this.j=new Aa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ka("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ka("baseRetryDelayMs",5e3,c),this.cb=ka("retryDelaySeedMs",1e4,c),this.Wa=ka("forwardChannelMaxRetries",2,c),this.wa=ka("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bI(c&&c.concurrentRequestLimit),this.Da=new nP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=HI.prototype,n.la=8,n.G=1,n.connect=function(c,d,p,m){bt(0),this.W=c,this.H=d||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=XI(this,null,this.W),tl(this)};function Fp(c){if(zI(c),c.G==3){var d=c.U++,p=Zn(c.I);if(Ne(p,"SID",c.K),Ne(p,"RID",d),Ne(p,"TYPE","terminate"),Fa(c,p),d=new Ar(c,c.j,d),d.L=2,d.v=Zc(Zn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=eD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qc(d)}JI(c)}function el(c){c.g&&(Lp(c),c.g.cancel(),c.g=null)}function zI(c){el(c),c.u&&(a.clearTimeout(c.u),c.u=null),nl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tl(c){if(!TI(c.h)&&!c.s){c.s=!0;var d=c.Ga;_a||rI(),wa||(_a(),wa=!0),gp.add(d,c),c.B=0}}function aP(c,d){return AI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ta(g(c.Ga,c,d),ZI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Ar(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=WI(this,b,d),p=Zn(this.I),Ne(p,"RID",c),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),Fa(this,p),R&&(this.O?d="headers="+encodeURIComponent(String(LI(R)))+"&"+d:this.m&&kp(p,this.m,R)),Op(this.h,b),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",d),Ne(p,"SID","null"),b.T=!0,xp(b,p,null)):xp(b,p,d),this.G=2}}else this.G==3&&(c?GI(this,c):this.i.length==0||TI(this.h)||GI(this))};function GI(c,d){var p;d?p=d.l:p=c.U++;let m=Zn(c.I);Ne(m,"SID",c.K),Ne(m,"RID",p),Ne(m,"AID",c.T),Fa(c,m),c.m&&c.o&&kp(m,c.m,c.o),p=new Ar(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),d&&(c.i=d.D.concat(c.i)),d=WI(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Op(c.h,p),xp(p,m,d)}function Fa(c,d){c.H&&Y(c.H,function(p,m){Ne(d,m,p)}),c.l&&xI({},function(p,m){Ne(d,m,p)})}function WI(c,d,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let R=-1;for(;;){let U=["count="+p];R==-1?0<p?(R=b[0].g,U.push("ofs="+R)):R=0:U.push("ofs="+R);let Ae=!0;for(let ht=0;ht<p;ht++){let we=b[ht].g,_t=b[ht].map;if(we-=R,0>we)R=Math.max(0,b[ht].g-100),Ae=!1;else try{rP(_t,U,"req"+we+"_")}catch{m&&m(_t)}}if(Ae){m=U.join("&");break e}}}return c=c.i.splice(0,p),d.D=c,m}function QI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;_a||rI(),wa||(_a(),wa=!0),gp.add(d,c),c.v=0}}function Vp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ta(g(c.Fa,c),ZI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,KI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ta(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),el(this),KI(this))};function Lp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function KI(c){c.g=new Ar(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Zn(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),Fa(c,d),c.m&&c.o&&kp(d,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Zc(Zn(d)),p.m=null,p.P=!0,II(p,c)}n.Za=function(){this.C!=null&&(this.C=null,el(this),Vp(this),bt(19))};function nl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function YI(c,d){var p=null;if(c.g==d){nl(c),Lp(c),c.g=null;var m=2}else if(Pp(c.h,d))p=d.D,SI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=zc(),Ct(m,new vI(m,p)),tl(c)}else QI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&aP(c,d)||m==2&&Vp(c)))switch(p&&0<p.length&&(d=c.h,d.i=d.i.concat(p)),b){case 1:wi(c,5);break;case 4:wi(c,10);break;case 3:wi(c,6);break;default:wi(c,2)}}}function ZI(c,d){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*d}function wi(c,d){if(c.j.info("Error code "+d),d==2){var p=g(c.fb,c),m=c.Xa;let b=!m;m=new _i(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kc(m,"https"),Zc(m),b?eP(m.toString(),p):tP(m.toString(),p)}else bt(2);c.G=0,c.l&&c.l.sa(d),JI(c),zI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function JI(c){if(c.G=0,c.ka=[],c.l){let d=MI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function XI(c,d,p){var m=p instanceof _i?Zn(p):new _i(p);if(m.g!="")d&&(m.g=d+"."+m.g),Yc(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var R=new _i(null);m&&Kc(R,m),d&&(R.g=d),b&&Yc(R,b),p&&(R.l=p),m=R}return p=c.D,d=c.ya,p&&d&&Ne(m,p,d),Ne(m,"VER",c.la),Fa(c,m),m}function eD(c,d,p){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new Na({eb:p})):new $e(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tD(){}n=tD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rl(){}rl.prototype.g=function(c,d){return new $t(c,d)};function $t(c,d){vt.call(this),this.g=new HI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new To(this)}D($t,vt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Fp(this.g)},$t.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Cp(c),c=p);d.i.push(new HN(d.Ya++,c)),d.G==3&&tl(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,Fp(this.g),delete this.g,$t.aa.N.call(this)};function nD(c){Tp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let p in d){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(nD,Tp);function rD(){Ap.call(this),this.status=1}D(rD,Ap);function To(c){this.g=c}D(To,tD),To.prototype.ua=function(){Ct(this.g,"a")},To.prototype.ta=function(c){Ct(this.g,new nD(c))},To.prototype.sa=function(c){Ct(this.g,new rD)},To.prototype.ra=function(){Ct(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Zv=mr.createWebChannelTransport=function(){return new rl},Yv=mr.getStatEventTarget=function(){return zc()},Kv=mr.Event=yi,Oh=mr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,Gu=mr.ErrorCode=Gc,_I.COMPLETE="complete",Qv=mr.EventType=_I,pI.EventType=Ca,Ca.OPEN="a",Ca.CLOSE="b",Ca.ERROR="c",Ca.MESSAGE="d",vt.prototype.listen=vt.prototype.K,As=mr.WebChannel=pI,Wv=mr.FetchXmlHttpFactory=Na,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Gv=mr.XhrIo=$e}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});var bS="@firebase/firestore";var nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");var ia="10.13.2";var ii=new al("@firebase/firestore");function Ns(){return ii.logLevel}function AM(n){ii.setLogLevel(n)}function O(n,...e){if(ii.logLevel<=Mn.DEBUG){let t=e.map(nE);ii.debug(`Firestore (${ia}): ${n}`,...t)}}function Qe(n,...e){if(ii.logLevel<=Mn.ERROR){let t=e.map(nE);ii.error(`Firestore (${ia}): ${n}`,...t)}}function cn(n,...e){if(ii.logLevel<=Mn.WARN){let t=e.map(nE);ii.warn(`Firestore (${ia}): ${n}`,...t)}}function nE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${ia}) INTERNAL ASSERTION FAILED: `+n;throw Qe(e),new Error(e)}function K(n,e){n||z()}function SM(n,e){n||z()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends lD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var zh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},n_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nt.UNAUTHENTICATED))}shutdown(){}},r_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},i_=class{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new zh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new nt(e)}},o_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},s_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new o_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},a_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},u_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new a_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function gB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Gh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=gB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function Bs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function MM(n){return n+"\0"}var Be=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Be(0,0))}static max(){return new n(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ye=class n extends Wh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},mB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ke=class n extends Wh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return mB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var $s=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function c_(n){return n.fields.find(e=>e.kind===2)}function Ji(n){return n.fields.filter(e=>e.kind!==2)}$s.UNKNOWN_ID=-1;var Ls=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ic=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,ln.min())}};function xM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Be(t+1,0):new Be(t,r));return new ln(i,$.empty(),e)}function RM(n){return new ln(n.readTime,n.key,-1)}var ln=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),$.empty(),-1)}static max(){return new n(J.max(),$.empty(),-1)}};function rE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var NM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function pi(n){return N(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==NM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Kh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new io(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=iE(r.target.error);this.V.reject(new io(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new io(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new d_(t)}},oi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Va())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Xi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sl())return!1;if(n.v())return!0;let e=Va(),t=n.S(e),r=0<t&&t<10,i=PM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new io(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new io(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Kh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function PM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var l_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Xi(this.B.delete())}},io=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function gi(n){return n.name==="IndexedDbTransactionError"}var d_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xi(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Xi(this.store.add(e))}get(e){return Xi(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Xi(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Xi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=o=>{let s=iE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new l_(a),l=t(a.primaryKey,a.value,u);if(l instanceof A){let h=l.catch(f=>(u.done(),A.reject(f)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Xi(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=iE(r.target.error);t(i)}})}var TS=!1;function iE(n){let e=oi.S(Va());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TS||(TS=!0,setTimeout(()=>{throw r},0)),r}}return n}var h_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){gi(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield pi(t)}yield this.X(6e4)}))}},f_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=RM(o);rE(s,r)>0&&(r=s)}),new ln(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ac(n){return n==null}function oc(n){return n===0&&1/n==-1/0}function OM(n){return typeof n=="number"&&Number.isInteger(n)&&!oc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Rt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AS(e)),e=yB(n.get(t),e);return AS(e)}function yB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function AS(n){return n+""}function Un(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ye(r)}var SS=["userId","batchId"];function jh(n,e){return[n,Rt(e)]}function kM(n,e,t){return[n,Rt(e),t]}var vB={},_B=["prefixPath","collectionGroup","readTime","documentId"],wB=["prefixPath","collectionGroup","documentId"],EB=["collectionGroup","readTime","prefixPath","documentId"],IB=["canonicalId","targetId"],DB=["targetId","path"],CB=["path","targetId"],bB=["collectionId","parent"],TB=["indexId","uid"],AB=["uid","sequenceNumber"],SB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MB=["indexId","uid","orderedDocumentKey"],xB=["userId","collectionPath","documentId"],RB=["userId","collectionPath","largestBatchId"],NB=["userId","collectionGroup","largestBatchId"],FM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PB=[...FM,"documentOverlays"],VM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LM=VM,oE=[...LM,"indexConfiguration","indexState","indexEntries"],OB=oE,kB=[...oE,"globals"];var sc=class extends Qh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ut(n,e){let t=B(n);return oi.F(t._e,e)}function MS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||$n.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vs(this.root,e,this.comparator,!0)}},Vs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$n=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new $n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Me=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yh(this.data.getIterator())}getIteratorFrom(e){return new Yh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Yh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ss(n){return n.hasNext()?n.getNext():void 0}var Jt=class n{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new Me(Ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Zh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function UM(){return typeof atob<"u"}var Ze=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var FB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(n){if(K(!!n),typeof n=="string"){let e=0,t=FB.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function si(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}function $f(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function sE(n){let e=n.mapValue.fields.__previous_value__;return $f(e)?sE(e):e}function ac(n){let e=_r(n.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}var p_=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},ai=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ni={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uh={nullValue:"NULL_VALUE"};function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$f(n)?4:BM(n)?9007199254740991:qf(n)?10:11:z()}function zn(n,e){if(n===e)return!0;let t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ac(n).isEqual(ac(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=_r(i.timestampValue),a=_r(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return si(i.bytesValue).isEqual(si(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?oc(s)===oc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Bs(n.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(MS(s)!==MS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!zn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function uc(n,e){return(n.values||[]).find(t=>zn(t,e))!==void 0}function ui(n,e){if(n===e)return 0;let t=oo(n),r=oo(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return xS(n.timestampValue,e.timestampValue);case 4:return xS(ac(n),ac(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=si(o),u=si(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(ke(o.latitude),ke(s.latitude));return a!==0?a:re(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:RS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===ni.mapValue&&s===ni.mapValue)return 0;if(o===ni.mapValue)return 1;if(s===ni.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){let g=re(u[f],h[f]);if(g!==0)return g;let y=ui(a[u[f]],l[h[f]]);if(y!==0)return y}return re(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function xS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=_r(n),r=_r(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function RS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ui(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function qs(n){return g_(n)}function g_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=_r(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return si(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=g_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${g_(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function so(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function m_(n){return!!n&&"integerValue"in n}function cc(n){return!!n&&"arrayValue"in n}function NS(n){return!!n&&"nullValue"in n}function PS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bh(n){return!!n&&"mapValue"in n}function qf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Xu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return yo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $M={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function VB(n){return"nullValue"in n?Uh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?so(ai.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?qf(n)?$M:{mapValue:{}}:z()}function LB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?so(ai.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?$M:"mapValue"in n?qf(n)?{mapValue:{}}:ni:z()}function OS(n,e){let t=ui(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kS(n,e){let t=ui(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Dt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(t)}setAll(e){let t=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Xu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Xu(this.value))}};function qM(n){let e=[];return yo(n.fields,(t,r)=>{let i=new Ke([t]);if(Bh(r)){let o=qM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var it=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Dt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Dt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gn=class{constructor(e,t){this.position=e,this.inclusive=t}};function FS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=ui(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function VS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zn(n.position[t],e.position[t]))return!1;return!0}var ao=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function jB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Jh=class{},fe=class n extends Jh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new __(e,t,r):t==="array-contains"?new I_(e,r):t==="in"?new Xh(e,r):t==="not-in"?new D_(e,r):t==="array-contains-any"?new C_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new w_(e,r):new E_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ui(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(ui(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends Jh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Hs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Hs(n){return n.op==="and"}function y_(n){return n.op==="or"}function aE(n){return HM(n)&&Hs(n)}function HM(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function v_(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+qs(n.value);if(aE(n))return n.filters.map(e=>v_(e)).join(",");{let e=n.filters.map(t=>v_(t)).join(",");return`${n.op}(${e})`}}function zM(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&zM(s,i.filters[a]),!0):!1}(n,e):void z()}function GM(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function WM(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${qs(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map(WM).join(" ,")+"}"}(n):"Filter"}var __=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},w_=class extends fe{constructor(e,t){super(e,"in",t),this.keys=QM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},E_=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=QM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function QM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var I_=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return cc(t)&&uc(t.arrayValue,this.value)}},Xh=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&uc(this.value.arrayValue,t)}},D_=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!uc(this.value.arrayValue,t)}},C_=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!cc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uc(this.value.arrayValue,r))}};var b_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function T_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new b_(n,e,t,r,i,o,s)}function uo(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>v_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ac(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qs(r)).join(",")),e.ue=t}return e.ue}function Sc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VS(n.startAt,e.startAt)&&VS(n.endAt,e.endAt)}function ef(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function tf(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function LS(n,e,t){let r=Uh,i=!0;for(let o of tf(n,e)){let s=Uh,a=!0;switch(o.op){case"<":case"<=":s=VB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Uh}OS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];OS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function jS(n,e,t){let r=ni,i=!0;for(let o of tf(n,e)){let s=ni,a=!0;switch(o.op){case">=":case">":s=LB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ni}kS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];kS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var bn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function KM(n,e,t,r,i,o,s,a){return new bn(n,e,t,r,i,o,s,a)}function oa(n){return new bn(n)}function US(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uE(n){return n.collectionGroup!==null}function js(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Me(Ke.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ao(o,r))}),t.has(Ke.keyField().canonicalString())||e.ce.push(new ao(Ke.keyField(),r))}return e.ce}function Nt(n){let e=B(n);return e.le||(e.le=UB(e,js(n))),e.le}function UB(n,e){if(n.limitType==="F")return T_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ao(i.field,o)});let t=n.endAt?new Gn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gn(n.startAt.position,n.startAt.inclusive):null;return T_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function A_(n,e){let t=n.filters.concat([e]);return new bn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function nf(n,e,t){return new bn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mc(n,e){return Sc(Nt(n),Nt(e))&&n.limitType===e.limitType}function YM(n){return`${uo(Nt(n))}|lt:${n.limitType}`}function Ps(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>WM(i)).join(", ")}]`),Ac(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>qs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>qs(i)).join(",")),`Target(${r})`}(Nt(n))}; limitType=${n.limitType})`}function xc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of js(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=FS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,js(r),i)||r.endAt&&!function(s,a,u){let l=FS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,js(r),i))}(n,e)}function ZM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JM(n){return(e,t)=>{let r=!1;for(let i of js(n)){let o=BB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function BB(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ui(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Wn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return jM(this.inner)}size(){return this.innerSize}};var $B=new Oe($.comparator);function Bt(){return $B}var XM=new Oe($.comparator);function Zu(...n){let e=XM;for(let t of n)e=e.insert(t.key,t);return e}function ex(n){let e=XM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bn(){return ec()}function tx(){return ec()}function ec(){return new Wn(n=>n.toString(),(n,e)=>n.isEqual(e))}var qB=new Oe($.comparator),HB=new Me($.comparator);function oe(...n){let e=HB;for(let t of n)e=e.add(t);return e}var zB=new Me(re);function cE(){return zB}function lE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(e)?"-0":e}}function nx(n){return{integerValue:""+n}}function rx(n,e){return OM(e)?nx(e):lE(n,e)}var zs=class{constructor(){this._=void 0}};function GB(n,e,t){return n instanceof ci?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&$f(o)&&(o=sE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof wr?ox(n,e):n instanceof Er?sx(n,e):function(i,o){let s=ix(i,o),a=BS(s)+BS(i.Pe);return m_(s)&&m_(i.Pe)?nx(a):lE(i.serializer,a)}(n,e)}function WB(n,e,t){return n instanceof wr?ox(n,e):n instanceof Er?sx(n,e):t}function ix(n,e){return n instanceof li?function(r){return m_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ci=class extends zs{},wr=class extends zs{constructor(e){super(),this.elements=e}};function ox(n,e){let t=ax(e);for(let r of n.elements)t.some(i=>zn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Er=class extends zs{constructor(e){super(),this.elements=e}};function sx(n,e){let t=ax(e);for(let r of n.elements)t=t.filter(i=>!zn(i,r));return{arrayValue:{values:t}}}var li=class extends zs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function BS(n){return ke(n.integerValue||n.doubleValue)}function ax(n){return cc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var co=class{constructor(e,t){this.field=e,this.transform=t}};function QB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof wr&&i instanceof wr||r instanceof Er&&i instanceof Er?Bs(r.elements,i.elements,zn):r instanceof li&&i instanceof li?zn(r.Pe,i.Pe):r instanceof ci&&i instanceof ci}(n.transform,e.transform)}var S_=class{constructor(e,t){this.version=e,this.transformResults=t}},He=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Gs=class{};function ux(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hi(n.key,He.none()):new di(n.key,n.data,He.none());{let t=n.data,r=Dt.empty(),i=new Me(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Tn(n.key,r,new Jt(i.toArray()),He.none())}}function KB(n,e,t){n instanceof di?function(i,o,s){let a=i.value.clone(),u=qS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Tn?function(i,o,s){if(!$h(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(cx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function tc(n,e,t,r){return n instanceof di?function(o,s,a,u){if(!$h(o.precondition,s))return a;let l=o.value.clone(),h=HS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tn?function(o,s,a,u){if(!$h(o.precondition,s))return a;let l=HS(o.fieldTransforms,u,s),h=s.data;return h.setAll(cx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return $h(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function YB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ix(r.transform,i||null);o!=null&&(t===null&&(t=Dt.empty()),t.set(r.field,o))}return t||null}function $S(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bs(r,i,(o,s)=>QB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var di=class extends Gs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tn=class extends Gs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function qS(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,WB(s,a,t[i]))}return r}function HS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,GB(o,s,e))}return r}var hi=class extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},lc=class extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&KB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=tc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=tc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=tx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=ux(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&Bs(this.mutations,e.mutations,(t,r)=>$S(t,r))&&Bs(this.baseMutations,e.baseMutations,(t,r)=>$S(t,r))}},M_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return qB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var hc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var x_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,me;function lx(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function dx(n){if(n===void 0)return Qe("GRPC error has no .code"),x.UNKNOWN;switch(n){case et.OK:return x.OK;case et.CANCELLED:return x.CANCELLED;case et.UNKNOWN:return x.UNKNOWN;case et.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case et.INTERNAL:return x.INTERNAL;case et.UNAVAILABLE:return x.UNAVAILABLE;case et.UNAUTHENTICATED:return x.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case et.NOT_FOUND:return x.NOT_FOUND;case et.ALREADY_EXISTS:return x.ALREADY_EXISTS;case et.PERMISSION_DENIED:return x.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case et.ABORTED:return x.ABORTED;case et.OUT_OF_RANGE:return x.OUT_OF_RANGE;case et.UNIMPLEMENTED:return x.UNIMPLEMENTED;case et.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(me=et||(et={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var zS=null;function hx(){return new TextEncoder}var ZB=new Zr([4294967295,4294967295],0);function GS(n){let e=hx().encode(n),t=new zv;return t.update(e),new Uint8Array(t.digest())}function WS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zr([t,r],0),new Zr([i,o],0)]}var R_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ro(`Invalid padding: ${t}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ro(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Zr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Zr.fromNumber(r)));return i.compare(ZB)===1&&(i=new Zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=GS(e),[r,i]=WS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=GS(e),[r,i]=WS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Oe(re),Bt(),oe())}},pc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,oe(),oe(),oe())}};var Us=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},rf=class{constructor(e,t){this.targetId=e,this.me=t}},of=class{constructor(e,t,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},sf=class{constructor(){this.fe=0,this.ge=KS(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),t=oe(),r=oe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new pc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=KS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},N_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bt(),this.qe=QS(),this.Qe=new Oe(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(ef(o))if(r===0){let s=new $(o.path);this.Ue(t,s,it.newNoDocument(s,J.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}zS?.et(function(h,f,g,y,D){var S,M,V,H,F,G;let ee={localCacheCount:h,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Y=f.unchangedNames;return Y&&(ee.bloomFilter={applied:D===0,hashCount:(S=Y?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(H=(V=(M=Y?.bits)===null||M===void 0?void 0:M.bitmap)===null||V===void 0?void 0:V.length)!==null&&H!==void 0?H:0,padding:(G=(F=Y?.bits)===null||F===void 0?void 0:F.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=si(r).toUint8Array()}catch(u){if(u instanceof Zh)return cn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new R_(s,i,o)}catch(u){return cn(u instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ef(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,it.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=oe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new fc(e,t,this.Qe,this.ke,r);return this.ke=Bt(),this.qe=QS(),this.Qe=new Oe(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new sf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Me(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function QS(){return new Oe($.comparator)}function KS(){return new Oe($.comparator)}var JB={asc:"ASCENDING",desc:"DESCENDING"},XB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e$={and:"AND",or:"OR"},P_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function O_(n,e){return n.useProto3Json||Ac(e)?e:{value:e}}function Ws(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function t$(n,e){return Ws(n,e.toTimestamp())}function Ye(n){return K(!!n),J.fromTimestamp(function(t){let r=_r(t);return new Be(r.seconds,r.nanos)}(n))}function dE(n,e){return k_(n,e).canonicalString()}function k_(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function px(n){let e=ye.fromString(n);return K(Cx(e)),e}function gc(n,e){return dE(n.databaseId,e.path)}function qn(n,e){let t=px(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(yx(t))}function gx(n,e){return dE(n.databaseId,e)}function mx(n){let e=px(n);return e.length===4?ye.emptyPath():yx(e)}function F_(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yx(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function YS(n,e,t){return{name:gc(n,e),fields:t.value.mapValue.fields}}function vx(n,e,t){let r=qn(n,e.name),i=Ye(e.updateTime),o=e.createTime?Ye(e.createTime):J.min(),s=new Dt({mapValue:{fields:e.fields}}),a=it.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function n$(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=qn(r,i.found.name),s=Ye(i.found.updateTime),a=i.found.createTime?Ye(i.found.createTime):J.min(),u=new Dt({mapValue:{fields:i.found.fields}});return it.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=qn(r,i.missing),s=Ye(i.readTime);return it.newNoDocument(o,s)}(n,e):z()}function r$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ze.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ze.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:dx(l.code);return new P(h,l.message||"")}(s);t=new of(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qn(n,r.document.name),o=Ye(r.document.updateTime),s=r.document.createTime?Ye(r.document.createTime):J.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Us(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qn(n,r.document),o=r.readTime?Ye(r.readTime):J.min(),s=it.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Us([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qn(n,r.document),o=r.removedTargetIds||[];t=new Us([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new x_(i,o),a=r.targetId;t=new rf(a,s)}}return t}function mc(n,e){let t;if(e instanceof di)t={update:YS(n,e.key,e.value)};else if(e instanceof hi)t={delete:gc(n,e.key)};else if(e instanceof Tn)t={update:YS(n,e.key,e.data),updateMask:c$(e.fieldMask)};else{if(!(e instanceof lc))return z();t={verify:gc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ci)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Er)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof li)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:t$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function V_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?He.updateTime(Ye(o.updateTime)):o.exists!==void 0?He.exists(o.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),u=new ci;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new wr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Er(h)}else"increment"in a?u=new li(s,a.increment):z();let l=Ke.fromServerFormat(a.fieldPath);return new co(l,u)}(n,i)):[];if(e.update){e.update.name;let i=qn(n,e.update.name),o=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Jt(l.map(h=>Ke.fromServerFormat(h)))}(e.updateMask);return new Tn(i,o,s,t,r)}return new di(i,o,t,r)}if(e.delete){let i=qn(n,e.delete);return new hi(i,t)}if(e.verify){let i=qn(n,e.verify);return new lc(i,t)}return z()}function i$(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ye(i.updateTime):Ye(o);return s.isEqual(J.min())&&(s=Ye(o)),new S_(s,i.transformResults||[])}(t,e))):[]}function _x(n,e){return{documents:[gx(n,e.path)]}}function wx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gx(n,i);let o=function(l){if(l.length!==0)return Dx(be.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Os(g.field),direction:s$(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=O_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function Ex(n){let e=mx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(f){let g=Ix(f);return g instanceof be&&aE(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(D){return new ao(ks(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Ac(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new Gn(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Gn(y,g)}(t.endAt)),KM(e,i,s,o,a,"F",u,l)}function o$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ix(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ks(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ks(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ks(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ks(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(ks(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>Ix(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function s$(n){return JB[n]}function a$(n){return XB[n]}function u$(n){return e$[n]}function Os(n){return{fieldPath:n.canonicalString()}}function ks(n){return Ke.fromServerFormat(n.fieldPath)}function Dx(n){return n instanceof fe?function(t){if(t.op==="=="){if(PS(t.value))return{unaryFilter:{field:Os(t.field),op:"IS_NAN"}};if(NS(t.value))return{unaryFilter:{field:Os(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PS(t.value))return{unaryFilter:{field:Os(t.field),op:"IS_NOT_NAN"}};if(NS(t.value))return{unaryFilter:{field:Os(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(t.field),op:a$(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>Dx(i));return r.length===1?r[0]:{compositeFilter:{op:u$(t.op),filters:r}}}(n):z()}function c$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Qs=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var af=class{constructor(e){this.ct=e}};function l$(n,e){let t;if(e.document)t=vx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=ho(e.noDocument.readTime);t=it.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=ho(e.unknownDocument.version);t=it.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Be(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),t}function ZS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:gc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ws(o,s.version.toTimestamp()),createTime:Ws(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lo(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:lo(e.version)}}return r}function uf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(n){let e=new Be(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function eo(n,e){let t=(e.baseMutations||[]).map(o=>V_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>V_(n.ct,o)),i=Be.fromMillis(e.localWriteTimeMs);return new dc(e.batchId,i,t,r)}function Ju(n){let e=ho(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ho(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),Nt(oa(mx(o.documents[0])))}(n.query):function(o){return Nt(Ex(o))}(n.query),new Qs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ze.fromBase64String(n.resumeToken))}function bx(n,e){let t=lo(e.snapshotVersion),r=lo(e.lastLimboFreeSnapshotVersion),i;i=ef(e.target)?_x(n.ct,e.target):wx(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hE(n){let e=Ex({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nf(e,e.limit,"L"):e}function Jv(n,e){return new hc(e.largestBatchId,V_(n.ct,e.overlayMutation))}function JS(n,e){let t=e.path.lastSegment();return[n,Rt(e.path.popLast()),t]}function XS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:lo(r.readTime),documentKey:Rt(r.documentKey.path),largestBatchId:r.largestBatchId}}var L_=class{getBundleMetadata(e,t){return eM(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:ho(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return eM(e).put(function(i){return{bundleId:i.id,createTime:lo(Ye(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return tM(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:hE(o.bundledQuery),readTime:ho(o.readTime)}}(r)})}saveNamedQuery(e,t){return tM(e).put(function(i){return{name:i.name,readTime:lo(Ye(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function eM(n){return ut(n,"bundles")}function tM(n){return ut(n,"namedQueries")}var cf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Wu(e).get(JS(this.userId,t)).next(r=>r?Jv(this.serializer,r):null)}getOverlays(e,t){let r=Bn();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new hc(t,s);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Rt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Wu(e).j("collectionPathOverlayIndex",a))}),A.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Bn(),o=Rt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Wu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Jv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Bn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let f=Jv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Wu(e).put(function(i,o,s){let[a,u,l]=JS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:mc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Wu(n){return ut(n,"documentOverlays")}var j_=class{Pt(e){return ut(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ze.fromUint8Array(r):Ze.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var yr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),oc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=_r(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(si(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?BM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):qf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};yr.vt=new yr;function d$(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nM(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=d$(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var U_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=nM(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=nM(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},B_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},$_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},to=class{constructor(){this.jt=new U_,this.Ht=new B_(this.jt),this.Jt=new $_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var no=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Jr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=rM(n.arrayValue,e.arrayValue),t!==0?t:(t=rM(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function rM(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var lf=class{constructor(e){this.Xt=new Me((t,r)=>Ke.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=c_(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ji(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Me(Ke.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ls(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ls(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ls(r.field,r.dir==="asc"?0:1)));return new $s($s.UNKNOWN_ID,this.collectionId,t,ic.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Tx(n){var e,t;if(K(n instanceof fe||n instanceof be),n instanceof fe){if(n instanceof Xh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>Tx(i));return be.create(r,n.op)}function h$(n){if(n.getFilters().length===0)return[];let e=z_(Tx(n));return K(Ax(e)),q_(e)||H_(e)?[e]:e.getFilters()}function q_(n){return n instanceof fe}function H_(n){return n instanceof be&&aE(n)}function Ax(n){return q_(n)||H_(n)||function(t){if(t instanceof be&&y_(t)){for(let r of t.getFilters())if(!q_(r)&&!H_(r))return!1;return!0}return!1}(n)}function z_(n){if(K(n instanceof fe||n instanceof be),n instanceof fe)return n;if(n.filters.length===1)return z_(n.filters[0]);let e=n.filters.map(r=>z_(r)),t=be.create(e,n.op);return t=df(t),Ax(t)?t:(K(t instanceof be),K(Hs(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>fE(r,i)))}function fE(n,e){let t;return K(n instanceof fe||n instanceof be),K(e instanceof fe||e instanceof be),t=n instanceof fe?e instanceof fe?function(i,o){return be.create([i,o],"and")}(n,e):iM(n,e):e instanceof fe?iM(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),Hs(i)&&Hs(o))return GM(i,o.getFilters());let s=y_(i)?i:o,a=y_(i)?o:i,u=s.filters.map(l=>fE(l,a));return be.create(u,"or")}(n,e),df(t)}function iM(n,e){if(Hs(e))return GM(e,n.getFilters());{let t=e.filters.map(r=>fE(n,r));return be.create(t,"or")}}function df(n){if(K(n instanceof fe||n instanceof be),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return df(e[0]);if(HM(n))return n;let t=e.map(i=>df(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var G_=class{constructor(){this.un=new yc}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(ln.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},yc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Me(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Me(ye.comparator)).toArray()}};var kh=new Uint8Array(0),W_=class{constructor(e,t){this.databaseId=t,this.cn=new yc,this.ln=new Wn(r=>uo(r),(r,i)=>Sc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Rt(i)};return oM(e).put(o)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[MM(t),""],!1,!0);return oM(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Un(s.parent))}return r})}addFieldIndex(e,t){let r=Qu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=xs(e);return o.next(a=>{s.put(XS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Qu(e),i=xs(e),o=Ms(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Qu(e),r=Ms(e),i=xs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new lf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ms(e),i=!0,o=new Map;return A.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=oe(),a=[];return A.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(u)} to execute ${uo(t)}`);let h=function(F,G){let ee=c_(G);if(ee===void 0)return null;for(let Y of tf(F,ee.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,u),f=function(F,G){let ee=new Map;for(let Y of Ji(G))for(let E of tf(F,Y.fieldPath))switch(E.op){case"==":case"in":ee.set(Y.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ee.set(Y.fieldPath.canonicalString(),E.value),Array.from(ee.values())}return null}(l,u),g=function(F,G){let ee=[],Y=!0;for(let E of Ji(G)){let v=E.kind===0?LS(F,E.fieldPath,F.startAt):jS(F,E.fieldPath,F.startAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new Gn(ee,Y)}(l,u),y=function(F,G){let ee=[],Y=!0;for(let E of Ji(G)){let v=E.kind===0?jS(F,E.fieldPath,F.endAt):LS(F,E.fieldPath,F.endAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new Gn(ee,Y)}(l,u),D=this.In(u,l,g),S=this.In(u,l,y),M=this.Tn(u,l,f),V=this.En(u.indexId,h,D,g.inclusive,S,y.inclusive,M);return A.forEach(V,H=>r.G(H,t.limit).next(F=>{F.forEach(G=>{let ee=$.fromSegments(G.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=h$(be.create(e.filters,"and")).map(r=>T_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):kh,y=this.An(e,g,r[f%l],i),D=this.Rn(e,g,o[f%l],s),S=a.map(M=>this.An(e,g,M,!0));h.push(...this.createRange(y,D,S))}return h}An(e,t,r,i){let o=new no(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new no(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new lf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Me(Ke.comparator),h=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new to;for(let i of Ji(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);yr.vt.It(o,s)}return r.zt()}dn(e){let t=new to;return yr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new to;return yr.vt.It(so(this.databaseId,t),r.Yt(function(o){let s=Ji(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new to);let o=0;for(let s of Ji(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&cc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);yr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new to;u.seed(a.zt()),yr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Qu(e),i=xs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,f){let g=f?new ic(f.sequenceNumber,new ln(ho(f.readTime),new $(Un(f.documentKey)),f.largestBatchId)):ic.empty(),y=h.fields.map(([D,S])=>new Ls(Ke.fromServerFormat(D),S));return new $s(h.indexId,h.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Qu(e),o=xs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,u=>o.put(XS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?A.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Ms(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ms(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ms(e),o=new Me(Jr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new no(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Me(Jr),i=this.Vn(t,e);if(i==null)return r;let o=c_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(cc(s))for(let a of s.arrayValue.values||[])r=r.add(new no(t.indexId,e.key,this.dn(a),i))}else r=r.add(new no(t.indexId,e.key,kh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,f,g){let y=u.getIterator(),D=l.getIterator(),S=Ss(y),M=Ss(D);for(;S||M;){let V=!1,H=!1;if(S&&M){let F=h(S,M);F<0?H=!0:F>0&&(V=!0)}else S!=null?H=!0:V=!0;V?(f(M),M=Ss(D)):H?(g(S),S=Ss(y)):(S=Ss(y),M=Ss(D))}}(i,o,Jr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),A.waitFor(s)}yn(e){let t=1;return xs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Jr(s,a)).filter((s,a,u)=>!a||Jr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Jr(s,e),u=Jr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,kh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,kh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Jr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sM)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(sM)}};function oM(n){return ut(n,"collectionParents")}function Ms(n){return ut(n,"indexEntries")}function Qu(n){return ut(n,"indexConfiguration")}function xs(n){return ut(n,"indexState")}function sM(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;rE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ln(e.readTime,e.documentKey,t)}var aM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},un=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Sx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,f,g)=>(a++,g.delete()));o.push(u.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let f=kM(e,h.key.path,t.batchId);o.push(i.delete(f)),l.push(h.key)}return A.waitFor(o).next(()=>l)}function hf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(41943040,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);var ff=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Fs(e),s=Xr(e);return s.add({}).next(a=>{K(typeof a=="number");let u=new dc(a,t,r,i),l=function(y,D,S){let M=S.baseMutations.map(H=>mc(y.ct,H)),V=S.mutations.map(H=>mc(y.ct,H));return{userId:D,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:M,mutations:V}}(this.serializer,this.userId,u),h=[],f=new Me((g,y)=>re(g.canonicalString(),y.canonicalString()));for(let g of i){let y=kM(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,vB))}return f.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),A.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Xr(e).get(t).next(r=>r?(K(r.userId===this.userId),eo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Xr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(K(a.batchId>=r),o=eo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Xr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).U("userMutationsIndex",t).next(r=>r.map(i=>eo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=jh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Fs(e).J({range:i},(s,a,u)=>{let[l,h,f]=s,g=Un(h);if(l===this.userId&&t.path.isEqual(g))return Xr(e).get(f).next(y=>{if(!y)throw z();K(y.userId===this.userId),o.push(eo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Me(re),i=[];return t.forEach(o=>{let s=jh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Fs(e).J({range:a},(l,h,f)=>{let[g,y,D]=l,S=Un(y);g===this.userId&&o.path.isEqual(S)?r=r.add(D):f.done()});i.push(u)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=jh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Me(re);return Fs(e).J({range:s},(u,l,h)=>{let[f,g,y]=u,D=Un(g);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Xr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(eo(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Fs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Un(o[1]);i.push(u)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return Mx(e,this.userId,t)}Nn(e){return xx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Mx(n,e,t){let r=jh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Fs(n).J({range:o,H:!0},(a,u,l)=>{let[h,f,g]=a;h===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Xr(n){return ut(n,"mutations")}function Fs(n){return ut(n,"documentMutations")}function xx(n){return ut(n,"mutationQueues")}var Ks=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Q_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ks(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>J.fromTimestamp(new Be(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Rs(e).J((s,a)=>{let u=Ju(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Rs(e).J((r,i)=>{let o=Ju(i);t(o)})}qn(e){return uM(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return uM(e).put("targetGlobalKey",t)}Kn(e,t){return Rs(e).put(bx(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=uo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Rs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Ju(a);Sc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=ei(e);return t.forEach(s=>{let a=Rt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=ei(e);return A.forEach(t,o=>{let s=Rt(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=ei(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ei(e),o=oe();return i.J({range:r,H:!0},(s,a,u)=>{let l=Un(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Rt(t.path),i=IDBKeyRange.bound([r],[MM(r)],!1,!0),o=0;return ei(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Rs(e).get(t).next(r=>r?Ju(r):null)}};function Rs(n){return ut(n,"targets")}function uM(n){return ut(n,"targetGlobal")}function ei(n){return ut(n,"targetDocuments")}function cM([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var K_=class{constructor(e){this.Un=e,this.buffer=new Me(cM),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Y_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){gi(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield pi(t)}yield this.Hn(3e5)}))}},Z_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(Zt.oe);let r=new K_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(aM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aM):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Ns()<=Mn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function f$(n,e){return new Z_(n,e)}var J_=class{constructor(e,t){this.db=e,this.garbageCollector=f$(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Fh(e,r)}removeReference(e,t,r){return Fh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Fh(e,t)}nr(e,t){return function(i,o){let s=!1;return xx(i).Y(a=>Mx(i,a,o).next(u=>(u&&(s=!0),A.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),ei(e).delete(function(f){return[0,Rt(f.path)]}(s))))});i.push(u)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Fh(e,t)}tr(e,t){let r=ei(e),i,o=Zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Zt.oe&&t(new $(Un(i)),o),o=l,i=u):o=Zt.oe}).next(()=>{o!==Zt.oe&&t(new $(Un(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Fh(n,e){return ei(n).put(function(r,i){return{targetId:0,path:Rt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var pf=class{constructor(){this.changes=new Wn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var X_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zi(e).put(r)}removeEntry(e,t,r){return Zi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],uf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=it.newInvalidDocument(t);return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ku(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:it.newInvalidDocument(t)};return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ku(t))},(i,o)=>{r={document:this.ir(t,o),size:hf(o)}}).next(()=>r)}getEntries(e,t){let r=Bt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Bt(),i=new Oe($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,hf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new Me(hM);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ku(i.first()),Ku(i.last())),s=i.getIterator(),a=s.getNext();return Zi(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&hM(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Ku(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Bt();for(let f of l){let g=this.ir($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(xc(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Bt(),s=dM(t,r),a=dM(t,ln.max());return Zi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let f=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new ew(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lM(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return lM(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=l$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return it.newInvalidDocument(e)}};function Rx(n){return new X_(n)}var ew=class extends pf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Wn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Me((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=ZS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=hf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=ZS(this.cr.serializer,s.convertToNoDocument(J.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function lM(n){return ut(n,"remoteDocumentGlobal")}function Zi(n){return ut(n,"remoteDocumentsV14")}function Ku(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dM(n,e){let t=e.documentKey.path.toArray();return[n,uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hM(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var tw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var gf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&tc(r.mutation,i,Jt.empty(),Be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=oe()){let i=Bn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Zu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Bn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Bt(),s=ec(),a=function(){return ec()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Tn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),tc(h.mutation,l,h.mutation.getFieldMask(),Be.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var f;return a.set(l,new tw(h,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ec(),i=new Oe((s,a)=>s-a),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Jt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let f=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,f=tx();h.forEach(g=>{if(!o.has(g)){let y=ux(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(Bn()),a=-1,u=o;return s.next(l=>A.forEach(l,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(h=>({batchId:a,changes:ex(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Zu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Zu();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,u=>{let l=function(f,g){return new bn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,it.newInvalidDocument(h)))});let a=Zu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&tc(h.mutation,l,Jt.empty(),Be.now()),xc(t,l)&&(a=a.insert(u,l))}),a})}};var nw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ye(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:hE(i.bundledQuery),readTime:Ye(i.readTime)}}(t)),A.resolve()}};var rw=class{constructor(){this.overlays=new Oe($.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Bn();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=Bn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Bn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Bn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new hc(t,r));let o=this.Ir.get(t);o===void 0&&(o=oe(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var iw=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var vc=class{constructor(){this.Tr=new Me(tt.Er),this.dr=new Me(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new tt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ye([])),r=new tt(t,e),i=new tt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ye([])),r=new tt(t,e),i=new tt(t,e+1),o=oe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new tt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var ow=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Me(tt.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new dc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new tt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Me(re);return t.forEach(i=>{let o=new tt(i,0),s=new tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new tt(new $(o),0),a=new Me(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let o=new tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new tt(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var sw=class{constructor(e){this.Mr=e,this.docs=function(){return new Oe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():it.newInvalidDocument(t))}getEntries(e,t){let r=Bt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():it.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Bt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||rE(RM(h),r)<=0||(i.has(h.key)||xc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aw(this)}getSize(e){return A.resolve(this.size)}},aw=class extends pf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var uw=class{constructor(e){this.persistence=e,this.Nr=new Wn(t=>uo(t),Sc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vc,this.targetCount=0,this.kr=Ks.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ks(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var mf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Zt(0),this.Kr=!1,this.Kr=!0,this.$r=new iw,this.referenceDelegate=e(this),this.Ur=new uw(this),this.indexManager=new G_,this.remoteDocumentCache=function(i){return new sw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new af(t),this.Gr=new nw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new ow(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new cw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},cw=class extends Qh{constructor(e){super(),this.currentSequenceNumber=e}},yf=class n{constructor(e){this.persistence=e,this.Jr=new vc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var lw=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Kh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SS,{unique:!0}),u.createObjectStore("documentMutations")}(e),fM(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),fM(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SS,{unique:!0});let f=l.store("mutations"),g=h.map(y=>f.put(y));return A.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:xB});l.createIndex("collectionPathOverlayIndex",RB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",NB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:_B});l.createIndex("documentKeyIndex",wB),l.createIndex("collectionGroupIndex",EB)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:TB}).createIndex("sequenceNumberIndex",AB,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:SB}).createIndex("documentKeyIndex",MB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=hf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>A.forEach(a,u=>{K(u.userId===o.userId);let l=eo(this.serializer,u);return Sx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ye(s),l=function(f){return[0,Rt(f)]}(u);o.push(t.get(l).next(h=>h?A.resolve():(f=>t.put({targetId:0,path:Rt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>A.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:bB});let r=t.store("collectionParents"),i=new yc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Rt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ye(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Un(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Ju(i),s=bx(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new $(ye.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Rx(this.serializer),o=new mf(yf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:oe();eo(this.serializer,u).keys().forEach(f=>h=h.add(f)),a.set(u.userId,h)}),A.forEach(a,(u,l)=>{let h=new nt(l),f=cf.lt(this.serializer,h),g=o.getIndexManager(h),y=ff.lt(h,this.serializer,g,o.referenceDelegate);return new gf(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new sc(t,Zt.oe),u).next()})})}};function fM(n){n.createObjectStore("targetDocuments",{keyPath:DB}).createIndex("documentTargetsIndex",CB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IB,{unique:!0}),n.createObjectStore("targetGlobal")}var Xv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dw=class n{constructor(e,t,r,i,o,s,a,u,l,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new J_(this,i),this.Ai=t+"main",this.serializer=new af(u),this.Ri=new oi(this.Ai,this.hi,new lw(this.serializer)),this.$r=new j_,this.Ur=new Q_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rx(this.serializer),this.Gr=new L_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Xv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(gi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Yu(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return Vh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ut(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):Yu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Xv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new sc(e,Zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Vh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return ff.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new W_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?kB:u===16?OB:u===15?oE:u===14?LM:u===13?VM:u===12?PB:u===11?FM:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new sc(a,this.Qr?this.Qr.next():Zt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,NM);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Yu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Xv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yu(e).put("owner",t)}static D(){return oi.D()}bi(e){let t=Yu(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;$p()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Yu(n){return ut(n,"owner")}function Vh(n){return ut(n,"clientMetadata")}function pE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var hw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=oe(),i=oe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var fw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var vf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $p()?8:PM(Va())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new fw;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ns()<=Mn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Ps(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(Ns()<=Mn.DEBUG&&O("QueryEngine","Query:",Ps(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ns()<=Mn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Ps(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nt(t))):A.resolve())}Yi(e,t){if(US(t))return A.resolve(null);let r=Nt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=nf(t,null,"F"),r=Nt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,nf(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return US(t)||i.isEqual(J.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?A.resolve(null):(Ns()<=Mn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ps(t)),this.rs(e,s,t,xM(i,-1)).next(a=>a))})}ts(e,t){let r=new Me(JM(e));return t.forEach((i,o)=>{xc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ns()<=Mn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Ps(t)),this.Ji.getDocumentsMatchingQuery(e,t,ln.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var pw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Oe(re),this._s=new Wn(o=>uo(o),Sc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Nx(n,e,t,r){return new pw(n,e,t,r)}function Px(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=oe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function p$(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let f=l.batch,g=f.keys(),y=A.resolve();return g.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(S=>{let M=l.docVersions.get(D);K(M!==null),S.version.compareTo(M)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Ox(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function g$(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ze.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(S,M,V){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(g,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=Bt(),l=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(kx(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(J.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function kx(n,e,t){let r=oe(),i=oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Bt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function m$(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ys(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Qs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Zs(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!gi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function _f(n,e,t){let r=B(n),i=J.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let f=B(u),g=f._s.get(h);return g!==void 0?A.resolve(f.os.get(g)):f.Ur.getTargetData(l,h)}(r,s,Nt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:oe())).next(a=>(Lx(r,ZM(e),a),{documents:a,Ts:o})))}function Fx(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Vx(n,e){let t=B(n),r=t.us.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,xM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Lx(t,e,i),i))}function Lx(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function y$(n,e,t,r){return N(this,null,function*(){let i=B(n),o=oe(),s=Bt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Ys(i,function(h){return Nt(oa(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>kx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function v$(r,i){return N(this,arguments,function*(n,e,t=oe()){let o=yield Ys(n,Nt(hE(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ye(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ze.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function pM(n,e){return`firestore_clients_${n}_${e}`}function gM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function e_(n,e){return`firestore_targets_${n}_${e}`}var wf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ef=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=cE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=OM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},gw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Qe("SharedClientState",`Failed to parse online state: ${e}`),null)}},_c=class{constructor(){this.activeTargetIds=cE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},rc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Oe(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=pM(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new _c),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(pM(this.persistenceKey,r));if(i){let o=Ef.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(e_(this.persistenceKey,e));if(i){let o=nc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(e_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Zt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Qe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new wf(this.currentUser,e,t,r),o=gM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=gM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=e_(this.persistenceKey,e),o=new nc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Ef.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return wf.Rs(new nt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return nc.Rs(i,t)}Ls(e){return gw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=cE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},If=class{constructor(){this.so=new _c,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _c,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mw=class{_o(e){}shutdown(){}};var Df=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Lh=null;function t_(){return Lh===null?Lh=function(){return 268435456+Math.round(2147483648*Math.random())}():Lh++,"0x"+Lh.toString(16)}var _$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var It="WebChannelConnection",vw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=t_(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw cn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ia}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=_$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=t_();return new Promise((s,a)=>{let u=new Gv;u.setWithCredentials(!0),u.listenOnce(Qv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gu.NO_ERROR:let h=u.getResponseJson();O(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Gu.TIMEOUT:O(It,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:let f=u.getStatus();if(O(It,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let D=function(M){let V=M.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(V)>=0?V:x.UNKNOWN}(y.status);a(new P(D,y.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{O(It,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(It,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=t_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Zv(),a=Yv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Wv({})),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(It,`Creating RPC '${e}' stream ${i}: ${h}`,u);let f=s.createWebChannel(h,u),g=!1,y=!1,D=new yw({Io:M=>{y?O(It,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(g||(O(It,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(It,`RPC '${e}' stream ${i} sending:`,M),f.send(M))},To:()=>f.close()}),S=(M,V,H)=>{M.listen(V,F=>{try{H(F)}catch(G){setTimeout(()=>{throw G},0)}})};return S(f,As.EventType.OPEN,()=>{y||(O(It,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),S(f,As.EventType.CLOSE,()=>{y||(y=!0,O(It,`RPC '${e}' stream ${i} transport closed`),D.So())}),S(f,As.EventType.ERROR,M=>{y||(y=!0,cn(It,`RPC '${e}' stream ${i} transport errored:`,M),D.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),S(f,As.EventType.MESSAGE,M=>{var V;if(!y){let H=M.data[0];K(!!H);let F=H,G=F.error||((V=F[0])===null||V===void 0?void 0:V.error);if(G){O(It,`RPC '${e}' stream ${i} received error:`,G);let ee=G.status,Y=function(w){let I=et[w];if(I!==void 0)return dx(I)}(ee),E=G.message;Y===void 0&&(Y=x.INTERNAL,E="Unknown error status: "+ee+" with message "+G.message),y=!0,D.So(new P(Y,E)),f.close()}else O(It,`RPC '${e}' stream ${i} received:`,H),D.bo(H)}}),S(a,Kv.STAT_EVENT,M=>{M.stat===Oh.PROXY?O(It,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Oh.NOPROXY&&O(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function jx(){return typeof window<"u"?window:null}function qh(){return typeof document<"u"?document:null}function Rc(n){return new P_(n,!0)}var wc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Cf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Qe(t.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_w=class extends Cf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=r$(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Ye(s.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=F_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=ef(u)?{documents:_x(o,u)}:{query:wx(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=fx(o,s.resumeToken);let l=O_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Ws(o,s.snapshotVersion.toTimestamp());let l=O_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=o$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=F_(this.serializer),t.removeTarget=e,this.a_(t)}},ww=class extends Cf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=i$(e.writeResults,e.commitTime),r=Ye(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=F_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>mc(this.serializer,r))};this.a_(t)}};var Ew=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,k_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,k_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Iw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qe(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Dw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){mi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.L_.add(4),yield sa(l),l.q_.set("Unknown"),l.L_.delete(4),yield Nc(l)})}(this))}))}),this.q_=new Iw(r,i)}};function Nc(n){return N(this,null,function*(){if(mi(n))for(let e of n.B_)yield e(!0)})}function sa(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Hf(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),yE(t)?mE(t):ua(t).r_()&&gE(t,e))}function Js(n,e){let t=B(n),r=ua(t);t.N_.delete(e),r.r_()&&Ux(t,e),t.N_.size===0&&(r.r_()?r.o_():mi(t)&&t.q_.set("Unknown"))}function gE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ua(n).A_(e)}function Ux(n,e){n.Q_.xe(e),ua(n).R_(e)}function mE(n){n.Q_=new N_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ua(n).start(),n.q_.v_()}function yE(n){return mi(n)&&!ua(n).n_()&&n.N_.size>0}function mi(n){return B(n).L_.size===0}function Bx(n){n.Q_=void 0}function w$(n){return N(this,null,function*(){n.q_.set("Online")})}function E$(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{gE(n,e)})})}function I$(n,e){return N(this,null,function*(){Bx(n),yE(n)?(n.q_.M_(e),mE(n)):n.q_.set("Unknown")})}function D$(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof of&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bf(n,r)}else if(e instanceof Us?n.Q_.Ke(e):e instanceof rf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield Ox(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),Ux(o,u);let f=new Qs(h.target,u,l,h.sequenceNumber);gE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield bf(n,r)}})}function bf(n,e,t){return N(this,null,function*(){if(!gi(e))throw e;n.L_.add(1),yield sa(n),n.q_.set("Offline"),t||(t=()=>Ox(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Nc(n)}))})}function $x(n,e){return e().catch(t=>bf(n,t,e))}function aa(n){return N(this,null,function*(){let e=B(n),t=fi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;C$(e);)try{let i=yield m$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,b$(e,i)}catch(i){yield bf(e,i)}qx(e)&&Hx(e)})}function C$(n){return mi(n)&&n.O_.length<10}function b$(n,e){n.O_.push(e);let t=fi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qx(n){return mi(n)&&!fi(n).n_()&&n.O_.length>0}function Hx(n){fi(n).start()}function T$(n){return N(this,null,function*(){fi(n).p_()})}function A$(n){return N(this,null,function*(){let e=fi(n);for(let t of n.O_)e.m_(t.mutations)})}function S$(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=M_.from(r,e,t);yield $x(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield aa(n)})}function M$(n,e){return N(this,null,function*(){e&&fi(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return lx(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();fi(r).s_(),yield $x(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield aa(r)}})}(n,e)),qx(n)&&Hx(n)})}function mM(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=mi(t);t.L_.add(3),yield sa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Nc(t)})}function Cw(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield Nc(t)):e||(t.L_.add(2),yield sa(t),t.q_.set("Unknown"))})}function ua(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new _w(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:w$.bind(null,n),Ro:E$.bind(null,n),mo:I$.bind(null,n),d_:D$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),yE(n)?mE(n):n.q_.set("Unknown")):(yield n.K_.stop(),Bx(n))}))),n.K_}function fi(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new ww(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:T$.bind(null,n),mo:M$.bind(null,n),f_:A$.bind(null,n),g_:S$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield aa(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var bw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ca(n,e){if(Qe("AsyncQueue",`${e}: ${n}`),gi(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Tf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Zu(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Af=class{constructor(){this.W_=new Oe($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Xs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Tf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Tw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Aw=class{constructor(){this.queries=yM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=yM(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function yM(){return new Wn(n=>YM(n),Mc)}function vE(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Tw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ca(s,`Initialization of query '${Ps(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&wE(t)})}function _E(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function x$(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&wE(t)}function R$(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function wE(n){n.Y_.forEach(e=>{e.next()})}var Sw,vM;(vM=Sw||(Sw={})).ea="default",vM.Cache="cache";var Ec=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sw.Cache}};var Mw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Sf=class{constructor(e){this.serializer=e}Es(e){return qn(this.serializer,e)}ds(e){return e.metadata.exists?vx(this.serializer,e.document,!1):it.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ye(e)}},xw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Sf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||oe()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield y$(this.localStore,new Sf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield v$(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function zx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Mf=class{constructor(e){this.key=e}},xf=class{constructor(e){this.key=e}},Rf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=JM(e),this.Ra=new Tf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Af,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{let g=i.get(h),y=xc(this.query,f)?f:null,D=!!g&&this.mutatedKeys.has(g.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;g&&y?g.data.isEqual(y.data)?D!==S&&(r.track({type:3,doc:y}),M=!0):this.ga(g,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),M=!0):g&&!y&&(r.track({type:1,doc:g}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,f)=>function(y,D){let S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return S(y)-S(D)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Xs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Af,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new xf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Mf(r))}),t}ba(e){this.Ta=e.Ts,this.da=oe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Xs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Rw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Nw=class{constructor(e){this.key=e,this.va=!1}},Pw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Wn(a=>YM(a),Mc),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe($.comparator),this.Na=new Map,this.La=new vc,this.Ba={},this.ka=new Map,this.qa=Ks.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function N$(n,e,t=!0){return N(this,null,function*(){let r=zf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Gx(r,e,t,!0),i})}function P$(n,e){return N(this,null,function*(){let t=zf(n);yield Gx(t,e,!0,!1)})}function Gx(n,e,t,r){return N(this,null,function*(){let i=yield Ys(n.localStore,Nt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield EE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Hf(n.remoteStore,i),a})}function EE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,g,y)=>function(S,M,V,H){return N(this,null,function*(){let F=M.view.ma(V);F.ns&&(F=yield _f(S.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,F)));let G=H&&H.targetChanges.get(M.targetId),ee=H&&H.targetMismatches.get(M.targetId)!=null,Y=M.view.applyChanges(F,S.isPrimaryClient,G,ee);return Ow(S,M.targetId,Y.wa),Y.snapshot})}(n,f,g,y);let o=yield _f(n.localStore,e,!0),s=new Rf(e,o.Ts),a=s.ma(o.documents),u=pc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Ow(n,t,l.wa);let h=new Rw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function O$(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Mc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Js(r.remoteStore,i.targetId),ea(r,i.targetId)}).catch(pi))):(ea(r,i.targetId),yield Zs(r.localStore,i.targetId,!0))})}function k$(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Js(t.remoteStore,r.targetId))})}function F$(n,e,t){return N(this,null,function*(){let r=bE(n);try{let i=yield function(s,a){let u=B(s),l=Be.now(),h=a.reduce((y,D)=>y.add(D.key),oe()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Bt(),S=oe();return u.cs.getEntries(y,h).next(M=>{D=M,D.forEach((V,H)=>{H.isValidDocument()||(S=S.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{f=M;let V=[];for(let H of a){let F=YB(H,f.get(H.key).overlayedDocument);F!=null&&V.push(new Tn(H.key,F,qM(F.value.mapValue),He.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(M=>{g=M;let V=M.applyToLocalDocumentSet(f,S);return u.documentOverlayCache.saveOverlays(y,M.batchId,V)})}).then(()=>({batchId:g.batchId,changes:ex(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Oe(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Cr(r,i.changes),yield aa(r.remoteStore)}catch(i){let o=ca(i,"Failed to persist write");t.reject(o)}})}function Wx(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield g$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield Cr(t,r,e)}catch(r){yield pi(r)}})}function _M(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((h,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&wE(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function V$(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Oe($.comparator);s=s.insert(o,it.newNoDocument(o,J.min()));let a=oe().add(o),u=new fc(J.min(),new Map,new Oe(re),s,a);yield Wx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),CE(r)}else yield Zs(r.localStore,e,!1).then(()=>ea(r,e,t)).catch(pi)})}function L$(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield p$(t.localStore,e);DE(t,r,null),IE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Cr(t,i)}catch(i){yield pi(i)}})}function j$(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(K(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);DE(r,e,t),IE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Cr(r,i)}catch(i){yield pi(i)}})}function U$(n,e){return N(this,null,function*(){let t=B(n);mi(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ca(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function IE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function DE(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ea(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Qx(n,r)})}function Qx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Js(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),CE(n))}function Ow(n,e,t){for(let r of t)r instanceof Mf?(n.La.addReference(r.key,e),B$(n,r)):r instanceof xf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Qx(n,r.key)):z()}function B$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),CE(n))}function CE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ye.fromString(e)),r=n.qa.next();n.Na.set(r,new Nw(t)),n.Oa=n.Oa.insert(t,r),Hf(n.remoteStore,new Qs(Nt(oa(t.path)),r,"TargetPurposeLimboResolution",Zt.oe))}}function Cr(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=hw.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=B(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>A.forEach(l,g=>A.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>A.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!gi(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=h.os.get(g),D=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(g,S)}}})}(r.localStore,o))})}function $$(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield Px(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Cr(t,r.hs)}})}function q$(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return oe().add(r.key);{let i=oe(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function H$(n,e){return N(this,null,function*(){let t=B(n),r=yield _f(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Ow(t,e.targetId,i.wa),i})}function z$(n,e){return N(this,null,function*(){let t=B(n);return Vx(t.localStore,e).then(r=>Cr(t,r))})}function G$(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):A.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield aa(i.remoteStore):t==="acknowledged"||t==="rejected"?(DE(i,e,r||null),IE(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield Cr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function W$(n,e){return N(this,null,function*(){let t=B(n);if(zf(t),bE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield wM(t,r.toArray());t.Qa=!0,yield Cw(t.remoteStore,!0);for(let o of i)Hf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ea(t,s),Zs(t.localStore,s,!0))),Js(t.remoteStore,s)}),yield i,yield wM(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{Js(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Oe($.comparator)}(t),t.Qa=!1,yield Cw(t.remoteStore,!1)}})}function wM(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Ys(r.localStore,Nt(u[0]));for(let l of u){let h=r.Fa.get(l),f=yield H$(r,h);f.snapshot&&o.push(f.snapshot)}}else{let l=yield Fx(r.localStore,s);a=yield Ys(r.localStore,l),yield EE(r,Kx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Kx(n){return KM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Q$(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function K$(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Vx(i.localStore,ZM(o[0])),a=fc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ze.EMPTY_BYTE_STRING);yield Cr(i,s,a);break}case"rejected":yield Zs(i.localStore,e,!0),ea(i,e,r);break;default:z()}})}function Y$(n,e,t){return N(this,null,function*(){let r=zf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield Fx(r.localStore,i),s=yield Ys(r.localStore,o);yield EE(r,Kx(o),s.targetId,!1,s.resumeToken),Hf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Zs(r.localStore,i,!1).then(()=>{Js(r.remoteStore,i),ea(r,i)}).catch(pi))}})}function zf(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V$.bind(null,e),e.Ca.d_=x$.bind(null,e.eventManager),e.Ca.$a=R$.bind(null,e.eventManager),e}function bE(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j$.bind(null,e),e}function Z$(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let S=B(y),M=Ye(D.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",V=>S.Gr.getBundleMetadata(V,D.id)).then(V=>!!V&&V.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(zx(u));let l=new xw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let g=yield l.la(h);g&&a._updateProgress(g),h=yield s.Ua()}let f=yield l.complete();return yield Cr(o,f.Ia,void 0),yield function(y,D){let S=B(y);return S.persistence.runTransaction("Save bundle","readwrite",M=>S.Gr.saveBundleMetadata(M,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return cn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Ic=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Nx(this.persistence,new vf,e.initialUser,this.serializer)}createPersistence(e){return new mf(yf.Zr,this.serializer)}createSharedClientState(e){return new If}terminate(){return N(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Nf=class n extends Ic{constructor(e,t,r){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Up(n.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield bE(this.Wa.syncEngine),yield aa(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return Nx(this.persistence,new vf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Y_(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new f_(t,this.persistence);return new h_(e.asyncQueue,r)}createPersistence(e){let t=pE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new dw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jx(),qh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new If}},kw=class n extends Nf{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Up(n.prototype,this,"initialize").call(this,e);let t=this.Wa.syncEngine;this.sharedClientState instanceof rc&&(this.sharedClientState.syncEngine={no:G$.bind(null,t),ro:K$.bind(null,t),io:Y$.bind(null,t),Qi:Q$.bind(null,t),eo:z$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield W$(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=jx();if(!rc.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=pE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Dc=class{initialize(e,t){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_M(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$$.bind(null,this.syncEngine),yield Cw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Aw}()}createDatastore(e){let t=Rc(e.databaseInfo.databaseId),r=function(o){return new vw(o)}(e.databaseInfo);return function(o,s,a,u){return new Ew(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new Dw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>_M(this.syncEngine,t,0),function(){return Df.D()?new Df:new mw}())}createSyncEngine(e,t){return function(i,o,s,a,u,l,h){let f=new Pw(i,o,s,a,u,l);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return N(this,null,function*(){var e,t;yield function(i){return N(this,null,function*(){let o=B(i);O("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield sa(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};function EM(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ta=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Fw=class{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let t=this.Ha.decode(e),r=Number(t);isNaN(r)&&this.Za(`length string (${t}) is not valid number`);let i=yield this.Xa(r);return new Mw(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let t=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Vw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>gc(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=n$(s.serializer,f);l.set(g.key.toString(),g)});let h=[];return o.forEach(f=>{let g=l.get(f.toString());K(!!g),h.push(g)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new lc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>mc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?He.exists(!1):He.updateTime(t):He.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(t)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Lw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.nu=r.maxAttempts,this.t_=new wc(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new Vw(this.datastore),t=this.su(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let t=this.updateFunction(e);return!Ac(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lx(t)}return!1}};var jw=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=Gh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){O("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ca(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Hh(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Px(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Uw(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield TE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mM(e.remoteStore,i)),n._onlineComponents=e})}function Yx(n){return n.name==="FirebaseError"?n.code===x.FAILED_PRECONDITION||n.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function TE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!Yx(t))throw t;cn("Error using user provided cache. Falling back to memory cache: "+t),yield Hh(n,new Ic)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Hh(n,new Ic);return n._offlineComponents})}function Gf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield Uw(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield Uw(n,new Dc))),n._onlineComponents})}function Zx(n){return TE(n).then(e=>e.persistence)}function AE(n){return TE(n).then(e=>e.localStore)}function Jx(n){return Gf(n).then(e=>e.remoteStore)}function SE(n){return Gf(n).then(e=>e.syncEngine)}function J$(n){return Gf(n).then(e=>e.datastore)}function na(n){return N(this,null,function*(){let e=yield Gf(n),t=e.eventManager;return t.onListen=N$.bind(null,e.syncEngine),t.onUnlisten=O$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=k$.bind(null,e.syncEngine),t})}function X$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Zx(n),t=yield Jx(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),Nc(o)}(t)}))}function eq(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Zx(n),t=yield Jx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield sa(o),o.q_.set("Offline")})}(t)}))}function tq(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let f=B(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ca(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield AE(n),e,t)})),t.promise}function Xx(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ta({next:g=>{s.enqueueAndForget(()=>_E(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Ec(oa(a.path),h,{includeMetadataChanges:!0,_a:!0});return vE(o,f)}(yield na(n),n.asyncQueue,e,t,r)})),r.promise}function nq(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield _f(i,o,!0),u=new Rf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=ca(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield AE(n),e,t)})),t.promise}function eR(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ta({next:g=>{s.enqueueAndForget(()=>_E(o,f)),g.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Ec(a,h,{includeMetadataChanges:!0,_a:!0});return vE(o,f)}(yield na(n),n.asyncQueue,e,t,r)})),r.promise}function rq(n,e){let t=new ta(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield na(n),t)})),()=>{t.za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield na(n),t)}))}}function iq(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?hx().encode(s):s,function(h,f){return new Fw(h,f)}(function(h,f){if(h instanceof Uint8Array)return EM(h,f);if(h instanceof ArrayBuffer)return EM(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Rc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){Z$(yield SE(n),i,r)}))}function oq(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield AE(n),e)}))}function tR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var IM=new Map;function ME(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xE(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DM(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CM(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wf(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nR(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Pf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new n_;switch(r.type){case"firstParty":return new s_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=IM.get(t);r&&(O("ComponentProvider","Removing Datastore"),IM.delete(t),r.terminate())}(this),Promise.resolve()}};function rR(n,e,t,r={}){var i;let o=(n=ve(n,fo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&cn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=nt.MOCK_USER;else{a=cD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nt(l)}n._authCredentials=new r_(new zh(a,u))}}var mt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Re=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Hn=class n extends mt{constructor(e,t,r){super(e,t,oa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function RE(n,e,...t){if(n=Ve(n),ME("collection","path",e),n instanceof fo){let r=ye.fromString(e,...t);return CM(r),new Hn(n,null,r)}{if(!(n instanceof Re||n instanceof Hn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return CM(r),new Hn(n.firestore,null,r)}}function iR(n,e){if(n=ve(n,fo),ME("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mt(n,null,function(r){return new bn(ye.emptyPath(),r)}(e))}function Pc(n,e,...t){if(n=Ve(n),arguments.length===1&&(e=Gh.newId()),ME("doc","path",e),n instanceof fo){let r=ye.fromString(e,...t);return DM(r),new Re(n,null,new $(r))}{if(!(n instanceof Re||n instanceof Hn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return DM(r),new Re(n.firestore,n instanceof Hn?n.converter:null,new $(r))}}function NE(n,e){return n=Ve(n),e=Ve(e),(n instanceof Re||n instanceof Hn)&&(e instanceof Re||e instanceof Hn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function PE(n,e){return n=Ve(n),e=Ve(e),n instanceof mt&&e instanceof mt&&n.firestore===e.firestore&&Mc(n._query,e._query)&&n.converter===e.converter}var Bw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new wc(this,"async_queue_retry"),this.Eu=()=>{let t=qh();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=qh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new rt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!gi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=bw.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&z()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function $w(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var qw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var oR=-1,Fe=class extends fo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Bw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sR(this),this._firestoreClient.terminate()}};function ct(n){return n._firestoreClient||sR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new p_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,tR(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new jw(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function aR(n,e){mR(n=ve(n,Fe));let t=ct(n);if(t._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");cn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new Dc;return cR(t,i,new Nf(i,r.cacheSizeBytes,e?.forceOwnership))}function uR(n){mR(n=ve(n,Fe));let e=ct(n);if(e._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");cn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new Dc;return cR(e,r,new kw(r,t.cacheSizeBytes))}function cR(n,e,t){let r=new rt;return n.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Hh(n,t),yield Uw(n,e),r.resolve()}catch(i){let o=i;if(!Yx(o))throw o;cn("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function lR(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!oi.D())return Promise.resolve();let i=r+"main";yield oi.delete(i)})}(pE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function dR(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return U$(yield SE(t),r)})),r.promise}(ct(n=ve(n,Fe)))}function hR(n){return X$(ct(n=ve(n,Fe)))}function fR(n){return eq(ct(n=ve(n,Fe)))}function pR(n,e){let t=ct(n=ve(n,Fe)),r=new qw;return iq(t,n._databaseId,e,r),r}function gR(n,e){return oq(ct(n=ve(n,Fe)),e).then(t=>t?new mt(n,null,t.query):null)}function mR(n){if(n._initialized||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ze.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var An=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ir=class{constructor(e){this._methodName=e}};var po=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Cc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var sq=/^__.*__$/,Hw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tn(e,this.data,this.fieldMask,t,this.fieldTransforms):new di(e,this.data,t,this.fieldTransforms)}},Of=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function yR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var kf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Ff(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(yR(this.wu)&&sq.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},zw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Rc(e)}Nu(e,t,r,i=!1){return new kf({wu:e,methodName:t,Ou:r,path:Ke.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function vo(n){let e=n._freezeSettings(),t=Rc(n._databaseId);return new zw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qf(n,e,t,r,i,o={}){let s=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);FE("Data must be an object, but it was:",s,r);let a=wR(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let f of o.mergeFields){let g=Yw(e,f,t);if(!s.contains(g))throw new P(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);IR(h,g)||h.push(g)}u=new Jt(h),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new Hw(new Dt(a),u,l)}var bc=class n extends Ir{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function vR(n,e,t){return new kf({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Gw=class n extends Ir{_toFieldTransform(e){return new co(e.path,new ci)}isEqual(e){return e instanceof n}},Ww=class n extends Ir{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=vR(this,e,!0),r=this.Lu.map(o=>_o(o,t)),i=new wr(r);return new co(e.path,i)}isEqual(e){return e instanceof n&&qp(this.Lu,e.Lu)}},Qw=class n extends Ir{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=vR(this,e,!0),r=this.Lu.map(o=>_o(o,t)),i=new Er(r);return new co(e.path,i)}isEqual(e){return e instanceof n&&qp(this.Lu,e.Lu)}},Kw=class n extends Ir{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){let t=new li(e.serializer,rx(e.serializer,this.Bu));return new co(e.path,t)}isEqual(e){return e instanceof n&&this.Bu===e.Bu}};function OE(n,e,t,r){let i=n.Nu(1,e,t);FE("Data must be an object, but it was:",i,r);let o=[],s=Dt.empty();yo(r,(u,l)=>{let h=VE(e,u,t);l=Ve(l);let f=i.Cu(h);if(l instanceof bc)o.push(h);else{let g=_o(l,f);g!=null&&(o.push(h),s.set(h,g))}});let a=new Jt(o);return new Of(s,a,i.fieldTransforms)}function kE(n,e,t,r,i,o){let s=n.Nu(1,e,t),a=[Yw(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Yw(e,o[g])),u.push(o[g+1]);let l=[],h=Dt.empty();for(let g=a.length-1;g>=0;--g)if(!IR(l,a[g])){let y=a[g],D=u[g];D=Ve(D);let S=s.Cu(y);if(D instanceof bc)l.push(y);else{let M=_o(D,S);M!=null&&(l.push(y),h.set(y,M))}}let f=new Jt(l);return new Of(h,f,s.fieldTransforms)}function _R(n,e,t,r=!1){return _o(t,n.Nu(r?4:3,e))}function _o(n,e){if(ER(n=Ve(n)))return FE("Unsupported field value:",e,n),wR(n,e);if(n instanceof Ir)return function(r,i){if(!yR(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=_o(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Be.fromDate(r);return{timestampValue:Ws(i.serializer,o)}}if(r instanceof Be){let o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ws(i.serializer,o)}}if(r instanceof po)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:fx(i.serializer,r._byteString)};if(r instanceof Re){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return lE(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Wf(r)}`)}(n,e)}function wR(n,e){let t={};return jM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(n,(r,i)=>{let o=_o(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ER(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Be||n instanceof po||n instanceof Qn||n instanceof Re||n instanceof Ir||n instanceof Cc)}function FE(n,e,t){if(!ER(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Wf(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function Yw(n,e,t){if((e=Ve(e))instanceof An)return e._internalPath;if(typeof e=="string")return VE(n,e);throw Ff("Field path arguments must be of type string or ",n,!1,void 0,t)}var aq=new RegExp("[~\\*/\\[\\]]");function VE(n,e,t){if(e.search(aq)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new An(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ff(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function IR(n,e){return n.some(t=>t.isEqual(e))}var go=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Zw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Kf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Zw=class extends go{data(){return super.data()}};function Kf(n,e){return typeof e=="string"?VE(n,e):e instanceof An?e._internalPath:e._delegate._internalPath}function DR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Tc=class{},mo=class extends Tc{};function br(n,e,...t){let r=[];e instanceof Tc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Jw).length,a=o.filter(u=>u instanceof Vf).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Vf=class n extends mo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return PR(e._query,t),new mt(e.firestore,e.converter,A_(e._query,t))}_parse(e){let t=vo(e.firestore);return function(o,s,a,u,l,h,f){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){TM(f,h);let y=[];for(let D of f)y.push(bM(u,o,D));g={arrayValue:{values:y}}}else g=bM(u,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||TM(f,h),g=_R(a,s,f,h==="in"||h==="not-in");return fe.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function CR(n,e,t){let r=e,i=Kf("where",n);return Vf._create(i,r,t)}var Jw=class n extends Tc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:be.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)PR(s,u),s=A_(s,u)}(e._query,t),new mt(e.firestore,e.converter,A_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Xw=class n extends mo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(o,s)}(e._query,this._field,this._direction);return new mt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new bn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function bR(n,e="asc"){let t=e,r=Kf("orderBy",n);return Xw._create(r,t)}var Lf=class n extends mo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new mt(e.firestore,e.converter,nf(e._query,this._limit,this._limitType))}};function TR(n){return nR("limit",n),Lf._create("limit",n,"F")}function AR(n){return nR("limitToLast",n),Lf._create("limitToLast",n,"L")}var jf=class n extends mo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=NR(e,this.type,this._docOrFields,this._inclusive);return new mt(e.firestore,e.converter,function(i,o){return new bn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function SR(...n){return jf._create("startAt",n,!0)}function MR(...n){return jf._create("startAfter",n,!1)}var Uf=class n extends mo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=NR(e,this.type,this._docOrFields,this._inclusive);return new mt(e.firestore,e.converter,function(i,o){return new bn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function xR(...n){return Uf._create("endBefore",n,!1)}function RR(...n){return Uf._create("endAt",n,!0)}function NR(n,e,t,r){if(t[0]=Ve(t[0]),t[0]instanceof go)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let f of js(o))if(f.field.isKeyField())h.push(so(s,u.key));else{let g=u.data.field(f.field);if($f(g))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new Gn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=vo(n.firestore);return function(s,a,u,l,h,f){let g=s.explicitOrderBy;if(h.length>g.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let S=h[D];if(g[D].field.isKeyField()){if(typeof S!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!uE(s)&&S.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let M=s.path.child(ye.fromString(S));if(!$.isDocumentKey(M))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let V=new $(M);y.push(so(a,V))}else{let M=_R(u,l,S);y.push(M)}}return new Gn(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function bM(n,e,t){if(typeof(t=Ve(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uE(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return so(n,new $(r))}if(t instanceof Re)return so(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(t)}.`)}function TM(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ra=class{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return yo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Cc(o)}convertGeoPoint(e){return new po(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=sE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){let t=_r(e);return new Be(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);K(Cx(r));let i=new ai(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Qe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Yf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var eE=class extends ra{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};var vr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dn=class extends go{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ri(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Kf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ri=class extends dn{data(e={}){return super.data(e)}},Sn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ri(this._firestore,this._userDataWriter,r.key,r,new vr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ri(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ri(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:uq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function uq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function LE(n,e){return n instanceof dn&&e instanceof dn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sn&&e instanceof Sn&&n._firestore===e._firestore&&PE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function OR(n){n=ve(n,Re);let e=ve(n.firestore,Fe);return Xx(ct(e),n._key).then(t=>$E(e,n,t))}var Dr=class extends ra{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};function kR(n){n=ve(n,Re);let e=ve(n.firestore,Fe),t=ct(e),r=new Dr(e);return tq(t,n._key).then(i=>new dn(e,r,n._key,i,new vr(i!==null&&i.hasLocalMutations,!0),n.converter))}function FR(n){n=ve(n,Re);let e=ve(n.firestore,Fe);return Xx(ct(e),n._key,{source:"server"}).then(t=>$E(e,n,t))}function VR(n){n=ve(n,mt);let e=ve(n.firestore,Fe),t=ct(e),r=new Dr(e);return DR(n._query),eR(t,n._query).then(i=>new Sn(e,r,n,i))}function LR(n){n=ve(n,mt);let e=ve(n.firestore,Fe),t=ct(e),r=new Dr(e);return nq(t,n._query).then(i=>new Sn(e,r,n,i))}function jR(n){n=ve(n,mt);let e=ve(n.firestore,Fe),t=ct(e),r=new Dr(e);return eR(t,n._query,{source:"server"}).then(i=>new Sn(e,r,n,i))}function jE(n,e,t){n=ve(n,Re);let r=ve(n.firestore,Fe),i=Yf(n.converter,e,t);return la(r,[Qf(vo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,He.none())])}function UE(n,e,t,...r){n=ve(n,Re);let i=ve(n.firestore,Fe),o=vo(i),s;return s=typeof(e=Ve(e))=="string"||e instanceof An?kE(o,"updateDoc",n._key,e,t,r):OE(o,"updateDoc",n._key,e),la(i,[s.toMutation(n._key,He.exists(!0))])}function UR(n){return la(ve(n.firestore,Fe),[new hi(n._key,He.none())])}function BR(n,e){let t=ve(n.firestore,Fe),r=Pc(n),i=Yf(n.converter,e);return la(t,[Qf(vo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function BE(n,...e){var t,r,i;n=Ve(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$w(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if($w(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,h;if(n instanceof Re)l=ve(n.firestore,Fe),h=oa(n._key.path),u={next:f=>{e[s]&&e[s]($E(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ve(n,mt);l=ve(f.firestore,Fe),h=f._query;let g=new Dr(l);u={next:y=>{e[s]&&e[s](new Sn(l,g,f,y))},error:e[s+1],complete:e[s+2]},DR(n._query)}return function(g,y,D,S){let M=new ta(S),V=new Ec(y,M,D);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return vE(yield na(g),V)})),()=>{M.za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return _E(yield na(g),V)}))}}(ct(l),h,a,u)}function $R(n,e){return rq(ct(n=ve(n,Fe)),$w(e)?e:{next:e})}function la(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return F$(yield SE(r),i,o)})),o.promise}(ct(n),e)}function $E(n,e,t){let r=t.docs.get(e._key),i=new Dr(n);return new dn(n,i,e._key,r,new vr(t.hasPendingWrites,t.fromCache),e.converter)}var cq={maxAttempts:5};var Bf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vo(e)}set(e,t,r){this._verifyNotCommitted();let i=ti(e,this._firestore),o=Yf(i.converter,t,r),s=Qf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,He.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=ti(e,this._firestore),s;return s=typeof(t=Ve(t))=="string"||t instanceof An?kE(this._dataReader,"WriteBatch.update",o._key,t,r,i):OE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=ti(e,this._firestore);return this._mutations=this._mutations.concat(new hi(t._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ti(n,e){if((n=Ve(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var tE=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=vo(t)}get(t){let r=ti(t,this._firestore),i=new eE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new go(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new go(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=ti(t,this._firestore),s=Yf(o.converter,r,i),a=Qf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=ti(t,this._firestore),a;return a=typeof(r=Ve(r))=="string"||r instanceof An?kE(this._dataReader,"Transaction.update",s._key,r,i,o):OE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=ti(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=ti(e,this._firestore),r=new Dr(this._firestore);return super.get(e).then(i=>new dn(this._firestore,r,t._key,i._document,new vr(!1,!1),t.converter))}};function qR(n,e,t){n=ve(n,Fe);let r=Object.assign(Object.assign({},cq),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new rt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield J$(o);new Lw(o.asyncQueue,l,a,s,u).ru()})),u.promise}(ct(n),i=>e(new tE(n,i)),r)}function HR(){return new bc("deleteField")}function zR(){return new Gw("serverTimestamp")}function GR(...n){return new Ww("arrayUnion",n)}function WR(...n){return new Qw("arrayRemove",n)}function QR(n){return new Kw("increment",n)}(function(e,t=!0){(function(i){ia=i})(hD),La(new Ei("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Fe(new i_(r.getProvider("auth-internal")),new u_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ai(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),xr(bS,"4.7.2",e),xr(bS,"4.7.2","esm2017")})();var lq="@firebase/firestore-compat",dq="0.3.37";function QE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KR(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function YR(){if(!UM())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Zf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return YR(),new n(Qn.fromBase64String(e))}static fromUint8Array(e){return KR(),new n(Qn.fromUint8Array(e))}toBase64(){return YR(),this._delegate.toBase64()}toUint8Array(){return KR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function qE(n){return hq(n,["next","error","complete"])}function hq(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var HE=class{enableIndexedDbPersistence(e,t){return aR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return uR(e._delegate)}clearIndexedDbPersistence(e){return lR(e._delegate)}},Jf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){rR(this._delegate,e,t,r)}enableNetwork(){return hR(this._delegate)}disableNetwork(){return fR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return dR(this._delegate)}onSnapshotsInSync(e){return $R(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fa(this,RE(this._delegate,e))}catch(t){throw Pt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Kn(this,Pc(this._delegate,e))}catch(t){throw Pt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Do(this,iR(this._delegate,e))}catch(t){throw Pt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return qR(this._delegate,t=>e(new Xf(this,t)))}batch(){return ct(this._delegate),new ep(new Bf(this._delegate,e=>la(this._delegate,e)))}loadBundle(e){return pR(this._delegate,e)}namedQuery(e){return gR(this._delegate,e).then(t=>t?new Do(this,t):null)}},da=class extends ra{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zf(new Qn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Kn.forKey(t,this.firestore,null)}};function fq(n){AM(n)}var Xf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new da(e)}get(e){let t=wo(e);return this._delegate.get(t).then(r=>new Eo(this._firestore,new dn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=wo(e);return r?(QE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=wo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=wo(e);return this._delegate.delete(t),this}},ep=class{constructor(e){this._delegate=e}set(e,t,r){let i=wo(e);return r?(QE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=wo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=wo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},ha=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new ri(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Io(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new da(e),t),i.set(t,o)),o}};ha.INSTANCES=new WeakMap;var Kn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new da(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Re(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Re(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fa(this.firestore,RE(this._delegate,e))}catch(t){throw Pt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ve(e),e instanceof Re?NE(this._delegate,e):!1}set(e,t){t=QE("DocumentReference.set",t);try{return t?jE(this._delegate,e,t):jE(this._delegate,e)}catch(r){throw Pt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?UE(this._delegate,e):UE(this._delegate,e,t,...r)}catch(i){throw Pt(i,"updateDoc()","DocumentReference.update()")}}delete(){return UR(this._delegate)}onSnapshot(...e){let t=ZR(e),r=JR(e,i=>new Eo(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return BE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=kR(this._delegate):e?.source==="server"?t=FR(this._delegate):t=OR(this._delegate),t.then(r=>new Eo(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ha.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Pt(n,e,t){return n.message=n.message.replace(e,t),n}function ZR(n){for(let e of n)if(typeof e=="object"&&!qE(e))return e;return{}}function JR(n,e){var t,r;let i;return qE(n[0])?i=n[0]:qE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Eo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LE(this._delegate,e._delegate)}},Io=class extends Eo{data(e){let t=this._delegate.data(e);return this._delegate._converter||SM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Do=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new da(e)}where(e,t,r){try{return new n(this.firestore,br(this._delegate,CR(e,t,r)))}catch(i){throw Pt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,br(this._delegate,bR(e,t)))}catch(r){throw Pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,br(this._delegate,TR(e)))}catch(t){throw Pt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,br(this._delegate,AR(e)))}catch(t){throw Pt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,br(this._delegate,SR(...e)))}catch(t){throw Pt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,br(this._delegate,MR(...e)))}catch(t){throw Pt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,br(this._delegate,xR(...e)))}catch(t){throw Pt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,br(this._delegate,RR(...e)))}catch(t){throw Pt(t,"endAt()","Query.endAt()")}}isEqual(e){return PE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=LR(this._delegate):e?.source==="server"?t=jR(this._delegate):t=VR(this._delegate),t.then(r=>new Oc(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=ZR(e),r=JR(e,i=>new Oc(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return BE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ha.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},zE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Io(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Oc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Do(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Io(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Io(this._firestore,r))})}isEqual(e){return LE(this._delegate,e._delegate)}},fa=class n extends Do{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Kn(this.firestore,e):null}doc(e){try{return e===void 0?new Kn(this.firestore,Pc(this._delegate)):new Kn(this.firestore,Pc(this._delegate,e))}catch(t){throw Pt(t,"doc()","CollectionReference.doc()")}}add(e){return BR(this._delegate,e).then(t=>new Kn(this.firestore,t))}isEqual(e){return NE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ha.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function wo(n){return ve(n,Re)}var GE=class n{constructor(...e){this._delegate=new An(...e)}static documentId(){return new n(Ke.keyField().canonicalString())}isEqual(e){return e=Ve(e),e instanceof An?this._delegate._internalPath.isEqual(e._internalPath):!1}};var WE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=zR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=HR();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=GR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=WR(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=QR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var pq={Firestore:Jf,GeoPoint:po,Timestamp:Be,Blob:Zf,Transaction:Xf,WriteBatch:ep,DocumentReference:Kn,DocumentSnapshot:Eo,Query:Do,QueryDocumentSnapshot:Io,QuerySnapshot:Oc,CollectionReference:fa,FieldPath:GE,FieldValue:WE,setLogLevel:fq,CACHE_SIZE_UNLIMITED:oR};function gq(n,e){n.INTERNAL.registerComponent(new Ei("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},pq)))}function mq(n){gq(n,(e,t)=>new Jf(e,t,new HE)),n.registerVersion(lq,dq)}mq(ze);function yq(n,e=Ha){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function XR(n,e){return yq(n,e)}function vq(n,e){return XR(n,e).pipe(Ti(void 0),Ga(),X(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function ZE(n,e){return XR(n,e).pipe(X(t=>({payload:t,type:"query"})))}var tp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=iN(r,t);return new rp(i,o,this.afs)}snapshotChanges(){return vq(this.ref,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return this.snapshotChanges().pipe(X(({payload:t})=>e.idField?de(j({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ge(this.ref.get(e)).pipe(Ut)}};function np(n,e){return ZE(n,e).pipe(Ti(void 0),Ga(),X(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function eN(n,e,t){return np(n,t).pipe(bi((r,i)=>_q(r,i.map(o=>o.payload),e),[]),hg(),X(r=>r.map(i=>({type:i.type,payload:i}))))}function _q(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=wq(n,r))}),n}function KE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function wq(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return KE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return KE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KE(n,e.oldIndex,1);break}return n}function tN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var rp=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=np(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(X(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ti(void 0),Ga(),lt(([r,i])=>i.length>0||!r),X(([,r])=>r),Ut)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=tN(e);return eN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return ZE(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.payload.docs.map(r=>e.idField?de(j({},r.data()),{[e.idField]:r.id}):r.data())),Ut)}get(e){return ge(this.query.get(e)).pipe(Ut)}add(e){return this.ref.add(e)}doc(e){return new tp(this.ref.doc(e),this.afs)}},YE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?np(this.query,this.afs.schedulers.outsideAngular).pipe(Ut):np(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),Ut)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=tN(e);return eN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return ZE(this.query,this.afs.schedulers.outsideAngular).pipe(X(r=>r.payload.docs.map(i=>e.idField?j({[e.idField]:i.id},i.data()):i.data())),Ut)}get(e){return ge(this.query.get(e)).pipe(Ut)}},nN=new q("angularfire2.enableFirestorePersistence"),rN=new q("angularfire2.firestore.persistenceSettings"),Eq=new q("angularfire2.firestore.settings"),Iq=new q("angularfire2.firestore.use-emulator");function iN(n,e=t=>t){return{query:e(n),ref:n}}var kc=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,f,g,y,D,S,M,V,H){this.schedulers=u;let F=zu(t,a,r),G=h;f&&Hv(F,a,g,D,S,M,y,V),[this.firestore,this.persistenceEnabled$]=Nh(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),G&&ee.useEmulator(...G),i&&!hr(s)){let Y=()=>{try{return ge(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Z(!1)}};return[ee,a.runOutsideAngular(Y)]}else return[ee,Z(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=iN(i,r),a=this.schedulers.ngZone.run(()=>o);return new rp(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new YE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new tp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(bs),L(Ts,8),L(nN,8),L(Eq,8),L(gt),L(pe),L(Mh),L(rN,8),L(Iq,8),L(IS,8),L(Lv,8),L(jv,8),L(Uv,8),L(Bv,8),L($v,8),L(qv,8),L(Yi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),oN=(()=>{class n{constructor(){ze.registerVersion("angularfire",Cs.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:nN,useValue:!0},{provide:rN,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=at({type:n});static \u0275inj=st({providers:[kc]})}return n})();var pN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ee(Hr),Ee(on))}}static{this.\u0275dir=Wt({type:n})}}return n})(),Dq=(()=>{class n extends pN{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=du(n)))(i||n)}})()}static{this.\u0275dir=Wt({type:n,features:[as]})}}return n})(),gN=new q("");var Cq={provide:gN,useExisting:ou(()=>ya),multi:!0};function bq(){let n=Ln()?Ln().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Tq=new q(""),ya=(()=>{class n extends pN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!bq())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ee(Hr),Ee(on),Ee(Tq,8))}}static{this.\u0275dir=Wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&sn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[yy([Cq]),as]})}}return n})();var Aq=new q(""),Sq=new q("");function mN(n){return n!=null}function yN(n){return Hi(n)?ge(n):n}function vN(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function _N(n,e){return e.map(t=>t(n))}function Mq(n){return!n.validate}function wN(n){return n.map(e=>Mq(e)?e:t=>e.validate(t))}function xq(n){if(!n)return null;let e=n.filter(mN);return e.length==0?null:function(t){return vN(_N(t,e))}}function EN(n){return n!=null?xq(wN(n)):null}function Rq(n){if(!n)return null;let e=n.filter(mN);return e.length==0?null:function(t){let r=_N(t,e).map(yN);return cg(r).pipe(X(vN))}}function IN(n){return n!=null?Rq(wN(n)):null}function aN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Nq(n){return n._rawValidators}function Pq(n){return n._rawAsyncValidators}function JE(n){return n?Array.isArray(n)?n:[n]:[]}function op(n,e){return Array.isArray(n)?n.includes(e):n===e}function uN(n,e){let t=JE(e);return JE(n).forEach(i=>{op(t,i)||t.push(i)}),t}function cN(n,e){return JE(e).filter(t=>!op(n,t))}var sp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=EN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=IN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},XE=class extends sp{get formDirective(){return null}get path(){return null}},Uc=class extends sp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},eI=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Oq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xQ=de(j({},Oq),{"[class.ng-submitted]":"isSubmitted"}),up=(()=>{class n extends eI{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ee(Uc,2))}}static{this.\u0275dir=Wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&py("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[as]})}}return n})();var Fc="VALID",ip="INVALID",pa="PENDING",Vc="DISABLED",ma=class{},ap=class extends ma{constructor(e,t){super(),this.value=e,this.source=t}},Lc=class extends ma{constructor(e,t){super(),this.pristine=e,this.source=t}},jc=class extends ma{constructor(e,t){super(),this.touched=e,this.source=t}},ga=class extends ma{constructor(e,t){super(),this.status=e,this.source=t}};function kq(n){return(cp(n)?n.validators:n)||null}function Fq(n){return Array.isArray(n)?EN(n):n||null}function Vq(n,e){return(cp(e)?e.asyncValidators:n)||null}function Lq(n){return Array.isArray(n)?IN(n):n||null}function cp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var tI=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Xd(()=>this.statusReactive()),this.statusReactive=Hd(void 0),this._pristine=Xd(()=>this.pristineReactive()),this.pristineReactive=Hd(!0),this._touched=Xd(()=>this.touchedReactive()),this.touchedReactive=Hd(!1),this._events=new Le,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Wr(this.statusReactive)}set status(e){Wr(()=>this.statusReactive.set(e))}get valid(){return this.status===Fc}get invalid(){return this.status===ip}get pending(){return this.status==pa}get disabled(){return this.status===Vc}get enabled(){return this.status!==Vc}get pristine(){return Wr(this.pristineReactive)}set pristine(e){Wr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Wr(this.touchedReactive)}set touched(e){Wr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cN(e,this._rawAsyncValidators))}hasValidator(e){return op(this._rawValidators,e)}hasAsyncValidator(e){return op(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new jc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new jc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Lc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Lc(!0,r))}markAsPending(e={}){this.status=pa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ga(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vc,this.errors=null,this._forEachChild(i=>{i.disable(de(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ap(this.value,r)),this._events.next(new ga(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fc,this._forEachChild(r=>{r.enable(de(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fc||this.status===pa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ap(this.value,t)),this._events.next(new ga(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vc:Fc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=yN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ga(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Vc:this.errors?ip:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pa)?pa:this._anyControlsHaveStatus(ip)?ip:Fc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Lc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Fq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Lq(this._rawAsyncValidators)}};var DN=new q("CallSetDisabledState",{providedIn:"root",factory:()=>nI}),nI="always";function jq(n,e){return[...e.path,n]}function Uq(n,e,t=nI){$q(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qq(n,e),zq(n,e),Hq(n,e),Bq(n,e)}function lN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function $q(n,e){let t=Nq(n);e.validator!==null?n.setValidators(aN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Pq(n);e.asyncValidator!==null?n.setAsyncValidators(aN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();lN(e._rawValidators,i),lN(e._rawAsyncValidators,i)}function qq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&CN(n,e)})}function Hq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&CN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function CN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Gq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Wq(n){return Object.getPrototypeOf(n.constructor)===Dq}function Qq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ya?t=o:Wq(o)?r=o:i=o}),i||r||t||null}function dN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Kq=class extends tI{constructor(e=null,t,r){super(kq(t),Vq(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(hN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){hN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Yq={provide:Uc,useExisting:ou(()=>Bc)},fN=Promise.resolve(),Bc=(()=>{class n extends Uc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Kq,this._registered=!1,this.name="",this.update=new Xe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Qq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Gq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Uq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){fN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Jd(r);fN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jq(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ee(XE,9),Ee(Aq,10),Ee(Sq,10),Ee(gN,10),Ee(zi,8),Ee(DN,8))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yy([Yq]),as,is]})}}return n})();var Zq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})();var bN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DN,useValue:t.callSetDisabledState??nI}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({imports:[Zq]})}}return n})();var Jq=["arrow"],Xq=n=>({spinning:n}),e4=n=>({transform:n});function t4(n,e){if(n&1){let t=pT();Ce(0,"li"),We(1),Ce(2,"button",21),sn("click",function(){let i=IC(t).index,o=lr();return DC(o.deleteName(i))}),We(3,"Delete"),Ie()()}if(n&2){let t=e.$implicit;xe(),Vn(" ",t," ")}}function n4(n,e){if(n&1&&(Ce(0,"div",22),We(1),Ie()),n&2){let t=e.$implicit,r=e.index,i=lr();xt("ngStyle",i.getDegreePosition(r,t)),xe(),Vn(" ",t," ")}}function r4(n,e){n&1&&(Ce(0,"div",23)(1,"p"),We(2,"Currently spinning, also Astro is sexy"),Ie()())}function i4(n,e){if(n&1&&(Ce(0,"div",23)(1,"h2",24),We(2),Ie(),Ce(3,"p",25),We(4),Ie()()),n&2){let t=lr();xe(2),mu("",t.selectedAsker," must ask ",t.selectedResponder,":"),xe(2),gu(t.selectedQuestion)}}function o4(n,e){if(n&1&&(Ce(0,"div",26),We(1),Ie()),n&2){let t=lr();xe(),Vn(" ",t.errorMessage," ")}}var lp=class n{constructor(e){this.firestore=e}rotationDegrees=0;spinning=!1;newName="";newQuestion="";manualDegree=0;names=[];questions=["What is your favorite hobby?","What's the most interesting place you've visited?","What is your dream job?","Who is your role model?","What is your favorite movie?","What is the weirdest food you've ever eaten?","If you could live anywhere in the world, where would it be?","What's one thing you couldn't live without?","What's your favorite book?","What's one thing you're afraid of?"];usedQuestions={};selectedQuestion="";selectedAsker="";selectedResponder="";questionHistory={};isHistoryLoaded=!1;recentResponders=[];errorMessage="";initialized=!1;arrowElement;ngOnInit(){this.firestore.collection("spins").doc("currentSpin").valueChanges().subscribe(e=>{e&&(this.rotationDegrees=e.rotationDegrees||0,this.selectedAsker=e.asker||"",this.selectedResponder=e.responder||"",this.selectedQuestion=e.question||"",this.initialized||(this.initialized=!0))}),this.firestore.collection("names").doc("currentNames").valueChanges().subscribe(e=>{e&&e.names&&(this.names=e.names)}),this.firestore.collection("questions").doc("currentQuestions").valueChanges().subscribe(e=>{e&&e.questions&&(this.questions=e.questions)}),this.firestore.collection("questionHistory").doc("history").valueChanges().subscribe(e=>{e&&e.history?(this.questionHistory=e.history,this.isHistoryLoaded=!0):this.isHistoryLoaded=!0}),this.firestore.collection("questions").doc("usedQuestions").get().subscribe(e=>{e.exists?this.firestore.collection("questions").doc("usedQuestions").valueChanges().subscribe(t=>{t&&t.usedQuestions&&(this.usedQuestions=t.usedQuestions)}):this.firestore.collection("questions").doc("usedQuestions").set({usedQuestions:{}})})}addQuestion(){this.newQuestion.trim()&&(this.questions.push(this.newQuestion),this.firestore.collection("questions").doc("currentQuestions").set({questions:ze.firestore.FieldValue.arrayUnion(this.newQuestion)},{merge:!0}),this.newQuestion="")}addName(){this.newName&&(this.firestore.collection("names").doc("currentNames").set({names:ze.firestore.FieldValue.arrayUnion(this.newName)},{merge:!0}),this.newName="")}deleteName(e){let t=this.names[e];this.firestore.collection("names").doc("currentNames").update({names:ze.firestore.FieldValue.arrayRemove(t)})}get remainingQuestions(){return this.questions.filter(e=>!this.usedQuestions[e]).length}rotateToDegree(){if(this.spinning)return;let t=(this.manualDegree+270)%360;this.rotationDegrees+=t,this.spinning=!0,this.firestore.collection("spins").doc("currentSpin").set({rotationDegrees:this.rotationDegrees}).then(()=>{this.spinning=!1}).catch(()=>{this.errorMessage="Failed to rotate manually. Please try again.",this.spinning=!1})}spin(){if(!this.isHistoryLoaded||this.spinning||!this.names||this.names.length<=1)return;this.spinning=!0,this.selectedQuestion="",this.selectedResponder="",this.selectedAsker="",this.errorMessage="";let e=Math.floor(Math.random()*this.names.length),t=this.names[e],i=360/this.names.length*e%360,o=this.rotationDegrees%360,s=(i-o+360)%360,a=this.rotationDegrees+360*5+s;this.rotationDegrees=a,this.firestore.collection("spins").doc("currentSpin").set({rotationDegrees:this.rotationDegrees,responder:t,asker:"",question:""}).catch(()=>{this.errorMessage="Failed to initiate spin. Please try again.",this.spinning=!1})}onSpinEnd(){if(this.spinning)try{let e=this.getSelectedName();this.selectedResponder=e;let t;do t=Math.floor(Math.random()*this.names.length);while(this.names[t]===e);this.selectedAsker=this.names[t],this.recentResponders.push(this.names.indexOf(e)),this.recentResponders.length>3&&this.recentResponders.shift();let r=this.questions.filter(s=>!this.usedQuestions[s]);if(r.length===0){this.selectedQuestion="No questions available.",this.spinning=!1;return}let i=r[Math.floor(Math.random()*r.length)];this.selectedQuestion=i,this.usedQuestions[i]=!0,this.deleteUsedQuestion(i),this.firestore.collection("spins").doc("currentSpin").update({asker:this.selectedAsker,question:this.selectedQuestion}).then(()=>{this.spinning=!1}).catch(()=>{this.errorMessage="Failed to update spin details. Please try again.",this.spinning=!1})}catch(e){console.error("Error in onSpinEnd:",e),this.errorMessage="An unexpected error occurred. Please try again.",this.spinning=!1}}getSelectedName(){let e=360/this.names.length,t=this.rotationDegrees%360,r=Math.floor((t+e/2)/e)%this.names.length;return this.names[r]}getDegreePosition(e,t){let i=360/this.names.length*e;return{transform:`rotate(${i}deg) translate(309px) rotate(-${i}deg)`}}markAllAsReadExceptOne(){if(this.questions.length<=1)return;let e=Math.floor(Math.random()*this.questions.length),t=this.questions[e],r={};this.questions.forEach(i=>{r[i]=i!==t}),this.usedQuestions=r,this.firestore.collection("questions").doc("usedQuestions").set(this.usedQuestions)}markAllAsUnread(){let e={};this.questions.forEach(t=>{e[t]=!1}),this.usedQuestions=e,this.firestore.collection("questions").doc("usedQuestions").set(e)}deleteUsedQuestion(e){this.questions=this.questions.filter(r=>r!==e),this.firestore.collection("questions").doc("currentQuestions").set({questions:ze.firestore.FieldValue.arrayRemove(e)},{merge:!0}).then(()=>{console.log(`Question "${e}" has been deleted successfully.`)}).catch(r=>{console.error("Error deleting the question:",r),this.errorMessage="Failed to delete the used question. Please try again."})}resetQuestions(){let e=["What is your favorite hobby?","What's the most interesting place you've visited?","What is your dream job?","Who is your role model?","What is your favorite movie?","What is the weirdest food you've ever eaten?","If you could live anywhere in the world, where would it be?","What's one thing you couldn't live without?","What's your favorite book?","What's one thing you're afraid of?"];this.questions=[...e],this.usedQuestions={},this.firestore.collection("questions").doc("currentQuestions").set({questions:e},{merge:!0}),this.firestore.collection("questions").doc("usedQuestions").set({usedQuestions:{}},{merge:!0}),console.log("All questions have been reset.")}static \u0275fac=function(t){return new(t||n)(Ee(kc))};static \u0275cmp=Br({type:n,selectors:[["app-arrow-spinner"]],viewQuery:function(t,r){if(t&1&&mT(Jq,5),t&2){let i;gy(i=my())&&(r.arrowElement=i.first)}},decls:31,vars:15,consts:[[1,"main-container"],[1,"input-section"],[1,"input-container"],["for","nameInput"],["id","nameInput","placeholder","Add name",3,"ngModelChange","ngModel"],[3,"click"],[1,"names-list"],[4,"ngFor","ngForOf"],[1,"circle-container"],[1,"spin-container",2,"margin-bottom","100px","margin-top","50px"],[3,"click","disabled"],[1,"circle"],[1,"center-circle"],[1,"arrow",3,"transitionend","ngClass","ngStyle"],["class","name-label",3,"ngStyle",4,"ngFor","ngForOf"],[1,"question-section"],[1,"question-input-section"],["for","questionInput"],["id","questionInput","placeholder","Add a question",3,"ngModelChange","ngModel"],["class","question-container",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"delete-button",3,"click"],[1,"name-label",3,"ngStyle"],[1,"question-container"],[1,"question-title"],[1,"question-text"],[1,"error-message"]],template:function(t,r){t&1&&(Ce(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),We(4,"Enter Names:"),Ie(),Ce(5,"input",4),cs("ngModelChange",function(o){return yu(r.newName,o)||(r.newName=o),o}),Ie(),Ce(6,"button",5),sn("click",function(){return r.addName()}),We(7,"Add Name"),Ie()(),Ce(8,"div",6)(9,"ul"),$i(10,t4,4,1,"li",7),Ie()()(),Ce(11,"div",8)(12,"div",9)(13,"button",10),sn("click",function(){return r.spin()}),We(14,"Spin"),Ie()(),Ce(15,"div",11),qi(16,"div",12),Ce(17,"div",13),sn("transitionend",function(){return r.onSpinEnd()}),Ie(),$i(18,n4,2,2,"div",14),Ie()(),Ce(19,"div",15)(20,"div",16)(21,"label",17),We(22,"Enter a New Question:"),Ie(),Ce(23,"input",18),cs("ngModelChange",function(o){return yu(r.newQuestion,o)||(r.newQuestion=o),o}),Ie(),Ce(24,"button",5),sn("click",function(){return r.addQuestion()}),We(25,"Add Question"),Ie(),Ce(26,"p"),We(27),Ie()(),$i(28,r4,3,0,"div",19)(29,i4,5,3,"div",19)(30,o4,2,1,"div",20),Ie()()),t&2&&(xe(5),us("ngModel",r.newName),xe(5),xt("ngForOf",r.names),xe(3),xt("disabled",r.spinning),xe(4),xt("ngClass",vy(11,Xq,r.spinning))("ngStyle",vy(13,e4,"rotate("+r.rotationDegrees+"deg)")),xe(),xt("ngForOf",r.names),xe(5),us("ngModel",r.newQuestion),xe(4),Vn("Remaining Questions: ",r.remainingQuestions,""),xe(),xt("ngIf",!r.selectedQuestion),xe(),xt("ngIf",r.selectedQuestion),xe(),xt("ngIf",r.errorMessage))},dependencies:[qT,HT,nh,zT,ya,up,Bc],styles:['.main-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;height:95.7vh;padding:20px;background-color:#1d1d1d;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;gap:20px}@media (max-width: 1200px){.main-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;overflow-y:auto}}.input-section[_ngcontent-%COMP%], .question-section[_ngcontent-%COMP%]{flex:1;min-width:250px;display:flex;flex-direction:column;align-items:center;background-color:#f2f2f2;padding:20px;border-radius:10px;box-shadow:0 4px 8px #00000080;color:#333}.input-section[_ngcontent-%COMP%]{min-width:300px;min-height:90vh}.question-section[_ngcontent-%COMP%]{min-width:500px;min-height:90vh}.input-container[_ngcontent-%COMP%], .question-input-section[_ngcontent-%COMP%], .manual-rotation-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center;width:100%}label[_ngcontent-%COMP%]{font-size:16px;font-weight:700}input[_ngcontent-%COMP%]{font-size:14px;padding:8px;border:1px solid #ccc;border-radius:5px;width:100%;background-color:#fff;color:#333;box-shadow:inset 0 1px 3px #0000001a}button[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;cursor:pointer;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#ff4736}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.delete-button[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff;border:none;border-radius:5px;padding:5px 10px;cursor:pointer;width:auto}.delete-button[_ngcontent-%COMP%]:hover{background-color:#ff1a1a}.names-list[_ngcontent-%COMP%]{margin-top:20px;font-size:14px;list-style:none;padding:0;width:100%}.names-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.names-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px 0;padding:8px;background-color:#dedede;border-radius:5px;color:#333;width:100%;display:flex;justify-content:space-between;align-items:center}.circle-container[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;min-width:300px}@media (max-width: 1200px){.circle-container[_ngcontent-%COMP%]{width:100%}}.spin-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;display:flex;justify-content:center}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:12px 25px;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease;width:150px}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff4736}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid #fff;border-radius:50%;width:24px;height:24px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-left:10px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.circle[_ngcontent-%COMP%]{position:relative;width:500px;height:500px;border:4px solid #ff6f61;border-radius:50%;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 20px #00000080;background-color:#292929}@media (max-width: 1200px){.circle[_ngcontent-%COMP%]{width:300px;height:300px}}@media (max-width: 768px){.circle[_ngcontent-%COMP%]{width:250px;height:250px}}.center-circle[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;background-color:#ff6f61;border-radius:50%;z-index:10;box-shadow:0 2px 8px #0000004d;top:50%;left:50%;transform:translate(-50%,-35%)}.arrow[_ngcontent-%COMP%]{position:absolute;width:200px;height:20px;background-color:#ff6f61;top:50%;left:50%;transform-origin:0 50%;transform:translateY(-50%)}.arrow.spinning[_ngcontent-%COMP%]{transition:transform 5s ease-out}.arrow[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;right:-30px;transform:translateY(-50%);width:0;height:0;border-left:30px solid #ff6f61;border-top:10px solid transparent;border-bottom:10px solid transparent}.name-label[_ngcontent-%COMP%]{position:absolute;font-size:18px;color:#ff6f61;font-weight:700;transform:translate(-50%,-50%);width:auto;text-align:center;word-wrap:break-word;white-space:normal;overflow:hidden;text-overflow:ellipsis}.name-label.long-name[_ngcontent-%COMP%]{font-size:14px}.question-container[_ngcontent-%COMP%]{background-color:#333;color:#ff6f61;padding:0 20px 20px;border-radius:10px;border:2px solid #ff6f61;box-shadow:0 4px 6px #0000004d;text-align:center;font-size:24px;font-weight:700;margin-top:30px;transition:all .3s ease-in-out}.question-container[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 6px 12px #0006}.question-title[_ngcontent-%COMP%]{margin-bottom:10px;font-size:28px;color:#fff}.question-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;white-space:normal;font-size:20px;color:#ff6f61}.question-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;white-space:normal}.question-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-weight:700}.error-message[_ngcontent-%COMP%]{color:#ff4d4d;background-color:#ffe6e6;padding:10px;border-radius:5px;margin-top:10px;font-weight:700}.delete-all-button[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff;border:none;border-radius:5px;padding:10px 20px;cursor:pointer;transition:background-color .3s ease;margin-top:10px;width:100%}.delete-all-button[_ngcontent-%COMP%]:hover{background-color:#ff1a1a}.delete-all-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}']})};function s4(n,e){if(n&1&&(Ce(0,"h2",9),We(1),Ie()),n&2){let t=lr();xe(),mu(" ",t.selectedAsker," must ask ",t.selectedResponder,": ")}}function a4(n,e){if(n&1&&(Ce(0,"p",10),We(1),Ie()),n&2){let t=lr();xe(),gu(t.selectedQuestion)}}function u4(n,e){n&1&&(Ce(0,"p",9),We(1,"Waiting for the spin to complete..."),Ie())}function c4(n,e){if(n&1&&(Ce(0,"p",11),We(1),Ie()),n&2){let t=lr();xe(),Vn(" All questions have been asked for ",t.selectedResponder,"! ")}}var dp=class n{constructor(e){this.firestore=e}selectedAsker="";selectedResponder="";selectedQuestion="";remainingQuestions=0;newQuestion="";questionHistory={};questions=[];ngOnInit(){this.updateRemainingQuestions(),this.firestore.collection("questionHistory").valueChanges().subscribe(e=>{console.log("history",e),e&&(this.questionHistory=e,this.firestore.collection("questions").doc("currentQuestions").valueChanges().subscribe(t=>{t&&t.questions&&(this.questions=t.questions,this.firestore.collection("spins").doc("currentSpin").valueChanges().subscribe(r=>{r&&(this.selectedAsker=r.asker,this.selectedResponder=r.responder,this.selectedQuestion=r.question,this.updateRemainingQuestions())}))}))})}addQuestion(){this.newQuestion.trim()&&(this.questions.push(this.newQuestion),this.firestore.collection("questions").doc("currentQuestions").set({questions:ze.firestore.FieldValue.arrayUnion(this.newQuestion)},{merge:!0}).then(()=>{console.log("Question added to Firestore")}).catch(t=>{console.error("Error adding question: ",t)}),this.newQuestion="")}updateRemainingQuestions(){if(console.log("this.selectedResponder",this.selectedResponder),console.log("this.questions.length",this.questions.length),this.selectedResponder&&typeof this.selectedResponder=="string"&&this.selectedResponder.trim()!==""&&this.questions.length>0){let e=this.selectedResponder.trim().toLowerCase();console.log("sanitizedResponder",e);let t=[];Array.isArray(this.questionHistory)&&this.questionHistory.forEach(i=>{i[e]&&(t=i[e])}),console.log("askedQuestions",t);let r=this.questions.filter(i=>!t.includes(i));console.log("remaining",r),this.remainingQuestions=r.length}else this.remainingQuestions=0}static \u0275fac=function(t){return new(t||n)(Ee(kc))};static \u0275cmp=Br({type:n,selectors:[["app-view-question"]],decls:12,vars:6,consts:[[1,"question-container"],[1,"question-card"],[2,"margin-bottom","2px"],[1,"question-input-section"],["id","questionInput","placeholder","Add a question",2,"margin-left","2px",3,"ngModelChange","ngModel"],[3,"click"],["class","question-header",4,"ngIf"],["class","question-text",4,"ngIf"],["class","remaining-questions",4,"ngIf"],[1,"question-header"],[1,"question-text"],[1,"remaining-questions"]],template:function(t,r){t&1&&(Ce(0,"div",0)(1,"div",1)(2,"div",2),We(3),Ie(),Ce(4,"div",3)(5,"input",4),cs("ngModelChange",function(o){return yu(r.newQuestion,o)||(r.newQuestion=o),o}),Ie(),Ce(6,"button",5),sn("click",function(){return r.addQuestion()}),We(7,"Add Question"),Ie()(),$i(8,s4,2,2,"h2",6)(9,a4,2,1,"p",7)(10,u4,2,0,"p",6)(11,c4,2,1,"p",8),Ie()()),t&2&&(xe(3),Vn(" Total questions: ",r.questions.length," "),xe(2),us("ngModel",r.newQuestion),xe(3),xt("ngIf",r.selectedQuestion),xe(),xt("ngIf",r.selectedQuestion),xe(),xt("ngIf",!r.selectedQuestion),xe(),xt("ngIf",r.remainingQuestions===0&&r.selectedResponder))},dependencies:[nh,ya,up,Bc],styles:[".question-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100vh;background-color:#1d1d1d;position:relative}.pointer-info[_ngcontent-%COMP%]{background-color:#292929;color:#fff;min-width:30vw;padding:10px 20px;border-radius:8px;margin-bottom:20px;font-size:18px;text-align:center;border:2px solid #ff6f61}.question-card[_ngcontent-%COMP%]{background-color:#292929;border:4px solid #ff6f61;border-radius:10px;padding:40px;box-shadow:0 4px 20px #00000080;color:#ff6f61;max-width:800px;width:80%;text-align:center;position:relative}.question-text[_ngcontent-%COMP%]{font-size:24px;line-height:1.5}.placeholder[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#fff}.input-section[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#f2f2f2;padding:30px;border-radius:10px;box-shadow:0 4px 8px #00000080;color:#333}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center;font-size:16px}input[_ngcontent-%COMP%]{font-size:14px;padding:8px;border:1px solid #ccc;border-radius:5px;width:200px;background-color:#fff;color:#333;box-shadow:inset 0 1px 3px #0000001a}button[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;cursor:pointer;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#ff4736}"]})};var l4=[{path:"",redirectTo:"/spinner",pathMatch:"full"},{path:"spinner",component:lp},{path:"question",component:dp}],hp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=at({type:n});static \u0275inj=st({imports:[Mv.forRoot(l4,{useHash:!0}),Mv]})};var fp=class n{title="spinArrowApp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Br({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&qi(0,"router-outlet")},dependencies:[Dv]})};var d4={apiKey:"AIzaSyB9ReI8QdMrvsi0gIXlT2CkfFaKWR8ukOE",authDomain:"spinbottleapp.firebaseapp.com",projectId:"spinbottleapp",storageBucket:"spinbottleapp.appspot.com",messagingSenderId:"285539728216",appId:"1:285539728216:web:a069b60b7bb7960410c32d"},pp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=at({type:n,bootstrap:[fp]});static \u0275inj=st({providers:[pA()],imports:[hA,bN,hp,ES.initializeApp(d4),oN]})};dA().bootstrapModule(pp,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
