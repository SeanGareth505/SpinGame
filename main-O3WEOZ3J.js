import{A as Ge,a as j,b as le,c as qI,d as jp,e as N,f as HI,g as nl,h as zI,i as GI,j as WI,k as Up,l as QI,m as ka,n as Bp,o as rl,p as KI,q as YI,r as $p,s as Ve,t as vi,u as Sn,v as il,w as Fa,x as ZI,y as JI,z as Sr}from"./chunk-LIK74K6L.js";function XI(n,e){return Object.is(n,e)}var it=null,ol=!1,sl=1,Zn=Symbol("SIGNAL");function _e(n){let e=it;return it=n,e}function eD(){return it}var La={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zp(n){if(ol)throw new Error("");if(it===null)return;it.consumerOnSignalRead(n);let e=it.nextProducerIndex++;if(ll(it),e<it.producerNode.length&&it.producerNode[e]!==n&&Va(it)){let t=it.producerNode[e];cl(t,it.producerIndexOfThis[e])}it.producerNode[e]!==n&&(it.producerNode[e]=n,it.producerIndexOfThis[e]=Va(it)?iD(n,it,e):0),it.producerLastReadVersion[e]=n.version}function BN(){sl++}function tD(n){if(!(Va(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===sl)){if(!n.producerMustRecompute(n)&&!Wp(n)){n.dirty=!1,n.lastCleanEpoch=sl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=sl}}function nD(n){if(n.liveConsumerNode===void 0)return;let e=ol;ol=!0;try{for(let t of n.liveConsumerNode)t.dirty||$N(t)}finally{ol=e}}function rD(){return it?.consumerAllowSignalWrites!==!1}function $N(n){n.dirty=!0,nD(n),n.consumerMarkedDirty?.(n)}function ul(n){return n&&(n.nextProducerIndex=0),_e(n)}function Gp(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Va(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)cl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Wp(n){ll(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(tD(t),r!==t.version))return!0}return!1}function Qp(n){if(ll(n),Va(n))for(let e=0;e<n.producerNode.length;e++)cl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iD(n,e,t){if(oD(n),n.liveConsumerNode.length===0&&sD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=iD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function cl(n,e){if(oD(n),n.liveConsumerNode.length===1&&sD(n))for(let r=0;r<n.producerNode.length;r++)cl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ll(i),i.producerIndexOfThis[r]=e}}function Va(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ll(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function oD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function sD(n){return n.producerNode!==void 0}function aD(n){let e=Object.create(qN);e.computation=n;let t=()=>{if(tD(e),zp(e),e.value===al)throw e.error;return e.value};return t[Zn]=e,t}var qp=Symbol("UNSET"),Hp=Symbol("COMPUTING"),al=Symbol("ERRORED"),qN=le(j({},La),{value:qp,dirty:!0,error:null,equal:XI,producerMustRecompute(n){return n.value===qp||n.value===Hp},producerRecomputeValue(n){if(n.value===Hp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Hp;let t=ul(n),r;try{r=n.computation()}catch(i){r=al,n.error=i}finally{Gp(n,t)}if(e!==qp&&e!==al&&r!==al&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function HN(){throw new Error}var uD=HN;function cD(){uD()}function lD(n){uD=n}var zN=null;function dD(n){let e=Object.create(fD);e.value=n;let t=()=>(zp(e),e.value);return t[Zn]=e,t}function Kp(n,e){rD()||cD(),n.equal(n.value,e)||(n.value=e,GN(n))}function hD(n,e){rD()||cD(),Kp(n,e(n.value))}var fD=le(j({},La),{equal:XI,value:void 0});function GN(n){n.version++,BN(),nD(n),zN?.()}function te(n){return typeof n=="function"}function Do(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var dl=Do(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function _i(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof dl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{pD(o)}catch(s){e=e??[],s instanceof dl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new dl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&_i(t,e)}remove(e){let{_finalizers:t}=this;t&&_i(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var Yp=He.EMPTY;function hl(n){return n instanceof He||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function pD(n){te(n)?n():n.unsubscribe()}var hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Co={setTimeout(n,e,...t){let{delegate:r}=Co;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Co;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fl(n){Co.setTimeout(()=>{let{onUnhandledError:e}=hn;if(e)e(n);else throw n})}function ja(){}var gD=Zp("C",void 0,void 0);function mD(n){return Zp("E",void 0,n)}function yD(n){return Zp("N",n,void 0)}function Zp(n,e,t){return{kind:n,value:e,error:t}}var wi=null;function bo(n){if(hn.useDeprecatedSynchronousErrorHandling){let e=!wi;if(e&&(wi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=wi;if(wi=null,t)throw r}}else n()}function vD(n){hn.useDeprecatedSynchronousErrorHandling&&wi&&(wi.errorThrown=!0,wi.error=n)}var Ei=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hl(e)&&e.add(this)):this.destination=KN}static create(e,t,r){return new Jn(e,t,r)}next(e){this.isStopped?Xp(yD(e),this):this._next(e)}error(e){this.isStopped?Xp(mD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xp(gD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},WN=Function.prototype.bind;function Jp(n,e){return WN.call(n,e)}var eg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pl(r)}else pl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pl(t)}}},Jn=class extends Ei{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&hn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jp(e.next,o),error:e.error&&Jp(e.error,o),complete:e.complete&&Jp(e.complete,o)}):i=e}this.destination=new eg(i)}};function pl(n){hn.useDeprecatedSynchronousErrorHandling?vD(n):fl(n)}function QN(n){throw n}function Xp(n,e){let{onStoppedNotification:t}=hn;t&&Co.setTimeout(()=>t(n,e))}var KN={closed:!0,next:ja,error:QN,complete:ja};var To=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tt(n){return n}function tg(...n){return ng(n)}function ng(n){return n.length===0?Tt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=ZN(t)?t:new Jn(t,r,i);return bo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_D(r),new r((i,o)=>{let s=new Jn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[To](){return this}pipe(...t){return ng(t)(this)}toPromise(t){return t=_D(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function _D(n){var e;return(e=n??hn.Promise)!==null&&e!==void 0?e:Promise}function YN(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function ZN(n){return n&&n instanceof Ei||YN(n)&&hl(n)}function rg(n){return te(n?.lift)}function se(n){return e=>{if(rg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new ig(n,e,t,r,i)}var ig=class extends Ei{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ao(){return se((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var So=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return Ao()(this)}};var wD=Do(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wD}next(t){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Yp:(this.currentObservers=null,o.push(t),new He(()=>{this.currentObservers=null,_i(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new gl(e,t),n})(),gl=class extends Le{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Yp}};var ft=class extends Le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ua={now(){return(Ua.delegate||Date).now()},delegate:void 0};var ml=class extends Le{constructor(e=1/0,t=1/0,r=Ua){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var yl=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Ba={setInterval(n,e,...t){let{delegate:r}=Ba;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ba;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Mo=class extends yl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ba.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ba.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,_i(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var xo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};xo.now=Ua.now;var Ro=class extends xo{constructor(e,t=xo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var $a=new Ro(Mo);var vl=class extends Mo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var _l=class extends Ro{};var og=new _l(vl);var At=new de(n=>n.complete());function ED(n){return n&&te(n.schedule)}function sg(n){return n[n.length-1]}function wl(n){return te(sg(n))?n.pop():void 0}function Mn(n){return ED(sg(n))?n.pop():void 0}function ID(n,e){return typeof sg(n)=="number"?n.pop():e}var El=n=>n&&typeof n.length=="number"&&typeof n!="function";function Il(n){return te(n?.then)}function Dl(n){return te(n[To])}function Cl(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function bl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function JN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tl=JN();function Al(n){return te(n?.[Tl])}function Sl(n){return zI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield nl(t.read());if(i)return yield nl(void 0);yield yield nl(r)}}finally{t.releaseLock()}})}function Ml(n){return te(n?.getReader)}function Re(n){if(n instanceof de)return n;if(n!=null){if(Dl(n))return XN(n);if(El(n))return eP(n);if(Il(n))return tP(n);if(Cl(n))return DD(n);if(Al(n))return nP(n);if(Ml(n))return rP(n)}throw bl(n)}function XN(n){return new de(e=>{let t=n[To]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eP(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function tP(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fl)})}function nP(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DD(n){return new de(e=>{iP(n,e).catch(t=>e.error(t))})}function rP(n){return DD(Sl(n))}function iP(n,e){var t,r,i,o;return HI(this,void 0,void 0,function*(){try{for(t=GI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Jt(n,e=0){return se((t,r)=>{t.subscribe(ae(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function fn(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function CD(n,e){return Re(n).pipe(fn(e),Jt(e))}function bD(n,e){return Re(n).pipe(fn(e),Jt(e))}function TD(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function AD(n,e){return new de(t=>{let r;return Pt(t,e,()=>{r=n[Tl](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function xl(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function SD(n,e){return xl(Sl(n),e)}function MD(n,e){if(n!=null){if(Dl(n))return CD(n,e);if(El(n))return TD(n,e);if(Il(n))return bD(n,e);if(Cl(n))return xl(n,e);if(Al(n))return AD(n,e);if(Ml(n))return SD(n,e)}throw bl(n)}function ge(n,e){return e?MD(n,e):Re(n)}function Z(...n){let e=Mn(n);return ge(n,e)}function No(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function ag(n){return!!n&&(n instanceof de||te(n.lift)&&te(n.subscribe))}var Xn=Do(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:oP}=Array;function sP(n,e){return oP(e)?n(...e):n(e)}function Rl(n){return X(e=>sP(n,e))}var{isArray:aP}=Array,{getPrototypeOf:uP,prototype:cP,keys:lP}=Object;function Nl(n){if(n.length===1){let e=n[0];if(aP(e))return{args:e,keys:null};if(dP(e)){let t=lP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function dP(n){return n&&typeof n=="object"&&uP(n)===cP}function Pl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qa(...n){let e=Mn(n),t=wl(n),{args:r,keys:i}=Nl(n);if(r.length===0)return ge([],e);let o=new de(hP(r,e,i?s=>Pl(i,s):Tt));return t?o.pipe(Rl(t)):o}function hP(n,e,t=Tt){return r=>{xD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)xD(e,()=>{let l=ge(n[u],e),h=!1;l.subscribe(ae(r,f=>{o[u]=f,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function xD(n,e,t){n?Pt(t,n,e):e()}function RD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,f=!1,m=()=>{f&&!u.length&&!l&&e.complete()},y=S=>l<r?D(S):u.push(S),D=S=>{o&&e.next(S),l++;let A=!1;Re(t(S,h++)).subscribe(ae(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let V=u.shift();s?Pt(e,s,()=>D(V)):D(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(ae(e,y,()=>{f=!0,m()})),()=>{a?.()}}function Je(n,e,t=1/0){return te(e)?Je((r,i)=>X((o,s)=>e(r,o,i,s))(Re(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>RD(r,i,n,t)))}function Mr(n=1/0){return Je(Tt,n)}function ND(){return Mr(1)}function Po(...n){return ND()(ge(n,Mn(n)))}function Ol(n){return new de(e=>{Re(n()).subscribe(e)})}function ug(...n){let e=wl(n),{args:t,keys:r}=Nl(n),i=new de(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let f=!1;Re(t[h]).subscribe(ae(o,m=>{f||(f=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Pl(r,a):a),o.complete())}))}});return e?i.pipe(Rl(e)):i}function cg(...n){let e=Mn(n),t=ID(n,1/0),r=n;return r.length?r.length===1?Re(r[0]):Mr(t)(ge(r,e)):At}function lt(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>n.call(e,o,i++)&&r.next(o)))})}function xr(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ae(t,void 0,void 0,s=>{o=Re(n(s,xr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function PD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ae(s,h=>{let f=l++;u=a?n(u,h,f):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Rr(n,e){return te(e)?Je(n,e,1):Je(n,1)}function Nr(n){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function er(n){return n<=0?()=>At:se((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function lg(n){return X(()=>n)}function dg(n,e=Tt){return n=n??fP,se((t,r)=>{let i,o=!0;t.subscribe(ae(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function fP(n,e){return n===e}function kl(n=pP){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function pP(){return new Xn}function Oo(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Bt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Tt,er(1),t?Nr(e):kl(()=>new Xn))}function ko(n){return n<=0?()=>At:se((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Tt,ko(1),t?Nr(e):kl(()=>new Xn))}function Ha(){return se((n,e)=>{let t,r=!1;n.subscribe(ae(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Ii(n,e){return se(PD(n,e,arguments.length>=2,!0))}function OD(n={}){let{connector:e=()=>new Le,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=f=!1},D=()=>{let S=s;y(),S?.unsubscribe()};return se((S,A)=>{l++,!f&&!h&&m();let V=u=u??e();A.add(()=>{l--,l===0&&!f&&!h&&(a=fg(D,i))}),V.subscribe(A),!s&&l>0&&(s=new Jn({next:B=>V.next(B),error:B=>{f=!0,m(),a=fg(y,t,B),V.error(B)},complete:()=>{h=!0,m(),a=fg(y,r),V.complete()}}),Re(S).subscribe(s))})(o)}}function fg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Jn({next:()=>{r.unsubscribe(),n()}});return Re(e(...t)).subscribe(r)}function Fl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,OD({connector:()=>new ml(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Di(...n){let e=Mn(n);return se((t,r)=>{(e?Po(n,t,e):Po(n,t)).subscribe(r)})}function je(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;Re(n(u,h)).subscribe(i=ae(r,f=>r.next(e?e(u,f,h,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Vl(n,e){return te(e)?je(()=>n,e):je(()=>n)}function pg(n){return se((e,t)=>{Re(n).subscribe(ae(t,()=>t.complete(),ja)),!t.closed&&e.subscribe(t)})}function We(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Tt}var gP="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,t){super(bd(e,t)),this.code=e}};function bd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function nu(n){return{toString:n}.toString()}var Ll="__parameters__";function mP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function I0(n,e,t){return nu(()=>{let r=mP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let f=u.hasOwnProperty(Ll)?u[Ll]:Object.defineProperty(u,Ll,{value:[]})[Ll];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var or=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function yP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Mt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function kD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var vP=Ae({__forward_ref__:Ae});function ru(n){return n.__forward_ref__=ru,n.toString=function(){return Mt(this())},n}function St(n){return D0(n)?n():n}function D0(n){return typeof n=="function"&&n.hasOwnProperty(vP)&&n.__forward_ref__===ru}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function st(n){return{providers:n.providers||[],imports:n.imports||[]}}function Td(n){return FD(n,b0)||FD(n,T0)}function C0(n){return Td(n)!==null}function FD(n,e){return n.hasOwnProperty(e)?n[e]:null}function _P(n){let e=n&&(n[b0]||n[T0]);return e||null}function VD(n){return n&&(n.hasOwnProperty(LD)||n.hasOwnProperty(wP))?n[LD]:null}var b0=Ae({\u0275prov:Ae}),LD=Ae({\u0275inj:Ae}),T0=Ae({ngInjectableDef:Ae}),wP=Ae({ngInjectorDef:Ae}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function A0(n){return n&&!!n.\u0275providers}var EP=Ae({\u0275cmp:Ae}),IP=Ae({\u0275dir:Ae}),DP=Ae({\u0275pipe:Ae}),CP=Ae({\u0275mod:Ae}),Kl=Ae({\u0275fac:Ae}),Wa=Ae({__NG_ELEMENT_ID__:Ae}),jD=Ae({__NG_ENV_ID__:Ae});function Yl(n){return typeof n=="string"?n:n==null?"":String(n)}function bP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Yl(n)}function TP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Q(-200,n)}function Im(n,e){throw new Q(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),xg;function S0(){return xg}function Xt(n){let e=xg;return xg=n,e}function M0(n,e,t){let r=Td(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;Im(n,"Injector")}var AP={},Ka=AP,Rg="__NG_DI_FLAG__",Zl="ngTempTokenPath",SP="ngTokenPath",MP=/\n/gm,xP="\u0275",UD="__source",Uo;function RP(){return Uo}function Pr(n){let e=Uo;return Uo=n,e}function NP(n,e=ue.Default){if(Uo===void 0)throw new Q(-203,!1);return Uo===null?M0(n,void 0,e):Uo.get(n,e&ue.Optional?null:void 0,e)}function L(n,e=ue.Default){return(S0()||NP)(St(n),e)}function k(n,e=ue.Default){return L(n,Ad(e))}function Ad(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ng(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=PP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function x0(n,e){return n[Rg]=e,n.prototype[Rg]=e,n}function PP(n){return n[Rg]}function OP(n,e,t,r){let i=n[Zl];throw e[UD]&&i.unshift(e[UD]),n.message=kP(`
`+n.message,i,t,r),n[SP]=i,n[Zl]=null,n}function kP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xP?n.slice(2):n;let i=Mt(e);if(Array.isArray(e))i=e.map(Mt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Mt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(MP,`
  `)}`}var Pi=x0(I0("Optional"),8);var Sd=x0(I0("SkipSelf"),4);function $o(n,e){let t=n.hasOwnProperty(Kl);return t?n[Kl]:null}function Dm(n,e){n.forEach(t=>Array.isArray(t)?Dm(t,e):e(t))}function R0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Jl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function FP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function VP(n,e,t){let r=iu(n,e);return r>=0?n[r|1]=t:(r=~r,FP(n,r,e,t)),r}function gg(n,e){let t=iu(n,e);if(t>=0)return n[t|1]}function iu(n,e){return LP(n,e,1)}function LP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var qo={},$t=[],bi=new H(""),N0=new H("",-1),P0=new H(""),Xl=class{get(e,t=Ka){if(t===Ka){let r=new Error(`NullInjectorError: No provider for ${Mt(e)}!`);throw r.name="NullInjectorError",r}return t}},O0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(O0||{}),Nn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nn||{}),kr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(kr||{});function jP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Pg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];BP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function UP(n){return n===3||n===4||n===6}function BP(n){return n.charCodeAt(0)===64}function Ya(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BD(n,t,i,null,e[++r]):BD(n,t,i,null,null))}}return n}function BD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var k0="ng-template";function $P(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Cm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Cm(n){return n.type===4&&n.value!==k0}function qP(n,e,t){let r=n.type===4&&!t?k0:n.value;return e===r}function HP(n,e,t){let r=4,i=n.attrs,o=i!==null?WP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!pn(r)&&!pn(u))return!1;if(s&&pn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!qP(n,u,t)||u===""&&e.length===1){if(pn(r))return!1;s=!0}}else if(r&8){if(i===null||!$P(n,i,u,t)){if(pn(r))return!1;s=!0}}else{let l=e[++a],h=zP(u,i,Cm(n),t);if(h===-1){if(pn(r))return!1;s=!0;continue}if(l!==""){let f;if(h>o?f="":f=i[h+1].toLowerCase(),r&2&&l!==f){if(pn(r))return!1;s=!0}}}}return pn(r)||s}function pn(n){return(n&1)===0}function zP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return QP(e,n)}function GP(n,e,t=!1){for(let r=0;r<e.length;r++)if(HP(n,e[r],t))return!0;return!1}function WP(n){for(let e=0;e<n.length;e++){let t=n[e];if(UP(t))return e}return n.length}function QP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $D(n,e){return n?":not("+e.trim()+")":e}function KP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pn(s)&&(e+=$D(o,i),i=""),r=s,o=o||!pn(r);t++}return i!==""&&(e+=$D(o,i)),e}function YP(n){return n.map(KP).join(",")}function ZP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!pn(i))break;i=o}r++}return{attrs:e,classes:t}}function jr(n){return nu(()=>{let e=U0(n),t=le(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===O0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nn.Emulated,styles:n.styles||$t,_:null,schemas:n.schemas||null,tView:null,id:""});B0(t);let r=n.dependencies;return t.directiveDefs=HD(r,!1),t.pipeDefs=HD(r,!0),t.id=eO(t),t})}function JP(n){return Fr(n)||F0(n)}function XP(n){return n!==null}function at(n){return nu(()=>({type:n.type,bootstrap:n.bootstrap||$t,declarations:n.declarations||$t,imports:n.imports||$t,exports:n.exports||$t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function qD(n,e){if(n==null)return qo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=kr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==kr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function nn(n){return nu(()=>{let e=U0(n);return B0(e),e})}function Fr(n){return n[EP]||null}function F0(n){return n[IP]||null}function V0(n){return n[DP]||null}function L0(n){let e=Fr(n)||F0(n)||V0(n);return e!==null?e.standalone:!1}function j0(n,e){let t=n[CP]||null;if(!t&&e===!0)throw new Error(`Type ${Mt(n)} does not have '\u0275mod' property.`);return t}function U0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||qo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||$t,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qD(n.inputs,e),outputs:qD(n.outputs),debugInfo:null}}function B0(n){n.features?.forEach(e=>e(n))}function HD(n,e){if(!n)return null;let t=e?V0:JP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(XP)}function eO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ou(n){return{\u0275providers:n}}function tO(...n){return{\u0275providers:$0(!0,n),\u0275fromNgModule:!0}}function $0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Dm(e,s=>{let a=s;Og(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&q0(i,o),t}function q0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];bm(i,o=>{e(o,r)})}}function Og(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=VD(n),s=!o&&Fr(n);if(!o&&!s){let u=n.ngModule;if(o=VD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Og(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Dm(o.imports,h=>{Og(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&q0(l,e)}if(!a){let l=$o(i)||(()=>new i);e({provide:i,useFactory:l,deps:$t},i),e({provide:P0,useValue:i,multi:!0},i),e({provide:bi,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;bm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function bm(n,e){for(let t of n)A0(t)&&(t=t.\u0275providers),Array.isArray(t)?bm(t,e):e(t)}var nO=Ae({provide:String,useValue:Ae});function H0(n){return n!==null&&typeof n=="object"&&nO in n}function rO(n){return!!(n&&n.useExisting)}function iO(n){return!!(n&&n.useFactory)}function Ho(n){return typeof n=="function"}function oO(n){return!!n.useClass}var Md=new H(""),zl={},sO={},mg;function Tm(){return mg===void 0&&(mg=new Xl),mg}var Ht=class{},Za=class extends Ht{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fg(e,s=>this.processProvider(s)),this.records.set(N0,Fo(void 0,this)),i.has("environment")&&this.records.set(Ht,Fo(void 0,this));let o=this.records.get(Md);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(P0,$t,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Pr(this),r=Xt(void 0),i;try{return e()}finally{Pr(t),Xt(r)}}get(e,t=Ka,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(jD))return e[jD](this);r=Ad(r);let i,o=Pr(this),s=Xt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=dO(e)&&Td(e);l&&this.injectableDefInScope(l)?u=Fo(kg(e),zl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?Tm():this.parent;return t=r&ue.Optional&&t===Ka?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Zl]=a[Zl]||[]).unshift(Mt(e)),o)throw a;return OP(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Pr(o)}}resolveInjectorInitializers(){let e=_e(null),t=Pr(this),r=Xt(void 0),i;try{let o=this.get(bi,$t,ue.Self);for(let s of o)s()}finally{Pr(t),Xt(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Mt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=St(e);let t=Ho(e)?e:St(e&&e.provide),r=uO(e);if(!Ho(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Fo(void 0,zl,!0),i.factory=()=>Ng(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===zl&&(t.value=sO,t.value=t.factory()),typeof t.value=="object"&&t.value&&lO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function kg(n){let e=Td(n),t=e!==null?e.factory:$o(n);if(t!==null)return t;if(n instanceof H)throw new Q(204,!1);if(n instanceof Function)return aO(n);throw new Q(204,!1)}function aO(n){if(n.length>0)throw new Q(204,!1);let t=_P(n);return t!==null?()=>t.factory(n):()=>new n}function uO(n){if(H0(n))return Fo(void 0,n.useValue);{let e=z0(n);return Fo(e,zl)}}function z0(n,e,t){let r;if(Ho(n)){let i=St(n);return $o(i)||kg(i)}else if(H0(n))r=()=>St(n.useValue);else if(iO(n))r=()=>n.useFactory(...Ng(n.deps||[]));else if(rO(n))r=()=>L(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(cO(n))r=()=>new i(...Ng(n.deps));else return $o(i)||kg(i)}return r}function Fo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cO(n){return!!n.deps}function lO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dO(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function Fg(n,e){for(let t of n)Array.isArray(t)?Fg(t,e):t&&A0(t)?Fg(t.\u0275providers,e):e(t)}function _n(n,e){n instanceof Za&&n.assertNotDestroyed();let t,r=Pr(n),i=Xt(void 0);try{return e()}finally{Pr(r),Xt(i)}}function G0(){return S0()!==void 0||RP()!=null}function hO(n){if(!G0())throw new Q(-203,!1)}function fO(n){let e=or.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function pO(n){return typeof n=="function"}var zt=0,he=1,ne=2,wt=3,gn=4,wn=5,Pn=6,ed=7,yn=8,zo=9,tr=10,Ue=11,Ja=12,zD=13,es=14,tn=15,Go=16,Vo=17,Wo=18,xd=19,W0=20,Or=21,yg=22,en=23,Ot=25,Q0=1,Xa=6,nr=7,td=8,nd=9,qt=10,rd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(rd||{});function mn(n){return Array.isArray(n)&&typeof n[Q0]=="object"}function kn(n){return Array.isArray(n)&&n[Q0]===!0}function K0(n){return(n.flags&4)!==0}function su(n){return n.componentOffset>-1}function Am(n){return(n.flags&1)===1}function Vr(n){return!!n.template}function id(n){return(n[ne]&512)!==0}var Vg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Y0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ts(){return Z0}function Z0(n){return n.type.prototype.ngOnChanges&&(n.setInput=mO),gO}ts.ngInherit=!0;function gO(){let n=X0(this),e=n?.current;if(e){let t=n.previous;if(t===qo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function mO(n,e,t,r,i){let o=this.declaredInputs[r],s=X0(n)||yO(n,{previous:qo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Vg(l&&l.currentValue,t,u===qo),Y0(n,e,i,t)}var J0="__ngSimpleChanges__";function X0(n){return n[J0]||null}function yO(n,e){return n[J0]=e}var GD=null;var xn=function(n,e,t){GD?.(n,e,t)},vO="svg",_O="math";function vn(n){for(;Array.isArray(n);)n=n[zt];return n}function eC(n,e){return vn(e[n])}function rn(n,e){return vn(e[n.index])}function tC(n,e){return n.data[e]}function Ur(n,e){let t=e[n];return mn(t)?t:t[zt]}function Sm(n){return(n[ne]&128)===128}function wO(n){return kn(n[wt])}function od(n,e){return e==null?null:n[e]}function nC(n){n[Vo]=0}function rC(n){n[ne]&1024||(n[ne]|=1024,Sm(n)&&Nd(n))}function EO(n,e){for(;n>0;)e=e[es],n--;return e}function Rd(n){return!!(n[ne]&9216||n[en]?.dirty)}function Lg(n){n[tr].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Rd(n)&&Nd(n)}function Nd(n){n[tr].changeDetectionScheduler?.notify(0);let e=Ti(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Sm(e)));)e=Ti(e)}function iC(n,e){if((n[ne]&256)===256)throw new Q(911,!1);n[Or]===null&&(n[Or]=[]),n[Or].push(e)}function IO(n,e){if(n[Or]===null)return;let t=n[Or].indexOf(e);t!==-1&&n[Or].splice(t,1)}function Ti(n){let e=n[wt];return kn(e)?e[wt]:e}var ce={lFrame:mC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var oC=!1;function DO(){return ce.lFrame.elementDepthCount}function CO(){ce.lFrame.elementDepthCount++}function bO(){ce.lFrame.elementDepthCount--}function sC(){return ce.bindingsEnabled}function au(){return ce.skipHydrationRootTNode!==null}function TO(n){return ce.skipHydrationRootTNode===n}function AO(n){ce.skipHydrationRootTNode=n}function SO(){ce.skipHydrationRootTNode=null}function Ne(){return ce.lFrame.lView}function on(){return ce.lFrame.tView}function aC(n){return ce.lFrame.contextLView=n,n[yn]}function uC(n){return ce.lFrame.contextLView=null,n}function Ft(){let n=cC();for(;n!==null&&n.type===64;)n=n.parent;return n}function cC(){return ce.lFrame.currentTNode}function MO(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function uu(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function lC(){return ce.lFrame.isParent}function xO(){ce.lFrame.isParent=!1}function dC(){return oC}function WD(n){oC=n}function RO(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function NO(){return ce.lFrame.bindingIndex}function PO(n){return ce.lFrame.bindingIndex=n}function Mm(){return ce.lFrame.bindingIndex++}function hC(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function OO(){return ce.lFrame.inI18n}function kO(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,jg(e)}function FO(){return ce.lFrame.currentDirectiveIndex}function jg(n){ce.lFrame.currentDirectiveIndex=n}function VO(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fC(n){ce.lFrame.currentQueryIndex=n}function LO(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[wn]:null}function pC(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=LO(o),i===null||(o=o[es],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=gC();return r.currentTNode=e,r.lView=n,!0}function xm(n){let e=gC(),t=n[he];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gC(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?mC(n):e}function mC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function yC(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var vC=yC;function Rm(){let n=yC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jO(n){return(ce.lFrame.contextLView=EO(n,ce.lFrame.contextLView))[yn]}function Oi(){return ce.lFrame.selectedIndex}function Ai(n){ce.lFrame.selectedIndex=n}function _C(){let n=ce.lFrame;return tC(n.tView,n.selectedIndex)}function wC(){return ce.lFrame.currentNamespace}var EC=!0;function Nm(){return EC}function Br(n){EC=n}function UO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Z0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Pm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Gl(n,e,t){IC(n,e,3,t)}function Wl(n,e,t,r){(n[ne]&3)===t&&IC(n,e,t,r)}function vg(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function IC(n,e,t,r){let i=r!==void 0?n[Vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Vo]+=65536),(a<o||o==-1)&&(BO(n,t,e,u),n[Vo]=(n[Vo]&4294901760)+u+2),u++}function QD(n,e){xn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),xn(5,n,e)}}function BO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Vo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,QD(a,o)):QD(a,o)}var Bo=-1,Si=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function $O(n){return n instanceof Si}function qO(n){return(n.flags&8)!==0}function HO(n){return(n.flags&16)!==0}var _g={},Ug=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ad(r);let i=this.injector.get(e,_g,r);return i!==_g||t===_g?i:this.parentInjector.get(e,t,r)}};function DC(n){return n!==Bo}function sd(n){return n&32767}function zO(n){return n>>16}function ad(n,e){let t=zO(n),r=e;for(;t>0;)r=r[es],t--;return r}var Bg=!0;function KD(n){let e=Bg;return Bg=n,e}var GO=256,CC=GO-1,bC=5,WO=0,Rn={};function QO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wa)&&(r=t[Wa]),r==null&&(r=t[Wa]=WO++);let i=r&CC,o=1<<i;e.data[n+(i>>bC)]|=o}function ud(n,e){let t=TC(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,wg(r.data,n),wg(e,null),wg(r.blueprint,null));let i=Om(n,e),o=n.injectorIndex;if(DC(i)){let s=sd(i),a=ad(i,e),u=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function wg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Om(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=RC(i),r===null)return Bo;if(t++,i=i[es],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Bo}function $g(n,e,t){QO(n,e,t)}function AC(n,e,t){if(t&ue.Optional||n!==void 0)return n;Im(e,"NodeInjector")}function SC(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[zo],o=Xt(void 0);try{return i?i.get(e,r,t&ue.Optional):M0(e,r,t&ue.Optional)}finally{Xt(o)}}return AC(r,e,t)}function MC(n,e,t,r=ue.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ue.Self)){let s=XO(n,e,t,r,Rn);if(s!==Rn)return s}let o=xC(n,e,t,r,Rn);if(o!==Rn)return o}return SC(e,t,r,i)}function xC(n,e,t,r,i){let o=ZO(t);if(typeof o=="function"){if(!pC(e,n,r))return r&ue.Host?AC(i,t,r):SC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))Im(t);else return s}finally{vC()}}else if(typeof o=="number"){let s=null,a=TC(n,e),u=Bo,l=r&ue.Host?e[tn][wn]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?Om(n,e):e[a+8],u===Bo||!ZD(r,!1)?a=-1:(s=e[he],a=sd(u),e=ad(u,e)));a!==-1;){let h=e[he];if(YD(o,a,h.data)){let f=KO(a,e,t,s,r,l);if(f!==Rn)return f}u=e[a+8],u!==Bo&&ZD(r,e[he].data[a+8]===l)&&YD(o,a,e)?(s=h,a=sd(u),e=ad(u,e)):a=-1}}return i}function KO(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],u=r==null?su(a)&&Bg:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=YO(a,s,t,u,l);return h!==null?Qo(e,s,h,a):Rn}function YO(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,f=r?a:a+h,m=i?a+h:l;for(let y=f;y<m;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Vr(y)&&y.type===t)return u}return null}function Qo(n,e,t,r){let i=n[t],o=e.data;if($O(i)){let s=i;s.resolving&&TP(bP(o[t]));let a=KD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Xt(s.injectImpl):null,h=pC(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&UO(t,o[t],e)}finally{l!==null&&Xt(l),KD(a),s.resolving=!1,vC()}}return i}function ZO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Wa)?n[Wa]:void 0;return typeof e=="number"?e>=0?e&CC:JO:e}function YD(n,e,t){let r=1<<n;return!!(t[e+(n>>bC)]&r)}function ZD(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var Ci=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return MC(this._tNode,this._lView,e,Ad(r),t)}};function JO(){return new Ci(Ft(),Ne())}function cu(n){return nu(()=>{let e=n.prototype.constructor,t=e[Kl]||qg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Kl]||qg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function qg(n){return D0(n)?()=>{let e=qg(St(n));return e&&e()}:$o(n)}function XO(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=xC(o,s,t,r|ue.Self,Rn);if(a!==Rn)return a;let u=o.parent;if(!u){let l=s[W0];if(l){let h=l.get(t,Rn,r);if(h!==Rn)return h}u=RC(s),s=s[es]}o=u}return i}function RC(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[wn]:null}function JD(n,e=null,t=null,r){let i=NC(n,e,t,r);return i.resolveInjectorInitializers(),i}function NC(n,e=null,t=null,r,i=new Set){let o=[t||$t,tO(n)];return r=r||(typeof n=="object"?void 0:Mt(n)),new Za(o,e||Tm(),r||null,i)}var kt=class n{static{this.THROW_IF_NOT_FOUND=Ka}static{this.NULL=new Xl}static create(e,t){if(Array.isArray(e))return JD({name:""},t,e,"");{let r=e.name??"";return JD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>L(N0)})}static{this.__NG_ELEMENT_ID__=-1}};var ek=new H("");ek.__NG_ELEMENT_ID__=n=>{let e=Ft();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new Q(204,!1)};var tk="ngOriginalError";function Eg(n){return n[tk]}var PC=!0,km=(()=>{class n{static{this.__NG_ELEMENT_ID__=nk}static{this.__NG_ENV_ID__=t=>t}}return n})(),Hg=class extends km{constructor(e){super(),this._lView=e}onDestroy(e){return iC(this._lView,e),()=>IO(this._lView,e)}};function nk(){return new Hg(Ne())}var ki=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ft(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var zg=class extends Le{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,G0()&&(this.destroyRef=k(km,{optional:!0})??void 0,this.pendingTasks=k(ki,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},ot=zg;function cd(...n){}function OC(n){let e,t;function r(){n=cd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function XD(n){return queueMicrotask(()=>n()),()=>{n=cd}}var Fm="isAngularZone",ld=Fm+"_ID",rk=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=PC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,sk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ik,cd,cd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},ik={};function Vm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ok(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){OC(()=>{n.callbackScheduled=!1,Gg(n),n.isCheckStableRunning=!0,Vm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Gg(n)}function sk(n){let e=()=>{ok(n)},t=rk++;n._inner=n._inner.fork({name:"angular",properties:{[Fm]:!0,[ld]:t,[ld+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(ak(u))return r.invokeTask(o,s,a,u);try{return e0(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),t0(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return e0(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uk(u)&&e(),t0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Gg(n),Vm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Gg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function e0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function t0(n){n._nesting--,Vm(n)}var dd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function ak(n){return kC(n,"__ignore_ng_zone__")}function uk(n){return kC(n,"__scheduler_tick__")}function kC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function ck(n="zone.js",e){return n==="noop"?new dd:n==="zone.js"?new pe(e):n}var rr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Eg(e);for(;t&&Eg(t);)t=Eg(t);return t||null}},lk=new H("",{providedIn:"root",factory:()=>{let n=k(pe),e=k(rr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function dk(){return Pd(Ft(),Ne())}function Pd(n,e){return new $r(rn(n,e))}var $r=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=dk}}return n})();var hk="ngSkipHydration",fk="ngskiphydration";function FC(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===fk)return!0}return!1}function VC(n){return n.hasAttribute(hk)}function hd(n){return(n.flags&128)===128}function pk(n){if(hd(n))return!0;let e=n.parent;for(;e;){if(hd(n)||FC(e))return!0;e=e.parent}return!1}var LC=new Map,gk=0;function mk(){return gk++}function yk(n){LC.set(n[xd],n)}function Wg(n){LC.delete(n[xd])}var n0="__ngContext__";function Mi(n,e){mn(e)?(n[n0]=e[xd],yk(e)):n[n0]=e}function jC(n){return BC(n[Ja])}function UC(n){return BC(n[gn])}function BC(n){for(;n!==null&&!kn(n);)n=n[gn];return n}var Qg;function $C(n){Qg=n}function Od(){if(Qg!==void 0)return Qg;if(typeof document<"u")return document;throw new Q(210,!1)}var lu=new H("",{providedIn:"root",factory:()=>vk}),vk="ng",Lm=new H(""),pt=new H("",{providedIn:"platform",factory:()=>"unknown"});var jm=new H("",{providedIn:"root",factory:()=>Od().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function _k(){let n=new ns;return k(pt)==="browser"&&(n.store=wk(Od(),k(lu))),n}var ns=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=W({token:n,providedIn:"root",factory:_k})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function wk(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var qC="h",HC="b",Kg=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Kg||{}),Ek="e",Ik="t",Um="c",zC="x",fd="r",Dk="i",Ck="n",GC="d";var bk="__nghData__",WC=bk,Ig="ngh",Tk="nghm",QC=()=>null;function Ak(n,e,t=!1){let r=n.getAttribute(Ig);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,u={};if(r!==""){let h=e.get(ns,null,{optional:!0});h!==null&&(u=h.get(WC,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,kd(l,0,n.nextSibling)),a?n.setAttribute(Ig,a):n.removeAttribute(Ig),l}function Sk(){QC=Ak}function Bm(n,e,t=!1){return QC(n,e,t)}function Mk(n){let e=n._lView;return e[he].type===2?null:(id(e)&&(e=e[Ot]),e)}function xk(n){return n.textContent?.replace(/\s/gm,"")}function Rk(n){let e=Od(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=xk(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function kd(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Yg(n,e){return n.segmentHeads?.[e]??null}function Nk(n,e){let t=n.data,r=t[Ek]?.[e]??null;return r===null&&t[Um]?.[e]&&(r=$m(n,e)),r}function KC(n,e){return n.data[Um]?.[e]??null}function $m(n,e){let t=KC(n,e)??[],r=0;for(let i of t)r+=i[fd]*(i[zC]??1);return r}function Pk(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[GC];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function du(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[GC];n.disconnectedNodes=t?new Set(t):null}return!!Pk(n)?.has(e)}var jl=new H(""),YC=!1,ZC=new H("",{providedIn:"root",factory:()=>YC});var Zg=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gP})`}};function qm(n){return n instanceof Zg?n.changingThisBreaksApplicationSecurity:n}var Ok=/^>|^->|<!--|-->|--!>|<!-$/g,kk=/(<|>)/g,Fk="\u200B$1\u200B";function Vk(n){return n.replace(Ok,e=>e.replace(kk,Fk))}function Lk(n){return n.ownerDocument.body}function JC(n){return n instanceof Function?n():n}function za(n){return(n??k(kt)).get(pt)==="browser"}var On=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(On||{}),jk;function Hm(n,e){return jk(n,e)}function Lo(n,e,t,r,i){if(r!=null){let o,s=!1;kn(r)?o=r:mn(r)&&(s=!0,r=r[zt]);let a=vn(r);n===0&&t!==null?i==null?ib(e,t,a):pd(e,t,a,i||null,!0):n===1&&t!==null?pd(e,t,a,i||null,!0):n===2?Qm(e,a,s):n===3&&e.destroyNode(a),o!=null&&e1(e,n,o,t,i)}}function XC(n,e){return n.createText(e)}function Uk(n,e,t){n.setValue(e,t)}function eb(n,e){return n.createComment(Vk(e))}function zm(n,e,t){return n.createElement(e,t)}function Bk(n,e){tb(n,e),e[zt]=null,e[wn]=null}function $k(n,e,t,r,i,o){r[zt]=i,r[wn]=e,Fd(n,r,t,1,i,o)}function tb(n,e){e[tr].changeDetectionScheduler?.notify(9),Fd(n,e,e[Ue],2,null,null)}function qk(n){let e=n[Ja];if(!e)return Dg(n[he],n);for(;e;){let t=null;if(mn(e))t=e[Ja];else{let r=e[qt];r&&(t=r)}if(!t){for(;e&&!e[gn]&&e!==n;)mn(e)&&Dg(e[he],e),e=e[wt];e===null&&(e=n),mn(e)&&Dg(e[he],e),t=e&&e[gn]}e=t}}function Hk(n,e,t,r){let i=qt+r,o=t.length;r>0&&(t[i-1][gn]=e),r<o-qt?(e[gn]=t[i],R0(t,qt+r,e)):(t.push(e),e[gn]=null),e[wt]=t;let s=e[Go];s!==null&&t!==s&&nb(s,e);let a=e[Wo];a!==null&&a.insertView(n),Lg(e),e[ne]|=128}function nb(n,e){let t=n[nd],r=e[wt];if(mn(r))n[ne]|=rd.HasTransplantedViews;else{let i=r[wt][tn];e[tn]!==i&&(n[ne]|=rd.HasTransplantedViews)}t===null?n[nd]=[e]:t.push(e)}function Gm(n,e){let t=n[nd],r=t.indexOf(e);t.splice(r,1)}function Jg(n,e){if(n.length<=qt)return;let t=qt+e,r=n[t];if(r){let i=r[Go];i!==null&&i!==n&&Gm(i,r),e>0&&(n[t-1][gn]=r[gn]);let o=Jl(n,qt+e);Bk(r[he],r);let s=o[Wo];s!==null&&s.detachView(o[he]),r[wt]=null,r[gn]=null,r[ne]&=-129}return r}function rb(n,e){if(!(e[ne]&256)){let t=e[Ue];t.destroyNode&&Fd(n,e,t,3,null,null),qk(e)}}function Dg(n,e){if(e[ne]&256)return;let t=_e(null);try{e[ne]&=-129,e[ne]|=256,e[en]&&Qp(e[en]),Gk(n,e),zk(n,e),e[he].type===1&&e[Ue].destroy();let r=e[Go];if(r!==null&&kn(e[wt])){r!==e[wt]&&Gm(r,e);let i=e[Wo];i!==null&&i.detachView(n)}Wg(e)}finally{_e(t)}}function zk(n,e){let t=n.cleanup,r=e[ed];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[ed]=null);let i=e[Or];if(i!==null){e[Or]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Gk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Si)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];xn(4,a,u);try{u.call(a)}finally{xn(5,a,u)}}else{xn(4,i,o);try{o.call(i)}finally{xn(5,i,o)}}}}}function Wk(n,e,t){return Qk(n,e.parent,t)}function Qk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[zt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Nn.None||o===Nn.Emulated)return null}return rn(r,t)}}function pd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ib(n,e,t){n.appendChild(e,t)}function r0(n,e,t,r,i){r!==null?pd(n,e,t,r,i):ib(n,e,t)}function ob(n,e){return n.parentNode(e)}function Kk(n,e){return n.nextSibling(e)}function Yk(n,e,t){return Jk(n,e,t)}function Zk(n,e,t){return n.type&40?rn(n,t):null}var Jk=Zk,i0;function Wm(n,e,t,r){let i=Wk(n,r,e),o=e[Ue],s=r.parent||e[wn],a=Yk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)r0(o,i,t[u],a,!1);else r0(o,i,t,a,!1);i0!==void 0&&i0(o,r,e,t,i)}function Ga(n,e){if(e!==null){let t=e.type;if(t&3)return rn(e,n);if(t&4)return Xg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ga(n,r);{let i=n[e.index];return kn(i)?Xg(-1,i):vn(i)}}else{if(t&128)return Ga(n,e.next);if(t&32)return Hm(e,n)()||vn(n[e.index]);{let r=sb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ti(n[tn]);return Ga(i,r)}else return Ga(n,e.next)}}}return null}function sb(n,e){if(e!==null){let r=n[tn][wn],i=e.projection;return r.projection[i]}return null}function Xg(n,e){let t=qt+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return Ga(r,i)}return e[nr]}function Qm(n,e,t){n.removeChild(null,e,t)}function ab(n){n.textContent=""}function Km(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Mi(vn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Km(n,e,t.child,r,i,o,!1),Lo(e,n,i,a,o);else if(u&32){let l=Hm(t,r),h;for(;h=l();)Lo(e,n,i,h,o);Lo(e,n,i,a,o)}else u&16?Xk(n,e,r,t,i,o):Lo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Fd(n,e,t,r,i,o){Km(t,r,n.firstChild,e,i,o,!1)}function Xk(n,e,t,r,i,o){let s=t[tn],u=s[wn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Lo(e,n,i,h,o)}else{let l=u,h=s[wt];hd(r)&&(l.flags|=128),Km(n,e,l,h,i,o,!0)}}function e1(n,e,t,r,i){let o=t[nr],s=vn(t);o!==s&&Lo(e,n,r,o,i);for(let a=qt;a<t.length;a++){let u=t[a];Fd(u[he],u,n,e,r,o)}}function t1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:On.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=On.Important),n.setStyle(t,r,i,o))}}function n1(n,e,t){n.setAttribute(e,"style",t)}function ub(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function cb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Pg(n,e,r),i!==null&&ub(n,e,i),o!==null&&n1(n,e,o)}var sr={};function Pe(n=1){lb(on(),Ne(),Oi()+n,!1)}function lb(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Gl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Wl(e,o,0,t)}Ai(t)}function Ie(n,e=ue.Default){let t=Ne();if(t===null)return L(n,e);let r=Ft();return MC(r,t,St(n),e)}function db(){let n="invalid";throw new Error(n)}function hb(n,e,t,r,i,o){let s=_e(null);try{let a=null;i&kr.SignalBased&&(a=e[r][Zn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&kr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):Y0(e,a,r,o)}finally{_e(s)}}function r1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ai(~i);else{let o=i,s=t[++r],a=t[++r];kO(s,o);let u=e[o];a(2,u)}}}finally{Ai(-1)}}function Vd(n,e,t,r,i,o,s,a,u,l,h){let f=e.blueprint.slice();return f[zt]=i,f[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(f[ne]|=2048),nC(f),f[wt]=f[es]=n,f[yn]=t,f[tr]=s||n&&n[tr],f[Ue]=a||n&&n[Ue],f[zo]=u||n&&n[zo]||null,f[wn]=o,f[xd]=mk(),f[Pn]=h,f[W0]=l,f[tn]=e.type==2?n[tn]:f,f}function Ld(n,e,t,r,i){let o=n.data[e];if(o===null)o=i1(n,e,t,r,i),OO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=MO();o.injectorIndex=s===null?-1:s.injectorIndex}return uu(o,!0),o}function i1(n,e,t,r,i){let o=cC(),s=lC(),a=s?o:o&&o.parent,u=n.data[e]=l1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function fb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function pb(n,e,t,r,i){let o=Oi(),s=r&2;try{Ai(-1),s&&e.length>Ot&&lb(n,e,Ot,!1),xn(s?2:0,i),t(r,i)}finally{Ai(o),xn(s?3:1,i)}}function gb(n,e,t){if(K0(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function mb(n,e,t){sC()&&(m1(n,e,t,rn(t,e)),(t.flags&64)===64&&Db(n,e,t))}function yb(n,e,t=rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function vb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ym(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ym(n,e,t,r,i,o,s,a,u,l,h){let f=Ot+r,m=f+i,y=o1(f,m),D=typeof l=="function"?l():l;return y[he]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function o1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:sr);return t}function s1(n,e,t,r){let o=r.get(ZC,YC)||t===Nn.ShadowDom,s=n.selectRootElement(e,o);return a1(s),s}function a1(n){_b(n)}var _b=()=>null;function u1(n){VC(n)?ab(n):Rk(n)}function c1(){_b=u1}function l1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return au()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function o0(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=kr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?s0(r,t,l,a,u):s0(r,t,l,a)}return r}function s0(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function d1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let f=o[h],m=t?t.get(f):null,y=m?m.inputs:null,D=m?m.outputs:null;u=o0(0,f.inputs,h,u,y),l=o0(1,f.outputs,h,l,D);let S=u!==null&&s!==null&&!Cm(e)?b1(u,h,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function h1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function wb(n,e,t,r,i,o,s,a){let u=rn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Zm(n,t,h,r,i),su(e)&&f1(t,e.index)):e.type&3?(r=h1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function f1(n,e){let t=Ur(e,n);t[ne]&16||(t[ne]|=64)}function Eb(n,e,t,r){if(sC()){let i=r===null?null:{"":-1},o=v1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Ib(n,e,t,s,i,a),i&&_1(t,r,i)}t.mergedAttrs=Ya(t.mergedAttrs,t.attrs)}function Ib(n,e,t,r,i,o){for(let l=0;l<r.length;l++)$g(ud(t,e),n,r[l].type);E1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=fb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Ya(t.mergedAttrs,h.hostAttrs),I1(n,t,e,u,h),w1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let f=h.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}d1(n,t,o)}function p1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;g1(s)!=a&&s.push(a),s.push(t,r,o)}}function g1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function m1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;su(t)&&D1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ud(t,e),Mi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Qo(e,n,a,t);if(Mi(l,e),s!==null&&C1(e,a-i,l,u,t,s),Vr(u)){let h=Ur(t.index,e);h[yn]=Qo(e,n,a,t)}}}function Db(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=FO();try{Ai(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];jg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&y1(u,l)}}finally{Ai(-1),jg(s)}}function y1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function v1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(GP(e,s.selectors,!1))if(r||(r=[]),Vr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;em(n,e,u)}else r.unshift(s),em(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function em(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function _1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}}function w1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Vr(e)&&(t[""]=n)}}function E1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function I1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=$o(i.type,!0)),s=new Si(o,Vr(i),Ie);n.blueprint[r]=s,t[r]=s,p1(n,e,r,fb(n,t,i.hostVars,sr),i)}function D1(n,e,t){let r=rn(e,n),i=vb(t),o=n[tr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=jd(n,Vd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function C1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],f=s[a++];hb(r,t,u,l,h,f)}}function b1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Cb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function bb(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];fC(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function jd(n,e){return n[Ja]?n[zD][gn]=e:n[Ja]=e,n[zD]=e,e}function tm(n,e,t){fC(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function T1(n){return n[ed]??=[]}function A1(n){return n.cleanup??=[]}function Tb(n,e){let t=n[zo],r=t?t.get(rr,null):null;r&&r.handleError(e)}function Zm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];hb(h,l,r,a,u,i)}}function Ab(n,e,t){let r=eC(e,n);Uk(n[Ue],r,t)}function S1(n,e){let t=Ur(e,n),r=t[he];M1(r,t);let i=t[zt];i!==null&&t[Pn]===null&&(t[Pn]=Bm(i,t[zo])),Jm(r,t,t[yn])}function M1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Jm(n,e,t){xm(e);try{let r=n.viewQuery;r!==null&&tm(1,r,t);let i=n.template;i!==null&&pb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Wo]?.finishViewCreation(n),n.staticContentQueries&&bb(n,e),n.staticViewQueries&&tm(2,n.viewQuery,t);let o=n.components;o!==null&&x1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Rm()}}function x1(n,e){for(let t=0;t<e.length;t++)S1(n,e[t])}function R1(n,e,t,r){let i=_e(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=Vd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Go]=l;let h=n[Wo];return h!==null&&(u[Wo]=h.createEmbeddedView(o)),Jm(o,u,t),u}finally{_e(i)}}function a0(n,e){return!e||e.firstChild===null||hd(n)}function N1(n,e,t,r=!0){let i=e[he];if(Hk(i,e,n,t),r){let s=Xg(t,n),a=e[Ue],u=ob(a,n[nr]);u!==null&&$k(i,n[wn],a,e,u,s)}let o=e[Pn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(vn(o)),kn(o)&&P1(o,r);let s=t.type;if(s&8)gd(n,e,t.child,r);else if(s&32){let a=Hm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=sb(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ti(e[tn]);gd(u[he],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function P1(n,e){for(let t=qt;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&gd(r[he],r,i,e)}n[nr]!==n[zt]&&e.push(n[nr])}var Sb=[];function O1(n){return n[en]??k1(n)}function k1(n){let e=Sb.pop()??Object.create(V1);return e.lView=n,e}function F1(n){n.lView[en]!==n&&(n.lView=null,Sb.push(n))}var V1=le(j({},La),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Nd(n.lView)},consumerOnSignalRead(){this.lView[en]=this}});function L1(n){let e=n[en]??Object.create(j1);return e.lView=n,e}var j1=le(j({},La),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ti(n.lView);for(;e&&!Mb(e[he]);)e=Ti(e);e&&rC(e)},consumerOnSignalRead(){this.lView[en]=this}});function Mb(n){return n.type!==2}var U1=100;function xb(n,e=!0,t=0){let r=n[tr],i=r.rendererFactory,o=!1;o||i.begin?.();try{B1(n,t)}catch(s){throw e&&Tb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function B1(n,e){let t=dC();try{WD(!0),nm(n,e);let r=0;for(;Rd(n);){if(r===U1)throw new Q(103,!1);r++,nm(n,1)}}finally{WD(t)}}function $1(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[tr].inlineEffectRunner?.flush(),xm(e);let a=!0,u=null,l=null;o||(Mb(n)?(l=O1(e),u=ul(l)):eD()===null?(a=!1,l=L1(e),u=ul(l)):e[en]&&(Qp(e[en]),e[en]=null));try{nC(e),PO(n.bindingStartIndex),t!==null&&pb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Gl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Wl(e,y,0,null),vg(e,0)}if(s||q1(e),Rb(e,0),n.contentQueries!==null&&bb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Gl(e,y)}else{let y=n.contentHooks;y!==null&&Wl(e,y,1),vg(e,1)}r1(n,e);let f=n.components;f!==null&&Pb(e,f,0);let m=n.viewQuery;if(m!==null&&tm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Gl(e,y)}else{let y=n.viewHooks;y!==null&&Wl(e,y,2),vg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[yg]){for(let y of e[yg])y();e[yg]=null}o||(e[ne]&=-73)}catch(h){throw o||Nd(e),h}finally{l!==null&&(Gp(l,u),a&&F1(l)),Rm()}}function Rb(n,e){for(let t=jC(n);t!==null;t=UC(t))for(let r=qt;r<t.length;r++){let i=t[r];Nb(i,e)}}function q1(n){for(let e=jC(n);e!==null;e=UC(e)){if(!(e[ne]&rd.HasTransplantedViews))continue;let t=e[nd];for(let r=0;r<t.length;r++){let i=t[r];rC(i)}}}function H1(n,e,t){let r=Ur(e,n);Nb(r,t)}function Nb(n,e){Sm(n)&&nm(n,e)}function nm(n,e){let r=n[he],i=n[ne],o=n[en],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Wp(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)$1(r,n,r.template,n[yn]);else if(i&8192){Rb(n,1);let a=r.components;a!==null&&Pb(n,a,1)}}function Pb(n,e,t){for(let r=0;r<e.length;r++)H1(n,e[r],t)}function Xm(n,e){let t=dC()?64:1088;for(n[tr].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Ti(n);if(id(n)&&!r)return n;n=r}return null}var xi=class{get rootNodes(){let e=this._lView,t=e[he];return gd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wt];if(kn(e)){let t=e[td],r=t?t.indexOf(this):-1;r>-1&&(Jg(e,r),Jl(t,r))}this._attachedToViewContainer=!1}rb(this._lView[he],this._lView)}onDestroy(e){iC(this._lView,e)}markForCheck(){Xm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Lg(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,xb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=id(this._lView),t=this._lView[Go];t!==null&&!e&&Gm(t,this._lView),tb(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=id(this._lView),r=this._lView[Go];r!==null&&!t&&nb(r,this._lView),Lg(this._lView)}},Ud=(()=>{class n{static{this.__NG_ELEMENT_ID__=W1}}return n})(),z1=Ud,G1=class extends z1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=R1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new xi(i)}};function W1(){return Q1(Ft(),Ne())}function Q1(n,e){return n.type&4?new G1(e,n,Pd(n,e)):null}var K1=new RegExp(`^(\\d+)*(${HC}|${qC})*(.*)`);function Y1(n){let e=n.match(K1),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let f=parseInt(h,10)||1;a.push(l,f)}return[s,...a]}function Z1(n){return!n.prev&&n.parent?.type===8}function Cg(n){return n.index-Ot}function J1(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Bd(n,e,t,r){let i=Cg(r),o=J1(n,i);if(o===void 0){let s=n.data[Ck];if(s?.[i])o=eF(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(Z1(r)){let l=Cg(r.parent);o=Yg(n,l)}else{let l=rn(u,t);if(a)o=l.firstChild;else{let h=Cg(u),f=Yg(n,h);if(u.type===2&&f){let y=$m(n,h)+1;o=$d(y,f)}else o=l.nextSibling}}}}return o}function $d(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function X1(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Kg.FirstChild:t=t.firstChild;break;case Kg.NextSibling:t=t.nextSibling;break}}return t}function eF(n,e){let[t,...r]=Y1(n),i;if(t===qC)i=e[tn][zt];else if(t===HC)i=Lk(e[tn][zt]);else{let o=Number(t);i=vn(e[o+Ot])}return X1(i,r)}var tF=!1;function nF(n){tF=n}function rF(n){let e=n[Pn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Ue];for(let o of r.values())iF(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function iF(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ot);i&&Qm(n,i,!1)}}function Ob(n){let e=n[Xa]??[],r=n[wt][Ue];for(let i of e)oF(i,r);n[Xa]=$t}function oF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[fd];for(;t<i;){let o=r.nextSibling;Qm(e,r,!1),r=o,t++}}}function kb(n){Ob(n);let e=n[zt];mn(e)&&md(e);for(let t=qt;t<n.length;t++)md(n[t])}function md(n){rF(n);let e=n[he];for(let t=Ot;t<e.bindingStartIndex;t++)if(kn(n[t])){let r=n[t];kb(r)}else mn(n[t])&&md(n[t])}function sF(n){let e=n._views;for(let t of e){let r=Mk(t);r!==null&&r[zt]!==null&&(mn(r)?md(r):kb(r))}}function aF(n,e){let t=[];for(let r of e)for(let i=0;i<(r[zC]??1);i++){let o={data:r,firstChild:null};r[fd]>0&&(o.firstChild=n,n=$d(r[fd],n)),t.push(o)}return[n,t]}var Fb=()=>null;function uF(n,e){let t=n[Xa];return!e||t===null||t.length===0?null:t[0].data[Dk]===e?t.shift():(Ob(n),null)}function cF(){Fb=uF}function u0(n,e){return Fb(n,e)}var Ko=class{},Vb=new H("",{providedIn:"root",factory:()=>!1});var Lb=new H(""),jb=new H(""),rm=class{},yd=class{};function lF(n){let e=Error(`No component factory found for ${Mt(n)}.`);return e[dF]=n,e}var dF="ngComponent";var im=class{resolveComponentFactory(e){throw lF(e)}},Yo=class{static{this.NULL=new im}},Zo=class{},Fi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>hF()}}return n})();function hF(){let n=Ne(),e=Ft(),t=Ur(e.index,n);return(mn(t)?t:n)[Ue]}var fF=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function om(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=kD(i,a);else if(o==2){let u=a,l=e[++s];r=kD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var vd=class extends Yo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Fr(e);return new Jo(t,this.ngModule)}};function c0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:kr.None;e?t.push({propName:s,templateName:r,isSignal:(a&kr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function pF(n){let e=n.toLowerCase();return e==="svg"?vO:e==="math"?_O:null}var Jo=class extends yd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=c0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return c0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof Ht?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ug(e,s):e,u=a.get(Zo,null);if(u===null)throw new Q(407,!1);let l=a.get(fF,null),h=a.get(Ko,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?s1(m,r,this.componentDef.encapsulation,a):zm(m,y,pF(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let A=null;D!==null&&(A=Bm(D,a,!0));let V=Ym(0,null,null,1,0,null,null,null,null,null,null),B=Vd(null,V,null,S,null,null,f,m,a,null,A);xm(B);let F,G,ee=null;try{let Y=this.componentDef,E,v=null;Y.findHostDirectiveDefs?(E=[],v=new Map,Y.findHostDirectiveDefs(Y,E,v),E.push(Y)):E=[Y];let w=gF(B,D);ee=mF(w,D,Y,E,B,f,m),G=tC(V,Ot),D&&_F(m,Y,D,r),t!==void 0&&wF(G,this.ngContentSelectors,t),F=vF(ee,Y,E,v,B,[EF]),Jm(V,B,null)}catch(Y){throw ee!==null&&Wg(ee),Wg(B),Y}finally{Rm()}return new sm(this.componentType,F,Pd(G,B),B,G)}finally{_e(o)}}},sm=class extends rm{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Zm(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Ur(this._tNode.index,o);Xm(s,1)}}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function gF(n,e){let t=n[he],r=Ot;return n[r]=e,Ld(t,r,2,"#host",null)}function mF(n,e,t,r,i,o,s){let a=i[he];yF(r,n,e,s);let u=null;e!==null&&(u=Bm(e,i[zo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let f=Vd(i,vb(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&em(a,n,r.length-1),jd(i,f),i[n.index]=f}function yF(n,e,t,r){for(let i of n)e.mergedAttrs=Ya(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(om(e,e.mergedAttrs,!0),t!==null&&cb(r,t,e))}function vF(n,e,t,r,i,o){let s=Ft(),a=i[he],u=rn(s,i);Ib(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let f=s.directiveStart+h,m=Qo(i,a,f,s);Mi(m,i)}Db(a,i,s),u&&Mi(u,i);let l=Qo(i,a,s.directiveStart+s.componentOffset,s);if(n[yn]=i[yn]=l,o!==null)for(let h of o)h(l,e);return gb(a,s,i),l}function _F(n,e,t,r){if(r)Pg(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:o}=ZP(e.selectors[0]);i&&Pg(n,t,i),o&&o.length>0&&ub(n,t,o.join(" "))}}function wF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function EF(){let n=Ft();Pm(Ne()[he],n)}var rs=(()=>{class n{static{this.__NG_ELEMENT_ID__=IF}}return n})();function IF(){let n=Ft();return CF(n,Ne())}var DF=rs,Ub=class extends DF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Pd(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){let e=Om(this._hostTNode,this._hostLView);if(DC(e)){let t=ad(e,this._hostLView),r=sd(e),i=t[he].data[r+8];return new Ci(i,t)}else return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=l0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=u0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,a0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!pO(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new Jo(Fr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(Ht,null);S&&(o=S)}let h=Fr(u.componentType??{}),f=u0(this._lContainer,h?.id??null),m=f?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,a0(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(wO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[wt],l=new Ub(u,u[wn],u[wt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return N1(s,i,o,r),e.attachToViewContainerRef(),R0(bg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=l0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Jg(this._lContainer,t);r&&(Jl(bg(this._lContainer),t),rb(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=Jg(this._lContainer,t);return r&&Jl(bg(this._lContainer),t)!=null?new xi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function l0(n){return n[td]}function bg(n){return n[td]||(n[td]=[])}function CF(n,e){let t,r=e[n.index];return kn(r)?t=r:(t=Cb(r,e,null,n),e[n.index]=t,jd(e,t)),Bb(t,e,n,r),new Ub(t,n,e)}function bF(n,e){let t=n[Ue],r=t.createComment(""),i=rn(e,n),o=ob(t,i);return pd(t,o,r,Kk(t,i),!1),r}var Bb=$b,ey=()=>!1;function TF(n,e,t){return ey(n,e,t)}function $b(n,e,t,r){if(n[nr])return;let i;t.type&8?i=vn(r):i=bF(e,t),n[nr]=i}function AF(n,e,t){if(n[nr]&&n[Xa])return!0;let r=t[Pn],i=e.index-Ot;if(!r||pk(e)||du(r,i))return!1;let s=Yg(r,i),a=r.data[Um]?.[i],[u,l]=aF(s,a);return n[nr]=u,n[Xa]=l,!0}function SF(n,e,t,r){ey(n,t,e)||$b(n,e,t,r)}function MF(){Bb=SF,ey=AF}var d0=new Set;function qr(n){d0.has(n)||(d0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function xF(n){return typeof n=="function"&&n[Zn]!==void 0}function qd(n,e){qr("NgSignals");let t=dD(n),r=t[Zn];return e?.equal&&(r.equal=e.equal),t.set=i=>Kp(r,i),t.update=i=>hD(r,i),t.asReadonly=RF.bind(t),t}function RF(){let n=this[Zn];if(n.readonlyFn===void 0){let e=()=>this();e[Zn]=n,n.readonlyFn=e}return n.readonlyFn}function qb(n){return xF(n)&&typeof n.set=="function"}function NF(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(FF))}return o}return _d.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((f,m)=>{a.push(""),s.push(r(f).then(y=>{a[l+m]=y,h.splice(h.indexOf(f),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>VF(o));e.push(u)}),OF(),Promise.all(e).then(()=>{})}var _d=new Map,PF=new Set;function OF(){let n=_d;return _d=new Map,n}function kF(){return _d.size===0}function FF(n){return typeof n=="string"?n:n.text()}function VF(n){PF.delete(n)}function LF(n){return Object.getPrototypeOf(n.prototype).constructor}function is(n){let e=LF(n.type),t=!0,r=[n];for(;e;){let i;if(Vr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Ul(n.inputs),s.inputTransforms=Ul(n.inputTransforms),s.declaredInputs=Ul(n.declaredInputs),s.outputs=Ul(n.outputs);let a=i.hostBindings;a&&qF(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&BF(n,u),l&&$F(n,l),jF(n,i),yP(n.outputs,i.outputs),Vr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===is&&(t=!1)}}e=Object.getPrototypeOf(e)}UF(r)}function jF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function UF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ya(i.hostAttrs,t=Ya(t,i.hostAttrs))}}function Ul(n){return n===qo?{}:n===$t?[]:n}function BF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function $F(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function qF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Lr=class{},eu=class{};var wd=class extends Lr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vd(this);let o=j0(e);this._bootstrapComponents=JC(o.bootstrap),this._r3Injector=NC(e,t,[{provide:Lr,useValue:this},{provide:Yo,useValue:this.componentFactoryResolver},...r],Mt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ed=class extends eu{constructor(e){super(),this.moduleType=e}create(e){return new wd(this.moduleType,e,[])}};function HF(n,e,t){return new wd(n,e,t,!1)}var am=class extends Lr{constructor(e){super(),this.componentFactoryResolver=new vd(this),this.instance=null;let t=new Za([...e.providers,{provide:Lr,useValue:this},{provide:Yo,useValue:this.componentFactoryResolver}],e.parent||Tm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Hd(n,e,t=null){return new am({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Hb(n){return ty(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function zF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ty(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function GF(n,e,t){return n[e]=t}function Ri(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function WF(n,e,t,r){let i=Ri(n,e,t);return Ri(n,e+1,r)||i}function hu(n){return(n.flags&32)===32}function QF(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Ld(e,n,4,s||null,a||null);Eb(e,t,h,od(l,u)),Pm(e,h);let f=h.tView=Ym(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}function KF(n,e,t,r,i,o,s,a,u,l){let h=t+Ot,f=e.firstCreatePass?QF(h,e,n,r,i,o,s,a,u):e.data[h];uu(f,!1);let m=zb(e,n,f,t);Nm()&&Wm(e,n,m,f),Mi(m,n);let y=Cb(m,n,m,f);return n[h]=y,jd(n,y),TF(y,f,n),Am(f)&&mb(e,n,f),u!=null&&yb(n,f,l),f}function Vi(n,e,t,r,i,o,s,a){let u=Ne(),l=on(),h=od(l.consts,o);return KF(u,l,n,e,t,r,i,h,s,a),Vi}var zb=Gb;function Gb(n,e,t,r){return Br(!0),e[Ue].createComment("")}function YF(n,e,t,r){let i=e[Pn],o=!i||au()||hu(t)||du(i,r);if(Br(o),o)return Gb(n,e,t,r);let s=i.data[Ik]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Bd(i,n,e,t);kd(i,r,a);let u=$m(i,r);return $d(u,a)}function ZF(){zb=YF}var jo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(jo||{}),Wb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),um=class n{constructor(){this.ngZone=k(pe),this.scheduler=k(Ko),this.errorHandler=k(rr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[jo.EarlyRead,jo.Write,jo.MixedReadWrite,jo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},cm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function ny(n,e){!e?.injector&&hO(ny);let t=e?.injector??k(kt);return za(t)?(qr("NgAfterNextRender"),XF(n,t,e,!0)):eV}function JF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function XF(n,e,t,r){let i=e.get(Wb);i.impl??=e.get(um);let o=t?.phase??jo.MixedReadWrite,s=new cm(i.impl,JF(n,o),r,e.get(km));return i.impl.register(s),s}var eV={destroy(){}};function tV(n,e,t,r){return Ri(n,Mm(),t)?e+Yl(t)+r:sr}function nV(n,e,t,r,i,o){let s=NO(),a=WF(n,s,t,i);return hC(2),a?e+Yl(t)+r+Yl(i)+o:sr}function Bl(n,e){return n<<17|e<<2}function Ni(n){return n>>17&32767}function rV(n){return(n&2)==2}function iV(n,e){return n&131071|e<<17}function lm(n){return n|2}function Xo(n){return(n&131068)>>2}function Tg(n,e){return n&-131069|e<<2}function oV(n){return(n&1)===1}function dm(n){return n|1}function sV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ni(s),u=Xo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let f=t;h=f[1],(h===null||iu(f,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Ni(n[a+1]);n[r+1]=Bl(m,a),m!==0&&(n[m+1]=Tg(n[m+1],r)),n[a+1]=iV(n[a+1],r)}else n[r+1]=Bl(a,0),a!==0&&(n[a+1]=Tg(n[a+1],r)),a=r;else n[r+1]=Bl(u,0),a===0?a=r:n[u+1]=Tg(n[u+1],r),u=r;l&&(n[r+1]=lm(n[r+1])),h0(n,h,r,!0),h0(n,h,r,!1),aV(e,h,n,r,o),s=Bl(a,u),o?e.classBindings=s:e.styleBindings=s}function aV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&iu(o,e)>=0&&(t[r+1]=dm(t[r+1]))}function h0(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ni(i):Xo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];uV(u,e)&&(a=!0,n[s+1]=r?dm(l):lm(l)),s=r?Ni(l):Xo(l)}a&&(n[t+1]=r?lm(i):dm(i))}function uV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?iu(n,e)>=0:!1}function Vt(n,e,t){let r=Ne(),i=Mm();if(Ri(r,i,e)){let o=on(),s=_C();wb(o,s,r,n,e,r[Ue],t,!1)}return Vt}function f0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Zm(n,t,o[s],s,r)}function ry(n,e){return cV(n,e,null,!0),ry}function cV(n,e,t,r){let i=Ne(),o=on(),s=hC(2);if(o.firstUpdatePass&&dV(o,n,s,r),e!==sr&&Ri(i,s,e)){let a=o.data[Oi()];mV(o,a,i,i[Ue],n,i[s+1]=yV(e,t),r,s)}}function lV(n,e){return e>=n.expandoStartIndex}function dV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Oi()],s=lV(n,t);vV(o,r)&&e===null&&!s&&(e=!1),e=hV(i,o,e,r),sV(i,o,e,t,s,r)}}function hV(n,e,t,r){let i=VO(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ag(null,n,e,t,r),t=tu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ag(i,n,e,t,r),o===null){let u=fV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Ag(null,n,e,u[1],r),u=tu(u,e.attrs,r),pV(n,e,r,u))}else o=gV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function fV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Xo(r)!==0)return n[Ni(r)]}function pV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ni(i)]=r}function gV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=tu(r,s,t)}return tu(r,e.attrs,t)}function Ag(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=tu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function tu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),VP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function mV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=oV(l)?p0(u,e,t,i,Xo(l),s):void 0;if(!Id(h)){Id(o)||rV(l)&&(o=p0(u,null,t,i,a,s));let f=eC(Oi(),t);t1(r,s,f,i,o)}}function p0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,f=h===null,m=t[i+1];m===sr&&(m=f?$t:void 0);let y=f?gg(m,r):h===r?m:void 0;if(l&&!Id(y)&&(y=gg(u,r)),Id(y)&&(a=y,s))return a;let D=n[i+1];i=s?Ni(D):Xo(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=gg(u,r))}return a}function Id(n){return n!==void 0}function yV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mt(qm(n)))),n}function vV(n,e){return(n.flags&(e?8:16))!==0}function _V(n,e,t,r,i,o){let s=e.consts,a=od(s,i),u=Ld(e,n,2,r,a);return Eb(e,t,u,od(s,o)),u.attrs!==null&&om(u,u.attrs,!1),u.mergedAttrs!==null&&om(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function De(n,e,t,r){let i=Ne(),o=on(),s=Ot+n,a=i[Ue],u=o.firstCreatePass?_V(s,o,i,e,t,r):o.data[s],l=Qb(o,i,u,a,e,n);i[s]=l;let h=Am(u);return uu(u,!0),cb(a,l,u),!hu(u)&&Nm()&&Wm(o,i,l,u),DO()===0&&Mi(l,i),CO(),h&&(mb(o,i,u),gb(o,u,i)),r!==null&&yb(i,u),De}function Ee(){let n=Ft();lC()?xO():(n=n.parent,uu(n,!1));let e=n;TO(e)&&SO(),bO();let t=on();return t.firstCreatePass&&(Pm(t,n),K0(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&qO(e)&&f0(t,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HO(e)&&f0(t,e,Ne(),e.stylesWithoutHost,!1),Ee}function Li(n,e,t,r){return De(n,e,t,r),Ee(),Li}var Qb=(n,e,t,r,i,o)=>(Br(!0),zm(r,i,wC()));function wV(n,e,t,r,i,o){let s=e[Pn],a=!s||au()||hu(t)||du(s,o);if(Br(a),a)return zm(r,i,wC());let u=Bd(s,n,e,t);return KC(s,o)&&kd(s,o,u.nextSibling),s&&(FC(t)||VC(u))&&su(t)&&(AO(t),ab(u)),u}function EV(){Qb=wV}var IV=(n,e,t,r)=>(Br(!0),eb(e[Ue],""));function DV(n,e,t,r){let i,o=e[Pn],s=!o||au()||du(o,r)||hu(t);if(Br(s),s)return eb(e[Ue],"");let a=Bd(o,n,e,t),u=Nk(o,r);return kd(o,r,a),i=$d(u,a),i}function CV(){IV=DV}function Kb(){return Ne()}var Dd="en-US";var bV=Dd;function TV(n){typeof n=="string"&&(bV=n.toLowerCase().replace(/_/g,"-"))}var AV=(n,e,t)=>{};function Gt(n,e,t,r){let i=Ne(),o=on(),s=Ft();return Yb(o,i,i[Ue],s,n,e,r),Gt}function SV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ed],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Yb(n,e,t,r,i,o,s){let a=Am(r),l=n.firstCreatePass&&A1(n),h=e[yn],f=T1(e),m=!0;if(r.type&3||s){let S=rn(r,e),A=s?s(S):S,V=f.length,B=s?G=>s(vn(G[r.index])):r.index,F=null;if(!s&&a&&(F=SV(n,e,i,r.index)),F!==null){let G=F.__ngLastListenerFn__||F;G.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,m=!1}else{o=m0(r,e,h,o),AV(S,i,o);let G=t.listen(A,i,o);f.push(o,G),l&&l.push(i,B,V,V+1)}}else o=m0(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let S=D.length;if(S)for(let A=0;A<S;A+=2){let V=D[A],B=D[A+1],ee=e[V][B].subscribe(o),Y=f.length;f.push(o,ee),l&&l.push(i,r.index,Y,-(Y+1))}}}function g0(n,e,t,r){let i=_e(null);try{return xn(6,e,t),t(r)!==!1}catch(o){return Tb(n,o),!1}finally{xn(7,e,t),_e(i)}}function m0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Ur(n.index,e):e;Xm(s,5);let a=g0(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=g0(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function ar(n=1){return jO(n)}function Be(n,e=""){let t=Ne(),r=on(),i=n+Ot,o=r.firstCreatePass?Ld(r,i,1,e,null):r.data[i],s=Zb(r,t,o,e,n);t[i]=s,Nm()&&Wm(r,t,s,o),uu(o,!1)}var Zb=(n,e,t,r,i)=>(Br(!0),XC(e[Ue],r));function MV(n,e,t,r,i){let o=e[Pn],s=!o||au()||hu(t)||du(o,i);return Br(s),s?XC(e[Ue],r):Bd(o,n,e,t)}function xV(){Zb=MV}function fu(n){return ur("",n,""),fu}function ur(n,e,t){let r=Ne(),i=tV(r,n,e,t);return i!==sr&&Ab(r,Oi(),i),ur}function os(n,e,t,r,i){let o=Ne(),s=nV(o,n,e,t,r,i);return s!==sr&&Ab(o,Oi(),s),os}function ss(n,e,t){qb(e)&&(e=e());let r=Ne(),i=Mm();if(Ri(r,i,e)){let o=on(),s=_C();wb(o,s,r,n,e,r[Ue],t,!1)}return ss}function pu(n,e){let t=qb(n);return t&&n.set(e),t}function as(n,e){let t=Ne(),r=on(),i=Ft();return Yb(r,t,t[Ue],i,n,e),as}function RV(n,e,t){let r=on();if(r.firstCreatePass){let i=Vr(n);hm(t,r.data,r.blueprint,i,!0),hm(e,r.data,r.blueprint,i,!1)}}function hm(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)hm(n[o],e,t,r,i);else{let o=on(),s=Ne(),a=Ft(),u=Ho(n)?n:St(n.provide),l=z0(n),h=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Ho(n)||!n.multi){let y=new Si(l,i,Ie),D=Mg(u,e,i?h:h+m,f);D===-1?($g(ud(a,s),o,u),Sg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=Mg(u,e,h+m,f),D=Mg(u,e,h,h+m),S=y>=0&&t[y],A=D>=0&&t[D];if(i&&!A||!i&&!S){$g(ud(a,s),o,u);let V=OV(i?PV:NV,t.length,i,r,l);!i&&A&&(t[D].providerFactory=V),Sg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=Jb(t[i?D:y],l,!i&&r);Sg(o,n,y>-1?y:D,V)}!i&&r&&A&&t[D].componentProviders++}}}function Sg(n,e,t,r){let i=Ho(e),o=oO(e);if(i||o){let u=(o?St(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Jb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Mg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function NV(n,e,t,r){return fm(this.multi,[])}function PV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Qo(t,t[he],this.providerFactory.index,r);o=a.slice(0,s),fm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],fm(i,o);return o}function fm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function OV(n,e,t,r,i){let o=new Si(n,t,Ie);return o.multi=[],o.index=e,o.componentProviders=0,Jb(o,i,r&&!t),o}function iy(n,e=[]){return t=>{t.providersResolver=(r,i)=>RV(r,i?i(n):n,e)}}var kV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=$0(!1,t.type),i=r.length>0?Hd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(L(Ht))})}}return n})();function Xb(n){qr("NgStandalone"),n.getStandaloneInjector=e=>e.get(kV).getOrCreateStandaloneInjector(n)}function eT(n,e,t,r){return VV(Ne(),RO(),n,e,t,r)}function FV(n,e){let t=n[e];return t===sr?void 0:t}function VV(n,e,t,r,i,o){let s=e+t;return Ri(n,s,i)?GF(n,s+1,o?r.call(o,i):r(i)):FV(n,s+1)}var $l=null;function LV(n){$l!==null&&(n.defaultEncapsulation!==$l.defaultEncapsulation||n.preserveWhitespaces!==$l.preserveWhitespaces)||($l=n)}var ir=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},tT=new ir("18.2.5");var zd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var oy=new H(""),gu=new H(""),Gd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,sy||(jV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(pe),L(Wd),L(gu))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Wd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return sy?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function jV(n){sy=n}var sy;function ji(n){return!!n&&typeof n.then=="function"}function nT(n){return!!n&&typeof n.subscribe=="function"}var Qd=new H(""),rT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k(Qd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ji(o))t.push(o);else if(nT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),us=new H("");function UV(){lD(()=>{throw new Q(600,!1)})}function BV(n){return n.isBoundToModule}var $V=10;function qV(n,e,t){try{let r=t();return ji(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function iT(n,e){return Array.isArray(e)?e.reduce(iT,n):j(j({},n),e)}var En=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(lk),this.afterRenderManager=k(Wb),this.zonelessEnabled=k(Vb),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=k(ki).hasPendingTasks.pipe(X(t=>!t)),this._injector=k(Ht)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof yd;if(!this._injector.get(rT).done){let m=!i&&L0(t),y=!1;throw new Q(405,y)}let s;i?s=t:s=this._injector.get(Yo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=BV(s)?void 0:this._injector.get(Lr),u=r||s.selector,l=s.create(kt.NULL,[],u,a),h=l.location.nativeElement,f=l.injector.get(oy,null);return f?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Ql(this.components,l),f?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Zo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<$V;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)HV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Rd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ql(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(us,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ql(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ql(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var ql;function Kd(n){ql??=new WeakMap;let e=ql.get(n);if(e)return e;let t=n.isStable.pipe(Bt(r=>r)).toPromise().then(()=>{});return ql.set(n,t),n.onDestroy(()=>ql?.delete(n)),t}function HV(n,e,t,r){if(!t&&!Rd(n))return;xb(n,e,t&&!r?0:1)}var pm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Yd=(()=>{class n{compileModuleSync(t){return new Ed(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=j0(t),o=JC(i.declarations).reduce((s,a)=>{let u=Fr(a);return u&&s.push(new Jo(u)),s},[]);return new pm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zV=new H("");function GV(n,e,t){let r=new Ed(t);return Promise.resolve(r)}function y0(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var WV=(()=>{class n{constructor(){this.zone=k(pe),this.changeDetectionScheduler=k(Ko),this.applicationRef=k(En)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QV({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(le(j({},oT()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:bi,multi:!0,useFactory:()=>{let r=k(WV,{optional:!0});return()=>r.initialize()}},{provide:bi,multi:!0,useFactory:()=>{let r=k(KV);return()=>{r.initialize()}}},e===!0?{provide:Lb,useValue:!0}:[],{provide:jb,useValue:t??PC}]}function oT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var KV=(()=>{class n{constructor(){this.subscription=new He,this.initialized=!1,this.zone=k(pe),this.pendingTasks=k(ki)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YV=(()=>{class n{constructor(){this.appRef=k(En),this.taskService=k(ki),this.ngZone=k(pe),this.zonelessEnabled=k(Vb),this.disableScheduling=k(Lb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new He,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ld):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(jb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof dd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?XD:OC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ld+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,XD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZV(){return typeof $localize<"u"&&$localize.locale||Dd}var ay=new H("",{providedIn:"root",factory:()=>k(ay,ue.Optional|ue.SkipSelf)||ZV()});var uy=new H("");function Hl(n){return!!n.platformInjector}function JV(n){let e=Hl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{Hl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(rr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Hl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(uy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else n.moduleRef.onDestroy(()=>{Ql(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return qV(r,t,()=>{let o=e.get(rT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ay,Dd);if(TV(s||Dd),Hl(n)){let a=e.get(En);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return XV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function XV(n,e){let t=n.injector.get(En);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}var sT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>ck(r?.ngZone,le(j({},oT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[QV({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ko,useExisting:YV}],u=HF(t.moduleType,this.injector,a);return JV({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(t,r=[]){let i=iT({},r);return GV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(uy,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(kt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Qa=null,aT=new H("");function eL(n){if(Qa&&!Qa.get(aT,!1))throw new Q(400,!1);UV(),Qa=n;let e=n.get(sT);return rL(n),e}function cy(n,e,t=[]){let r=`Platform: ${e}`,i=new H(r);return(o=[])=>{let s=uT();if(!s||s.injector.get(aT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):eL(tL(a,r))}return nL(i)}}function tL(n=[],e){return kt.create({name:e,providers:[{provide:Md,useValue:"platform"},{provide:uy,useValue:new Set([()=>Qa=null])},...n]})}function nL(n){let e=uT();if(!e)throw new Q(401,!1);return e}function uT(){return Qa?.get(sT)??null}function rL(n){n.get(Lm,null)?.forEach(t=>t())}function ly(){return!1}var Ui=(()=>{class n{static{this.__NG_ELEMENT_ID__=iL}}return n})();function iL(n){return oL(Ft(),Ne(),(n&16)===16)}function oL(n,e,t){if(su(n)&&!t){let r=Ur(n.index,e);return new xi(r,r)}else if(n.type&175){let r=e[tn];return new xi(r,e)}return null}var gm=class{constructor(){}supports(e){return Hb(e)}create(e){return new mm(e)}},sL=(n,e)=>e,mm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<v0(r,i,o)?t:r,a=v0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let f=s.previousIndex;o[f]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Hb(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,zF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new ym(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ym=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},vm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Cd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new vm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function v0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var _m=class{constructor(){}supports(e){return e instanceof Map||ty(e)}create(){return new wm}},wm=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||ty(e)))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Em(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Em=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function _0(){return new dy([new gm])}var dy=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:_0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||_0()),deps:[[n,new Sd,new Pi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Q(901,!1)}}return n})();function w0(){return new hy([new _m])}var hy=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:w0})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||w0()),deps:[[n,new Sd,new Pi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Q(901,!1)}}return n})();var cT=cy(null,"core",[]),lT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(En))}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})();var dT=new H("");var E0=!1;function aL(){E0||(E0=!0,Sk(),EV(),xV(),CV(),ZF(),MF(),cF(),c1())}function uL(n,e){return Kd(n)}function hT(){return ou([{provide:jl,useFactory:()=>{let n=!0;return za()&&(n=!!k(ns,{optional:!0})?.get(WC,null)),n&&qr("NgHydration"),n}},{provide:bi,useValue:()=>{nF(!1),za()&&k(jl)&&(cL(),aL())},multi:!0},{provide:ZC,useFactory:()=>za()&&k(jl)},{provide:us,useFactory:()=>{if(za()&&k(jl)){let n=k(En),e=k(kt);return()=>{uL(n,e).then(()=>{sF(n)})}}return()=>{}},multi:!0}])}function cL(){let n=Od(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===Tk){e=t;break}if(!e)throw new Q(-507,!1)}function Zd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Jd(n,e){qr("NgSignals");let t=aD(n);return e?.equal&&(t[Zn].equal=e.equal),t}function Hr(n){let e=_e(null);try{return n()}finally{_e(e)}}function fT(n){let e=Fr(n);if(!e)return null;let t=new Jo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var vT=null;function Fn(){return vT}function _T(n){vT??=n}var Xd=class{};var Et=new H(""),yy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(hL),providedIn:"platform"})}}return n})(),wT=new H(""),hL=(()=>{class n extends yy{constructor(){super(),this._doc=k(Et),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fn().getBaseHref(this._doc)}onPopState(t){let r=Fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function vy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function pT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function cr(n){return n&&n[0]!=="?"?"?"+n:n}var Bi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(_y),providedIn:"root"})}}return n})(),ET=new H(""),_y=(()=>{class n extends Bi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+cr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+cr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+cr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(yy),L(ET,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),IT=(()=>{class n extends Bi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=vy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+cr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+cr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(yy),L(ET,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),cs=(()=>{class n{constructor(t){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=gL(pT(gT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+cr(r))}normalize(t){return n.stripTrailingSlash(pL(this._basePath,gT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=cr}static{this.joinWithSlash=vy}static{this.stripTrailingSlash=pT}static{this.\u0275fac=function(r){return new(r||n)(L(Bi))}}static{this.\u0275prov=W({token:n,factory:()=>fL(),providedIn:"root"})}}return n})();function fL(){return new cs(L(Bi))}function pL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function gT(n){return n.replace(/\/index.html$/,"")}function gL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function wy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var fy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},DT=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new fy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),mT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);mT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ie(rs),Ie(Ud),Ie(dy))}}static{this.\u0275dir=nn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function mT(n,e){n.context.$implicit=e.item}var th=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new py,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ie(rs),Ie(Ud))}}static{this.\u0275dir=nn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),py=class{constructor(){this.$implicit=null,this.ngIf=null}};function yT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Mt(e)}'.`)}var CT=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:On.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Ie($r),Ie(hy),Ie(Fi))}}static{this.\u0275dir=nn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var bT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})(),Ey="browser",mL="server";function yL(n){return n===Ey}function lr(n){return n===mL}var TT=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>yL(k(pt))?new gy(k(Et),window):new my})}}return n})(),gy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=vL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function vL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var my=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},eh=class{};var rh=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var kT=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(kT||{}),Iy=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new rh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var ih=class n extends Iy{constructor(e={}){super(e),this.type=kT.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var _L=new H("");var wL=new H(""),ST="b",MT="h",xT="s",RT="st",NT="u",PT="rt",nh=new H(""),EL=["GET","HEAD"];function IL(n,e){let y=k(nh),{isCacheActive:t}=y,r=qI(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!EL.includes(o)||!r.includeRequestsWithAuthHeaders&&DL(n)||r.filter?.(n)===!1)return e(n);let s=k(ns),a=k(wL,{optional:!0}),u=lr(k(pt));if(a&&!u)throw new Q(2803,!1);let l=u&&a?AL(n.url,a):n.url,h=bL(n,l),f=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),f){let{[ST]:D,[PT]:S,[MT]:A,[xT]:V,[RT]:B,[NT]:F}=f,G=D;switch(S){case"arraybuffer":G=new TextEncoder().encode(D).buffer;break;case"blob":G=new Blob([D]);break}let ee=new rh(A);return Z(new ih({body:G,headers:ee,status:V,statusText:B,url:F}))}return e(n).pipe(We(D=>{D instanceof ih&&u&&s.set(h,{[ST]:D.body,[MT]:CL(D.headers,m),[xT]:D.status,[RT]:D.statusText,[NT]:l,[PT]:n.responseType})}))}function DL(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function CL(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function OT(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function bL(n,e){let{params:t,method:r,responseType:i}=n,o=OT(t),s=n.serializeBody();s instanceof URLSearchParams?s=OT(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=TL(a);return u}function TL(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function FT(n){return[{provide:nh,useFactory:()=>(qr("NgHttpTransferCache"),j({isCacheActive:!0},n))},{provide:_L,useValue:IL,multi:!0,deps:[ns,nh]},{provide:us,multi:!0,useFactory:()=>{let e=k(En),t=k(nh);return()=>{Kd(e).then(()=>{t.isCacheActive=!1})}}}]}function AL(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var by=class extends Xd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ty=class n extends by{static makeCurrent(){_T(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=SL();return t==null?null:ML(t)}resetBaseElement(){mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wy(document.cookie,e)}},mu=null;function SL(){return mu=mu||document.querySelector("base"),mu?mu.getAttribute("href"):null}function ML(n){return new URL(n,document.baseURI).pathname}var Ay=class{addToWindow(e){or.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Q(5103,!1);return o},or.getAllAngularTestabilities=()=>e.getAllTestabilities(),or.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=or.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};or.frameworkStabilizers||(or.frameworkStabilizers=[]),or.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Fn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},xL=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),oh=new H(""),UT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(oh),L(pe))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),yu=class{constructor(e){this._doc=e}},Dy="ng-app-id",BT=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lr(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Dy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Dy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Dy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Et),L(lu),L(jm,8),L(pt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Cy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xy=/%COMP%/g,$T="%COMP%",RL=`_nghost-${$T}`,NL=`_ngcontent-${$T}`,PL=!0,OL=new H("",{providedIn:"root",factory:()=>PL});function kL(n){return NL.replace(xy,n)}function FL(n){return RL.replace(xy,n)}function qT(n,e){return e.map(t=>t.replace(xy,n))}var VT=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=lr(a),this.defaultRenderer=new vu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nn.ShadowDom&&(r=le(j({},r),{encapsulation:Nn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof sh?i.applyToHost(t):i instanceof _u&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Nn.Emulated:o=new sh(u,l,r,this.appId,h,s,a,f);break;case Nn.ShadowDom:return new Sy(u,l,t,r,s,a,this.nonce,f);default:o=new _u(u,l,r,h,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(UT),L(BT),L(lu),L(OL),L(Et),L(pt),L(pe),L(jm))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),vu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Cy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Cy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Cy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(On.DashCase|On.Important)?e.style.setProperty(t,r,i&On.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&On.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Fn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function LT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Sy=class extends vu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=qT(i.id,i.styles);for(let h of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_u=class extends vu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?qT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sh=class extends _u{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=kL(l),this.hostAttr=FL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},VL=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),LL=(()=>{class n extends yu{constructor(t){super(t),this.delegate=k(dT,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,r,i){return this.delegate.addEventListener(t,r,i)}removeEventListener(t,r,i){return this.delegate.removeEventListener(t,r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),jT=["alt","control","meta","shift"],jL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},BL=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),jT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=jL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jT.forEach(s=>{if(s!==i){let a=UL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function $L(){Ty.makeCurrent()}function qL(){return new rr}function HL(){return $C(document),document}var zL=[{provide:pt,useValue:Ey},{provide:Lm,useValue:$L,multi:!0},{provide:Et,useFactory:HL,deps:[]}],HT=cy(cT,"browser",zL),GL=new H(""),WL=[{provide:gu,useClass:Ay,deps:[]},{provide:oy,useClass:Gd,deps:[pe,Wd,gu]},{provide:Gd,useClass:Gd,deps:[pe,Wd,gu]}],QL=[{provide:Md,useValue:"root"},{provide:rr,useFactory:qL,deps:[]},{provide:oh,useClass:VL,multi:!0,deps:[Et,pe,pt]},{provide:oh,useClass:BL,multi:!0,deps:[Et]},{provide:oh,useClass:LL,multi:!0},VT,BT,UT,{provide:Zo,useExisting:VT},{provide:eh,useClass:xL,deps:[]},[]],zT=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:lu,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(GL,12))}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({providers:[...QL,...WL],imports:[bT,lT]})}}return n})();var GT=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var My=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(My||{});function WT(...n){let e=[],t=new Set,r=t.has(My.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return ou([[],hT(),t.has(My.NoHttpTransferCache)||r?[]:FT({}),e])}var oe="primary",Ou=Symbol("RouteTitle"),ky=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function gs(n){return new ky(n)}function YL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ZL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vn(n[t],e[t]))return!1;return!0}function Vn(n,e){let t=n?Fy(n):void 0,r=e?Fy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!oA(n[i],e[i]))return!1;return!0}function Fy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function oA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function sA(n){return n.length>0?n[n.length-1]:null}function Gr(n){return ag(n)?n:ji(n)?ge(Promise.resolve(n)):Z(n)}var JL={exact:uA,subset:cA},aA={exact:XL,subset:e2,ignored:()=>!0};function KT(n,e,t){return JL[t.paths](n.root,e.root,t.matrixParams)&&aA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function XL(n,e){return Vn(n,e)}function uA(n,e,t){if(!qi(n.segments,e.segments)||!ch(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!uA(n.children[r],e.children[r],t))return!1;return!0}function e2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>oA(n[t],e[t]))}function cA(n,e,t){return lA(n,e,e.segments,t)}function lA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!qi(i,t)||e.hasChildren()||!ch(i,t,r))}else if(n.segments.length===t.length){if(!qi(n.segments,t)||!ch(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!cA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!qi(n.segments,i)||!ch(n.segments,i,r)||!n.children[oe]?!1:lA(n.children[oe],e,o,r)}}function ch(n,e,t){return e.every((r,i)=>aA[t](n[i].parameters,r.parameters))}var hr=class{constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){return r2.serialize(this)}},Ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lh(this)}},$i=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gs(this.parameters),this._parameterMap}toString(){return hA(this)}};function t2(n,e){return qi(n,e)&&n.every((t,r)=>Vn(t.parameters,e[r].parameters))}function qi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function n2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var ku=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new ms,providedIn:"root"})}}return n})(),ms=class{parse(e){let t=new Ly(e);return new hr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wu(e.root,!0)}`,r=s2(e.queryParams),i=typeof e.fragment=="string"?`#${i2(e.fragment)}`:"";return`${t}${r}${i}`}},r2=new ms;function lh(n){return n.segments.map(e=>hA(e)).join("/")}function wu(n,e){if(!n.hasChildren())return lh(n);if(e){let t=n.children[oe]?wu(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${wu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=n2(n,(r,i)=>i===oe?[wu(n.children[oe],!1)]:[`${i}:${wu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${lh(n)}/${t[0]}`:`${lh(n)}/(${t.join("//")})`}}function dA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ah(n){return dA(n).replace(/%3B/gi,";")}function i2(n){return encodeURI(n)}function Vy(n){return dA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(n){return decodeURIComponent(n)}function YT(n){return dh(n.replace(/\+/g,"%20"))}function hA(n){return`${Vy(n.path)}${o2(n.parameters)}`}function o2(n){return Object.entries(n).map(([e,t])=>`;${Vy(e)}=${Vy(t)}`).join("")}function s2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ah(t)}=${ah(i)}`).join("&"):`${ah(t)}=${ah(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var a2=/^[^\/()?;#]+/;function Ry(n){let e=n.match(a2);return e?e[0]:""}var u2=/^[^\/()?;=#]+/;function c2(n){let e=n.match(u2);return e?e[0]:""}var l2=/^[^=?&#]+/;function d2(n){let e=n.match(l2);return e?e[0]:""}var h2=/^[^&#]+/;function f2(n){let e=n.match(h2);return e?e[0]:""}var Ly=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ce(e,t)),r}parseSegment(){let e=Ry(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new $i(dh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=c2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ry(this.remaining);i&&(r=i,this.capture(r))}e[dh(t)]=dh(r)}parseQueryParam(e){let t=d2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=f2(this.remaining);s&&(r=s,this.capture(r))}let i=YT(t),o=YT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ry(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function fA(n){return n.segments.length>0?new Ce([],{[oe]:n}):n}function pA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=pA(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return p2(t)}function p2(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ce(n.segments.concat(e.segments),e.children)}return n}function Tu(n){return n instanceof hr}function g2(n,e,t=null,r=null){let i=gA(n);return mA(i,e,t,r)}function gA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=fA(r);return e??i}function mA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ny(i,i,i,t,r);let o=m2(e);if(o.toRoot())return Ny(i,i,new Ce([],{}),t,r);let s=y2(o,i,n),a=s.processChildren?Du(s.segmentGroup,s.index,o.commands):vA(s.segmentGroup,s.index,o.commands);return Ny(i,s.segmentGroup,a,t,r)}function hh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Au(n){return typeof n=="object"&&n!=null&&n.outlets}function Ny(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=yA(n,e,t);let a=fA(pA(s));return new hr(a,o,i)}function yA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=yA(o,e,t)}),new Ce(n.segments,r)}var fh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hh(r[0]))throw new Q(4003,!1);let i=r.find(Au);if(i&&i!==sA(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function m2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new fh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new fh(t,e,r)}var hs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function y2(n,e,t){if(n.isAbsolute)return new hs(e,!0,0);if(!t)return new hs(e,!1,NaN);if(t.parent===null)return new hs(t,!0,0);let r=hh(n.commands[0])?0:1,i=t.segments.length-1+r;return v2(t,i,n.numberOfDoubleDots)}function v2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new hs(r,!1,i-o)}function _2(n){return Au(n[0])?n[0].outlets:{[oe]:n}}function vA(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return Du(n,e,t);let r=w2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ce(n.segments.slice(r.pathIndex),n.children),Du(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?jy(n,e,t):r.match?Du(n,0,i):jy(n,e,t)}function Du(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=_2(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Du(n.children[oe],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=vA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function w2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Au(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!JT(u,l,s))return o;r+=2}else{if(!JT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function jy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Au(o)){let u=E2(o.outlets);return new Ce(r,u)}if(i===0&&hh(t[0])){let u=n.segments[e];r.push(new $i(u.path,ZT(t[0]))),i++;continue}let s=Au(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hh(a)?(r.push(new $i(s,ZT(a))),i+=2):(r.push(new $i(s,{})),i++)}return new Ce(r,{})}function E2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=jy(new Ce([],{}),0,r))}),e}function ZT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function JT(n,e,t){return n==t.path&&Vn(e,t.parameters)}var Cu="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),sn=class{constructor(e,t){this.id=e,this.url=t}},ys=class extends sn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fr=class extends sn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Kt||{}),ph=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ph||{}),dr=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zr=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationSkipped}},Su=class extends sn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gh=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},By=class extends sn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$y=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qy=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hy=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zy=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gy=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wy=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qy=class{constructor(e){this.snapshot=e,this.type=dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ky=class{constructor(e){this.snapshot=e,this.type=dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Mu=class{},vs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function I2(n,e){return n.providers&&!n._injector&&(n._injector=Hd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function In(n){return n.outlet||oe}function D2(n,e){let t=n.filter(r=>In(r)===e);return t.push(...n.filter(r=>In(r)!==e)),t}function Fu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Yy=class{get injector(){return Fu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Vu(this.rootInjector),this.attachRef=null}},Vu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Yy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(Ht))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Zy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Zy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jy(e,this._root).map(t=>t.value)}};function Zy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Zy(n,t);if(r)return r}return null}function Jy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Jy(n,t);if(r.length)return r.unshift(e),r}return[]}var Qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ds(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vh=class extends yh{constructor(e,t){super(e),this.snapshot=t,av(this,e)}toString(){return this.snapshot.toString()}};function _A(n){let e=C2(n),t=new ft([new $i("",{})]),r=new ft({}),i=new ft({}),o=new ft({}),s=new ft(""),a=new _s(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new vh(new Qt(a,[]),e)}function C2(n){let e={},t={},r={},i="",o=new fs([],e,r,i,t,oe,n,null,{});return new wh("",new Qt(o,[]))}var _s=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[Ou]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>gs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>gs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _h(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&EA(i)&&(r.resolve[Ou]=i.title),r}var fs=class{get title(){return this.data?.[Ou]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wh=class extends yh{constructor(e,t){super(t),this.url=e,av(this,t)}toString(){return wA(this._root)}};function av(n,e){e.value._routerState=n,e.children.forEach(t=>av(n,t))}function wA(n){let e=n.children.length>0?` { ${n.children.map(wA).join(", ")} } `:"";return`${n.value}${e}`}function Py(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vn(e.params,t.params)||n.paramsSubject.next(t.params),ZL(e.url,t.url)||n.urlSubject.next(t.url),Vn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Xy(n,e){let t=Vn(n.params,e.params)&&t2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Xy(n.parent,e.parent))}function EA(n){return typeof n.title=="string"||n.title===null}var uv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=k(Vu),this.location=k(rs),this.changeDetector=k(Ui),this.inputBinder=k(bh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ev(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=nn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ts]})}}return n})(),ev=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_s?this.route:e===Vu?this.childContexts:this.parent.get(e,t)}},bh=new H(""),XT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=qa([r.queryParams,r.params,r.data]).pipe(je(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=fT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function b2(n,e,t){let r=xu(n,e._root,t?t._root:void 0);return new vh(r,e)}function xu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=T2(n,e,t);return new Qt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>xu(n,a)),s}}let r=A2(e.value),i=e.children.map(o=>xu(n,o));return new Qt(r,i)}}function T2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xu(n,r,i);return xu(n,r)})}function A2(n){return new _s(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var Ru=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},IA="ngNavigationCancelingError";function Eh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Tu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=DA(!1,Kt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function DA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[IA]=!0,t.cancellationCode=e,t}function S2(n){return CA(n)&&Tu(n.url)}function CA(n){return!!n&&n[IA]}var M2=(n,e,t,r)=>X(i=>(new tv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),tv=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Py(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ds(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ds(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ky(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Wy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Py(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Py(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ih=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ps=class{constructor(e,t){this.component=e,this.route=t}};function x2(n,e,t){let r=n._root,i=e?e._root:null;return Eu(r,i,t,[r.value])}function R2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Es(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!C0(n)?n:e.get(n):r}function Eu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ds(e);return n.children.forEach(s=>{N2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bu(a,t.getContext(s),i)),i}function N2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=P2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ih(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Eu(n,e,a?a.children:null,r,i):Eu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ps(a.outlet.component,s))}else s&&bu(e,a,i),i.canActivateChecks.push(new Ih(r)),o.component?Eu(n,null,a?a.children:null,r,i):Eu(n,null,t,r,i);return i}function P2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!qi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qi(n.url,e.url)||!Vn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xy(n,e)||!Vn(n.queryParams,e.queryParams);case"paramsChange":default:return!Xy(n,e)}}function bu(n,e,t){let r=ds(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?bu(s,e.children.getContext(o),t):bu(s,null,t):bu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ps(e.outlet.component,i)):t.canDeactivateChecks.push(new ps(null,i)):t.canDeactivateChecks.push(new ps(null,i))}function Lu(n){return typeof n=="function"}function O2(n){return typeof n=="boolean"}function k2(n){return n&&Lu(n.canLoad)}function F2(n){return n&&Lu(n.canActivate)}function V2(n){return n&&Lu(n.canActivateChild)}function L2(n){return n&&Lu(n.canDeactivate)}function j2(n){return n&&Lu(n.canMatch)}function bA(n){return n instanceof Xn||n?.name==="EmptyError"}var uh=Symbol("INITIAL_VALUE");function ws(){return je(n=>qa(n.map(e=>e.pipe(er(1),Di(uh)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===uh)return uh;if(t===!1||U2(t))return t}return!0}),lt(e=>e!==uh),er(1)))}function U2(n){return Tu(n)||n instanceof Ru}function B2(n,e){return Je(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(le(j({},t),{guardsResult:!0})):$2(s,r,i,n).pipe(Je(a=>a&&O2(a)?q2(r,o,n,e):Z(a)),X(a=>le(j({},t),{guardsResult:a})))})}function $2(n,e,t,r){return ge(n).pipe(Je(i=>Q2(i.component,i.route,t,e,r)),Bt(i=>i!==!0,!0))}function q2(n,e,t,r){return ge(e).pipe(Rr(i=>Po(z2(i.route.parent,r),H2(i.route,r),W2(n,i.path,t),G2(n,i.route,t))),Bt(i=>i!==!0,!0))}function H2(n,e){return n!==null&&e&&e(new Qy(n)),Z(!0)}function z2(n,e){return n!==null&&e&&e(new Gy(n)),Z(!0)}function G2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Ol(()=>{let s=Fu(e)??t,a=Es(o,s),u=F2(a)?a.canActivate(e,n):_n(s,()=>a(e,n));return Gr(u).pipe(Bt())}));return Z(i).pipe(ws())}function W2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>R2(s)).filter(s=>s!==null).map(s=>Ol(()=>{let a=s.guards.map(u=>{let l=Fu(s.node)??t,h=Es(u,l),f=V2(h)?h.canActivateChild(r,n):_n(l,()=>h(r,n));return Gr(f).pipe(Bt())});return Z(a).pipe(ws())}));return Z(o).pipe(ws())}function Q2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Fu(e)??i,l=Es(a,u),h=L2(l)?l.canDeactivate(n,e,t,r):_n(u,()=>l(n,e,t,r));return Gr(h).pipe(Bt())});return Z(s).pipe(ws())}function K2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Es(s,n),u=k2(a)?a.canLoad(e,t):_n(n,()=>a(e,t));return Gr(u)});return Z(o).pipe(ws(),TA(r))}function TA(n){return tg(We(e=>{if(typeof e!="boolean")throw Eh(n,e)}),X(e=>e===!0))}function Y2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Es(s,n),u=j2(a)?a.canMatch(e,t):_n(n,()=>a(e,t));return Gr(u)});return Z(o).pipe(ws(),TA(r))}var Nu=class{constructor(e){this.segmentGroup=e||null}},Pu=class extends Error{constructor(e){super(),this.urlTree=e}};function ls(n){return No(new Nu(n))}function Z2(n){return No(new Q(4e3,!1))}function J2(n){return No(DA(!1,Kt.GuardRejected))}var nv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[oe])return Z2(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:f,outlet:m,params:y,data:D,title:S}=i,A=_n(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:h,url:f,outlet:m,title:S}));if(A instanceof hr)throw new Pu(A);t=A}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Pu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new hr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},rv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function X2(n,e,t,r,i){let o=AA(n,e,t);return o.matched?(r=I2(e,r),Y2(r,e,t,i).pipe(X(s=>s===!0?o:j({},rv)))):Z(o)}function AA(n,e,t){if(e.path==="**")return ej(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},rv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||YL)(t,n,e);if(!i)return j({},rv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function ej(n){return{matched:!0,parameters:n.length>0?sA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function eA(n,e,t,r){return t.length>0&&rj(n,t,r)?{segmentGroup:new Ce(e,nj(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&ij(n,t,r)?{segmentGroup:new Ce(n.segments,tj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function tj(n,e,t,r){let i={};for(let o of t)if(Th(n,e,o)&&!r[In(o)]){let s=new Ce([],{});i[In(o)]=s}return j(j({},r),i)}function nj(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&In(r)!==oe){let i=new Ce([],{});t[In(r)]=i}return t}function rj(n,e,t){return t.some(r=>Th(n,e,r)&&In(r)!==oe)}function ij(n,e,t){return t.some(r=>Th(n,e,r))}function Th(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function oj(n,e,t){return e.length===0&&!n.children[t]}var iv=class{};function sj(n,e,t,r,i,o,s="emptyOnly"){return new ov(n,e,t,r,i,s,o).recognize()}var aj=31,ov=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new nv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=eA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new Qt(r,t),o=new wh("",i),s=g2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new fs([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(X(r=>({children:r,rootSnapshot:t})),xr(r=>{if(r instanceof Pu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Nu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof Qt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ge(o).pipe(Rr(s=>{let a=r.children[s],u=D2(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Ii((s,a)=>(s.push(...a),s)),Nr(null),hg(),Je(s=>{if(s===null)return ls(r);let a=SA(s);return uj(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return ge(t).pipe(Rr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(xr(l=>{if(l instanceof Nu)return Z(null);throw l}))),Bt(u=>!!u),xr(u=>{if(bA(u))return oj(r,i,o)?Z(new iv):ls(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return In(r)!==s&&(s===oe||!Th(i,o,r))?ls(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ls(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:f,remainingSegments:m}=AA(t,i,o);if(!u)return ls(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>aj&&(this.allowRedirects=!1));let y=new fs(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,tA(i),In(i),i.component??i._loadedComponent??null,i,nA(i)),D=_h(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(Je(A=>this.processSegment(e,r,t,A.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=X2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(je(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(je(({routes:l})=>{let h=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:y}=u,D=new fs(m,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,tA(r),In(r),r.component??r._loadedComponent??null,r,nA(r)),S=_h(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(S.params),D.data=Object.freeze(S.data);let{segmentGroup:A,slicedSegments:V}=eA(t,m,y,l);if(V.length===0&&A.hasChildren())return this.processChildren(h,l,A,D).pipe(X(F=>new Qt(D,F)));if(l.length===0&&V.length===0)return Z(new Qt(D,[]));let B=In(r)===o;return this.processSegment(h,l,A,V,B?oe:o,!0,D).pipe(X(F=>new Qt(D,F instanceof Qt?[F]:[])))}))):ls(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):K2(e,t,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,t).pipe(We(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):J2(t))):Z({routes:[],injector:e})}};function uj(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function cj(n){let e=n.value.routeConfig;return e&&e.path===""}function SA(n){let e=[],t=new Set;for(let r of n){if(!cj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=SA(r.children);e.push(new Qt(r.value,i))}return e.filter(r=>!t.has(r))}function tA(n){return n.data||{}}function nA(n){return n.resolve||{}}function lj(n,e,t,r,i,o){return Je(s=>sj(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>le(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function dj(n,e){return Je(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of MA(u))s.add(l);let a=0;return ge(s).pipe(Rr(u=>o.has(u)?hj(u,r,n,e):(u.data=_h(u,u.parent,n).resolve,Z(void 0))),We(()=>a++),ko(1),Je(u=>a===s.size?Z(t):At))})}function MA(n){let e=n.children.map(t=>MA(t)).flat();return[n,...e]}function hj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!EA(i)&&(o[Ou]=i.title),fj(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=_h(n,n.parent,t).resolve,null)))}function fj(n,e,t,r){let i=Fy(n);if(i.length===0)return Z({});let o={};return ge(i).pipe(Je(s=>pj(n[s],e,t,r).pipe(Bt(),We(a=>{if(a instanceof Ru)throw Eh(new ms,a);o[s]=a}))),ko(1),lg(o),xr(s=>bA(s)?At:No(s)))}function pj(n,e,t,r){let i=Fu(e)??r,o=Es(n,i),s=o.resolve?o.resolve(e,t):_n(i,()=>o(e,t));return Gr(s)}function Oy(n){return je(e=>{let t=n(e);return t?ge(t).pipe(X(()=>e)):Z(e)})}var xA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Ou]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(gj),providedIn:"root"})}}return n})(),gj=(()=>{class n extends xA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(GT))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ju=new H("",{providedIn:"root",factory:()=>({})}),mj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=jr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Xb],decls:1,vars:0,template:function(r,i){r&1&&Li(0,"router-outlet")},dependencies:[uv],encapsulation:2})}}return n})();function cv(n){let e=n.children&&n.children.map(cv),t=e?le(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=mj),t}var Dh=new H(""),lv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Yd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Gr(t.loadComponent()).pipe(X(RA),We(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Oo(()=>{this.componentLoaders.delete(t)})),i=new So(r,()=>new Le).pipe(Ao());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=yj(r,this.compiler,t,this.onLoadEndListener).pipe(Oo(()=>{this.childrenLoaders.delete(r)})),s=new So(o,()=>new Le).pipe(Ao());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yj(n,e,t,r){return Gr(n.loadChildren()).pipe(X(RA),Je(i=>i instanceof eu||Array.isArray(i)?Z(i):ge(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Dh,[],{optional:!0,self:!0}).flat()),{routes:s.map(cv),injector:o}}))}function vj(n){return n&&typeof n=="object"&&"default"in n}function RA(n){return vj(n)?n.default:n}var dv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(_j),providedIn:"root"})}}return n})(),_j=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),NA=new H(""),PA=new H("");function wj(n,e,t){let r=n.get(PA),i=n.get(Et);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Ej(n))),{onViewTransitionCreated:u}=r;return u&&_n(n,()=>u({transition:a,from:e,to:t})),s})}function Ej(n){return new Promise(e=>{ny({read:()=>setTimeout(e)},{injector:n})})}var Ij=new H(""),hv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=k(lv),this.environmentInjector=k(Ht),this.urlSerializer=k(ku),this.rootContexts=k(Vu),this.location=k(cs),this.inputBindingEnabled=k(bh,{optional:!0})!==null,this.titleStrategy=k(xA),this.options=k(ju,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(dv),this.createViewTransition=k(NA,{optional:!0}),this.navigationErrorHandler=k(Ij,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Hy(i)),r=i=>this.events.next(new zy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ft({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Cu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),X(o=>le(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),je(o=>{let s=!1,a=!1;return Z(o).pipe(je(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Kt.SupersededByNewNavigation),At;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?le(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new zr(u.id,this.urlSerializer.serialize(u.rawUrl),f,ph.IgnoredSameUrlNavigation)),u.resolve(!1),At}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(je(f=>{let m=this.transitions?.getValue();return this.events.next(new ys(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?At:Promise.resolve(f)}),lj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),We(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=le(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new gh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:m,source:y,restoredState:D,extras:S}=u,A=new ys(f,this.urlSerializer.serialize(m),y,D);this.events.next(A);let V=_A(this.rootComponentType).snapshot;return this.currentTransition=o=le(j({},u),{targetSnapshot:V,urlAfterRedirects:m,extras:le(j({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let f="";return this.events.next(new zr(u.id,this.urlSerializer.serialize(u.extractedUrl),f,ph.IgnoredByUrlHandlingStrategy)),u.resolve(!1),At}}),We(u=>{let l=new Uy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),X(u=>(this.currentTransition=o=le(j({},u),{guards:x2(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),B2(this.environmentInjector,u=>this.events.next(u)),We(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Eh(this.urlSerializer,u.guardsResult);let l=new By(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),lt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Kt.GuardRejected),!1)),Oy(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(We(l=>{let h=new $y(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),je(l=>{let h=!1;return Z(l).pipe(dj(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Kt.NoDataFromResolver)}}))}),We(l=>{let h=new qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Oy(u=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(We(m=>{h.component=m}),X(()=>{})));for(let m of h.children)f.push(...l(m));return f};return qa(l(u.targetSnapshot.root)).pipe(Nr(null),er(1))}),Oy(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ge(h).pipe(X(()=>o)):Z(o)}),X(u=>{let l=b2(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=le(j({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),We(()=>{this.events.next(new Mu)}),M2(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),er(1),We({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),pg(this.transitionAbortSubject.pipe(We(u=>{throw u}))),Oo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Kt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),xr(u=>{if(a=!0,CA(u))this.events.next(new dr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),S2(u)?this.events.next(new vs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Su(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=_n(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ru){let{message:f,cancellationCode:m}=Eh(this.urlSerializer,h);this.events.next(new dr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new vs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return At}))}))}cancelNavigationTransition(t,r,i){let o=new dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Dj(n){return n!==Cu}var Cj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(bj),providedIn:"root"})}}return n})(),sv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},bj=(()=>{class n extends sv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=cu(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),OA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(Tj),providedIn:"root"})}}return n})(),Tj=(()=>{class n extends OA{constructor(){super(...arguments),this.location=k(cs),this.urlSerializer=k(ku),this.options=k(ju,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(dv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=_A(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ys)this.stateMemento=this.createStateMemento();else if(t instanceof zr)this.rawUrlTree=r.initialUrl;else if(t instanceof gh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Mu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof dr&&(t.code===Kt.GuardRejected||t.code===Kt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Su?this.restoreHistory(r,!0):t instanceof fr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof hr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=cu(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Iu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Iu||{});function kA(n,e){n.events.pipe(lt(t=>t instanceof fr||t instanceof dr||t instanceof Su||t instanceof zr),X(t=>t instanceof fr||t instanceof zr?Iu.COMPLETE:(t instanceof dr?t.code===Kt.Redirect||t.code===Kt.SupersededByNewNavigation:!1)?Iu.REDIRECTING:Iu.FAILED),lt(t=>t!==Iu.REDIRECTING),er(1)).subscribe(()=>{e()})}function Aj(n){throw n}var Sj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(zd),this.stateManager=k(OA),this.options=k(ju,{optional:!0})||{},this.pendingTasks=k(ki),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(hv),this.urlSerializer=k(ku),this.location=k(cs),this.urlHandlingStrategy=k(dv),this._events=new Le,this.errorHandler=this.options.errorHandler||Aj,this.navigated=!1,this.routeReuseStrategy=k(Cj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Dh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(bh,{optional:!0}),this.eventsSubscription=new He,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof dr&&r.code!==Kt.Redirect&&r.code!==Kt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof fr)this.navigated=!0;else if(r instanceof vs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Dj(i.source)},s);this.scheduleNavigation(a,Cu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Rj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=gA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return mA(f,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Tu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Cu,null,r)}navigate(t,r={skipLocationChange:!1}){return xj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},Sj):r===!1?i=j({},Mj):i=r,Tu(t))return KT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return KT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,m)=>{a=f,u=m});let h=this.pendingTasks.add();return kA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function Rj(n){return!(n instanceof Mu)&&!(n instanceof vs)}var Ch=class{};var Nj=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof fr),Rr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Hd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ge(i).pipe(Mr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(Je(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ge([o,s]).pipe(Mr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(Hi),L(Yd),L(Ht),L(Ch),L(lv))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),FA=new H(""),Pj=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ys?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof zr&&t.code===ph.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){db()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function Oj(n){return n.routerState.root}function Uu(n,e){return{\u0275kind:n,\u0275providers:e}}function kj(){let n=k(kt);return e=>{let t=n.get(En);if(e!==t.components[0])return;let r=n.get(Hi),i=n.get(VA);n.get(fv)===1&&r.initialNavigation(),n.get(LA,null,ue.Optional)?.setUpPreloading(),n.get(FA,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VA=new H("",{factory:()=>new Le}),fv=new H("",{providedIn:"root",factory:()=>1});function Fj(){return Uu(2,[{provide:fv,useValue:0},{provide:Qd,multi:!0,deps:[kt],useFactory:e=>{let t=e.get(wT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Hi),o=e.get(VA);kA(i,()=>{r(!0)}),e.get(hv).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function Vj(){return Uu(3,[{provide:Qd,multi:!0,useFactory:()=>{let e=k(Hi);return()=>{e.setUpLocationChangeListener()}}},{provide:fv,useValue:2}])}var LA=new H("");function Lj(n){return Uu(0,[{provide:LA,useExisting:Nj},{provide:Ch,useExisting:n}])}function jj(){return Uu(8,[XT,{provide:bh,useExisting:XT}])}function Uj(n){let e=[{provide:NA,useValue:wj},{provide:PA,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Uu(9,e)}var rA=new H("ROUTER_FORROOT_GUARD"),Bj=[cs,{provide:ku,useClass:ms},Hi,Vu,{provide:_s,useFactory:Oj,deps:[Hi]},lv,[]],pv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Bj,[],{provide:Dh,multi:!0,useValue:t},{provide:rA,useFactory:zj,deps:[[Hi,new Pi,new Sd]]},{provide:ju,useValue:r||{}},r?.useHash?qj():Hj(),$j(),r?.preloadingStrategy?Lj(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Gj(r):[],r?.bindToComponentInputs?jj().\u0275providers:[],r?.enableViewTransitions?Uj().\u0275providers:[],Wj()]}}static forChild(t){return{ngModule:n,providers:[{provide:Dh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(rA,8))}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})();function $j(){return{provide:FA,useFactory:()=>{let n=k(TT),e=k(pe),t=k(ju),r=k(hv),i=k(ku);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Pj(i,r,n,e,t)}}}function qj(){return{provide:Bi,useClass:IT}}function Hj(){return{provide:Bi,useClass:_y}}function zj(n){return"guarded"}function Gj(n){return[n.initialNavigation==="disabled"?Vj().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Fj().\u0275providers:[]]}var iA=new H("");function Wj(){return[{provide:iA,useFactory:kj},{provide:us,multi:!0,useExisting:iA}]}var Kj="firebase",Yj="10.13.2";Ge.registerVersion(Kj,Yj,"app-compat");var Zj="firebase",Jj="10.13.2";Sr(Zj,Jj,"app");var Is=new ir("ANGULARFIRE2_VERSION");var Xj=(n,e)=>{let t=e?[e]:JI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zi=class{constructor(){return Xj(eU)}},eU="app-check";function gv(){}var Ah=class{zone;delegate;constructor(e,t=og){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},mv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gv,{},gv,gv)),t.pipe(We({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Sh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ah(Zone.current)),this.insideAngular=t.run(()=>new Ah(Zone.current,$a)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(pe))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tU(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Lt(n){return nU(tU())(n)}function nU(n){return function(t){return t=t.lift(new mv(n.ngZone)),t.pipe(fn(n.outsideAngular),Jt(n.insideAngular))}}var oU=new Map,sU={activated:!1,tokenObservers:[]},aU={initialized:!1,enabled:!1};function Dn(n){return oU.get(n)||Object.assign({},sU)}function HA(){return aU}var uU="https://content-firebaseappcheck.googleapis.com/v1";var cU="exchangeDebugToken",UA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},v6=24*60*60*1e3;var vv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Up,this.pending.promise.catch(t=>{}),yield lU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Up,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function lU(n){return new Promise(e=>{setTimeout(e,n)})}var dU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wr=new YI("appCheck","AppCheck",dU);function zA(n){if(!Dn(n).activated)throw Wr.create("use-before-activation",{appName:n.name})}function GA(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Wr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Wr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Wr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Wr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function WA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${uU}/projects/${t}/apps/${r}:${cU}?key=${i}`,body:{debug_token:e}}}var hU="firebase-app-check-database",fU=1,_v="firebase-app-check-store";var Mh=null;function pU(){return Mh||(Mh=new Promise((n,e)=>{try{let t=indexedDB.open(hU,fU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Wr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(_v,{keyPath:"compositeKey"})}}}catch(t){e(Wr.create("storage-open",{originalErrorMessage:t?.message}))}}),Mh)}function gU(n,e){return mU(yU(n),e)}function mU(n,e){return N(this,null,function*(){let r=(yield pU()).transaction(_v,"readwrite"),o=r.objectStore(_v).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Wr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function yU(n){return`${n.options.appId}-${n.name}`}var wv=new il("@firebase/app-check");function yv(n,e){return rl()?gU(n,e).catch(t=>{wv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QA(){return HA().enabled}function KA(){return N(this,null,function*(){let n=HA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vU={error:"UNKNOWN_ERROR"};function _U(n){return WI.encodeString(JSON.stringify(n),!1)}function Ev(n,e=!1){return N(this,null,function*(){let t=n.app;zA(t);let r=Dn(t),i=r.token,o;if(i&&!Bu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Bu(u)?i=u:yield yv(t,void 0))}if(!e&&i&&Bu(i))return{token:i.token};let s=!1;if(QA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=GA(WA(t,yield KA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield yv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Dn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?wv.warn(u.message):wv.error(u),o=u}let a;return i?o?Bu(i)?a={token:i.token,internalError:o}:a=$A(o):(a={token:i.token},r.token=i,yield yv(t,i)):a=$A(o),s&&DU(t,a),a})}function wU(n){return N(this,null,function*(){let e=n.app;zA(e);let{provider:t}=Dn(e);if(QA()){let r=yield KA(),{token:i}=yield GA(WA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function EU(n,e,t,r){let{app:i}=n,o=Dn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Bu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),BA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>BA(n))}function YA(n,e){let t=Dn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function BA(n){let{app:e}=n,t=Dn(e),r=t.tokenRefresher;r||(r=IU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function IU(n){let{app:e}=n;return new vv(()=>N(this,null,function*(){let t=Dn(e),r;if(t.token?r=yield Ev(n,!0):r=yield Ev(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Dn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},UA.RETRIAL_MIN_WAIT,UA.RETRIAL_MAX_WAIT)}function DU(n,e){let t=Dn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Bu(n){return n.expireTimeMillis-Date.now()>0}function $A(n){return{token:_U(vU),error:n}}var Iv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Dn(this.app);for(let t of e)YA(this.app,t.next);return Promise.resolve()}};function CU(n,e){return new Iv(n,e)}function bU(n){return{getToken:e=>Ev(n,e),getLimitedUseToken:()=>wU(n),addTokenListener:e=>EU(n,"INTERNAL",e),removeTokenListener:e=>YA(n.app,e)}}var TU="@firebase/app-check",AU="0.8.8";var SU="app-check",qA="app-check-internal";function MU(){Fa(new vi(SU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return CU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qA).initialize()})),Fa(new vi(qA,n=>{let e=n.getProvider("app-check").getImmediate();return bU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Sr(TU,AU)}MU();var xU=["localhost","0.0.0.0","127.0.0.1"],x6=typeof window<"u"&&xU.includes(window.location.hostname);var RU=["ngOnDestroy"],XA=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(RU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let f=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var xh=class{constructor(e){return e}},Ds=new H("angularfire2.app.options"),Cs=new H("angularfire2.app.name");function $u(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Ge.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ge.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;NU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new xh(s)}var NU=(n,...e)=>{ly()&&typeof console<"u"&&console[n](...e)},PU={provide:xh,useFactory:$u,deps:[Ds,pe,[new Pi,Cs]]},eS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ds,useValue:t},{provide:Cs,useValue:r}]}}constructor(t){Ge.registerVersion("angularfire",Is.full,"core"),Ge.registerVersion("angularfire",Is.full,"app-compat"),Ge.registerVersion("angular",tT.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(pt))};static \u0275mod=at({type:n});static \u0275inj=st({providers:[PU]})}return n})();function Rh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return OU(i,s)||(JA("error",`${e} was already initialized on the ${t} Firebase App with different settings.${kU?" You may need to reload as Firebase is not HMR aware.":""}`),JA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function OU(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var kU=typeof module<"u"&&!!module.hot,JA=(n,...e)=>{ly()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Dv=new H("angularfire2.auth.use-emulator"),Cv=new H("angularfire2.auth.settings"),bv=new H("angularfire2.auth.tenant-id"),Tv=new H("angularfire2.auth.langugage-code"),Av=new H("angularfire2.auth.use-device-language"),Sv=new H("angularfire.auth.persistence"),Mv=(n,e,t,r,i,o,s,a)=>Rh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),tS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,f,m,y){let D=new Le,S=Z(void 0).pipe(Jt(s.outsideAngular),je(()=>o.runOutsideAngular(()=>import("./chunk-63EJ5QCV.js"))),X(()=>$u(t,o,r)),X(A=>Mv(A,o,a,l,h,f,u,m)),Fl({bufferSize:1,refCount:!1}));if(lr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{S.pipe(Bt()).subscribe();let A=S.pipe(je(F=>F.getRedirectResult().then(G=>G,()=>null)),Lt,Fl({bufferSize:1,refCount:!1})),V=S.pipe(je(F=>new de(G=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))})))),B=S.pipe(je(F=>new de(G=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))}))));this.authState=A.pipe(Vl(V),fn(s.outsideAngular),Jt(s.insideAngular)),this.user=A.pipe(Vl(B),fn(s.outsideAngular),Jt(s.insideAngular)),this.idToken=this.user.pipe(je(F=>F?ge(F.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(je(F=>F?ge(F.getIdTokenResult()):Z(null))),this.credential=cg(A,D,this.authState.pipe(lt(F=>!F))).pipe(X(F=>F?.user?F:null),fn(s.outsideAngular),Jt(s.insideAngular))}return XA(this,S,o,{spy:{apply:(A,V,B)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&B.then(F=>D.next(F))}}})}static \u0275fac=function(r){return new(r||n)(L(Ds),L(Cs,8),L(pt),L(pe),L(Sh),L(Dv,8),L(Cv,8),L(bv,8),L(Tv,8),L(Av,8),L(Sv,8),L(zi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var nS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rS={};var Qr,xv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,T){for(var _=Array(arguments.length-2),Qn=2;Qn<arguments.length;Qn++)_[Qn-2]=arguments[Qn];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var T=E.g[3],_=v+(T^w&(C^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[C++]=E.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<v;)if(I[C++]=E[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var T=E[C]|0;I&&T==v||(w[C]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return A(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return A(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=f,C=0;C<E.length;C+=8){var T=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var f=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(S(this))return-A(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(S(this))return"-"+A(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=G(w,v).g;w=V(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function S(E){return E.h==-1}n.l=function(E){return E=V(this,E),S(E)?-1:D(E)?0:1};function A(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return S(this)?A(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var T=I+(this.i(C)&65535)+(E.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(E,v){return E.add(A(v))}n.j=function(E){if(D(this)||D(E))return f;if(S(this))return S(E)?A(this).j(A(E)):A(A(this).j(E));if(S(E))return A(this.j(A(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var T=this.i(I)>>>16,_=this.i(I)&65535,Qn=E.i(C)>>>16,ma=E.i(C)&65535;w[2*I+2*C]+=_*ma,B(w,2*I+2*C),w[2*I+2*C+1]+=T*ma,B(w,2*I+2*C+1),w[2*I+2*C+1]+=_*Qn,B(w,2*I+2*C+1),w[2*I+2*C+2]+=T*Qn,B(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function B(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function F(E,v){this.g=E,this.h=v}function G(E,v){if(D(v))throw Error("division by zero");if(D(E))return new F(f,f);if(S(E))return v=G(A(E),v),new F(A(v.g),A(v.h));if(S(v))return v=G(E,A(v)),new F(A(v.g),v.h);if(30<E.g.length){if(S(E)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=ee(w),I=ee(I);var C=Y(w,1),T=Y(I,1);for(I=Y(I,2),w=Y(w,2);!D(I);){var _=T.add(I);0>=_.l(E)&&(C=C.add(w),T=_),I=Y(I,1),w=Y(w,1)}return v=V(E,C.j(v)),new F(C,v)}for(C=f;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);S(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);D(T)&&(T=m),C=C.add(T),E=V(E,_)}return new F(C,E)}n.A=function(E){return G(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ee(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function Y(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],T=0;T<I;T++)C[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xv=rS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Qr=rS.Integer=s}).apply(typeof nS<"u"?nS:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pr={};var Rv,Nv,bs,Pv,qu,Ph,Ov,kv,Fv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,p){return c==Array.prototype||c==Object.prototype||(c[d]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var d=0;d<c.length;++d){var p=c[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var p=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in p))break e;p=p[b]}c=c[c.length-1],g=p[c],d=d(g),d!=g&&d!=null&&e(p,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var p=0,g=!1,b={next:function(){if(!g&&p<c.length){var R=p++;return{value:d(R,c[R]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,p){return p})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,p){return c.call.apply(c.bind,arguments)}function f(c,d,p){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(c,d){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,d){function p(){}p.prototype=d.prototype,c.aa=d.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(g,b,R){for(var U=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)U[Te-2]=arguments[Te];return d.prototype[b].apply(g,U)}}function S(c){let d=c.length;if(0<d){let p=Array(d);for(let g=0;g<d;g++)p[g]=c[g];return p}return[]}function A(c,d){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(u(g)){let b=c.length||0,R=g.length||0;c.length=b+R;for(let U=0;U<R;U++)c[b+U]=g[U]}else c.push(g)}}class V{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Y(c,d,p){for(let g in c)d.call(p,c[g],g,c)}function E(c,d){for(let p in c)d.call(void 0,c[p],p,c)}function v(c){let d={};for(let p in c)d[p]=c[p];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let p,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(p in g)c[p]=g[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(g,p)&&(c[p]=g[p])}}function C(c){var d=1;c=c.split(":");let p=[];for(;0<d&&c.length;)p.push(c.shift()),d--;return c.length&&p.push(c.join(":")),p}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=pp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Qn{constructor(){this.h=this.g=null}add(d,p){let g=ma.get();g.set(d,p),this.h?this.h.next=g:this.g=g,this.h=g}}var ma=new V(()=>new aN,c=>c.reset());class aN{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ya,va=!1,pp=new Qn,$E=()=>{let c=a.Promise.resolve(void 0);ya=()=>{c.then(uN)}};var uN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){T(p)}var d=ma;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}va=!1};function Cr(){this.s=this.s,this.C=this.C}Cr.prototype.s=!1,Cr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function mt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var cN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return c}();function _a(c,d){if(mt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{G(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else p=="mouseover"?d=c.fromElement:p=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:lN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&_a.aa.h.call(this)}}D(_a,mt);var lN={2:"touch",3:"pen",4:"mouse"};_a.prototype.h=function(){_a.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var wa="closure_listenable_"+(1e6*Math.random()|0),dN=0;function hN(c,d,p,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=p,this.capture=!!g,this.ha=b,this.key=++dN,this.da=this.fa=!1}function jc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Uc(c){this.src=c,this.g={},this.h=0}Uc.prototype.add=function(c,d,p,g,b){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var U=mp(c,d,g,b);return-1<U?(d=c[U],p||(d.fa=!1)):(d=new hN(d,this.src,R,!!g,b),d.fa=p,c.push(d)),d};function gp(c,d){var p=d.type;if(p in c.g){var g=c.g[p],b=Array.prototype.indexOf.call(g,d,void 0),R;(R=0<=b)&&Array.prototype.splice.call(g,b,1),R&&(jc(d),c.g[p].length==0&&(delete c.g[p],c.h--))}}function mp(c,d,p,g){for(var b=0;b<c.length;++b){var R=c[b];if(!R.da&&R.listener==d&&R.capture==!!p&&R.ha==g)return b}return-1}var yp="closure_lm_"+(1e6*Math.random()|0),vp={};function qE(c,d,p,g,b){if(g&&g.once)return zE(c,d,p,g,b);if(Array.isArray(d)){for(var R=0;R<d.length;R++)qE(c,d[R],p,g,b);return null}return p=Ip(p),c&&c[wa]?c.K(d,p,l(g)?!!g.capture:!!g,b):HE(c,d,p,!1,g,b)}function HE(c,d,p,g,b,R){if(!d)throw Error("Invalid event type");var U=l(b)?!!b.capture:!!b,Te=wp(c);if(Te||(c[yp]=Te=new Uc(c)),p=Te.add(d,p,g,U,R),p.proxy)return p;if(g=fN(),p.proxy=g,g.src=c,g.listener=p,c.addEventListener)cN||(b=U),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(WE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function fN(){function c(p){return d.call(c.src,c.listener,p)}let d=pN;return c}function zE(c,d,p,g,b){if(Array.isArray(d)){for(var R=0;R<d.length;R++)zE(c,d[R],p,g,b);return null}return p=Ip(p),c&&c[wa]?c.L(d,p,l(g)?!!g.capture:!!g,b):HE(c,d,p,!0,g,b)}function GE(c,d,p,g,b){if(Array.isArray(d))for(var R=0;R<d.length;R++)GE(c,d[R],p,g,b);else g=l(g)?!!g.capture:!!g,p=Ip(p),c&&c[wa]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],p=mp(R,p,g,b),-1<p&&(jc(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=wp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=mp(d,p,g,b)),(p=-1<c?d[c]:null)&&_p(p))}function _p(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[wa])gp(d.i,c);else{var p=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(p,g,c.capture):d.detachEvent?d.detachEvent(WE(p),g):d.addListener&&d.removeListener&&d.removeListener(g),(p=wp(d))?(gp(p,c),p.h==0&&(p.src=null,d[yp]=null)):jc(c)}}}function WE(c){return c in vp?vp[c]:vp[c]="on"+c}function pN(c,d){if(c.da)c=!0;else{d=new _a(d,this);var p=c.listener,g=c.ha||c.src;c.fa&&_p(c),c=p.call(g,d)}return c}function wp(c){return c=c[yp],c instanceof Uc?c:null}var Ep="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ip(c){return typeof c=="function"?c:(c[Ep]||(c[Ep]=function(d){return c.handleEvent(d)}),c[Ep])}function yt(){Cr.call(this),this.i=new Uc(this),this.M=this,this.F=null}D(yt,Cr),yt.prototype[wa]=!0,yt.prototype.removeEventListener=function(c,d,p,g){GE(this,c,d,p,g)};function Ct(c,d){var p,g=c.F;if(g)for(p=[];g;g=g.F)p.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new mt(d,c);else if(d instanceof mt)d.target=d.target||c;else{var b=d;d=new mt(g,c),I(d,b)}if(b=!0,p)for(var R=p.length-1;0<=R;R--){var U=d.g=p[R];b=Bc(U,g,!0,d)&&b}if(U=d.g=c,b=Bc(U,g,!0,d)&&b,b=Bc(U,g,!1,d)&&b,p)for(R=0;R<p.length;R++)U=d.g=p[R],b=Bc(U,g,!1,d)&&b}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var p=c.g[d],g=0;g<p.length;g++)jc(p[g]);delete c.g[d],c.h--}}this.F=null},yt.prototype.K=function(c,d,p,g){return this.i.add(String(c),d,!1,p,g)},yt.prototype.L=function(c,d,p,g){return this.i.add(String(c),d,!0,p,g)};function Bc(c,d,p,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,R=0;R<d.length;++R){var U=d[R];if(U&&!U.da&&U.capture==p){var Te=U.listener,ht=U.ha||U.src;U.fa&&gp(c.i,U),b=Te.call(ht,g)!==!1&&b}}return b&&!g.defaultPrevented}function QE(c,d,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function KE(c){c.g=QE(()=>{c.g=null,c.i&&(c.i=!1,KE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class gN extends Cr{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:KE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ea(c){Cr.call(this),this.h=c,this.g={}}D(Ea,Cr);var YE=[];function ZE(c){Y(c.g,function(d,p){this.g.hasOwnProperty(p)&&_p(d)},c),c.g={}}Ea.prototype.N=function(){Ea.aa.N.call(this),ZE(this)},Ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dp=a.JSON.stringify,mN=a.JSON.parse,yN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Cp(){}Cp.prototype.h=null;function JE(c){return c.h||(c.h=c.i())}function XE(){}var Ia={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bp(){mt.call(this,"d")}D(bp,mt);function Tp(){mt.call(this,"c")}D(Tp,mt);var pi={},eI=null;function $c(){return eI=eI||new yt}pi.La="serverreachability";function tI(c){mt.call(this,pi.La,c)}D(tI,mt);function Da(c){let d=$c();Ct(d,new tI(d))}pi.STAT_EVENT="statevent";function nI(c,d){mt.call(this,pi.STAT_EVENT,c),this.stat=d}D(nI,mt);function bt(c){let d=$c();Ct(d,new nI(d,c))}pi.Ma="timingevent";function rI(c,d){mt.call(this,pi.Ma,c),this.size=d}D(rI,mt);function Ca(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ba(){this.g=!0}ba.prototype.xa=function(){this.g=!1};function vN(c,d,p,g,b,R){c.info(function(){if(c.g)if(R)for(var U="",Te=R.split("&"),ht=0;ht<Te.length;ht++){var we=Te[ht].split("=");if(1<we.length){var vt=we[0];we=we[1];var _t=vt.split("_");U=2<=_t.length&&_t[1]=="type"?U+(vt+"="+we+"&"):U+(vt+"=redacted&")}}else U=null;else U=R;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+p+`
`+U})}function _N(c,d,p,g,b,R,U){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+p+`
`+R+" "+U})}function _o(c,d,p,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+EN(c,p)+(g?" "+g:"")})}function wN(c,d){c.info(function(){return"TIMEOUT: "+d})}ba.prototype.info=function(){};function EN(c,d){if(!c.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var g=p[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var U=1;U<b.length;U++)b[U]=""}}}}return Dp(p)}catch{return d}}var qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ap;function Hc(){}D(Hc,Cp),Hc.prototype.g=function(){return new XMLHttpRequest},Hc.prototype.i=function(){return{}},Ap=new Hc;function br(c,d,p,g){this.j=c,this.i=d,this.l=p,this.R=g||1,this.U=new Ea(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oI}function oI(){this.i=null,this.g="",this.h=!1}var sI={},Sp={};function Mp(c,d,p){c.L=1,c.v=Qc(Kn(d)),c.m=p,c.P=!0,aI(c,null)}function aI(c,d){c.F=Date.now(),zc(c),c.A=Kn(c.v);var p=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),EI(p.i,"t",g),c.C=0,p=c.j.J,c.h=new oI,c.g=jI(c.j,p?d:null,!c.m),0<c.O&&(c.M=new gN(m(c.Y,c,c.g),c.O)),d=c.U,p=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(YE[0]=b.toString()),b=YE);for(var R=0;R<b.length;R++){var U=qE(p,b[R],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Da(),vN(c.i,c.u,c.A,c.l,c.R,c.m)}br.prototype.ca=function(c){c=c.target;let d=this.M;d&&Yn(c)==3?d.j():this.Y(c)},br.prototype.Y=function(c){try{if(c==this.g)e:{let _t=Yn(this.g);var d=this.g.Ba();let Io=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||SI(this.g)))){this.J||_t!=4||d==7||(d==8||0>=Io?Da(3):Da(2)),xp(this);var p=this.g.Z();this.X=p;t:if(uI(this)){var g=SI(this.g);c="";var b=g.length,R=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),Ta(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(R&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,_N(this.i,this.u,this.A,this.l,this.R,_t,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ht=this.g;if((Te=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Te)){var we=Te;break t}}we=null}if(p=we)_o(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rp(this,p);else{this.o=!1,this.s=3,bt(12),gi(this),Ta(this);break e}}if(this.P){p=!0;let dn;for(;!this.J&&this.C<U.length;)if(dn=IN(this,U),dn==Sp){_t==4&&(this.s=4,bt(14),p=!1),_o(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==sI){this.s=4,bt(15),_o(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else _o(this.i,this.l,dn,null),Rp(this,dn);if(uI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||U.length!=0||this.h.h||(this.s=1,bt(16),p=!1),this.o=this.o&&p,!p)_o(this.i,this.l,U,"[Invalid Chunked Response]"),gi(this),Ta(this);else if(0<U.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Vp(vt),vt.M=!0,bt(11))}}else _o(this.i,this.l,U,null),Rp(this,U);_t==4&&gi(this),this.o&&!this.J&&(_t==4?kI(this.j,this):(this.o=!1,zc(this)))}else jN(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),gi(this),Ta(this)}}}catch{}finally{}};function uI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function IN(c,d){var p=c.C,g=d.indexOf(`
`,p);return g==-1?Sp:(p=Number(d.substring(p,g)),isNaN(p)?sI:(g+=1,g+p>d.length?Sp:(d=d.slice(g,g+p),c.C=g+p,d)))}br.prototype.cancel=function(){this.J=!0,gi(this)};function zc(c){c.S=Date.now()+c.I,cI(c,c.I)}function cI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ca(m(c.ba,c),d)}function xp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}br.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(wN(this.i,this.A),this.L!=2&&(Da(),bt(17)),gi(this),this.s=2,Ta(this)):cI(this,this.S-c)};function Ta(c){c.j.G==0||c.J||kI(c.j,c)}function gi(c){xp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ZE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Rp(c,d){try{var p=c.j;if(p.G!=0&&(p.g==c||Np(p.h,c))){if(!c.K&&Np(p.h,c)&&p.G==3){try{var g=p.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Xc(p),Zc(p);else break e;Fp(p),bt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ca(m(p.Za,p),6e3));if(1>=hI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else yi(p,11)}else if((c.K||p.g==c)&&Xc(p),!B(d))for(b=p.Da.g.parse(d),d=0;d<b.length;d++){let we=b[d];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let vt=we[3];vt!=null&&(p.la=vt,p.j.info("VER="+p.la));let _t=we[4];_t!=null&&(p.Aa=_t,p.j.info("SVER="+p.Aa));let Io=we[5];Io!=null&&typeof Io=="number"&&0<Io&&(g=1.5*Io,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let dn=c.g;if(dn){let tl=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var R=g.h;R.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Pp(R,R.h),R.h=null))}if(g.D){let Lp=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lp&&(g.ya=Lp,xe(g.I,g.D,Lp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=c;if(g.qa=LI(g,g.J?g.ia:null,g.W),U.K){fI(g.h,U);var Te=U,ht=g.L;ht&&(Te.I=ht),Te.B&&(xp(Te),zc(Te)),g.g=U}else PI(g);0<p.i.length&&Jc(p)}else we[0]!="stop"&&we[0]!="close"||yi(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?yi(p,7):kp(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}Da(4)}catch{}}var DN=class{constructor(c,d){this.g=c,this.map=d}};function lI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function hI(c){return c.h?1:c.g?c.g.size:0}function Np(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Pp(c,d){c.g?c.g.add(d):c.h=d}function fI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}lI.prototype.cancel=function(){if(this.i=pI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function pI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let p of c.g.values())d=d.concat(p.D);return d}return S(c.i)}function CN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],p=c.length,g=0;g<p;g++)d.push(c[g]);return d}d=[],p=0;for(g in c)d[p++]=c[g];return d}function bN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var p=0;p<c;p++)d.push(p);return d}d=[],p=0;for(let g in c)d[p++]=g;return d}}}function gI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var p=bN(c),g=CN(c),b=g.length,R=0;R<b;R++)d.call(void 0,g[R],p&&p[R],c)}var mI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TN(c,d){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var g=c[p].indexOf("="),b=null;if(0<=g){var R=c[p].substring(0,g);b=c[p].substring(g+1)}else R=c[p];d(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function mi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof mi){this.h=c.h,Gc(this,c.j),this.o=c.o,this.g=c.g,Wc(this,c.s),this.l=c.l;var d=c.i,p=new Ma;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),yI(this,p),this.m=c.m}else c&&(d=String(c).match(mI))?(this.h=!1,Gc(this,d[1]||"",!0),this.o=Aa(d[2]||""),this.g=Aa(d[3]||"",!0),Wc(this,d[4]),this.l=Aa(d[5]||"",!0),yI(this,d[6]||"",!0),this.m=Aa(d[7]||"")):(this.h=!1,this.i=new Ma(null,this.h))}mi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Sa(d,vI,!0),":");var p=this.g;return(p||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Sa(d,vI,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Sa(p,p.charAt(0)=="/"?MN:SN,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Sa(p,RN)),c.join("")};function Kn(c){return new mi(c)}function Gc(c,d,p){c.j=p?Aa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Wc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function yI(c,d,p){d instanceof Ma?(c.i=d,NN(c.i,c.h)):(p||(d=Sa(d,xN)),c.i=new Ma(d,c.h))}function xe(c,d,p){c.i.set(d,p)}function Qc(c){return xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Aa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sa(c,d,p){return typeof c=="string"?(c=encodeURI(c).replace(d,AN),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function AN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var vI=/[#\/\?@]/g,SN=/[#\?:]/g,MN=/[#\?]/g,xN=/[#\?@]/g,RN=/#/g;function Ma(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Tr(c){c.g||(c.g=new Map,c.h=0,c.i&&TN(c.i,function(d,p){c.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=Ma.prototype,n.add=function(c,d){Tr(this),this.i=null,c=wo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(d),this.h+=1,this};function _I(c,d){Tr(c),d=wo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function wI(c,d){return Tr(c),d=wo(c,d),c.g.has(d)}n.forEach=function(c,d){Tr(this),this.g.forEach(function(p,g){p.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Tr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let g=0;g<d.length;g++){let b=c[g];for(let R=0;R<b.length;R++)p.push(d[g])}return p},n.V=function(c){Tr(this);let d=[];if(typeof c=="string")wI(this,c)&&(d=d.concat(this.g.get(wo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)d=d.concat(c[p])}return d},n.set=function(c,d){return Tr(this),this.i=null,c=wo(this,c),wI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function EI(c,d,p){_I(c,d),0<p.length&&(c.i=null,c.g.set(wo(c,d),S(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var g=d[p];let R=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var b=R;U[g]!==""&&(b+="="+encodeURIComponent(String(U[g]))),c.push(b)}}return this.i=c.join("&")};function wo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function NN(c,d){d&&!c.j&&(Tr(c),c.i=null,c.g.forEach(function(p,g){var b=g.toLowerCase();g!=b&&(_I(this,g),EI(this,b,p))},c)),c.j=d}function PN(c,d){let p=new ba;if(a.Image){let g=new Image;g.onload=y(Ar,p,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Ar,p,"TestLoadImage: error",!1,d,g),g.onabort=y(Ar,p,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Ar,p,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function ON(c,d){let p=new ba,g=new AbortController,b=setTimeout(()=>{g.abort(),Ar(p,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(R=>{clearTimeout(b),R.ok?Ar(p,"TestPingServer: ok",!0,d):Ar(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Ar(p,"TestPingServer: error",!1,d)})}function Ar(c,d,p,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(p)}catch{}}function kN(){this.g=new yN}function FN(c,d,p){let g=p||"";try{gI(c,function(b,R){let U=b;l(b)&&(U=Dp(b)),d.push(g+R+"="+encodeURIComponent(U))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function xa(c){this.l=c.Ub||null,this.j=c.eb||!1}D(xa,Cp),xa.prototype.g=function(){return new Kc(this.l,this.j)},xa.prototype.i=function(c){return function(){return c}}({});function Kc(c,d){yt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Kc,yt),n=Kc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Na(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;II(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function II(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ra(this):Na(this),this.readyState==3&&II(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ra(this))},n.Qa=function(c){this.g&&(this.response=c,Ra(this))},n.ga=function(){this.g&&Ra(this)};function Ra(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Na(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=d.next();return c.join(`\r
`)};function Na(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function DI(c){let d="";return Y(c,function(p,g){d+=g,d+=":",d+=p,d+=`\r
`}),d}function Op(c,d,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=DI(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):xe(c,d,p))}function qe(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(qe,yt);var VN=/^https?$/i,LN=["POST","PUT"];n=qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ap.g(),this.v=this.o?JE(this.o):JE(Ap),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){CI(this,R);return}if(c=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)p.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let R of g.keys())p.set(R,g.get(R));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LN,d,void 0))||g||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,U]of p)this.g.setRequestHeader(R,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{AI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){CI(this,R)}};function CI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,bI(c),Yc(c)}function bI(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),Yc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yc(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?TI(this):this.bb())},n.bb=function(){TI(this)};function TI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Yn(c)!=4||c.Z()!=2)){if(c.u&&Yn(c)==4)QE(c.Ea,0,c);else if(Ct(c,"readystatechange"),Yn(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var g;if(g=U===0){var b=String(c.D).match(mI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!VN.test(b?b.toLowerCase():"")}p=g}if(p)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var R=2<Yn(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",bI(c)}}finally{Yc(c)}}}}function Yc(c,d){if(c.g){AI(c);let p=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ct(c,"ready");try{p.onreadystatechange=g}catch{}}}function AI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Yn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),mN(d)}};function SI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function jN(c){let d={};c=(c.g&&2<=Yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var p=C(c[g]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=d[b]||[];d[b]=R,R.push(p)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(c,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||d}function MI(c){this.Aa=0,this.i=[],this.j=new ba,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,c),this.cb=Pa("retryDelaySeedMs",1e4,c),this.Wa=Pa("forwardChannelMaxRetries",2,c),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new lI(c&&c.concurrentRequestLimit),this.Da=new kN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=MI.prototype,n.la=8,n.G=1,n.connect=function(c,d,p,g){bt(0),this.W=c,this.H=d||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=LI(this,null,this.W),Jc(this)};function kp(c){if(xI(c),c.G==3){var d=c.U++,p=Kn(c.I);if(xe(p,"SID",c.K),xe(p,"RID",d),xe(p,"TYPE","terminate"),Oa(c,p),d=new br(c,c.j,d),d.L=2,d.v=Qc(Kn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=jI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),zc(d)}VI(c)}function Zc(c){c.g&&(Vp(c),c.g.cancel(),c.g=null)}function xI(c){Zc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Xc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Jc(c){if(!dI(c.h)&&!c.s){c.s=!0;var d=c.Ga;ya||$E(),va||(ya(),va=!0),pp.add(d,c),c.B=0}}function UN(c,d){return hI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ca(m(c.Ga,c,d),FI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new br(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=NI(this,b,d),p=Kn(this.I),xe(p,"RID",c),xe(p,"CVER",22),this.D&&xe(p,"X-HTTP-Session-Id",this.D),Oa(this,p),R&&(this.O?d="headers="+encodeURIComponent(String(DI(R)))+"&"+d:this.m&&Op(p,this.m,R)),Pp(this.h,b),this.Ua&&xe(p,"TYPE","init"),this.P?(xe(p,"$req",d),xe(p,"SID","null"),b.T=!0,Mp(b,p,null)):Mp(b,p,d),this.G=2}}else this.G==3&&(c?RI(this,c):this.i.length==0||dI(this.h)||RI(this))};function RI(c,d){var p;d?p=d.l:p=c.U++;let g=Kn(c.I);xe(g,"SID",c.K),xe(g,"RID",p),xe(g,"AID",c.T),Oa(c,g),c.m&&c.o&&Op(g,c.m,c.o),p=new br(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),d&&(c.i=d.D.concat(c.i)),d=NI(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pp(c.h,p),Mp(p,g,d)}function Oa(c,d){c.H&&Y(c.H,function(p,g){xe(d,g,p)}),c.l&&gI({},function(p,g){xe(d,g,p)})}function NI(c,d,p){p=Math.min(c.i.length,p);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let R=-1;for(;;){let U=["count="+p];R==-1?0<p?(R=b[0].g,U.push("ofs="+R)):R=0:U.push("ofs="+R);let Te=!0;for(let ht=0;ht<p;ht++){let we=b[ht].g,vt=b[ht].map;if(we-=R,0>we)R=Math.max(0,b[ht].g-100),Te=!1;else try{FN(vt,U,"req"+we+"_")}catch{g&&g(vt)}}if(Te){g=U.join("&");break e}}}return c=c.i.splice(0,p),d.D=c,g}function PI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ya||$E(),va||(ya(),va=!0),pp.add(d,c),c.v=0}}function Fp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ca(m(c.Fa,c),FI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,OI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ca(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Zc(this),OI(this))};function Vp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function OI(c){c.g=new br(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Kn(c.qa);xe(d,"RID","rpc"),xe(d,"SID",c.K),xe(d,"AID",c.T),xe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&xe(d,"TO",c.ja),xe(d,"TYPE","xmlhttp"),Oa(c,d),c.m&&c.o&&Op(d,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Qc(Kn(d)),p.m=null,p.P=!0,aI(p,c)}n.Za=function(){this.C!=null&&(this.C=null,Zc(this),Fp(this),bt(19))};function Xc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function kI(c,d){var p=null;if(c.g==d){Xc(c),Vp(c),c.g=null;var g=2}else if(Np(c.h,d))p=d.D,fI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=$c(),Ct(g,new rI(g,p)),Jc(c)}else PI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&UN(c,d)||g==2&&Fp(c)))switch(p&&0<p.length&&(d=c.h,d.i=d.i.concat(p)),b){case 1:yi(c,5);break;case 4:yi(c,10);break;case 3:yi(c,6);break;default:yi(c,2)}}}function FI(c,d){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*d}function yi(c,d){if(c.j.info("Error code "+d),d==2){var p=m(c.fb,c),g=c.Xa;let b=!g;g=new mi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gc(g,"https"),Qc(g),b?PN(g.toString(),p):ON(g.toString(),p)}else bt(2);c.G=0,c.l&&c.l.sa(d),VI(c),xI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function VI(c){if(c.G=0,c.ka=[],c.l){let d=pI(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ka,d),A(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function LI(c,d,p){var g=p instanceof mi?Kn(p):new mi(p);if(g.g!="")d&&(g.g=d+"."+g.g),Wc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var R=new mi(null);g&&Gc(R,g),d&&(R.g=d),b&&Wc(R,b),p&&(R.l=p),g=R}return p=c.D,d=c.ya,p&&d&&xe(g,p,d),xe(g,"VER",c.la),Oa(c,g),g}function jI(c,d,p){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new qe(new xa({eb:p})):new qe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function UI(){}n=UI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function el(){}el.prototype.g=function(c,d){return new Ut(c,d)};function Ut(c,d){yt.call(this),this.g=new MI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Eo(this)}D(Ut,yt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){kp(this.g)},Ut.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Dp(c),c=p);d.i.push(new DN(d.Ya++,c)),d.G==3&&Jc(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,kp(this.g),delete this.g,Ut.aa.N.call(this)};function BI(c){bp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let p in d){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(BI,bp);function $I(){Tp.call(this),this.status=1}D($I,Tp);function Eo(c){this.g=c}D(Eo,UI),Eo.prototype.ua=function(){Ct(this.g,"a")},Eo.prototype.ta=function(c){Ct(this.g,new BI(c))},Eo.prototype.sa=function(c){Ct(this.g,new $I)},Eo.prototype.ra=function(){Ct(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,Fv=pr.createWebChannelTransport=function(){return new el},kv=pr.getStatEventTarget=function(){return $c()},Ov=pr.Event=pi,Ph=pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,qu=pr.ErrorCode=qc,iI.COMPLETE="complete",Pv=pr.EventType=iI,XE.EventType=Ia,Ia.OPEN="a",Ia.CLOSE="b",Ia.ERROR="c",Ia.MESSAGE="d",yt.prototype.listen=yt.prototype.K,bs=pr.WebChannel=XE,Nv=pr.FetchXmlHttpFactory=xa,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Rv=pr.XhrIo=qe}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});var iS="@firebase/firestore";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var na="10.13.2";var ti=new il("@firebase/firestore");function xs(){return ti.logLevel}function sM(n){ti.setLogLevel(n)}function O(n,...e){if(ti.logLevel<=Sn.DEBUG){let t=e.map(Bw);ti.debug(`Firestore (${na}): ${n}`,...t)}}function Qe(n,...e){if(ti.logLevel<=Sn.ERROR){let t=e.map(Bw);ti.error(`Firestore (${na}): ${n}`,...t)}}function un(n,...e){if(ti.logLevel<=Sn.WARN){let t=e.map(Bw);ti.warn(`Firestore (${na}): ${n}`,...t)}}function Bw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+n;throw Qe(e),new Error(e)}function K(n,e){n||z()}function aM(n,e){n||z()}function $(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends KI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Bv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},$v=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},qv=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Hh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new tt(e)}},Hv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},zv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Hv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new Gv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function VU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var zh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=VU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function js(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uM(n){return n+"\0"}var $e=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ye=class n extends Gh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},LU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ke=class n extends Gh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return LU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var Us=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Qv(n){return n.fields.find(e=>e.kind===2)}function Wi(n){return n.fields.filter(e=>e.kind!==2)}Us.UNKNOWN_ID=-1;var Fs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var tc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,cn.min())}};function cM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new cn(i,q.empty(),e)}function lM(n){return new cn(n.readTime,n.key,-1)}var cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),q.empty(),-1)}static max(){return new n(J.max(),q.empty(),-1)}};function $w(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var dM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function di(n){return N(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==dM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Qh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Xi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=qw(r.target.error);this.V.reject(new Xi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Xi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Yv(t)}},ni=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ka())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Qi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!rl())return!1;if(n.v())return!0;let e=ka(),t=n.S(e),r=0<t&&t<10,i=hM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Xi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Xi(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Qh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function hM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Kv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Qi(this.B.delete())}},Xi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function hi(n){return n.name==="IndexedDbTransactionError"}var Yv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qi(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Qi(this.store.add(e))}get(e){return Qi(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Qi(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Qi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=qw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Kv(a),l=t(a.primaryKey,a.value,u);if(l instanceof M){let h=l.catch(f=>(u.done(),M.reject(f)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Qi(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=qw(r.target.error);t(i)}})}var oS=!1;function qw(n){let e=ni.S(ka());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oS||(oS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Zv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){hi(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield di(t)}yield this.X(6e4)}))}},Jv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=lM(o);$w(s,r)>0&&(r=s)}),new cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Yt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Cc(n){return n==null}function nc(n){return n===0&&1/n==-1/0}function fM(n){return typeof n=="number"&&Number.isInteger(n)&&!nc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sS(e)),e=jU(n.get(t),e);return sS(e)}function jU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function sS(n){return n+""}function Ln(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ye(r)}var aS=["userId","batchId"];function Lh(n,e){return[n,xt(e)]}function pM(n,e,t){return[n,xt(e),t]}var UU={},BU=["prefixPath","collectionGroup","readTime","documentId"],$U=["prefixPath","collectionGroup","documentId"],qU=["collectionGroup","readTime","prefixPath","documentId"],HU=["canonicalId","targetId"],zU=["targetId","path"],GU=["path","targetId"],WU=["collectionId","parent"],QU=["indexId","uid"],KU=["uid","sequenceNumber"],YU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZU=["indexId","uid","orderedDocumentKey"],JU=["userId","collectionPath","documentId"],XU=["userId","collectionPath","largestBatchId"],eB=["userId","collectionGroup","largestBatchId"],gM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tB=[...gM,"documentOverlays"],mM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yM=mM,Hw=[...yM,"indexConfiguration","indexState","indexEntries"],nB=Hw,rB=[...Hw,"globals"];var rc=class extends Wh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ut(n,e){let t=$(n);return ni.F(t._e,e)}function uS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ho(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ks(this.root,e,this.comparator,!0)}},ks=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Un=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kh(this.data.getIterator())}getIteratorFrom(e){return new Kh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Kh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ts(n){return n.hasNext()?n.getNext():void 0}var Zt=class n{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new Se(Ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return js(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Yh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function _M(){return typeof atob<"u"}var Ze=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Yh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var iB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(n){if(K(!!n),typeof n=="string"){let e=0,t=iB.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ri(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}function Bf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function zw(n){let e=n.mapValue.fields.__previous_value__;return Bf(e)?zw(e):e}function ic(n){let e=yr(n.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}var Xv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},ii=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Xr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jh={nullValue:"NULL_VALUE"};function eo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bf(n)?4:wM(n)?9007199254740991:$f(n)?10:11:z()}function qn(n,e){if(n===e)return!0;let t=eo(n);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ic(n).isEqual(ic(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=yr(i.timestampValue),a=yr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ri(i.bytesValue).isEqual(ri(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?nc(s)===nc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return js(n.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(uS(s)!==uS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!qn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function oc(n,e){return(n.values||[]).find(t=>qn(t,e))!==void 0}function oi(n,e){if(n===e)return 0;let t=eo(n),r=eo(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return cS(n.timestampValue,e.timestampValue);case 4:return cS(ic(n),ic(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ri(o),u=ri(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(ke(o.latitude),ke(s.latitude));return a!==0?a:re(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return lS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let f=o.fields||{},m=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=m.value)===null||u===void 0?void 0:u.arrayValue,S=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:lS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Xr.mapValue&&s===Xr.mapValue)return 0;if(o===Xr.mapValue)return 1;if(s===Xr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){let m=re(u[f],h[f]);if(m!==0)return m;let y=oi(a[u[f]],l[h[f]]);if(y!==0)return y}return re(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function cS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=yr(n),r=yr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function lS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=oi(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function Bs(n){return e_(n)}function e_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=yr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ri(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=e_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${e_(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function to(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function t_(n){return!!n&&"integerValue"in n}function sc(n){return!!n&&"arrayValue"in n}function dS(n){return!!n&&"nullValue"in n}function hS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uh(n){return!!n&&"mapValue"in n}function $f(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Yu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ho(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var EM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function oB(n){return"nullValue"in n?jh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?to(ii.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?$f(n)?EM:{mapValue:{}}:z()}function sB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?to(ii.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?EM:"mapValue"in n?$f(n)?{mapValue:{}}:Xr:z()}function fS(n,e){let t=oi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pS(n,e){let t=oi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Dt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}setAll(e){let t=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Yu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Uh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ho(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Yu(this.value))}};function IM(n){let e=[];return ho(n.fields,(t,r)=>{let i=new Ke([t]);if(Uh(r)){let o=IM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zt(e)}var rt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Dt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Dt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Hn=class{constructor(e,t){this.position=e,this.inclusive=t}};function gS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=oi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function mS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qn(n.position[t],e.position[t]))return!1;return!0}var no=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function aB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Zh=class{},fe=class n extends Zh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new i_(e,t,r):t==="array-contains"?new a_(e,r):t==="in"?new Jh(e,r):t==="not-in"?new u_(e,r):t==="array-contains-any"?new c_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new o_(e,r):new s_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(oi(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(oi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends Zh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return $s(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function $s(n){return n.op==="and"}function n_(n){return n.op==="or"}function Gw(n){return DM(n)&&$s(n)}function DM(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function r_(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Bs(n.value);if(Gw(n))return n.filters.map(e=>r_(e)).join(",");{let e=n.filters.map(t=>r_(t)).join(",");return`${n.op}(${e})`}}function CM(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&qn(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&CM(s,i.filters[a]),!0):!1}(n,e):void z()}function bM(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function TM(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Bs(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map(TM).join(" ,")+"}"}(n):"Filter"}var i_=class extends fe{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},o_=class extends fe{constructor(e,t){super(e,"in",t),this.keys=AM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},s_=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=AM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var a_=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return sc(t)&&oc(t.arrayValue,this.value)}},Jh=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}},u_=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!oc(this.value.arrayValue,t)}},c_=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}};var l_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function d_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new l_(n,e,t,r,i,o,s)}function ro(n){let e=$(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>r_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bs(r)).join(",")),e.ue=t}return e.ue}function bc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mS(n.startAt,e.startAt)&&mS(n.endAt,e.endAt)}function Xh(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ef(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function yS(n,e,t){let r=jh,i=!0;for(let o of ef(n,e)){let s=jh,a=!0;switch(o.op){case"<":case"<=":s=oB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=jh}fS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];fS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function vS(n,e,t){let r=Xr,i=!0;for(let o of ef(n,e)){let s=Xr,a=!0;switch(o.op){case">=":case">":s=sB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Xr}pS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];pS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Cn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function SM(n,e,t,r,i,o,s,a){return new Cn(n,e,t,r,i,o,s,a)}function ra(n){return new Cn(n)}function _S(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ww(n){return n.collectionGroup!==null}function Vs(n){let e=$(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Se(Ke.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new no(o,r))}),t.has(Ke.keyField().canonicalString())||e.ce.push(new no(Ke.keyField(),r))}return e.ce}function Rt(n){let e=$(n);return e.le||(e.le=uB(e,Vs(n))),e.le}function uB(n,e){if(n.limitType==="F")return d_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new no(i.field,o)});let t=n.endAt?new Hn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hn(n.startAt.position,n.startAt.inclusive):null;return d_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function h_(n,e){let t=n.filters.concat([e]);return new Cn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tf(n,e,t){return new Cn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tc(n,e){return bc(Rt(n),Rt(e))&&n.limitType===e.limitType}function MM(n){return`${ro(Rt(n))}|lt:${n.limitType}`}function Rs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>TM(i)).join(", ")}]`),Cc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bs(i)).join(",")),`Target(${r})`}(Rt(n))}; limitType=${n.limitType})`}function Ac(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Vs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=gS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Vs(r),i)||r.endAt&&!function(s,a,u){let l=gS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Vs(r),i))}(n,e)}function xM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RM(n){return(e,t)=>{let r=!1;for(let i of Vs(n)){let o=cB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function cB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?oi(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var zn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return vM(this.inner)}size(){return this.innerSize}};var lB=new Oe(q.comparator);function jt(){return lB}var NM=new Oe(q.comparator);function Qu(...n){let e=NM;for(let t of n)e=e.insert(t.key,t);return e}function PM(n){let e=NM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jn(){return Zu()}function OM(){return Zu()}function Zu(){return new zn(n=>n.toString(),(n,e)=>n.isEqual(e))}var dB=new Oe(q.comparator),hB=new Se(q.comparator);function ie(...n){let e=hB;for(let t of n)e=e.add(t);return e}var fB=new Se(re);function Qw(){return fB}function Kw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function kM(n){return{integerValue:""+n}}function FM(n,e){return fM(e)?kM(e):Kw(n,e)}var qs=class{constructor(){this._=void 0}};function pB(n,e,t){return n instanceof si?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Bf(o)&&(o=zw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof vr?LM(n,e):n instanceof _r?jM(n,e):function(i,o){let s=VM(i,o),a=wS(s)+wS(i.Pe);return t_(s)&&t_(i.Pe)?kM(a):Kw(i.serializer,a)}(n,e)}function gB(n,e,t){return n instanceof vr?LM(n,e):n instanceof _r?jM(n,e):t}function VM(n,e){return n instanceof ai?function(r){return t_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var si=class extends qs{},vr=class extends qs{constructor(e){super(),this.elements=e}};function LM(n,e){let t=UM(e);for(let r of n.elements)t.some(i=>qn(i,r))||t.push(r);return{arrayValue:{values:t}}}var _r=class extends qs{constructor(e){super(),this.elements=e}};function jM(n,e){let t=UM(e);for(let r of n.elements)t=t.filter(i=>!qn(i,r));return{arrayValue:{values:t}}}var ai=class extends qs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function wS(n){return ke(n.integerValue||n.doubleValue)}function UM(n){return sc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var io=class{constructor(e,t){this.field=e,this.transform=t}};function mB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof vr&&i instanceof vr||r instanceof _r&&i instanceof _r?js(r.elements,i.elements,qn):r instanceof ai&&i instanceof ai?qn(r.Pe,i.Pe):r instanceof si&&i instanceof si}(n.transform,e.transform)}var f_=class{constructor(e,t){this.version=e,this.transformResults=t}},ze=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Bh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Hs=class{};function BM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ci(n.key,ze.none()):new ui(n.key,n.data,ze.none());{let t=n.data,r=Dt.empty(),i=new Se(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new bn(n.key,r,new Zt(i.toArray()),ze.none())}}function yB(n,e,t){n instanceof ui?function(i,o,s){let a=i.value.clone(),u=IS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof bn?function(i,o,s){if(!Bh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=IS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll($M(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ju(n,e,t,r){return n instanceof ui?function(o,s,a,u){if(!Bh(o.precondition,s))return a;let l=o.value.clone(),h=DS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof bn?function(o,s,a,u){if(!Bh(o.precondition,s))return a;let l=DS(o.fieldTransforms,u,s),h=s.data;return h.setAll($M(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Bh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function vB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=VM(r.transform,i||null);o!=null&&(t===null&&(t=Dt.empty()),t.set(r.field,o))}return t||null}function ES(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&js(r,i,(o,s)=>mB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ui=class extends Hs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},bn=class extends Hs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function $M(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function IS(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gB(s,a,t[i]))}return r}function DS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,pB(o,s,e))}return r}var ci=class extends Hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ac=class extends Hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=OM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=BM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&js(this.mutations,e.mutations,(t,r)=>ES(t,r))&&js(this.baseMutations,e.baseMutations,(t,r)=>ES(t,r))}},p_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return dB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var cc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var g_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,me;function qM(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function HM(n){if(n===void 0)return Qe("GRPC error has no .code"),x.UNKNOWN;switch(n){case Xe.OK:return x.OK;case Xe.CANCELLED:return x.CANCELLED;case Xe.UNKNOWN:return x.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return x.INTERNAL;case Xe.UNAVAILABLE:return x.UNAVAILABLE;case Xe.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Xe.NOT_FOUND:return x.NOT_FOUND;case Xe.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Xe.ABORTED:return x.ABORTED;case Xe.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Xe.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(me=Xe||(Xe={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var CS=null;function zM(){return new TextEncoder}var _B=new Qr([4294967295,4294967295],0);function bS(n){let e=zM().encode(n),t=new xv;return t.update(e),new Uint8Array(t.digest())}function TS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qr([t,r],0),new Qr([i,o],0)]}var m_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ji(`Invalid padding: ${t}`);if(r<0)throw new Ji(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ji(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ji(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Qr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Qr.fromNumber(r)));return i.compare(_B)===1&&(i=new Qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=bS(e),[r,i]=TS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=bS(e),[r,i]=TS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ji=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var lc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Oe(re),jt(),ie())}},dc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var Ls=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},nf=class{constructor(e,t){this.targetId=e,this.me=t}},rf=class{constructor(e,t,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},of=class{constructor(){this.fe=0,this.ge=SS(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new dc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=SS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},y_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=jt(),this.qe=AS(),this.Qe=new Oe(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Xh(o))if(r===0){let s=new q(o.path);this.Ue(t,s,rt.newNoDocument(s,J.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}CS?.et(function(h,f,m,y,D){var S,A,V,B,F,G;let ee={localCacheCount:h,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},Y=f.unchangedNames;return Y&&(ee.bloomFilter={applied:D===0,hashCount:(S=Y?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(B=(V=(A=Y?.bits)===null||A===void 0?void 0:A.bitmap)===null||V===void 0?void 0:V.length)!==null&&B!==void 0?B:0,padding:(G=(F=Y?.bits)===null||F===void 0?void 0:F.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ri(r).toUint8Array()}catch(u){if(u instanceof Yh)return un("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new m_(s,i,o)}catch(u){return un(u instanceof Ji?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Xh(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,rt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new lc(e,t,this.Qe,this.ke,r);return this.ke=jt(),this.qe=AS(),this.Qe=new Oe(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new of,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Se(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new of),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function AS(){return new Oe(q.comparator)}function SS(){return new Oe(q.comparator)}var wB={asc:"ASCENDING",desc:"DESCENDING"},EB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IB={and:"AND",or:"OR"},v_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function __(n,e){return n.useProto3Json||Cc(e)?e:{value:e}}function zs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DB(n,e){return zs(n,e.toTimestamp())}function Ye(n){return K(!!n),J.fromTimestamp(function(t){let r=yr(t);return new $e(r.seconds,r.nanos)}(n))}function Yw(n,e){return w_(n,e).canonicalString()}function w_(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function WM(n){let e=ye.fromString(n);return K(rx(e)),e}function hc(n,e){return Yw(n.databaseId,e.path)}function Bn(n,e){let t=WM(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(YM(t))}function QM(n,e){return Yw(n.databaseId,e)}function KM(n){let e=WM(n);return e.length===4?ye.emptyPath():YM(e)}function E_(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YM(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function MS(n,e,t){return{name:hc(n,e),fields:t.value.mapValue.fields}}function ZM(n,e,t){let r=Bn(n,e.name),i=Ye(e.updateTime),o=e.createTime?Ye(e.createTime):J.min(),s=new Dt({mapValue:{fields:e.fields}}),a=rt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function CB(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=Bn(r,i.found.name),s=Ye(i.found.updateTime),a=i.found.createTime?Ye(i.found.createTime):J.min(),u=new Dt({mapValue:{fields:i.found.fields}});return rt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=Bn(r,i.missing),s=Ye(i.readTime);return rt.newNoDocument(o,s)}(n,e):z()}function bB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ze.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ze.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:HM(l.code);return new P(h,l.message||"")}(s);t=new rf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Bn(n,r.document.name),o=Ye(r.document.updateTime),s=r.document.createTime?Ye(r.document.createTime):J.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Ls(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Bn(n,r.document),o=r.readTime?Ye(r.readTime):J.min(),s=rt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ls([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Bn(n,r.document),o=r.removedTargetIds||[];t=new Ls([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new g_(i,o),a=r.targetId;t=new nf(a,s)}}return t}function fc(n,e){let t;if(e instanceof ui)t={update:MS(n,e.key,e.value)};else if(e instanceof ci)t={delete:hc(n,e.key)};else if(e instanceof bn)t={update:MS(n,e.key,e.data),updateMask:RB(e.fieldMask)};else{if(!(e instanceof ac))return z();t={verify:hc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof si)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _r)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ai)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:DB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function I_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?ze.updateTime(Ye(o.updateTime)):o.exists!==void 0?ze.exists(o.exists):ze.none()}(e.currentDocument):ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),u=new si;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new vr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new _r(h)}else"increment"in a?u=new ai(s,a.increment):z();let l=Ke.fromServerFormat(a.fieldPath);return new io(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Bn(n,e.update.name),o=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Zt(l.map(h=>Ke.fromServerFormat(h)))}(e.updateMask);return new bn(i,o,s,t,r)}return new ui(i,o,t,r)}if(e.delete){let i=Bn(n,e.delete);return new ci(i,t)}if(e.verify){let i=Bn(n,e.verify);return new ac(i,t)}return z()}function TB(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ye(i.updateTime):Ye(o);return s.isEqual(J.min())&&(s=Ye(o)),new f_(s,i.transformResults||[])}(t,e))):[]}function JM(n,e){return{documents:[QM(n,e.path)]}}function XM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QM(n,i);let o=function(l){if(l.length!==0)return nx(be.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ns(m.field),direction:SB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=__(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function ex(n){let e=KM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(f){let m=tx(f);return m instanceof be&&Gw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(D){return new no(Ps(D.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Cc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(f){let m=!!f.before,y=f.values||[];return new Hn(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let m=!f.before,y=f.values||[];return new Hn(y,m)}(t.endAt)),SM(e,i,s,o,a,"F",u,l)}function AB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ps(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ps(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ps(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ps(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(Ps(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>tx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function SB(n){return wB[n]}function MB(n){return EB[n]}function xB(n){return IB[n]}function Ns(n){return{fieldPath:n.canonicalString()}}function Ps(n){return Ke.fromServerFormat(n.fieldPath)}function nx(n){return n instanceof fe?function(t){if(t.op==="=="){if(hS(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NAN"}};if(dS(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hS(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NOT_NAN"}};if(dS(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(t.field),op:MB(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>nx(i));return r.length===1?r[0]:{compositeFilter:{op:xB(t.op),filters:r}}}(n):z()}function RB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Gs=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var sf=class{constructor(e){this.ct=e}};function NB(n,e){let t;if(e.document)t=ZM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=so(e.noDocument.readTime);t=rt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=q.fromSegments(e.unknownDocument.path),i=so(e.unknownDocument.version);t=rt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new $e(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),t}function xS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:hc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:zs(o,s.version.toTimestamp()),createTime:zs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:oo(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:oo(e.version)}}return r}function af(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function oo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function so(n){let e=new $e(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function Ki(n,e){let t=(e.baseMutations||[]).map(o=>I_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>I_(n.ct,o)),i=$e.fromMillis(e.localWriteTimeMs);return new uc(e.batchId,i,t,r)}function Ku(n){let e=so(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?so(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),Rt(ra(KM(o.documents[0])))}(n.query):function(o){return Rt(ex(o))}(n.query),new Gs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ze.fromBase64String(n.resumeToken))}function ix(n,e){let t=oo(e.snapshotVersion),r=oo(e.lastLimboFreeSnapshotVersion),i;i=Xh(e.target)?JM(n.ct,e.target):XM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ro(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zw(n){let e=ex({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tf(e,e.limit,"L"):e}function Vv(n,e){return new cc(e.largestBatchId,I_(n.ct,e.overlayMutation))}function RS(n,e){let t=e.path.lastSegment();return[n,xt(e.path.popLast()),t]}function NS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:oo(r.readTime),documentKey:xt(r.documentKey.path),largestBatchId:r.largestBatchId}}var D_=class{getBundleMetadata(e,t){return PS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:so(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return PS(e).put(function(i){return{bundleId:i.id,createTime:oo(Ye(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return OS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Zw(o.bundledQuery),readTime:so(o.readTime)}}(r)})}saveNamedQuery(e,t){return OS(e).put(function(i){return{name:i.name,readTime:oo(Ye(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function PS(n){return ut(n,"bundles")}function OS(n){return ut(n,"namedQueries")}var uf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Hu(e).get(RS(this.userId,t)).next(r=>r?Vv(this.serializer,r):null)}getOverlays(e,t){let r=jn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new cc(t,s);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(xt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Hu(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=jn(),o=xt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Hu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Vv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=jn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let f=Vv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Hu(e).put(function(i,o,s){let[a,u,l]=RS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:fc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Hu(n){return ut(n,"documentOverlays")}var C_=class{Pt(e){return ut(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ze.fromUint8Array(r):Ze.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var gr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),nc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=yr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ri(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?wM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$f(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};gr.vt=new gr;function PB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function kS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=PB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var b_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=kS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=kS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},T_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},A_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Yi=class{constructor(){this.jt=new b_,this.Ht=new T_(this.jt),this.Jt=new A_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Zi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Kr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=FS(n.arrayValue,e.arrayValue),t!==0?t:(t=FS(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function FS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var cf=class{constructor(e){this.Xt=new Se((t,r)=>Ke.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Qv(e);if(t!==void 0&&!this.sn(t))return!1;let r=Wi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Se(Ke.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Fs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Fs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Fs(r.field,r.dir==="asc"?0:1)));return new Us(Us.UNKNOWN_ID,this.collectionId,t,tc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function ox(n){var e,t;if(K(n instanceof fe||n instanceof be),n instanceof fe){if(n instanceof Jh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>ox(i));return be.create(r,n.op)}function OB(n){if(n.getFilters().length===0)return[];let e=x_(ox(n));return K(sx(e)),S_(e)||M_(e)?[e]:e.getFilters()}function S_(n){return n instanceof fe}function M_(n){return n instanceof be&&Gw(n)}function sx(n){return S_(n)||M_(n)||function(t){if(t instanceof be&&n_(t)){for(let r of t.getFilters())if(!S_(r)&&!M_(r))return!1;return!0}return!1}(n)}function x_(n){if(K(n instanceof fe||n instanceof be),n instanceof fe)return n;if(n.filters.length===1)return x_(n.filters[0]);let e=n.filters.map(r=>x_(r)),t=be.create(e,n.op);return t=lf(t),sx(t)?t:(K(t instanceof be),K($s(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>Jw(r,i)))}function Jw(n,e){let t;return K(n instanceof fe||n instanceof be),K(e instanceof fe||e instanceof be),t=n instanceof fe?e instanceof fe?function(i,o){return be.create([i,o],"and")}(n,e):VS(n,e):e instanceof fe?VS(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),$s(i)&&$s(o))return bM(i,o.getFilters());let s=n_(i)?i:o,a=n_(i)?o:i,u=s.filters.map(l=>Jw(l,a));return be.create(u,"or")}(n,e),lf(t)}function VS(n,e){if($s(e))return bM(e,n.getFilters());{let t=e.filters.map(r=>Jw(n,r));return be.create(t,"or")}}function lf(n){if(K(n instanceof fe||n instanceof be),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return lf(e[0]);if(DM(n))return n;let t=e.map(i=>lf(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var R_=class{constructor(){this.un=new pc}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(cn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},pc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Se(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(ye.comparator)).toArray()}};var Oh=new Uint8Array(0),N_=class{constructor(e,t){this.databaseId=t,this.cn=new pc,this.ln=new zn(r=>ro(r),(r,i)=>bc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:xt(i)};return LS(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[uM(t),""],!1,!0);return LS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Ln(s.parent))}return r})}addFieldIndex(e,t){let r=zu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Ss(e);return o.next(a=>{s.put(NS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=zu(e),i=Ss(e),o=As(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=zu(e),r=As(e),i=Ss(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new cf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=As(e),i=!0,o=new Map;return M.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return M.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(u)} to execute ${ro(t)}`);let h=function(F,G){let ee=Qv(G);if(ee===void 0)return null;for(let Y of ef(F,ee.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,u),f=function(F,G){let ee=new Map;for(let Y of Wi(G))for(let E of ef(F,Y.fieldPath))switch(E.op){case"==":case"in":ee.set(Y.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ee.set(Y.fieldPath.canonicalString(),E.value),Array.from(ee.values())}return null}(l,u),m=function(F,G){let ee=[],Y=!0;for(let E of Wi(G)){let v=E.kind===0?yS(F,E.fieldPath,F.startAt):vS(F,E.fieldPath,F.startAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new Hn(ee,Y)}(l,u),y=function(F,G){let ee=[],Y=!0;for(let E of Wi(G)){let v=E.kind===0?vS(F,E.fieldPath,F.endAt):yS(F,E.fieldPath,F.endAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new Hn(ee,Y)}(l,u),D=this.In(u,l,m),S=this.In(u,l,y),A=this.Tn(u,l,f),V=this.En(u.indexId,h,D,m.inclusive,S,y.inclusive,A);return M.forEach(V,B=>r.G(B,t.limit).next(F=>{F.forEach(G=>{let ee=q.fromSegments(G.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=OB(be.create(e.filters,"and")).map(r=>d_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let f=0;f<u;++f){let m=t?this.dn(t[f/l]):Oh,y=this.An(e,m,r[f%l],i),D=this.Rn(e,m,o[f%l],s),S=a.map(A=>this.An(e,m,A,!0));h.push(...this.createRange(y,D,S))}return h}An(e,t,r,i){let o=new Zi(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Zi(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new cf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Se(Ke.comparator),h=!1;for(let f of u.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Yi;for(let i of Wi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);gr.vt.It(o,s)}return r.zt()}dn(e){let t=new Yi;return gr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Yi;return gr.vt.It(to(this.databaseId,t),r.Yt(function(o){let s=Wi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Yi);let o=0;for(let s of Wi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&sc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);gr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Yi;u.seed(a.zt()),gr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=zu(e),i=Ss(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,f){let m=f?new tc(f.sequenceNumber,new cn(so(f.readTime),new q(Ln(f.documentKey)),f.largestBatchId)):tc.empty(),y=h.fields.map(([D,S])=>new Fs(Ke.fromServerFormat(D),S));return new Us(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=zu(e),o=Ss(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,u=>o.put(NS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?M.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return As(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return As(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=As(e),o=new Se(Kr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Zi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Se(Kr),i=this.Vn(t,e);if(i==null)return r;let o=Qv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(sc(s))for(let a of s.arrayValue.values||[])r=r.add(new Zi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Zi(t.indexId,e.key,Oh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,f,m){let y=u.getIterator(),D=l.getIterator(),S=Ts(y),A=Ts(D);for(;S||A;){let V=!1,B=!1;if(S&&A){let F=h(S,A);F<0?B=!0:F>0&&(V=!0)}else S!=null?B=!0:V=!0;V?(f(A),A=Ts(D)):B?(m(S),S=Ts(y)):(S=Ts(y),A=Ts(D))}}(i,o,Kr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),M.waitFor(s)}yn(e){let t=1;return Ss(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Kr(s,a)).filter((s,a,u)=>!a||Kr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Kr(s,e),u=Kr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Oh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Oh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Kr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jS)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(jS)}};function LS(n){return ut(n,"collectionParents")}function As(n){return ut(n,"indexEntries")}function zu(n){return ut(n,"indexConfiguration")}function Ss(n){return ut(n,"indexState")}function jS(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;$w(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new cn(e.readTime,e.documentKey,t)}var US={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},an=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function ax(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,f,m)=>(a++,m.delete()));o.push(u.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let f=pM(e,h.key.path,t.batchId);o.push(i.delete(f)),l.push(h.key)}return M.waitFor(o).next(()=>l)}function df(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(41943040,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);var hf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Os(e),s=Yr(e);return s.add({}).next(a=>{K(typeof a=="number");let u=new uc(a,t,r,i),l=function(y,D,S){let A=S.baseMutations.map(B=>fc(y.ct,B)),V=S.mutations.map(B=>fc(y.ct,B));return{userId:D,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:V}}(this.serializer,this.userId,u),h=[],f=new Se((m,y)=>re(m.canonicalString(),y.canonicalString()));for(let m of i){let y=pM(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,UU))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),M.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Yr(e).get(t).next(r=>r?(K(r.userId===this.userId),Ki(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Yr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Ki(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Yr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ki(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Lh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Os(e).J({range:i},(s,a,u)=>{let[l,h,f]=s,m=Ln(h);if(l===this.userId&&t.path.isEqual(m))return Yr(e).get(f).next(y=>{if(!y)throw z();K(y.userId===this.userId),o.push(Ki(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(re),i=[];return t.forEach(o=>{let s=Lh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Os(e).J({range:a},(l,h,f)=>{let[m,y,D]=l,S=Ln(y);m===this.userId&&o.path.isEqual(S)?r=r.add(D):f.done()});i.push(u)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Lh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Se(re);return Os(e).J({range:s},(u,l,h)=>{let[f,m,y]=u,D=Ln(m);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Yr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Ki(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ax(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Os(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Ln(o[1]);i.push(u)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return ux(e,this.userId,t)}Nn(e){return cx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function ux(n,e,t){let r=Lh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Os(n).J({range:o,H:!0},(a,u,l)=>{let[h,f,m]=a;h===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Yr(n){return ut(n,"mutations")}function Os(n){return ut(n,"documentMutations")}function cx(n){return ut(n,"mutationQueues")}var Ws=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var P_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ws(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>J.fromTimestamp(new $e(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ms(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ms(e).J((s,a)=>{let u=Ku(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ms(e).J((r,i)=>{let o=Ku(i);t(o)})}qn(e){return BS(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return BS(e).put("targetGlobalKey",t)}Kn(e,t){return Ms(e).put(ix(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ro(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ms(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Ku(a);bc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Zr(e);return t.forEach(s=>{let a=xt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=Zr(e);return M.forEach(t,o=>{let s=xt(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Zr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zr(e),o=ie();return i.J({range:r,H:!0},(s,a,u)=>{let l=Ln(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=xt(t.path),i=IDBKeyRange.bound([r],[uM(r)],!1,!0),o=0;return Zr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ms(e).get(t).next(r=>r?Ku(r):null)}};function Ms(n){return ut(n,"targets")}function BS(n){return ut(n,"targetGlobal")}function Zr(n){return ut(n,"targetDocuments")}function $S([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var O_=class{constructor(e){this.Un=e,this.buffer=new Se($S),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();$S(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},k_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){hi(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield di(t)}yield this.Hn(3e5)}))}},F_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Yt.oe);let r=new O_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(US)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),US):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),xs()<=Sn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function kB(n,e){return new F_(n,e)}var V_=class{constructor(e,t){this.db=e,this.garbageCollector=kB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return kh(e,r)}removeReference(e,t,r){return kh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return kh(e,t)}nr(e,t){return function(i,o){let s=!1;return cx(i).Y(a=>ux(i,a,o).next(u=>(u&&(s=!0),M.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),Zr(e).delete(function(f){return[0,xt(f.path)]}(s))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return kh(e,t)}tr(e,t){let r=Zr(e),i,o=Yt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Yt.oe&&t(new q(Ln(i)),o),o=l,i=u):o=Yt.oe}).next(()=>{o!==Yt.oe&&t(new q(Ln(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function kh(n,e){return Zr(n).put(function(r,i){return{targetId:0,path:xt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var ff=class{constructor(){this.changes=new zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var L_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Gi(e).put(r)}removeEntry(e,t,r){return Gi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],af(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=rt.newInvalidDocument(t);return Gi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:rt.newInvalidDocument(t)};return Gi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(t))},(i,o)=>{r={document:this.ir(t,o),size:df(o)}}).next(()=>r)}getEntries(e,t){let r=jt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=jt(),i=new Oe(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,df(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new Se(zS);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Gu(i.first()),Gu(i.last())),s=i.getIterator(),a=s.getNext();return Gi(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let f=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&zS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Gu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),af(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=jt();for(let f of l){let m=this.ir(q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Ac(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=jt(),s=HS(t,r),a=HS(t,cn.max());return Gi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let f=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new j_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qS(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return qS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=NB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return rt.newInvalidDocument(e)}};function lx(n){return new L_(n)}var j_=class extends ff{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new zn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Se((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=xS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=df(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=xS(this.cr.serializer,s.convertToNoDocument(J.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function qS(n){return ut(n,"remoteDocumentGlobal")}function Gi(n){return ut(n,"remoteDocumentsV14")}function Gu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HS(n,e){let t=e.documentKey.path.toArray();return[n,af(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var U_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var pf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ju(r.mutation,i,Zt.empty(),$e.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=jn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Qu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=jn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=jt(),s=Zu(),a=function(){return Zu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof bn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ju(h.mutation,l,h.mutation.getFieldMask(),$e.now())):s.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var f;return a.set(l,new U_(h,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Zu(),i=new Oe((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Zt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let f=(i.get(a.batchId)||ie()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,f=OM();h.forEach(m=>{if(!o.has(m)){let y=BM(t.get(m),r.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ww(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(jn()),a=-1,u=o;return s.next(l=>M.forEach(l,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(h=>({batchId:a,changes:PM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Qu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Qu();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,u=>{let l=function(f,m){return new Cn(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,rt.newInvalidDocument(h)))});let a=Qu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ju(h.mutation,l,Zt.empty(),$e.now()),Ac(t,l)&&(a=a.insert(u,l))}),a})}};var B_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ye(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Zw(i.bundledQuery),readTime:Ye(i.readTime)}}(t)),M.resolve()}};var $_=class{constructor(){this.overlays=new Oe(q.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=jn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=jn(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=jn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=jn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var q_=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var gc=class{constructor(){this.Tr=new Se(et.Er),this.dr=new Se(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new ye([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new ye([])),r=new et(t,e),i=new et(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||q.comparator(e.key,t.key)}};var H_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Se(et.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new uc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(re);return t.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new et(new q(o),0),a=new Se(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new et(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var z_=class{constructor(e){this.Mr=e,this.docs=function(){return new Oe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(t))}getEntries(e,t){let r=jt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=jt(),s=t.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||$w(lM(h),r)<=0||(i.has(h.key)||Ac(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new G_(this)}getSize(e){return M.resolve(this.size)}},G_=class extends ff{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var W_=class{constructor(e){this.persistence=e,this.Nr=new zn(t=>ro(t),bc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gc,this.targetCount=0,this.kr=Ws.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ws(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var gf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Yt(0),this.Kr=!1,this.Kr=!0,this.$r=new q_,this.referenceDelegate=e(this),this.Ur=new W_(this),this.indexManager=new R_,this.remoteDocumentCache=function(i){return new z_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new sf(t),this.Gr=new B_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new H_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new Q_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Q_=class extends Wh{constructor(e){super(),this.currentSequenceNumber=e}},mf=class n{constructor(e){this.persistence=e,this.Jr=new gc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var K_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Qh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aS,{unique:!0}),u.createObjectStore("documentMutations")}(e),GS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),GS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aS,{unique:!0});let f=l.store("mutations"),m=h.map(y=>f.put(y));return M.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:JU});l.createIndex("collectionPathOverlayIndex",XU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",eB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:BU});l.createIndex("documentKeyIndex",$U),l.createIndex("collectionGroupIndex",qU)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:QU}).createIndex("sequenceNumberIndex",KU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:YU}).createIndex("documentKeyIndex",ZU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=df(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>M.forEach(a,u=>{K(u.userId===o.userId);let l=Ki(this.serializer,u);return ax(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ye(s),l=function(f){return[0,xt(f)]}(u);o.push(t.get(l).next(h=>h?M.resolve():(f=>t.put({targetId:0,path:xt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:WU});let r=t.store("collectionParents"),i=new pc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:xt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ye(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Ln(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Ku(i),s=ix(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new q(ye.fromString(f.document.name).popFirst(5)):f.noDocument?q.fromSegments(f.noDocument.path):f.unknownDocument?q.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=lx(this.serializer),o=new gf(mf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ie();Ki(this.serializer,u).keys().forEach(f=>h=h.add(f)),a.set(u.userId,h)}),M.forEach(a,(u,l)=>{let h=new tt(l),f=uf.lt(this.serializer,h),m=o.getIndexManager(h),y=hf.lt(h,this.serializer,m,o.referenceDelegate);return new pf(i,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new rc(t,Yt.oe),u).next()})})}};function GS(n){n.createObjectStore("targetDocuments",{keyPath:zU}).createIndex("documentTargetsIndex",GU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HU,{unique:!0}),n.createObjectStore("targetGlobal")}var Lv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Y_=class n{constructor(e,t,r,i,o,s,a,u,l,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V_(this,i),this.Ai=t+"main",this.serializer=new sf(u),this.Ri=new ni(this.Ai,this.hi,new K_(this.serializer)),this.$r=new C_,this.Ur=new P_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lx(this.serializer),this.Gr=new D_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Lv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Yt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(hi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Wu(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return Fh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ut(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):Wu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Lv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new rc(e,Yt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Fh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return hf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new N_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return uf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?rB:u===16?nB:u===15?Hw:u===14?yM:u===13?mM:u===12?tB:u===11?gM:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new rc(a,this.Qr?this.Qr.next():Yt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,dM);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Wu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Lv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wu(e).put("owner",t)}static D(){return ni.D()}bi(e){let t=Wu(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Bp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Wu(n){return ut(n,"owner")}function Fh(n){return ut(n,"clientMetadata")}function Xw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Z_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var J_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Bp()?8:hM(ka())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new J_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(xs()<=Sn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Rs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(xs()<=Sn.DEBUG&&O("QueryEngine","Query:",Rs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(xs()<=Sn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Rs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rt(t))):M.resolve())}Yi(e,t){if(_S(t))return M.resolve(null);let r=Rt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tf(t,null,"F"),r=Rt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,tf(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return _S(t)||i.isEqual(J.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?M.resolve(null):(xs()<=Sn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rs(t)),this.rs(e,s,t,cM(i,-1)).next(a=>a))})}ts(e,t){let r=new Se(RM(e));return t.forEach((i,o)=>{Ac(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return xs()<=Sn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Rs(t)),this.Ji.getDocumentsMatchingQuery(e,t,cn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var X_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Oe(re),this._s=new zn(o=>ro(o),bc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function dx(n,e,t,r){return new X_(n,e,t,r)}function hx(n,e){return N(this,null,function*(){let t=$(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function FB(n,e){let t=$(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let f=l.batch,m=f.keys(),y=M.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(S=>{let A=l.docVersions.get(D);K(A!==null),S.version.compareTo(A)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fx(n){let e=$(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function VB(n,e){let t=$(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,f)=>{let m=i.get(f);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ze.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(S,A,V){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=jt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(px(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(J.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function px(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=jt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function LB(n,e){let t=$(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qs(n,e){let t=$(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Gs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ks(n,e,t){return N(this,null,function*(){let r=$(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!hi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function vf(n,e,t){let r=$(n),i=J.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let f=$(u),m=f._s.get(h);return m!==void 0?M.resolve(f.os.get(m)):f.Ur.getTargetData(l,h)}(r,s,Rt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:ie())).next(a=>(yx(r,xM(e),a),{documents:a,Ts:o})))}function gx(n,e){let t=$(n),r=$(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function mx(n,e){let t=$(n),r=t.us.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,cM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(yx(t,e,i),i))}function yx(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function jB(n,e,t,r){return N(this,null,function*(){let i=$(n),o=ie(),s=jt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Qs(i,function(h){return Rt(ra(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>px(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function UB(r,i){return N(this,arguments,function*(n,e,t=ie()){let o=yield Qs(n,Rt(Zw(e.bundledQuery))),s=$(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ye(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ze.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function WS(n,e){return`firestore_clients_${n}_${e}`}function QS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jv(n,e){return`firestore_targets_${n}_${e}`}var _f=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Xu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},wf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Qw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=fM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},ew=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Qe("SharedClientState",`Failed to parse online state: ${e}`),null)}},mc=class{constructor(){this.activeTargetIds=Qw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ec=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Oe(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=WS(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new mc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(WS(this.persistenceKey,r));if(i){let o=wf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(jv(this.persistenceKey,e));if(i){let o=Xu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Yt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Qe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Yt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new _f(this.currentUser,e,t,r),o=QS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=QS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=jv(this.persistenceKey,e),o=new Xu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return wf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return _f.Rs(new tt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Xu.Rs(i,t)}Ls(e){return ew.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Qw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Ef=class{constructor(){this.so=new mc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new mc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tw=class{_o(e){}shutdown(){}};var If=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Vh=null;function Uv(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}var BB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var It="WebChannelConnection",rw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Uv(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw un("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=BB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Uv();return new Promise((s,a)=>{let u=new Rv;u.setWithCredentials(!0),u.listenOnce(Pv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qu.NO_ERROR:let h=u.getResponseJson();O(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case qu.TIMEOUT:O(It,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:let f=u.getStatus();if(O(It,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(A){let V=A.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(V)>=0?V:x.UNKNOWN}(y.status);a(new P(D,y.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{O(It,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(It,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Uv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fv(),a=kv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Nv({})),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(It,`Creating RPC '${e}' stream ${i}: ${h}`,u);let f=s.createWebChannel(h,u),m=!1,y=!1,D=new nw({Io:A=>{y?O(It,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(O(It,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),O(It,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),S=(A,V,B)=>{A.listen(V,F=>{try{B(F)}catch(G){setTimeout(()=>{throw G},0)}})};return S(f,bs.EventType.OPEN,()=>{y||(O(It,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),S(f,bs.EventType.CLOSE,()=>{y||(y=!0,O(It,`RPC '${e}' stream ${i} transport closed`),D.So())}),S(f,bs.EventType.ERROR,A=>{y||(y=!0,un(It,`RPC '${e}' stream ${i} transport errored:`,A),D.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),S(f,bs.EventType.MESSAGE,A=>{var V;if(!y){let B=A.data[0];K(!!B);let F=B,G=F.error||((V=F[0])===null||V===void 0?void 0:V.error);if(G){O(It,`RPC '${e}' stream ${i} received error:`,G);let ee=G.status,Y=function(w){let I=Xe[w];if(I!==void 0)return HM(I)}(ee),E=G.message;Y===void 0&&(Y=x.INTERNAL,E="Unknown error status: "+ee+" with message "+G.message),y=!0,D.So(new P(Y,E)),f.close()}else O(It,`RPC '${e}' stream ${i} received:`,B),D.bo(B)}}),S(a,Ov.STAT_EVENT,A=>{A.stat===Ph.PROXY?O(It,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Ph.NOPROXY&&O(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function vx(){return typeof window<"u"?window:null}function $h(){return typeof document<"u"?document:null}function Sc(n){return new v_(n,!0)}var yc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Df=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Qe(t.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iw=class extends Df{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=bB(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Ye(s.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=E_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Xh(u)?{documents:JM(o,u)}:{query:XM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=GM(o,s.resumeToken);let l=__(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=zs(o,s.snapshotVersion.toTimestamp());let l=__(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=AB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=E_(this.serializer),t.removeTarget=e,this.a_(t)}},ow=class extends Df{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=TB(e.writeResults,e.commitTime),r=Ye(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=E_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>fc(this.serializer,r))};this.a_(t)}};var sw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,w_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,w_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},aw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qe(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var uw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){fi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=$(u);l.L_.add(4),yield ia(l),l.q_.set("Unknown"),l.L_.delete(4),yield Mc(l)})}(this))}))}),this.q_=new aw(r,i)}};function Mc(n){return N(this,null,function*(){if(fi(n))for(let e of n.B_)yield e(!0)})}function ia(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function qf(n,e){let t=$(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),nE(t)?tE(t):sa(t).r_()&&eE(t,e))}function Ys(n,e){let t=$(n),r=sa(t);t.N_.delete(e),r.r_()&&_x(t,e),t.N_.size===0&&(r.r_()?r.o_():fi(t)&&t.q_.set("Unknown"))}function eE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sa(n).A_(e)}function _x(n,e){n.Q_.xe(e),sa(n).R_(e)}function tE(n){n.Q_=new y_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),sa(n).start(),n.q_.v_()}function nE(n){return fi(n)&&!sa(n).n_()&&n.N_.size>0}function fi(n){return $(n).L_.size===0}function wx(n){n.Q_=void 0}function $B(n){return N(this,null,function*(){n.q_.set("Online")})}function qB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{eE(n,e)})})}function HB(n,e){return N(this,null,function*(){wx(n),nE(n)?(n.q_.M_(e),tE(n)):n.q_.set("Unknown")})}function zB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof rf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cf(n,r)}else if(e instanceof Ls?n.Q_.Ke(e):e instanceof nf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield fx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),_x(o,u);let f=new Gs(h.target,u,l,h.sequenceNumber);eE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Cf(n,r)}})}function Cf(n,e,t){return N(this,null,function*(){if(!hi(e))throw e;n.L_.add(1),yield ia(n),n.q_.set("Offline"),t||(t=()=>fx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Mc(n)}))})}function Ex(n,e){return e().catch(t=>Cf(n,t,e))}function oa(n){return N(this,null,function*(){let e=$(n),t=li(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GB(e);)try{let i=yield LB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,WB(e,i)}catch(i){yield Cf(e,i)}Ix(e)&&Dx(e)})}function GB(n){return fi(n)&&n.O_.length<10}function WB(n,e){n.O_.push(e);let t=li(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Ix(n){return fi(n)&&!li(n).n_()&&n.O_.length>0}function Dx(n){li(n).start()}function QB(n){return N(this,null,function*(){li(n).p_()})}function KB(n){return N(this,null,function*(){let e=li(n);for(let t of n.O_)e.m_(t.mutations)})}function YB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=p_.from(r,e,t);yield Ex(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield oa(n)})}function ZB(n,e){return N(this,null,function*(){e&&li(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return qM(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();li(r).s_(),yield Ex(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield oa(r)}})}(n,e)),Ix(n)&&Dx(n)})}function KS(n,e){return N(this,null,function*(){let t=$(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=fi(t);t.L_.add(3),yield ia(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Mc(t)})}function cw(n,e){return N(this,null,function*(){let t=$(n);e?(t.L_.delete(2),yield Mc(t)):e||(t.L_.add(2),yield ia(t),t.q_.set("Unknown"))})}function sa(n){return n.K_||(n.K_=function(t,r,i){let o=$(t);return o.w_(),new iw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:$B.bind(null,n),Ro:qB.bind(null,n),mo:HB.bind(null,n),d_:zB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),nE(n)?tE(n):n.q_.set("Unknown")):(yield n.K_.stop(),wx(n))}))),n.K_}function li(n){return n.U_||(n.U_=function(t,r,i){let o=$(t);return o.w_(),new ow(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QB.bind(null,n),mo:ZB.bind(null,n),f_:KB.bind(null,n),g_:YB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield oa(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var lw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function aa(n,e){if(Qe("AsyncQueue",`${e}: ${n}`),hi(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var bf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Qu(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Tf=class{constructor(){this.W_=new Oe(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Zs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,bf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var dw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},hw=class{constructor(){this.queries=YS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=$(t),o=i.queries;i.queries=YS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function YS(){return new zn(n=>MM(n),Tc)}function rE(n,e){return N(this,null,function*(){let t=$(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new dw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=aa(s,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&oE(t)})}function iE(n,e){return N(this,null,function*(){let t=$(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function JB(n,e){let t=$(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&oE(t)}function XB(n,e,t){let r=$(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function oE(n){n.Y_.forEach(e=>{e.next()})}var fw,ZS;(ZS=fw||(fw={})).ea="default",ZS.Cache="cache";var vc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fw.Cache}};var pw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Af=class{constructor(e){this.serializer=e}Es(e){return Bn(this.serializer,e)}ds(e){return e.metadata.exists?ZM(this.serializer,e.document,!1):rt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ye(e)}},gw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Af(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield jB(this.localStore,new Af(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield UB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function Cx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Sf=class{constructor(e){this.key=e}},Mf=class{constructor(e){this.key=e}},xf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=RM(e),this.Ra=new bf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Tf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{let m=i.get(h),y=Ac(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;m&&y?m.data.isEqual(y.data)?D!==S&&(r.track({type:3,doc:y}),A=!0):this.ga(m,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,f)=>function(y,D){let S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return S(y)-S(D)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Zs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Tf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Mf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Sf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Zs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},mw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},yw=class{constructor(e){this.key=e,this.va=!1}},vw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new zn(a=>MM(a),Tc),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(q.comparator),this.Na=new Map,this.La=new gc,this.Ba={},this.ka=new Map,this.qa=Ws.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function e$(n,e,t=!0){return N(this,null,function*(){let r=Hf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield bx(r,e,t,!0),i})}function t$(n,e){return N(this,null,function*(){let t=Hf(n);yield bx(t,e,!0,!1)})}function bx(n,e,t,r){return N(this,null,function*(){let i=yield Qs(n.localStore,Rt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield sE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&qf(n.remoteStore,i),a})}function sE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,m,y)=>function(S,A,V,B){return N(this,null,function*(){let F=A.view.ma(V);F.ns&&(F=yield vf(S.localStore,A.query,!1).then(({documents:E})=>A.view.ma(E,F)));let G=B&&B.targetChanges.get(A.targetId),ee=B&&B.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges(F,S.isPrimaryClient,G,ee);return _w(S,A.targetId,Y.wa),Y.snapshot})}(n,f,m,y);let o=yield vf(n.localStore,e,!0),s=new xf(e,o.Ts),a=s.ma(o.documents),u=dc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);_w(n,t,l.wa);let h=new mw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function n$(n,e,t){return N(this,null,function*(){let r=$(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Tc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ks(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ys(r.remoteStore,i.targetId),Js(r,i.targetId)}).catch(di))):(Js(r,i.targetId),yield Ks(r.localStore,i.targetId,!0))})}function r$(n,e){return N(this,null,function*(){let t=$(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ys(t.remoteStore,r.targetId))})}function i$(n,e,t){return N(this,null,function*(){let r=lE(n);try{let i=yield function(s,a){let u=$(s),l=$e.now(),h=a.reduce((y,D)=>y.add(D.key),ie()),f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=jt(),S=ie();return u.cs.getEntries(y,h).next(A=>{D=A,D.forEach((V,B)=>{B.isValidDocument()||(S=S.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(A=>{f=A;let V=[];for(let B of a){let F=vB(B,f.get(B.key).overlayedDocument);F!=null&&V.push(new bn(B.key,F,IM(F.value.mapValue),ze.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(A=>{m=A;let V=A.applyToLocalDocumentSet(f,S);return u.documentOverlayCache.saveOverlays(y,A.batchId,V)})}).then(()=>({batchId:m.batchId,changes:PM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Oe(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ir(r,i.changes),yield oa(r.remoteStore)}catch(i){let o=aa(i,"Failed to persist write");t.reject(o)}})}function Tx(n,e){return N(this,null,function*(){let t=$(n);try{let r=yield VB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield Ir(t,r,e)}catch(r){yield di(r)}})}function JS(n,e,t){let r=$(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=$(s);u.onlineState=a;let l=!1;u.queries.forEach((h,f)=>{for(let m of f.j_)m.Z_(a)&&(l=!0)}),l&&oE(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function o$(n,e,t){return N(this,null,function*(){let r=$(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Oe(q.comparator);s=s.insert(o,rt.newNoDocument(o,J.min()));let a=ie().add(o),u=new lc(J.min(),new Map,new Oe(re),s,a);yield Tx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),cE(r)}else yield Ks(r.localStore,e,!1).then(()=>Js(r,e,t)).catch(di)})}function s$(n,e){return N(this,null,function*(){let t=$(n),r=e.batch.batchId;try{let i=yield FB(t.localStore,e);uE(t,r,null),aE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ir(t,i)}catch(i){yield di(i)}})}function a$(n,e,t){return N(this,null,function*(){let r=$(n);try{let i=yield function(s,a){let u=$(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(K(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);uE(r,e,t),aE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ir(r,i)}catch(i){yield di(i)}})}function u$(n,e){return N(this,null,function*(){let t=$(n);fi(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=$(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=aa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function aE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function uE(n,e,t){let r=$(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Js(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Ax(n,r)})}function Ax(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ys(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),cE(n))}function _w(n,e,t){for(let r of t)r instanceof Sf?(n.La.addReference(r.key,e),c$(n,r)):r instanceof Mf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Ax(n,r.key)):z()}function c$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),cE(n))}function cE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(ye.fromString(e)),r=n.qa.next();n.Na.set(r,new yw(t)),n.Oa=n.Oa.insert(t,r),qf(n.remoteStore,new Gs(Rt(ra(t.path)),r,"TargetPurposeLimboResolution",Yt.oe))}}function Ir(n,e,t){return N(this,null,function*(){let r=$(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Z_.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=$(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(l,m=>M.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>M.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!hi(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let y=h.os.get(m),D=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,S)}}})}(r.localStore,o))})}function l$(n,e){return N(this,null,function*(){let t=$(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield hx(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ir(t,r.hs)}})}function d$(n,e){let t=$(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function h$(n,e){return N(this,null,function*(){let t=$(n),r=yield vf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&_w(t,e.targetId,i.wa),i})}function f$(n,e){return N(this,null,function*(){let t=$(n);return mx(t.localStore,e).then(r=>Ir(t,r))})}function p$(n,e,t,r){return N(this,null,function*(){let i=$(n),o=yield function(a,u){let l=$(a),h=$(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,u).next(m=>m?l.localDocuments.getDocuments(f,m):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield oa(i.remoteStore):t==="acknowledged"||t==="rejected"?(uE(i,e,r||null),aE(i,e),function(a,u){$($(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield Ir(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function g$(n,e){return N(this,null,function*(){let t=$(n);if(Hf(t),lE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield XS(t,r.toArray());t.Qa=!0,yield cw(t.remoteStore,!0);for(let o of i)qf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Js(t,s),Ks(t.localStore,s,!0))),Ys(t.remoteStore,s)}),yield i,yield XS(t,r),function(s){let a=$(s);a.Na.forEach((u,l)=>{Ys(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Oe(q.comparator)}(t),t.Qa=!1,yield cw(t.remoteStore,!1)}})}function XS(n,e,t){return N(this,null,function*(){let r=$(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Qs(r.localStore,Rt(u[0]));for(let l of u){let h=r.Fa.get(l),f=yield h$(r,h);f.snapshot&&o.push(f.snapshot)}}else{let l=yield gx(r.localStore,s);a=yield Qs(r.localStore,l),yield sE(r,Sx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Sx(n){return SM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function m$(n){return function(t){return $($(t).persistence).Qi()}($(n).localStore)}function y$(n,e,t,r){return N(this,null,function*(){let i=$(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield mx(i.localStore,xM(o[0])),a=lc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ze.EMPTY_BYTE_STRING);yield Ir(i,s,a);break}case"rejected":yield Ks(i.localStore,e,!0),Js(i,e,r);break;default:z()}})}function v$(n,e,t){return N(this,null,function*(){let r=Hf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield gx(r.localStore,i),s=yield Qs(r.localStore,o);yield sE(r,Sx(o),s.targetId,!1,s.resumeToken),qf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Ks(r.localStore,i,!1).then(()=>{Ys(r.remoteStore,i),Js(r,i)}).catch(di))}})}function Hf(n){let e=$(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o$.bind(null,e),e.Ca.d_=JB.bind(null,e.eventManager),e.Ca.$a=XB.bind(null,e.eventManager),e}function lE(n){let e=$(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a$.bind(null,e),e}function _$(n,e,t){let r=$(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let S=$(y),A=Ye(D.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",V=>S.Gr.getBundleMetadata(V,D.id)).then(V=>!!V&&V.createTime.compareTo(A)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(Cx(u));let l=new gw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let f=yield l.complete();return yield Ir(o,f.Ia,void 0),yield function(y,D){let S=$(y);return S.persistence.runTransaction("Save bundle","readwrite",A=>S.Gr.saveBundleMetadata(A,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return un("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var _c=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Sc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dx(this.persistence,new yf,e.initialUser,this.serializer)}createPersistence(e){return new gf(mf.Zr,this.serializer)}createSharedClientState(e){return new Ef}terminate(){return N(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Rf=class n extends _c{constructor(e,t,r){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield jp(n.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield lE(this.Wa.syncEngine),yield oa(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return dx(this.persistence,new yf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new k_(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new Jv(t,this.persistence);return new Zv(e.asyncQueue,r)}createPersistence(e){let t=Xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Y_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vx(),$h(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ef}},ww=class n extends Rf{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield jp(n.prototype,this,"initialize").call(this,e);let t=this.Wa.syncEngine;this.sharedClientState instanceof ec&&(this.sharedClientState.syncEngine={no:p$.bind(null,t),ro:y$.bind(null,t),io:v$.bind(null,t),Qi:m$.bind(null,t),eo:f$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield g$(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=vx();if(!ec.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ec(t,e.asyncQueue,r,e.clientId,e.initialUser)}},wc=class{initialize(e,t){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=l$.bind(null,this.syncEngine),yield cw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new hw}()}createDatastore(e){let t=Sc(e.databaseInfo.databaseId),r=function(o){return new rw(o)}(e.databaseInfo);return function(o,s,a,u){return new sw(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new uw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>JS(this.syncEngine,t,0),function(){return If.D()?new If:new tw}())}createSyncEngine(e,t){return function(i,o,s,a,u,l,h){let f=new vw(i,o,s,a,u,l);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return N(this,null,function*(){var e,t;yield function(i){return N(this,null,function*(){let o=$(i);O("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield ia(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};function eM(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Xs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Ew=class{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new nt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let t=this.Ha.decode(e),r=Number(t);isNaN(r)&&this.Za(`length string (${t}) is not valid number`);let i=yield this.Xa(r);return new pw(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let t=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Iw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=$(i),a={documents:o.map(f=>hc(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let m=CB(s.serializer,f);l.set(m.key.toString(),m)});let h=[];return o.forEach(f=>{let m=l.get(f.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ci(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new ac(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=$(r),s={writes:i.map(a=>fc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?ze.exists(!1):ze.updateTime(t):ze.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(t)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Dw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.nu=r.maxAttempts,this.t_=new yc(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new Iw(this.datastore),t=this.su(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let t=this.updateFunction(e);return!Cc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!qM(t)}return!1}};var Cw=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=zh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){O("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=aa(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function qh(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield hx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function bw(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield dE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KS(e.remoteStore,i)),n._onlineComponents=e})}function Mx(n){return n.name==="FirebaseError"?n.code===x.FAILED_PRECONDITION||n.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function dE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!Mx(t))throw t;un("Error using user provided cache. Falling back to memory cache: "+t),yield qh(n,new _c)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield qh(n,new _c);return n._offlineComponents})}function zf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield bw(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield bw(n,new wc))),n._onlineComponents})}function xx(n){return dE(n).then(e=>e.persistence)}function hE(n){return dE(n).then(e=>e.localStore)}function Rx(n){return zf(n).then(e=>e.remoteStore)}function fE(n){return zf(n).then(e=>e.syncEngine)}function w$(n){return zf(n).then(e=>e.datastore)}function ea(n){return N(this,null,function*(){let e=yield zf(n),t=e.eventManager;return t.onListen=e$.bind(null,e.syncEngine),t.onUnlisten=n$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=t$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=r$.bind(null,e.syncEngine),t})}function E$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield xx(n),t=yield Rx(n);return e.setNetworkEnabled(!0),function(i){let o=$(i);return o.L_.delete(0),Mc(o)}(t)}))}function I$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield xx(n),t=yield Rx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=$(i);o.L_.add(0),yield ia(o),o.q_.set("Offline")})}(t)}))}function D$(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let f=$(l);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=aa(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield hE(n),e,t)})),t.promise}function Nx(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Xs({next:m=>{s.enqueueAndForget(()=>iE(o,f));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new vc(ra(a.path),h,{includeMetadataChanges:!0,_a:!0});return rE(o,f)}(yield ea(n),n.asyncQueue,e,t,r)})),r.promise}function C$(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield vf(i,o,!0),u=new xf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=aa(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield hE(n),e,t)})),t.promise}function Px(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Xs({next:m=>{s.enqueueAndForget(()=>iE(o,f)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new vc(a,h,{includeMetadataChanges:!0,_a:!0});return rE(o,f)}(yield ea(n),n.asyncQueue,e,t,r)})),r.promise}function b$(n,e){let t=new Xs(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.add(o),o.next()}(yield ea(n),t)})),()=>{t.za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.delete(o)}(yield ea(n),t)}))}}function T$(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?zM().encode(s):s,function(h,f){return new Ew(h,f)}(function(h,f){if(h instanceof Uint8Array)return eM(h,f);if(h instanceof ArrayBuffer)return eM(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Sc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){_$(yield fE(n),i,r)}))}function A$(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=$(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield hE(n),e)}))}function Ox(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tM=new Map;function pE(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gE(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nM(n){if(!q.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rM(n){if(q.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Gf(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kx(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Nf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ox((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ao=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bv;switch(r.type){case"firstParty":return new zv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=tM.get(t);r&&(O("ComponentProvider","Removing Datastore"),tM.delete(t),r.terminate())}(this),Promise.resolve()}};function Fx(n,e,t,r={}){var i;let o=(n=ve(n,ao))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=tt.MOCK_USER;else{a=QI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tt(l)}n._authCredentials=new $v(new Hh(a,u))}}var gt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},$n=class n extends gt{constructor(e,t,r){super(e,t,ra(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function mE(n,e,...t){if(n=Ve(n),pE("collection","path",e),n instanceof ao){let r=ye.fromString(e,...t);return rM(r),new $n(n,null,r)}{if(!(n instanceof Me||n instanceof $n))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return rM(r),new $n(n.firestore,null,r)}}function Vx(n,e){if(n=ve(n,ao),pE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gt(n,null,function(r){return new Cn(ye.emptyPath(),r)}(e))}function xc(n,e,...t){if(n=Ve(n),arguments.length===1&&(e=zh.newId()),pE("doc","path",e),n instanceof ao){let r=ye.fromString(e,...t);return nM(r),new Me(n,null,new q(r))}{if(!(n instanceof Me||n instanceof $n))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return nM(r),new Me(n.firestore,n instanceof $n?n.converter:null,new q(r))}}function yE(n,e){return n=Ve(n),e=Ve(e),(n instanceof Me||n instanceof $n)&&(e instanceof Me||e instanceof $n)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vE(n,e){return n=Ve(n),e=Ve(e),n instanceof gt&&e instanceof gt&&n.firestore===e.firestore&&Tc(n._query,e._query)&&n.converter===e.converter}var Tw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new yc(this,"async_queue_retry"),this.Eu=()=>{let t=$h();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=$h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=$h();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new nt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!hi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=lw.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&z()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function Aw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Sw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Lx=-1,Fe=class extends ao{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Tw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jx(this),this._firestoreClient.terminate()}};function ct(n){return n._firestoreClient||jx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function jx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Xv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ox(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Cw(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Ux(n,e){Kx(n=ve(n,Fe));let t=ct(n);if(t._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");un("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new wc;return $x(t,i,new Rf(i,r.cacheSizeBytes,e?.forceOwnership))}function Bx(n){Kx(n=ve(n,Fe));let e=ct(n);if(e._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");un("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new wc;return $x(e,r,new ww(r,t.cacheSizeBytes))}function $x(n,e,t){let r=new nt;return n.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield qh(n,t),yield bw(n,e),r.resolve()}catch(i){let o=i;if(!Mx(o))throw o;un("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function qx(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new nt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!ni.D())return Promise.resolve();let i=r+"main";yield ni.delete(i)})}(Xw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Hx(n){return function(t){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return u$(yield fE(t),r)})),r.promise}(ct(n=ve(n,Fe)))}function zx(n){return E$(ct(n=ve(n,Fe)))}function Gx(n){return I$(ct(n=ve(n,Fe)))}function Wx(n,e){let t=ct(n=ve(n,Fe)),r=new Sw;return T$(t,n._databaseId,e,r),r}function Qx(n,e){return A$(ct(n=ve(n,Fe)),e).then(t=>t?new gt(n,null,t.query):null)}function Kx(n){if(n._initialized||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Gn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ze.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Tn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wr=class{constructor(e){this._methodName=e}};var uo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Ec=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var S$=/^__.*__$/,Mw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new bn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ui(e,this.data,t,this.fieldTransforms)}},Pf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Yx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Of=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return kf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Yx(this.wu)&&S$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},xw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sc(e)}Nu(e,t,r,i=!1){return new Of({wu:e,methodName:t,Ou:r,path:Ke.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function fo(n){let e=n._freezeSettings(),t=Sc(n._databaseId);return new xw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wf(n,e,t,r,i,o={}){let s=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);EE("Data must be an object, but it was:",s,r);let a=Xx(r,s),u,l;if(o.merge)u=new Zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let f of o.mergeFields){let m=kw(e,f,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);tR(h,m)||h.push(m)}u=new Zt(h),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new Mw(new Dt(a),u,l)}var Ic=class n extends wr{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Zx(n,e,t){return new Of({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Rw=class n extends wr{_toFieldTransform(e){return new io(e.path,new si)}isEqual(e){return e instanceof n}},Nw=class n extends wr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=Zx(this,e,!0),r=this.Lu.map(o=>po(o,t)),i=new vr(r);return new io(e.path,i)}isEqual(e){return e instanceof n&&$p(this.Lu,e.Lu)}},Pw=class n extends wr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=Zx(this,e,!0),r=this.Lu.map(o=>po(o,t)),i=new _r(r);return new io(e.path,i)}isEqual(e){return e instanceof n&&$p(this.Lu,e.Lu)}},Ow=class n extends wr{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){let t=new ai(e.serializer,FM(e.serializer,this.Bu));return new io(e.path,t)}isEqual(e){return e instanceof n&&this.Bu===e.Bu}};function _E(n,e,t,r){let i=n.Nu(1,e,t);EE("Data must be an object, but it was:",i,r);let o=[],s=Dt.empty();ho(r,(u,l)=>{let h=IE(e,u,t);l=Ve(l);let f=i.Cu(h);if(l instanceof Ic)o.push(h);else{let m=po(l,f);m!=null&&(o.push(h),s.set(h,m))}});let a=new Zt(o);return new Pf(s,a,i.fieldTransforms)}function wE(n,e,t,r,i,o){let s=n.Nu(1,e,t),a=[kw(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(kw(e,o[m])),u.push(o[m+1]);let l=[],h=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!tR(l,a[m])){let y=a[m],D=u[m];D=Ve(D);let S=s.Cu(y);if(D instanceof Ic)l.push(y);else{let A=po(D,S);A!=null&&(l.push(y),h.set(y,A))}}let f=new Zt(l);return new Pf(h,f,s.fieldTransforms)}function Jx(n,e,t,r=!1){return po(t,n.Nu(r?4:3,e))}function po(n,e){if(eR(n=Ve(n)))return EE("Unsupported field value:",e,n),Xx(n,e);if(n instanceof wr)return function(r,i){if(!Yx(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=po(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:zs(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zs(i.serializer,o)}}if(r instanceof uo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:GM(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ec)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Kw(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Gf(r)}`)}(n,e)}function Xx(n,e){let t={};return vM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(n,(r,i)=>{let o=po(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function eR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof uo||n instanceof Gn||n instanceof Me||n instanceof wr||n instanceof Ec)}function EE(n,e,t){if(!eR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Gf(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function kw(n,e,t){if((e=Ve(e))instanceof Tn)return e._internalPath;if(typeof e=="string")return IE(n,e);throw kf("Field path arguments must be of type string or ",n,!1,void 0,t)}var M$=new RegExp("[~\\*/\\[\\]]");function IE(n,e,t){if(e.search(M$)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tn(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function tR(n,e){return n.some(t=>t.isEqual(e))}var co=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Fw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Qf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Fw=class extends co{data(){return super.data()}};function Qf(n,e){return typeof e=="string"?IE(n,e):e instanceof Tn?e._internalPath:e._delegate._internalPath}function nR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Dc=class{},lo=class extends Dc{};function Dr(n,e,...t){let r=[];e instanceof Dc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Vw).length,a=o.filter(u=>u instanceof Ff).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ff=class n extends lo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return hR(e._query,t),new gt(e.firestore,e.converter,h_(e._query,t))}_parse(e){let t=fo(e.firestore);return function(o,s,a,u,l,h,f){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){oM(f,h);let y=[];for(let D of f)y.push(iM(u,o,D));m={arrayValue:{values:y}}}else m=iM(u,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||oM(f,h),m=Jx(a,s,f,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function rR(n,e,t){let r=e,i=Qf("where",n);return Ff._create(i,r,t)}var Vw=class n extends Dc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:be.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)hR(s,u),s=h_(s,u)}(e._query,t),new gt(e.firestore,e.converter,h_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Lw=class n extends lo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new no(o,s)}(e._query,this._field,this._direction);return new gt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Cn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function iR(n,e="asc"){let t=e,r=Qf("orderBy",n);return Lw._create(r,t)}var Vf=class n extends lo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new gt(e.firestore,e.converter,tf(e._query,this._limit,this._limitType))}};function oR(n){return kx("limit",n),Vf._create("limit",n,"F")}function sR(n){return kx("limitToLast",n),Vf._create("limitToLast",n,"L")}var Lf=class n extends lo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=dR(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new Cn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function aR(...n){return Lf._create("startAt",n,!0)}function uR(...n){return Lf._create("startAfter",n,!1)}var jf=class n extends lo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=dR(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,o){return new Cn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function cR(...n){return jf._create("endBefore",n,!1)}function lR(...n){return jf._create("endAt",n,!0)}function dR(n,e,t,r){if(t[0]=Ve(t[0]),t[0]instanceof co)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let f of Vs(o))if(f.field.isKeyField())h.push(to(s,u.key));else{let m=u.data.field(f.field);if(Bf(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=f.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Hn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=fo(n.firestore);return function(s,a,u,l,h,f){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let S=h[D];if(m[D].field.isKeyField()){if(typeof S!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!Ww(s)&&S.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let A=s.path.child(ye.fromString(S));if(!q.isDocumentKey(A))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let V=new q(A);y.push(to(a,V))}else{let A=Jx(u,l,S);y.push(A)}}return new Hn(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iM(n,e,t){if(typeof(t=Ve(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ww(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!q.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return to(n,new q(r))}if(t instanceof Me)return to(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(t)}.`)}function oM(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ta=class{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ho(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Ec(o)}convertGeoPoint(e){return new uo(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=zw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){let t=yr(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);K(rx(r));let i=new ii(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||Qe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Kf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var jw=class extends ta{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var mr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ln=class extends co{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Qf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ei=class extends ln{data(e={}){return super.data(e)}},An=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ei(this._firestore,this._userDataWriter,r.key,r,new mr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ei(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ei(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:x$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function x$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function DE(n,e){return n instanceof ln&&e instanceof ln?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof An&&e instanceof An&&n._firestore===e._firestore&&vE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function fR(n){n=ve(n,Me);let e=ve(n.firestore,Fe);return Nx(ct(e),n._key).then(t=>AE(e,n,t))}var Er=class extends ta{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function pR(n){n=ve(n,Me);let e=ve(n.firestore,Fe),t=ct(e),r=new Er(e);return D$(t,n._key).then(i=>new ln(e,r,n._key,i,new mr(i!==null&&i.hasLocalMutations,!0),n.converter))}function gR(n){n=ve(n,Me);let e=ve(n.firestore,Fe);return Nx(ct(e),n._key,{source:"server"}).then(t=>AE(e,n,t))}function mR(n){n=ve(n,gt);let e=ve(n.firestore,Fe),t=ct(e),r=new Er(e);return nR(n._query),Px(t,n._query).then(i=>new An(e,r,n,i))}function yR(n){n=ve(n,gt);let e=ve(n.firestore,Fe),t=ct(e),r=new Er(e);return C$(t,n._query).then(i=>new An(e,r,n,i))}function vR(n){n=ve(n,gt);let e=ve(n.firestore,Fe),t=ct(e),r=new Er(e);return Px(t,n._query,{source:"server"}).then(i=>new An(e,r,n,i))}function CE(n,e,t){n=ve(n,Me);let r=ve(n.firestore,Fe),i=Kf(n.converter,e,t);return ua(r,[Wf(fo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ze.none())])}function bE(n,e,t,...r){n=ve(n,Me);let i=ve(n.firestore,Fe),o=fo(i),s;return s=typeof(e=Ve(e))=="string"||e instanceof Tn?wE(o,"updateDoc",n._key,e,t,r):_E(o,"updateDoc",n._key,e),ua(i,[s.toMutation(n._key,ze.exists(!0))])}function _R(n){return ua(ve(n.firestore,Fe),[new ci(n._key,ze.none())])}function wR(n,e){let t=ve(n.firestore,Fe),r=xc(n),i=Kf(n.converter,e);return ua(t,[Wf(fo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ze.exists(!1))]).then(()=>r)}function TE(n,...e){var t,r,i;n=Ve(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Aw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Aw(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,h;if(n instanceof Me)l=ve(n.firestore,Fe),h=ra(n._key.path),u={next:f=>{e[s]&&e[s](AE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ve(n,gt);l=ve(f.firestore,Fe),h=f._query;let m=new Er(l);u={next:y=>{e[s]&&e[s](new An(l,m,f,y))},error:e[s+1],complete:e[s+2]},nR(n._query)}return function(m,y,D,S){let A=new Xs(S),V=new vc(y,A,D);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return rE(yield ea(m),V)})),()=>{A.za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return iE(yield ea(m),V)}))}}(ct(l),h,a,u)}function ER(n,e){return b$(ct(n=ve(n,Fe)),Aw(e)?e:{next:e})}function ua(n,e){return function(r,i){let o=new nt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return i$(yield fE(r),i,o)})),o.promise}(ct(n),e)}function AE(n,e,t){let r=t.docs.get(e._key),i=new Er(n);return new ln(n,i,e._key,r,new mr(t.hasPendingWrites,t.fromCache),e.converter)}var R$={maxAttempts:5};var Uf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fo(e)}set(e,t,r){this._verifyNotCommitted();let i=Jr(e,this._firestore),o=Kf(i.converter,t,r),s=Wf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ze.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Jr(e,this._firestore),s;return s=typeof(t=Ve(t))=="string"||t instanceof Tn?wE(this._dataReader,"WriteBatch.update",o._key,t,r,i):_E(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Jr(e,this._firestore);return this._mutations=this._mutations.concat(new ci(t._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Jr(n,e){if((n=Ve(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Uw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=fo(t)}get(t){let r=Jr(t,this._firestore),i=new jw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new co(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new co(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Jr(t,this._firestore),s=Kf(o.converter,r,i),a=Wf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Jr(t,this._firestore),a;return a=typeof(r=Ve(r))=="string"||r instanceof Tn?wE(this._dataReader,"Transaction.update",s._key,r,i,o):_E(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Jr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Jr(e,this._firestore),r=new Er(this._firestore);return super.get(e).then(i=>new ln(this._firestore,r,t._key,i._document,new mr(!1,!1),t.converter))}};function IR(n,e,t){n=ve(n,Fe);let r=Object.assign(Object.assign({},R$),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new nt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield w$(o);new Dw(o.asyncQueue,l,a,s,u).ru()})),u.promise}(ct(n),i=>e(new Uw(n,i)),r)}function DR(){return new Ic("deleteField")}function CR(){return new Rw("serverTimestamp")}function bR(...n){return new Nw("arrayUnion",n)}function TR(...n){return new Pw("arrayRemove",n)}function AR(n){return new Ow("increment",n)}(function(e,t=!0){(function(i){na=i})(ZI),Fa(new vi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Fe(new qv(r.getProvider("auth-internal")),new Wv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ii(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Sr(iS,"4.7.2",e),Sr(iS,"4.7.2","esm2017")})();var N$="@firebase/firestore-compat",P$="0.3.37";function PE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function SR(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function MR(){if(!_M())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Yf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return MR(),new n(Gn.fromBase64String(e))}static fromUint8Array(e){return SR(),new n(Gn.fromUint8Array(e))}toBase64(){return MR(),this._delegate.toBase64()}toUint8Array(){return SR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function SE(n){return O$(n,["next","error","complete"])}function O$(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var ME=class{enableIndexedDbPersistence(e,t){return Ux(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Bx(e._delegate)}clearIndexedDbPersistence(e){return qx(e._delegate)}},Zf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ii||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&un("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Fx(this._delegate,e,t,r)}enableNetwork(){return zx(this._delegate)}disableNetwork(){return Gx(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Hx(this._delegate)}onSnapshotsInSync(e){return ER(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new da(this,mE(this._delegate,e))}catch(t){throw Nt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wn(this,xc(this._delegate,e))}catch(t){throw Nt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vo(this,Vx(this._delegate,e))}catch(t){throw Nt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return IR(this._delegate,t=>e(new Jf(this,t)))}batch(){return ct(this._delegate),new Xf(new Uf(this._delegate,e=>ua(this._delegate,e)))}loadBundle(e){return Wx(this._delegate,e)}namedQuery(e){return Qx(this._delegate,e).then(t=>t?new vo(this,t):null)}},ca=class extends ta{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yf(new Gn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Wn.forKey(t,this.firestore,null)}};function k$(n){sM(n)}var Jf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ca(e)}get(e){let t=go(e);return this._delegate.get(t).then(r=>new mo(this._firestore,new ln(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=go(e);return r?(PE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=go(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=go(e);return this._delegate.delete(t),this}},Xf=class{constructor(e){this._delegate=e}set(e,t,r){let i=go(e);return r?(PE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=go(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=go(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},la=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new ei(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ca(e),t),i.set(t,o)),o}};la.INSTANCES=new WeakMap;var Wn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ca(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new da(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new da(this.firestore,mE(this._delegate,e))}catch(t){throw Nt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ve(e),e instanceof Me?yE(this._delegate,e):!1}set(e,t){t=PE("DocumentReference.set",t);try{return t?CE(this._delegate,e,t):CE(this._delegate,e)}catch(r){throw Nt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?bE(this._delegate,e):bE(this._delegate,e,t,...r)}catch(i){throw Nt(i,"updateDoc()","DocumentReference.update()")}}delete(){return _R(this._delegate)}onSnapshot(...e){let t=xR(e),r=RR(e,i=>new mo(this.firestore,new ln(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return TE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=pR(this._delegate):e?.source==="server"?t=gR(this._delegate):t=fR(this._delegate),t.then(r=>new mo(this.firestore,new ln(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(la.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Nt(n,e,t){return n.message=n.message.replace(e,t),n}function xR(n){for(let e of n)if(typeof e=="object"&&!SE(e))return e;return{}}function RR(n,e){var t,r;let i;return SE(n[0])?i=n[0]:SE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var mo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return DE(this._delegate,e._delegate)}},yo=class extends mo{data(e){let t=this._delegate.data(e);return this._delegate._converter||aM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},vo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ca(e)}where(e,t,r){try{return new n(this.firestore,Dr(this._delegate,rR(e,t,r)))}catch(i){throw Nt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Dr(this._delegate,iR(e,t)))}catch(r){throw Nt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Dr(this._delegate,oR(e)))}catch(t){throw Nt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Dr(this._delegate,sR(e)))}catch(t){throw Nt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Dr(this._delegate,aR(...e)))}catch(t){throw Nt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Dr(this._delegate,uR(...e)))}catch(t){throw Nt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Dr(this._delegate,cR(...e)))}catch(t){throw Nt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Dr(this._delegate,lR(...e)))}catch(t){throw Nt(t,"endAt()","Query.endAt()")}}isEqual(e){return vE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=yR(this._delegate):e?.source==="server"?t=vR(this._delegate):t=mR(this._delegate),t.then(r=>new Rc(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=xR(e),r=RR(e,i=>new Rc(this.firestore,new An(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return TE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(la.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},xE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Rc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new yo(this._firestore,r))})}isEqual(e){return DE(this._delegate,e._delegate)}},da=class n extends vo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Wn(this.firestore,e):null}doc(e){try{return e===void 0?new Wn(this.firestore,xc(this._delegate)):new Wn(this.firestore,xc(this._delegate,e))}catch(t){throw Nt(t,"doc()","CollectionReference.doc()")}}add(e){return wR(this._delegate,e).then(t=>new Wn(this.firestore,t))}isEqual(e){return yE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(la.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function go(n){return ve(n,Me)}var RE=class n{constructor(...e){this._delegate=new Tn(...e)}static documentId(){return new n(Ke.keyField().canonicalString())}isEqual(e){return e=Ve(e),e instanceof Tn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var NE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=CR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=DR();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=bR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=TR(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=AR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var F$={Firestore:Zf,GeoPoint:uo,Timestamp:$e,Blob:Yf,Transaction:Jf,WriteBatch:Xf,DocumentReference:Wn,DocumentSnapshot:mo,Query:vo,QueryDocumentSnapshot:yo,QuerySnapshot:Rc,CollectionReference:da,FieldPath:RE,FieldValue:NE,setLogLevel:k$,CACHE_SIZE_UNLIMITED:Lx};function V$(n,e){n.INTERNAL.registerComponent(new vi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},F$)))}function L$(n){V$(n,(e,t)=>new Zf(e,t,new ME)),n.registerVersion(N$,P$)}L$(Ge);function j$(n,e=$a){return new de(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function NR(n,e){return j$(n,e)}function U$(n,e){return NR(n,e).pipe(Di(void 0),Ha(),X(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function FE(n,e){return NR(n,e).pipe(X(t=>({payload:t,type:"query"})))}var ep=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=VR(r,t);return new np(i,o,this.afs)}snapshotChanges(){return U$(this.ref,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return this.snapshotChanges().pipe(X(({payload:t})=>e.idField?le(j({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ge(this.ref.get(e)).pipe(Lt)}};function tp(n,e){return FE(n,e).pipe(Di(void 0),Ha(),X(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function PR(n,e,t){return tp(n,t).pipe(Ii((r,i)=>B$(r,i.map(o=>o.payload),e),[]),dg(),X(r=>r.map(i=>({type:i.type,payload:i}))))}function B$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=$$(n,r))}),n}function OE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function $$(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return OE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return OE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OE(n,e.oldIndex,1);break}return n}function OR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var np=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=tp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(X(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Di(void 0),Ha(),lt(([r,i])=>i.length>0||!r),X(([,r])=>r),Lt)}auditTrail(e){return this.stateChanges(e).pipe(Ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=OR(e);return PR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return FE(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.payload.docs.map(r=>e.idField?le(j({},r.data()),{[e.idField]:r.id}):r.data())),Lt)}get(e){return ge(this.query.get(e)).pipe(Lt)}add(e){return this.ref.add(e)}doc(e){return new ep(this.ref.doc(e),this.afs)}},kE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?tp(this.query,this.afs.schedulers.outsideAngular).pipe(Lt):tp(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),Lt)}auditTrail(e){return this.stateChanges(e).pipe(Ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=OR(e);return PR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return FE(this.query,this.afs.schedulers.outsideAngular).pipe(X(r=>r.payload.docs.map(i=>e.idField?j({[e.idField]:i.id},i.data()):i.data())),Lt)}get(e){return ge(this.query.get(e)).pipe(Lt)}},kR=new H("angularfire2.enableFirestorePersistence"),FR=new H("angularfire2.firestore.persistenceSettings"),q$=new H("angularfire2.firestore.settings"),H$=new H("angularfire2.firestore.use-emulator");function VR(n,e=t=>t){return{query:e(n),ref:n}}var Nc=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,f,m,y,D,S,A,V,B){this.schedulers=u;let F=$u(t,a,r),G=h;f&&Mv(F,a,m,D,S,A,y,V),[this.firestore,this.persistenceEnabled$]=Rh(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),G&&ee.useEmulator(...G),i&&!lr(s)){let Y=()=>{try{return ge(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Z(!1)}};return[ee,a.runOutsideAngular(Y)]}else return[ee,Z(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=VR(i,r),a=this.schedulers.ngZone.run(()=>o);return new np(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new kE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new ep(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(Ds),L(Cs,8),L(kR,8),L(q$,8),L(pt),L(pe),L(Sh),L(FR,8),L(H$,8),L(tS,8),L(Dv,8),L(Cv,8),L(bv,8),L(Tv,8),L(Av,8),L(Sv,8),L(zi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),LR=(()=>{class n{constructor(){Ge.registerVersion("angularfire",Is.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kR,useValue:!0},{provide:FR,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=at({type:n});static \u0275inj=st({providers:[Nc]})}return n})();var WR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Fi),Ie($r))}}static{this.\u0275dir=nn({type:n})}}return n})(),z$=(()=>{class n extends WR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=cu(n)))(i||n)}})()}static{this.\u0275dir=nn({type:n,features:[is]})}}return n})(),QR=new H("");var G$={provide:QR,useExisting:ru(()=>ga),multi:!0};function W$(){let n=Fn()?Fn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Q$=new H(""),ga=(()=>{class n extends WR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!W$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Fi),Ie($r),Ie(Q$,8))}}static{this.\u0275dir=nn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Gt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[iy([G$]),is]})}}return n})();var K$=new H(""),Y$=new H("");function KR(n){return n!=null}function YR(n){return ji(n)?ge(n):n}function ZR(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function JR(n,e){return e.map(t=>t(n))}function Z$(n){return!n.validate}function XR(n){return n.map(e=>Z$(e)?e:t=>e.validate(t))}function J$(n){if(!n)return null;let e=n.filter(KR);return e.length==0?null:function(t){return ZR(JR(t,e))}}function eN(n){return n!=null?J$(XR(n)):null}function X$(n){if(!n)return null;let e=n.filter(KR);return e.length==0?null:function(t){let r=JR(t,e).map(YR);return ug(r).pipe(X(ZR))}}function tN(n){return n!=null?X$(XR(n)):null}function UR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eq(n){return n._rawValidators}function tq(n){return n._rawAsyncValidators}function VE(n){return n?Array.isArray(n)?n:[n]:[]}function ip(n,e){return Array.isArray(n)?n.includes(e):n===e}function BR(n,e){let t=VE(e);return VE(n).forEach(i=>{ip(t,i)||t.push(i)}),t}function $R(n,e){return VE(e).filter(t=>!ip(n,t))}var op=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},LE=class extends op{get formDirective(){return null}get path(){return null}},Vc=class extends op{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},jE=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},JW=le(j({},nq),{"[class.ng-submitted]":"isSubmitted"}),ap=(()=>{class n extends jE{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Vc,2))}}static{this.\u0275dir=nn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ry("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[is]})}}return n})();var Pc="VALID",rp="INVALID",ha="PENDING",Oc="DISABLED",pa=class{},sp=class extends pa{constructor(e,t){super(),this.value=e,this.source=t}},kc=class extends pa{constructor(e,t){super(),this.pristine=e,this.source=t}},Fc=class extends pa{constructor(e,t){super(),this.touched=e,this.source=t}},fa=class extends pa{constructor(e,t){super(),this.status=e,this.source=t}};function rq(n){return(up(n)?n.validators:n)||null}function iq(n){return Array.isArray(n)?eN(n):n||null}function oq(n,e){return(up(e)?e.asyncValidators:n)||null}function sq(n){return Array.isArray(n)?tN(n):n||null}function up(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var UE=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Jd(()=>this.statusReactive()),this.statusReactive=qd(void 0),this._pristine=Jd(()=>this.pristineReactive()),this.pristineReactive=qd(!0),this._touched=Jd(()=>this.touchedReactive()),this.touchedReactive=qd(!1),this._events=new Le,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Hr(this.statusReactive)}set status(e){Hr(()=>this.statusReactive.set(e))}get valid(){return this.status===Pc}get invalid(){return this.status===rp}get pending(){return this.status==ha}get disabled(){return this.status===Oc}get enabled(){return this.status!==Oc}get pristine(){return Hr(this.pristineReactive)}set pristine(e){Hr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Hr(this.touchedReactive)}set touched(e){Hr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(BR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($R(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($R(e,this._rawAsyncValidators))}hasValidator(e){return ip(this._rawValidators,e)}hasAsyncValidator(e){return ip(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new kc(!0,r))}markAsPending(e={}){this.status=ha;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Oc,this.errors=null,this._forEachChild(i=>{i.disable(le(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sp(this.value,r)),this._events.next(new fa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pc,this._forEachChild(r=>{r.enable(le(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pc||this.status===ha)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sp(this.value,t)),this._events.next(new fa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oc:Pc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ha,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=YR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new fa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?Oc:this.errors?rp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ha)?ha:this._anyControlsHaveStatus(rp)?rp:Pc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new kc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){up(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=sq(this._rawAsyncValidators)}};var nN=new H("CallSetDisabledState",{providedIn:"root",factory:()=>BE}),BE="always";function aq(n,e){return[...e.path,n]}function uq(n,e,t=BE){lq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),dq(n,e),fq(n,e),hq(n,e),cq(n,e)}function qR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function cq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lq(n,e){let t=eq(n);e.validator!==null?n.setValidators(UR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=tq(n);e.asyncValidator!==null?n.setAsyncValidators(UR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();qR(e._rawValidators,i),qR(e._rawAsyncValidators,i)}function dq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rN(n,e)})}function hq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function pq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function gq(n){return Object.getPrototypeOf(n.constructor)===z$}function mq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ga?t=o:gq(o)?r=o:i=o}),i||r||t||null}function HR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yq=class extends UE{constructor(e=null,t,r){super(rq(t),oq(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),up(t)&&(t.nonNullable||t.initialValueIsDefault)&&(zR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){zR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var vq={provide:Vc,useExisting:ru(()=>Lc)},GR=Promise.resolve(),Lc=(()=>{class n extends Vc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new yq,this._registered=!1,this.name="",this.update=new ot,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),pq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){GR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Zd(r);GR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aq(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ie(LE,9),Ie(K$,10),Ie(Y$,10),Ie(QR,10),Ie(Ui,8),Ie(nN,8))}}static{this.\u0275dir=nn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[iy([vq]),is,ts]})}}return n})();var _q=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({})}}return n})();var iN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nN,useValue:t.callSetDisabledState??BE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=at({type:n})}static{this.\u0275inj=st({imports:[_q]})}}return n})();var wq=n=>({transform:n});function Eq(n,e){if(n&1){let t=Kb();De(0,"li"),Be(1),De(2,"button",19),Gt("click",function(){let i=aC(t).index,o=ar();return uC(o.deleteName(i))}),Be(3,"Delete"),Ee()()}if(n&2){let t=e.$implicit;Pe(),ur(" ",t," ")}}function Iq(n,e){if(n&1&&(De(0,"div",20),Be(1),Ee()),n&2){let t=e.$implicit,r=e.index,i=ar();Vt("ngStyle",i.getDegreePosition(r,t)),Pe(),ur(" ",t," ")}}function Dq(n,e){n&1&&(De(0,"div",21)(1,"p"),Be(2,"Spin stuff to get questions and stuff, also Astro is sexy"),Ee()())}function Cq(n,e){if(n&1&&(De(0,"div",21)(1,"p"),Be(2),Ee(),De(3,"p",22),Be(4),Ee()()),n&2){let t=ar();Pe(2),os("",t.selectedAsker," must ask ",t.selectedResponder,":"),Pe(2),fu(t.selectedQuestion)}}var cp=class n{constructor(e){this.firestore=e}rotationDegrees=0;newName="";names=[];previousIndex=null;previousResponder=null;selectedQuestion="";selectedAsker="";selectedResponder="";newQuestion="";questionHistory={};usedQuestions={};isHistoryLoaded=!1;recentAskers=[];recentResponders=[];questions=["What is your favorite hobby?","What's the most interesting place you've visited?","What is your dream job?","Who is your role model?","What is your favorite movie?","What is the weirdest food you've ever eaten?","If you could live anywhere in the world, where would it be?","What's one thing you couldn't live without?","What's your favorite book?","What's one thing you're afraid of?"];ngOnInit(){console.log("Initializing the component and loading Firestore data..."),this.firestore.collection("spins").doc("currentSpin").valueChanges().subscribe(e=>{e&&(this.rotationDegrees=e.rotationDegrees,this.selectedAsker=e.asker,this.selectedResponder=e.responder,this.selectedQuestion=e.question,console.log("Loaded spin data from Firestore:",e))}),this.firestore.collection("names").doc("currentNames").valueChanges().subscribe(e=>{e&&e.names&&(this.names=e.names,console.log("Loaded names from Firestore:",e.names))}),this.firestore.collection("questions").doc("currentQuestions").valueChanges().subscribe(e=>{e&&e.questions&&(this.questions=e.questions,console.log("Loaded questions from Firestore:",e.questions))}),this.firestore.collection("questionHistory").doc("history").valueChanges().subscribe(e=>{e&&e.history?(this.questionHistory=e.history,this.isHistoryLoaded=!0,console.log("Loaded question history from Firestore:",e.history)):(this.isHistoryLoaded=!0,console.log("No question history found."))}),this.firestore.collection("questions").doc("usedQuestions").get().subscribe(e=>{e.exists?this.firestore.collection("questions").doc("usedQuestions").valueChanges().subscribe(t=>{t&&t.usedQuestions&&(this.usedQuestions=t.usedQuestions,console.log("Loaded used questions from Firestore:",t.usedQuestions))}):(console.log("No usedQuestions document found in Firestore, creating a new one..."),this.firestore.collection("questions").doc("usedQuestions").set({usedQuestions:{}}).then(()=>{console.log("Created usedQuestions document in Firestore.")}).catch(t=>{console.error("Error creating usedQuestions document:",t)}))})}addQuestion(){this.newQuestion.trim()&&(this.questions.push(this.newQuestion),this.firestore.collection("questions").doc("currentQuestions").set({questions:Ge.firestore.FieldValue.arrayUnion(this.newQuestion)},{merge:!0}).then(()=>{console.log("Added new question to Firestore:",this.newQuestion)}).catch(t=>{console.error("Error adding new question to Firestore:",t)}),this.newQuestion="")}addName(){this.newName&&(this.firestore.collection("names").doc("currentNames").set({names:Ge.firestore.FieldValue.arrayUnion(this.newName)},{merge:!0}).then(()=>{console.log("Added new name to Firestore:",this.newName)}).catch(t=>{console.error("Error adding new name to Firestore:",t)}),this.newName="")}deleteName(e){let t=this.names[e];this.firestore.collection("names").doc("currentNames").update({names:Ge.firestore.FieldValue.arrayRemove(t)}).then(()=>{console.log("Deleted name from Firestore:",t)}).catch(i=>{console.error("Error deleting name from Firestore:",i)})}get remainingQuestions(){let e=this.questions.filter(t=>!this.usedQuestions[t]).length;return console.log("Remaining questions count:",e),e}spin(){if(!this.isHistoryLoaded||!this.names||this.names.length<=1)return;let e,t;do e=Math.floor(Math.random()*this.names.length);while(this.previousIndex===e||this.recentAskers.includes(e));this.previousIndex=e,this.recentAskers.push(e),this.recentAskers.length>3&&this.recentAskers.shift(),console.log("Selected asker index:",e);let r=360/this.names.length,i=r*e;console.log("Degrees per name:",r),console.log("Target rotation (no offset):",i);let o=3*360+i;console.log("Total rotation degrees:",o);let s=isNaN(this.rotationDegrees)?0:this.rotationDegrees,a=s+o;console.log("Final rotation degrees:",a);let u=4e3,l=performance.now(),h=this.firestore.collection("spins").doc("currentSpin");h.set({rotationDegrees:a,asker:"",responder:"",question:""}).then(()=>{console.log("Initial spin state saved to Firestore")}).catch(m=>{console.error("Error saving spin state to Firestore:",m)});let f=m=>{let y=m-l,D=Math.min(y/u,1),S=this.easeOutCubic(D);if(this.rotationDegrees=s+o*S,console.log("Current rotation degrees during spin:",this.rotationDegrees),D<1)requestAnimationFrame(f);else{this.selectedAsker=this.names[e],console.log("Selected asker:",this.selectedAsker);do t=Math.floor(Math.random()*this.names.length);while(t===e||t===this.previousResponder||this.recentResponders.includes(t));this.selectedResponder=this.names[t],this.previousResponder=t,this.recentResponders.push(t),this.recentResponders.length>3&&this.recentResponders.shift(),console.log("Selected responder:",this.selectedResponder);let A=this.questions;if(A.length===0){console.log("No available questions left.");return}this.selectedQuestion=A[Math.floor(Math.random()*A.length)],console.log("Selected question:",this.selectedQuestion),this.firestore.collection("questions").doc("currentQuestions").update({questions:Ge.firestore.FieldValue.arrayRemove(this.selectedQuestion)}).then(()=>{console.log("Removed used question from Firestore:",this.selectedQuestion)}).catch(B=>{console.error("Error removing question from Firestore:",B)}),h.set({rotationDegrees:this.rotationDegrees,asker:this.selectedAsker,responder:this.selectedResponder,question:this.selectedQuestion}).then(()=>{console.log("Final spin data updated in Firestore.")}).catch(B=>{console.error("Error updating final spin data in Firestore:",B)})}};requestAnimationFrame(f)}easeOutCubic(e){return 1-Math.pow(1-e,3)}getDegreePosition(e,t){let o=360/this.names.length*e;console.log("Placing name:",t,"at degree:",o);let s=300,a=250,u=this.getTextWidth(t,"18px Arial");u>100&&(s+=(u-100)/2);let l=o*Math.PI/180,h=Math.cos(l)*s+a,f=Math.sin(l)*s+a;return{left:`${h}px`,top:`${f}px`}}getTextWidth(e,t){let i=document.createElement("canvas").getContext("2d");return i?(i.font=t,i.measureText(e).width):0}markAllAsReadExceptOne(){if(this.questions.length<=1)return;let e=Math.floor(Math.random()*this.questions.length),t=this.questions[e],r={};this.questions.forEach(i=>{r[i]=i!==t}),this.usedQuestions=r,this.firestore.collection("questions").doc("usedQuestions").set(r)}markAllAsUnread(){let e={};this.questions.forEach(t=>{e[t]=!1}),this.usedQuestions=e,this.firestore.collection("questions").doc("usedQuestions").set(e)}static \u0275fac=function(t){return new(t||n)(Ie(Nc))};static \u0275cmp=jr({type:n,selectors:[["app-arrow-spinner"]],decls:34,vars:10,consts:[[1,"main-container"],[1,"input-section"],[1,"input-container"],["for","nameInput"],["id","nameInput","placeholder","Add name",3,"ngModelChange","ngModel"],[3,"click"],[1,"names-list"],[4,"ngFor","ngForOf"],[1,"circle-container"],[1,"spin-container"],[1,"circle"],[1,"center-circle"],[1,"arrow",3,"ngStyle"],["class","name-label",3,"ngStyle",4,"ngFor","ngForOf"],["class","question-container",4,"ngIf"],[1,"question-input-section"],["for","questionInput"],["id","questionInput","placeholder","Add a question",2,"margin-left","2px",3,"ngModelChange","ngModel"],[1,"controls"],[1,"delete-button",3,"click"],[1,"name-label",3,"ngStyle"],[1,"question-container"],[1,"question-text"]],template:function(t,r){t&1&&(De(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),Be(4,"Enter Names: "),Ee(),De(5,"input",4),as("ngModelChange",function(o){return pu(r.newName,o)||(r.newName=o),o}),Ee(),De(6,"button",5),Gt("click",function(){return r.addName()}),Be(7,"Add Name"),Ee()(),De(8,"div",6)(9,"ul"),Vi(10,Eq,4,1,"li",7),Ee()()(),De(11,"div",8)(12,"div",9)(13,"button",5),Gt("click",function(){return r.spin()}),Be(14,"Spin"),Ee()(),De(15,"div",10),Li(16,"div",11)(17,"div",12),Vi(18,Iq,2,2,"div",13),Ee(),Vi(19,Dq,3,0,"div",14)(20,Cq,5,3,"div",14),Ee(),De(21,"div",15)(22,"label",16),Be(23,"Enter a New Question:"),Ee(),De(24,"input",17),as("ngModelChange",function(o){return pu(r.newQuestion,o)||(r.newQuestion=o),o}),Ee(),De(25,"button",5),Gt("click",function(){return r.addQuestion()}),Be(26,"Add Question"),Ee(),De(27,"div",18)(28,"button",5),Gt("click",function(){return r.markAllAsReadExceptOne()}),Be(29,"Mark All as Read Except One"),Ee(),De(30,"button",5),Gt("click",function(){return r.markAllAsUnread()}),Be(31,"Mark All as Unread"),Ee()(),De(32,"p"),Be(33),Ee()()()),t&2&&(Pe(5),ss("ngModel",r.newName),Pe(5),Vt("ngForOf",r.names),Pe(7),Vt("ngStyle",eT(8,wq,"rotate("+r.rotationDegrees+"deg)")),Pe(),Vt("ngForOf",r.names),Pe(),Vt("ngIf",!r.selectedQuestion),Pe(),Vt("ngIf",r.selectedQuestion),Pe(4),ss("ngModel",r.newQuestion),Pe(9),ur("Remaining Questions: ",r.remainingQuestions,""))},dependencies:[DT,th,CT,ga,ap,Lc],styles:['.main-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:95.7vh;padding:20px;background-color:#1d1d1d;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.input-section[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#f2f2f2;padding:30px;border-radius:10px;box-shadow:0 4px 8px #00000080;color:#333}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center;font-size:16px}input[_ngcontent-%COMP%]{font-size:14px;padding:8px;border:1px solid #ccc;border-radius:5px;width:200px;background-color:#fff;color:#333;box-shadow:inset 0 1px 3px #0000001a}.pointer[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;transform-origin:50% 100%;width:50px;height:150px;transition:transform 1s ease-out}button[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;cursor:pointer;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#ff4736}.delete-button[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff;border:none;border-radius:5px;padding:5px 10px;margin-left:10px;cursor:pointer}.delete-button[_ngcontent-%COMP%]:hover{background-color:#ff1a1a}.names-list[_ngcontent-%COMP%]{margin-top:20px;font-size:14px;list-style:none;padding:0;width:100%}.names-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.names-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px 0;padding:8px;background-color:#dedede;border-radius:5px;color:#333;width:100%;display:flex;justify-content:space-between;align-items:center}.circle-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:70%;position:relative}.spin-container[_ngcontent-%COMP%]{position:absolute;top:-100px;display:flex;justify-content:center;align-items:center}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:12px 25px;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff4736}.circle[_ngcontent-%COMP%]{position:relative;width:500px;height:500px;border:4px solid #ff6f61;border-radius:50%;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 20px #00000080;background-color:#292929}.center-circle[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;background-color:#ff6f61;border-radius:50%;z-index:10;box-shadow:0 2px 8px #0000004d;top:50%;left:50%;transform:translate(-50%,-35%)}.arrow[_ngcontent-%COMP%]{position:absolute;width:200px;height:20px;background-color:#ff6f61;top:50%;left:50%;transform-origin:0 50%;transition:transform 1s ease-out;transform:translateY(-50%)}.arrow[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;right:-30px;transform:translateY(-50%);width:0;height:0;border-left:30px solid #ff6f61;border-top:10px solid transparent;border-bottom:10px solid transparent}.name-label[_ngcontent-%COMP%]{position:absolute;font-size:18px;color:#ff6f61;font-weight:700;transform:translate(-50%,-50%);width:auto;text-align:center;word-wrap:break-word;white-space:normal;overflow:hidden;text-overflow:ellipsis}.name-label.long-name[_ngcontent-%COMP%]{font-size:14px}.question-container[_ngcontent-%COMP%]{margin-top:30px;text-align:center;font-size:22px;background-color:#333;padding:15px;border-radius:10px;color:#ff6f61;box-shadow:0 4px 10px #00000080;max-width:700px}.question-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;white-space:normal}.question-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-weight:700}']})};function bq(n,e){if(n&1&&(De(0,"h2",9),Be(1),Ee()),n&2){let t=ar();Pe(),os(" ",t.selectedAsker," must ask ",t.selectedResponder,": ")}}function Tq(n,e){if(n&1&&(De(0,"p",10),Be(1),Ee()),n&2){let t=ar();Pe(),fu(t.selectedQuestion)}}function Aq(n,e){n&1&&(De(0,"p",9),Be(1,"Waiting for the spin to complete..."),Ee())}function Sq(n,e){if(n&1&&(De(0,"p",11),Be(1),Ee()),n&2){let t=ar();Pe(),os(" Remaining questions for ",t.selectedResponder,": ",t.remainingQuestions," ")}}function Mq(n,e){if(n&1&&(De(0,"p",11),Be(1),Ee()),n&2){let t=ar();Pe(),ur(" All questions have been asked for ",t.selectedResponder,"! ")}}var lp=class n{constructor(e){this.firestore=e}selectedAsker="";selectedResponder="";selectedQuestion="";remainingQuestions=0;newQuestion="";questionHistory={};questions=[];ngOnInit(){this.updateRemainingQuestions(),this.firestore.collection("questionHistory").valueChanges().subscribe(e=>{console.log("history",e),e&&(this.questionHistory=e,this.firestore.collection("questions").doc("currentQuestions").valueChanges().subscribe(t=>{t&&t.questions&&(this.questions=t.questions,this.firestore.collection("spins").doc("currentSpin").valueChanges().subscribe(r=>{r&&(this.selectedAsker=r.asker,this.selectedResponder=r.responder,this.selectedQuestion=r.question,this.updateRemainingQuestions())}))}))})}addQuestion(){this.newQuestion.trim()&&(this.questions.push(this.newQuestion),this.firestore.collection("questions").doc("currentQuestions").set({questions:Ge.firestore.FieldValue.arrayUnion(this.newQuestion)},{merge:!0}).then(()=>{console.log("Question added to Firestore")}).catch(t=>{console.error("Error adding question: ",t)}),this.newQuestion="")}updateRemainingQuestions(){if(console.log("this.selectedResponder",this.selectedResponder),console.log("this.questions.length",this.questions.length),this.selectedResponder&&typeof this.selectedResponder=="string"&&this.selectedResponder.trim()!==""&&this.questions.length>0){let e=this.selectedResponder.trim().toLowerCase();console.log("sanitizedResponder",e);let t=[];Array.isArray(this.questionHistory)&&this.questionHistory.forEach(i=>{i[e]&&(t=i[e])}),console.log("askedQuestions",t);let r=this.questions.filter(i=>!t.includes(i));console.log("remaining",r),this.remainingQuestions=r.length}else this.remainingQuestions=0}static \u0275fac=function(t){return new(t||n)(Ie(Nc))};static \u0275cmp=jr({type:n,selectors:[["app-view-question"]],decls:13,vars:7,consts:[[1,"question-container"],[1,"question-card"],[2,"margin-bottom","2px"],[1,"question-input-section"],["id","questionInput","placeholder","Add a question",2,"margin-left","2px",3,"ngModelChange","ngModel"],[3,"click"],["class","question-header",4,"ngIf"],["class","question-text",4,"ngIf"],["class","remaining-questions",4,"ngIf"],[1,"question-header"],[1,"question-text"],[1,"remaining-questions"]],template:function(t,r){t&1&&(De(0,"div",0)(1,"div",1)(2,"div",2),Be(3),Ee(),De(4,"div",3)(5,"input",4),as("ngModelChange",function(o){return pu(r.newQuestion,o)||(r.newQuestion=o),o}),Ee(),De(6,"button",5),Gt("click",function(){return r.addQuestion()}),Be(7,"Add Question"),Ee()(),Vi(8,bq,2,2,"h2",6)(9,Tq,2,1,"p",7)(10,Aq,2,0,"p",6)(11,Sq,2,2,"p",8)(12,Mq,2,1,"p",8),Ee()()),t&2&&(Pe(3),ur(" Total questions: ",r.questions.length," "),Pe(2),ss("ngModel",r.newQuestion),Pe(3),Vt("ngIf",r.selectedQuestion),Pe(),Vt("ngIf",r.selectedQuestion),Pe(),Vt("ngIf",!r.selectedQuestion),Pe(),Vt("ngIf",r.remainingQuestions>0),Pe(),Vt("ngIf",r.remainingQuestions===0&&r.selectedResponder))},dependencies:[th,ga,ap,Lc],styles:[".question-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100vh;background-color:#1d1d1d;position:relative}.pointer-info[_ngcontent-%COMP%]{background-color:#292929;color:#fff;min-width:30vw;padding:10px 20px;border-radius:8px;margin-bottom:20px;font-size:18px;text-align:center;border:2px solid #ff6f61}.question-card[_ngcontent-%COMP%]{background-color:#292929;border:4px solid #ff6f61;border-radius:10px;padding:40px;box-shadow:0 4px 20px #00000080;color:#ff6f61;max-width:800px;width:80%;text-align:center;position:relative}.question-text[_ngcontent-%COMP%]{font-size:24px;line-height:1.5}.placeholder[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#fff}.input-section[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#f2f2f2;padding:30px;border-radius:10px;box-shadow:0 4px 8px #00000080;color:#333}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center;font-size:16px}input[_ngcontent-%COMP%]{font-size:14px;padding:8px;border:1px solid #ccc;border-radius:5px;width:200px;background-color:#fff;color:#333;box-shadow:inset 0 1px 3px #0000001a}button[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;cursor:pointer;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#ff4736}"]})};var xq=[{path:"",redirectTo:"/spinner",pathMatch:"full"},{path:"spinner",component:cp},{path:"question",component:lp}],dp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=at({type:n});static \u0275inj=st({imports:[pv.forRoot(xq,{useHash:!0}),pv]})};var hp=class n{title="spinArrowApp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Li(0,"router-outlet")},dependencies:[uv]})};var Rq={apiKey:"AIzaSyB9ReI8QdMrvsi0gIXlT2CkfFaKWR8ukOE",authDomain:"spinbottleapp.firebaseapp.com",projectId:"spinbottleapp",storageBucket:"spinbottleapp.appspot.com",messagingSenderId:"285539728216",appId:"1:285539728216:web:a069b60b7bb7960410c32d"},fp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=at({type:n,bootstrap:[hp]});static \u0275inj=st({providers:[WT()],imports:[zT,iN,dp,eS.initializeApp(Rq),LR]})};HT().bootstrapModule(fp,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
