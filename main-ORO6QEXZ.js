import{A as at,a as j,b as le,c as $I,d as Fp,e as N,f as qI,g as Zc,h as HI,i as zI,j as GI,k as Vp,l as WI,m as xa,n as Lp,o as Jc,p as KI,q as QI,r as jp,s as Oe,t as mi,u as An,v as Xc,w as Ra,x as YI,y as ZI,z as Tr}from"./chunk-LIK74K6L.js";function JI(n,e){return Object.is(n,e)}var tt=null,el=!1,tl=1,Yn=Symbol("SIGNAL");function _e(n){let e=tt;return tt=n,e}function XI(){return tt}var Pa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $p(n){if(el)throw new Error("");if(tt===null)return;tt.consumerOnSignalRead(n);let e=tt.nextProducerIndex++;if(ol(tt),e<tt.producerNode.length&&tt.producerNode[e]!==n&&Na(tt)){let t=tt.producerNode[e];il(t,tt.producerIndexOfThis[e])}tt.producerNode[e]!==n&&(tt.producerNode[e]=n,tt.producerIndexOfThis[e]=Na(tt)?rD(n,tt,e):0),tt.producerLastReadVersion[e]=n.version}function UN(){tl++}function eD(n){if(!(Na(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===tl)){if(!n.producerMustRecompute(n)&&!Hp(n)){n.dirty=!1,n.lastCleanEpoch=tl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=tl}}function tD(n){if(n.liveConsumerNode===void 0)return;let e=el;el=!0;try{for(let t of n.liveConsumerNode)t.dirty||BN(t)}finally{el=e}}function nD(){return tt?.consumerAllowSignalWrites!==!1}function BN(n){n.dirty=!0,tD(n),n.consumerMarkedDirty?.(n)}function rl(n){return n&&(n.nextProducerIndex=0),_e(n)}function qp(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Na(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)il(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Hp(n){ol(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(eD(t),r!==t.version))return!0}return!1}function zp(n){if(ol(n),Na(n))for(let e=0;e<n.producerNode.length;e++)il(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function rD(n,e,t){if(iD(n),n.liveConsumerNode.length===0&&oD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=rD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function il(n,e){if(iD(n),n.liveConsumerNode.length===1&&oD(n))for(let r=0;r<n.producerNode.length;r++)il(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ol(i),i.producerIndexOfThis[r]=e}}function Na(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ol(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function iD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function oD(n){return n.producerNode!==void 0}function sD(n){let e=Object.create($N);e.computation=n;let t=()=>{if(eD(e),$p(e),e.value===nl)throw e.error;return e.value};return t[Yn]=e,t}var Up=Symbol("UNSET"),Bp=Symbol("COMPUTING"),nl=Symbol("ERRORED"),$N=le(j({},Pa),{value:Up,dirty:!0,error:null,equal:JI,producerMustRecompute(n){return n.value===Up||n.value===Bp},producerRecomputeValue(n){if(n.value===Bp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Bp;let t=rl(n),r;try{r=n.computation()}catch(i){r=nl,n.error=i}finally{qp(n,t)}if(e!==Up&&e!==nl&&r!==nl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function qN(){throw new Error}var aD=qN;function uD(){aD()}function cD(n){aD=n}var HN=null;function lD(n){let e=Object.create(hD);e.value=n;let t=()=>($p(e),e.value);return t[Yn]=e,t}function Gp(n,e){nD()||uD(),n.equal(n.value,e)||(n.value=e,zN(n))}function dD(n,e){nD()||uD(),Gp(n,e(n.value))}var hD=le(j({},Pa),{equal:JI,value:void 0});function zN(n){n.version++,UN(),tD(n),HN?.()}function te(n){return typeof n=="function"}function Io(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var sl=Io(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function yi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof sl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{fD(o)}catch(s){e=e??[],s instanceof sl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new sl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)fD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&yi(t,e)}remove(e){let{_finalizers:t}=this;t&&yi(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var Wp=$e.EMPTY;function al(n){return n instanceof $e||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function fD(n){te(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Do={setTimeout(n,e,...t){let{delegate:r}=Do;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Do;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ul(n){Do.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function Oa(){}var pD=Kp("C",void 0,void 0);function gD(n){return Kp("E",void 0,n)}function mD(n){return Kp("N",n,void 0)}function Kp(n,e,t){return{kind:n,value:e,error:t}}var vi=null;function Co(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!vi;if(e&&(vi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=vi;if(vi=null,t)throw r}}else n()}function yD(n){dn.useDeprecatedSynchronousErrorHandling&&vi&&(vi.errorThrown=!0,vi.error=n)}var _i=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,al(e)&&e.add(this)):this.destination=KN}static create(e,t,r){return new Zn(e,t,r)}next(e){this.isStopped?Yp(mD(e),this):this._next(e)}error(e){this.isStopped?Yp(gD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Yp(pD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GN=Function.prototype.bind;function Qp(n,e){return GN.call(n,e)}var Zp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){cl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){cl(r)}else cl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){cl(t)}}},Zn=class extends _i{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qp(e.next,o),error:e.error&&Qp(e.error,o),complete:e.complete&&Qp(e.complete,o)}):i=e}this.destination=new Zp(i)}};function cl(n){dn.useDeprecatedSynchronousErrorHandling?yD(n):ul(n)}function WN(n){throw n}function Yp(n,e){let{onStoppedNotification:t}=dn;t&&Do.setTimeout(()=>t(n,e))}var KN={closed:!0,next:Oa,error:WN,complete:Oa};var bo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tt(n){return n}function Jp(...n){return Xp(n)}function Xp(n){return n.length===0?Tt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=YN(t)?t:new Zn(t,r,i);return Co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=vD(r),new r((i,o)=>{let s=new Zn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[bo](){return this}pipe(...t){return Xp(t)(this)}toPromise(t){return t=vD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function vD(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function QN(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function YN(n){return n&&n instanceof _i||QN(n)&&al(n)}function eg(n){return te(n?.lift)}function se(n){return e=>{if(eg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new tg(n,e,t,r,i)}var tg=class extends _i{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function To(){return se((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ao=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,eg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return To()(this)}};var _D=Io(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ll(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new _D}next(t){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wp:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,yi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new ll(e,t),n})(),ll=class extends ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Wp}};var ht=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ka={now(){return(ka.delegate||Date).now()},delegate:void 0};var dl=class extends ke{constructor(e=1/0,t=1/0,r=ka){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var hl=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var Fa={setInterval(n,e,...t){let{delegate:r}=Fa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Fa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var So=class extends hl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Fa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Fa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,yi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Mo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Mo.now=ka.now;var xo=class extends Mo{constructor(e,t=Mo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Va=new xo(So);var fl=class extends So{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var pl=class extends xo{};var ng=new pl(fl);var At=new de(n=>n.complete());function wD(n){return n&&te(n.schedule)}function rg(n){return n[n.length-1]}function gl(n){return te(rg(n))?n.pop():void 0}function Sn(n){return wD(rg(n))?n.pop():void 0}function ED(n,e){return typeof rg(n)=="number"?n.pop():e}var ml=n=>n&&typeof n.length=="number"&&typeof n!="function";function yl(n){return te(n?.then)}function vl(n){return te(n[bo])}function _l(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function wl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ZN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var El=ZN();function Il(n){return te(n?.[El])}function Dl(n){return HI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Zc(t.read());if(i)return yield Zc(void 0);yield yield Zc(r)}}finally{t.releaseLock()}})}function Cl(n){return te(n?.getReader)}function Me(n){if(n instanceof de)return n;if(n!=null){if(vl(n))return JN(n);if(ml(n))return XN(n);if(yl(n))return eP(n);if(_l(n))return ID(n);if(Il(n))return tP(n);if(Cl(n))return nP(n)}throw wl(n)}function JN(n){return new de(e=>{let t=n[bo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XN(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function eP(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ul)})}function tP(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ID(n){return new de(e=>{rP(n,e).catch(t=>e.error(t))})}function nP(n){return ID(Dl(n))}function rP(n,e){var t,r,i,o;return qI(this,void 0,void 0,function*(){try{for(t=zI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Yt(n,e=0){return se((t,r)=>{t.subscribe(ae(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function hn(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function DD(n,e){return Me(n).pipe(hn(e),Yt(e))}function CD(n,e){return Me(n).pipe(hn(e),Yt(e))}function bD(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function TD(n,e){return new de(t=>{let r;return Pt(t,e,()=>{r=n[El](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function bl(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function AD(n,e){return bl(Dl(n),e)}function SD(n,e){if(n!=null){if(vl(n))return DD(n,e);if(ml(n))return bD(n,e);if(yl(n))return CD(n,e);if(_l(n))return bl(n,e);if(Il(n))return TD(n,e);if(Cl(n))return AD(n,e)}throw wl(n)}function ge(n,e){return e?SD(n,e):Me(n)}function Z(...n){let e=Sn(n);return ge(n,e)}function Ro(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function ig(n){return!!n&&(n instanceof de||te(n.lift)&&te(n.subscribe))}var Jn=Io(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:iP}=Array;function oP(n,e){return iP(e)?n(...e):n(e)}function Tl(n){return X(e=>oP(n,e))}var{isArray:sP}=Array,{getPrototypeOf:aP,prototype:uP,keys:cP}=Object;function Al(n){if(n.length===1){let e=n[0];if(sP(e))return{args:e,keys:null};if(lP(e)){let t=cP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function lP(n){return n&&typeof n=="object"&&aP(n)===uP}function Sl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function La(...n){let e=Sn(n),t=gl(n),{args:r,keys:i}=Al(n);if(r.length===0)return ge([],e);let o=new de(dP(r,e,i?s=>Sl(i,s):Tt));return t?o.pipe(Tl(t)):o}function dP(n,e,t=Tt){return r=>{MD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)MD(e,()=>{let l=ge(n[u],e),h=!1;l.subscribe(ae(r,f=>{o[u]=f,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function MD(n,e,t){n?Pt(t,n,e):e()}function xD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,f=!1,m=()=>{f&&!u.length&&!l&&e.complete()},y=S=>l<r?D(S):u.push(S),D=S=>{o&&e.next(S),l++;let M=!1;Me(t(S,h++)).subscribe(ae(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let V=u.shift();s?Pt(e,s,()=>D(V)):D(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(ae(e,y,()=>{f=!0,m()})),()=>{a?.()}}function Qe(n,e,t=1/0){return te(e)?Qe((r,i)=>X((o,s)=>e(r,o,i,s))(Me(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>xD(r,i,n,t)))}function Ar(n=1/0){return Qe(Tt,n)}function RD(){return Ar(1)}function No(...n){return RD()(ge(n,Sn(n)))}function Ml(n){return new de(e=>{Me(n()).subscribe(e)})}function og(...n){let e=gl(n),{args:t,keys:r}=Al(n),i=new de(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let f=!1;Me(t[h]).subscribe(ae(o,m=>{f||(f=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Sl(r,a):a),o.complete())}))}});return e?i.pipe(Tl(e)):i}function sg(...n){let e=Sn(n),t=ED(n,1/0),r=n;return r.length?r.length===1?Me(r[0]):Ar(t)(ge(r,e)):At}function ut(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Sr(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ae(t,void 0,void 0,s=>{o=Me(n(s,Sr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ND(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ae(s,h=>{let f=l++;u=a?n(u,h,f):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Mr(n,e){return te(e)?Qe(n,e,1):Qe(n,1)}function xr(n){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xn(n){return n<=0?()=>At:se((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ag(n){return X(()=>n)}function ug(n,e=Tt){return n=n??hP,se((t,r)=>{let i,o=!0;t.subscribe(ae(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function hP(n,e){return n===e}function xl(n=fP){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function fP(){return new Jn}function Po(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ut(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):Tt,Xn(1),t?xr(e):xl(()=>new Jn))}function Oo(n){return n<=0?()=>At:se((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):Tt,Oo(1),t?xr(e):xl(()=>new Jn))}function ja(){return se((n,e)=>{let t,r=!1;n.subscribe(ae(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function wi(n,e){return se(ND(n,e,arguments.length>=2,!0))}function PD(n={}){let{connector:e=()=>new ke,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=f=!1},D=()=>{let S=s;y(),S?.unsubscribe()};return se((S,M)=>{l++,!f&&!h&&m();let V=u=u??e();M.add(()=>{l--,l===0&&!f&&!h&&(a=lg(D,i))}),V.subscribe(M),!s&&l>0&&(s=new Zn({next:H=>V.next(H),error:H=>{f=!0,m(),a=lg(y,t,H),V.error(H)},complete:()=>{h=!0,m(),a=lg(y,r),V.complete()}}),Me(S).subscribe(s))})(o)}}function lg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Zn({next:()=>{r.unsubscribe(),n()}});return Me(e(...t)).subscribe(r)}function Rl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,PD({connector:()=>new dl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ei(...n){let e=Sn(n);return se((t,r)=>{(e?No(n,t,e):No(n,t)).subscribe(r)})}function Fe(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;Me(n(u,h)).subscribe(i=ae(r,f=>r.next(e?e(u,f,h,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Nl(n,e){return te(e)?Fe(()=>n,e):Fe(()=>n)}function dg(n){return se((e,t)=>{Me(n).subscribe(ae(t,()=>t.complete(),Oa)),!t.closed&&e.subscribe(t)})}function He(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Tt}var pP="https://g.co/ng/security#xss",K=class extends Error{constructor(e,t){super(wd(e,t)),this.code=e}};function wd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Za(n){return{toString:n}.toString()}var Pl="__parameters__";function gP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function EC(n,e,t){return Za(()=>{let r=gP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let f=u.hasOwnProperty(Pl)?u[Pl]:Object.defineProperty(u,Pl,{value:[]})[Pl];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ir=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function mP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Mt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function OD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var yP=be({__forward_ref__:be});function Ja(n){return n.__forward_ref__=Ja,n.toString=function(){return Mt(this())},n}function St(n){return IC(n)?n():n}function IC(n){return typeof n=="function"&&n.hasOwnProperty(yP)&&n.__forward_ref__===Ja}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ed(n){return kD(n,CC)||kD(n,bC)}function DC(n){return Ed(n)!==null}function kD(n,e){return n.hasOwnProperty(e)?n[e]:null}function vP(n){let e=n&&(n[CC]||n[bC]);return e||null}function FD(n){return n&&(n.hasOwnProperty(VD)||n.hasOwnProperty(_P))?n[VD]:null}var CC=be({\u0275prov:be}),VD=be({\u0275inj:be}),bC=be({ngInjectableDef:be}),_P=be({ngInjectorDef:be}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function TC(n){return n&&!!n.\u0275providers}var wP=be({\u0275cmp:be}),EP=be({\u0275dir:be}),IP=be({\u0275pipe:be}),DP=be({\u0275mod:be}),Hl=be({\u0275fac:be}),$a=be({__NG_ELEMENT_ID__:be}),LD=be({__NG_ENV_ID__:be});function zl(n){return typeof n=="string"?n:n==null?"":String(n)}function CP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():zl(n)}function bP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new K(-200,n)}function _m(n,e){throw new K(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Ag;function AC(){return Ag}function Zt(n){let e=Ag;return Ag=n,e}function SC(n,e,t){let r=Ed(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;_m(n,"Injector")}var TP={},Ha=TP,Sg="__NG_DI_FLAG__",Gl="ngTempTokenPath",AP="ngTokenPath",SP=/\n/gm,MP="\u0275",jD="__source",jo;function xP(){return jo}function Rr(n){let e=jo;return jo=n,e}function RP(n,e=ue.Default){if(jo===void 0)throw new K(-203,!1);return jo===null?SC(n,void 0,e):jo.get(n,e&ue.Optional?null:void 0,e)}function L(n,e=ue.Default){return(AC()||RP)(St(n),e)}function k(n,e=ue.Default){return L(n,Id(e))}function Id(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Mg(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=NP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function MC(n,e){return n[Sg]=e,n.prototype[Sg]=e,n}function NP(n){return n[Sg]}function PP(n,e,t,r){let i=n[Gl];throw e[jD]&&i.unshift(e[jD]),n.message=OP(`
`+n.message,i,t,r),n[AP]=i,n[Gl]=null,n}function OP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==MP?n.slice(2):n;let i=Mt(e);if(Array.isArray(e))i=e.map(Mt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Mt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(SP,`
  `)}`}var Ri=MC(EC("Optional"),8);var Dd=MC(EC("SkipSelf"),4);function Bo(n,e){let t=n.hasOwnProperty(Hl);return t?n[Hl]:null}function wm(n,e){n.forEach(t=>Array.isArray(t)?wm(t,e):e(t))}function xC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function kP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function FP(n,e,t){let r=Xa(n,e);return r>=0?n[r|1]=t:(r=~r,kP(n,r,e,t)),r}function hg(n,e){let t=Xa(n,e);if(t>=0)return n[t|1]}function Xa(n,e){return VP(n,e,1)}function VP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var $o={},Bt=[],Di=new q(""),RC=new q("",-1),NC=new q(""),Kl=class{get(e,t=Ha){if(t===Ha){let r=new Error(`NullInjectorError: No provider for ${Mt(e)}!`);throw r.name="NullInjectorError",r}return t}},PC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(PC||{}),Rn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rn||{}),Pr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Pr||{});function LP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function xg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];UP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jP(n){return n===3||n===4||n===6}function UP(n){return n.charCodeAt(0)===64}function za(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?UD(n,t,i,null,e[++r]):UD(n,t,i,null,null))}}return n}function UD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var OC="ng-template";function BP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Em(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Em(n){return n.type===4&&n.value!==OC}function $P(n,e,t){let r=n.type===4&&!t?OC:n.value;return e===r}function qP(n,e,t){let r=4,i=n.attrs,o=i!==null?GP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!fn(r)&&!fn(u))return!1;if(s&&fn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!$P(n,u,t)||u===""&&e.length===1){if(fn(r))return!1;s=!0}}else if(r&8){if(i===null||!BP(n,i,u,t)){if(fn(r))return!1;s=!0}}else{let l=e[++a],h=HP(u,i,Em(n),t);if(h===-1){if(fn(r))return!1;s=!0;continue}if(l!==""){let f;if(h>o?f="":f=i[h+1].toLowerCase(),r&2&&l!==f){if(fn(r))return!1;s=!0}}}}return fn(r)||s}function fn(n){return(n&1)===0}function HP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return WP(e,n)}function zP(n,e,t=!1){for(let r=0;r<e.length;r++)if(qP(n,e[r],t))return!0;return!1}function GP(n){for(let e=0;e<n.length;e++){let t=n[e];if(jP(t))return e}return n.length}function WP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function BD(n,e){return n?":not("+e.trim()+")":e}function KP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fn(s)&&(e+=BD(o,i),i=""),r=s,o=o||!fn(r);t++}return i!==""&&(e+=BD(o,i)),e}function QP(n){return n.map(KP).join(",")}function YP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!fn(i))break;i=o}r++}return{attrs:e,classes:t}}function Vr(n){return Za(()=>{let e=jC(n),t=le(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===PC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rn.Emulated,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null,id:""});UC(t);let r=n.dependencies;return t.directiveDefs=qD(r,!1),t.pipeDefs=qD(r,!0),t.id=XP(t),t})}function ZP(n){return Or(n)||kC(n)}function JP(n){return n!==null}function it(n){return Za(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $D(n,e){if(n==null)return $o;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Pr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Pr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function en(n){return Za(()=>{let e=jC(n);return UC(e),e})}function Or(n){return n[wP]||null}function kC(n){return n[EP]||null}function FC(n){return n[IP]||null}function VC(n){let e=Or(n)||kC(n)||FC(n);return e!==null?e.standalone:!1}function LC(n,e){let t=n[DP]||null;if(!t&&e===!0)throw new Error(`Type ${Mt(n)} does not have '\u0275mod' property.`);return t}function jC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||$o,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$D(n.inputs,e),outputs:$D(n.outputs),debugInfo:null}}function UC(n){n.features?.forEach(e=>e(n))}function qD(n,e){if(!n)return null;let t=e?FC:ZP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(JP)}function XP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function eu(n){return{\u0275providers:n}}function eO(...n){return{\u0275providers:BC(!0,n),\u0275fromNgModule:!0}}function BC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wm(e,s=>{let a=s;Rg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&$C(i,o),t}function $C(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Im(i,o=>{e(o,r)})}}function Rg(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=FD(n),s=!o&&Or(n);if(!o&&!s){let u=n.ngModule;if(o=FD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Rg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{wm(o.imports,h=>{Rg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&$C(l,e)}if(!a){let l=Bo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Bt},i),e({provide:NC,useValue:i,multi:!0},i),e({provide:Di,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Im(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Im(n,e){for(let t of n)TC(t)&&(t=t.\u0275providers),Array.isArray(t)?Im(t,e):e(t)}var tO=be({provide:String,useValue:be});function qC(n){return n!==null&&typeof n=="object"&&tO in n}function nO(n){return!!(n&&n.useExisting)}function rO(n){return!!(n&&n.useFactory)}function qo(n){return typeof n=="function"}function iO(n){return!!n.useClass}var Cd=new q(""),Ul={},oO={},fg;function Dm(){return fg===void 0&&(fg=new Kl),fg}var qt=class{},Ga=class extends qt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pg(e,s=>this.processProvider(s)),this.records.set(RC,ko(void 0,this)),i.has("environment")&&this.records.set(qt,ko(void 0,this));let o=this.records.get(Cd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(NC,Bt,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Rr(this),r=Zt(void 0),i;try{return e()}finally{Rr(t),Zt(r)}}get(e,t=Ha,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(LD))return e[LD](this);r=Id(r);let i,o=Rr(this),s=Zt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=lO(e)&&Ed(e);l&&this.injectableDefInScope(l)?u=ko(Ng(e),Ul):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?Dm():this.parent;return t=r&ue.Optional&&t===Ha?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Gl]=a[Gl]||[]).unshift(Mt(e)),o)throw a;return PP(a,e,"R3InjectorError",this.source)}else throw a}finally{Zt(s),Rr(o)}}resolveInjectorInitializers(){let e=_e(null),t=Rr(this),r=Zt(void 0),i;try{let o=this.get(Di,Bt,ue.Self);for(let s of o)s()}finally{Rr(t),Zt(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Mt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=St(e);let t=qo(e)?e:St(e&&e.provide),r=aO(e);if(!qo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ko(void 0,Ul,!0),i.factory=()=>Mg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===Ul&&(t.value=oO,t.value=t.factory()),typeof t.value=="object"&&t.value&&cO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ng(n){let e=Ed(n),t=e!==null?e.factory:Bo(n);if(t!==null)return t;if(n instanceof q)throw new K(204,!1);if(n instanceof Function)return sO(n);throw new K(204,!1)}function sO(n){if(n.length>0)throw new K(204,!1);let t=vP(n);return t!==null?()=>t.factory(n):()=>new n}function aO(n){if(qC(n))return ko(void 0,n.useValue);{let e=HC(n);return ko(e,Ul)}}function HC(n,e,t){let r;if(qo(n)){let i=St(n);return Bo(i)||Ng(i)}else if(qC(n))r=()=>St(n.useValue);else if(rO(n))r=()=>n.useFactory(...Mg(n.deps||[]));else if(nO(n))r=()=>L(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(uO(n))r=()=>new i(...Mg(n.deps));else return Bo(i)||Ng(i)}return r}function ko(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uO(n){return!!n.deps}function cO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lO(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Pg(n,e){for(let t of n)Array.isArray(t)?Pg(t,e):t&&TC(t)?Pg(t.\u0275providers,e):e(t)}function vn(n,e){n instanceof Ga&&n.assertNotDestroyed();let t,r=Rr(n),i=Zt(void 0);try{return e()}finally{Rr(r),Zt(i)}}function zC(){return AC()!==void 0||xP()!=null}function dO(n){if(!zC())throw new K(-203,!1)}function hO(n){let e=ir.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function fO(n){return typeof n=="function"}var Ht=0,he=1,ne=2,_t=3,pn=4,_n=5,Nn=6,Ql=7,mn=8,Ho=9,er=10,Ve=11,Wa=12,HD=13,Xo=14,Xt=15,zo=16,Fo=17,Go=18,bd=19,GC=20,Nr=21,pg=22,Jt=23,Ot=25,WC=1,Ka=6,tr=7,Yl=8,Zl=9,$t=10,Jl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Jl||{});function gn(n){return Array.isArray(n)&&typeof n[WC]=="object"}function On(n){return Array.isArray(n)&&n[WC]===!0}function KC(n){return(n.flags&4)!==0}function tu(n){return n.componentOffset>-1}function Cm(n){return(n.flags&1)===1}function kr(n){return!!n.template}function Xl(n){return(n[ne]&512)!==0}var Og=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function QC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function es(){return YC}function YC(n){return n.type.prototype.ngOnChanges&&(n.setInput=gO),pO}es.ngInherit=!0;function pO(){let n=JC(this),e=n?.current;if(e){let t=n.previous;if(t===$o)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function gO(n,e,t,r,i){let o=this.declaredInputs[r],s=JC(n)||mO(n,{previous:$o,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Og(l&&l.currentValue,t,u===$o),QC(n,e,i,t)}var ZC="__ngSimpleChanges__";function JC(n){return n[ZC]||null}function mO(n,e){return n[ZC]=e}var zD=null;var Mn=function(n,e,t){zD?.(n,e,t)},yO="svg",vO="math";function yn(n){for(;Array.isArray(n);)n=n[Ht];return n}function XC(n,e){return yn(e[n])}function tn(n,e){return yn(e[n.index])}function e0(n,e){return n.data[e]}function Lr(n,e){let t=e[n];return gn(t)?t:t[Ht]}function bm(n){return(n[ne]&128)===128}function _O(n){return On(n[_t])}function ed(n,e){return e==null?null:n[e]}function t0(n){n[Fo]=0}function n0(n){n[ne]&1024||(n[ne]|=1024,bm(n)&&Ad(n))}function wO(n,e){for(;n>0;)e=e[Xo],n--;return e}function Td(n){return!!(n[ne]&9216||n[Jt]?.dirty)}function kg(n){n[er].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Td(n)&&Ad(n)}function Ad(n){n[er].changeDetectionScheduler?.notify(0);let e=Ci(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!bm(e)));)e=Ci(e)}function r0(n,e){if((n[ne]&256)===256)throw new K(911,!1);n[Nr]===null&&(n[Nr]=[]),n[Nr].push(e)}function EO(n,e){if(n[Nr]===null)return;let t=n[Nr].indexOf(e);t!==-1&&n[Nr].splice(t,1)}function Ci(n){let e=n[_t];return On(e)?e[_t]:e}var ce={lFrame:g0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var i0=!1;function IO(){return ce.lFrame.elementDepthCount}function DO(){ce.lFrame.elementDepthCount++}function CO(){ce.lFrame.elementDepthCount--}function o0(){return ce.bindingsEnabled}function nu(){return ce.skipHydrationRootTNode!==null}function bO(n){return ce.skipHydrationRootTNode===n}function TO(n){ce.skipHydrationRootTNode=n}function AO(){ce.skipHydrationRootTNode=null}function xe(){return ce.lFrame.lView}function nn(){return ce.lFrame.tView}function s0(n){return ce.lFrame.contextLView=n,n[mn]}function a0(n){return ce.lFrame.contextLView=null,n}function Ft(){let n=u0();for(;n!==null&&n.type===64;)n=n.parent;return n}function u0(){return ce.lFrame.currentTNode}function SO(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ru(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function c0(){return ce.lFrame.isParent}function MO(){ce.lFrame.isParent=!1}function l0(){return i0}function GD(n){i0=n}function xO(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function RO(){return ce.lFrame.bindingIndex}function NO(n){return ce.lFrame.bindingIndex=n}function Tm(){return ce.lFrame.bindingIndex++}function d0(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function PO(){return ce.lFrame.inI18n}function OO(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fg(e)}function kO(){return ce.lFrame.currentDirectiveIndex}function Fg(n){ce.lFrame.currentDirectiveIndex=n}function FO(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function h0(n){ce.lFrame.currentQueryIndex=n}function VO(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[_n]:null}function f0(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=VO(o),i===null||(o=o[Xo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=p0();return r.currentTNode=e,r.lView=n,!0}function Am(n){let e=p0(),t=n[he];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function p0(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?g0(n):e}function g0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function m0(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var y0=m0;function Sm(){let n=m0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function LO(n){return(ce.lFrame.contextLView=wO(n,ce.lFrame.contextLView))[mn]}function Ni(){return ce.lFrame.selectedIndex}function bi(n){ce.lFrame.selectedIndex=n}function v0(){let n=ce.lFrame;return e0(n.tView,n.selectedIndex)}function _0(){return ce.lFrame.currentNamespace}var w0=!0;function Mm(){return w0}function jr(n){w0=n}function jO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=YC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function xm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Bl(n,e,t){E0(n,e,3,t)}function $l(n,e,t,r){(n[ne]&3)===t&&E0(n,e,t,r)}function gg(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function E0(n,e,t,r){let i=r!==void 0?n[Fo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Fo]+=65536),(a<o||o==-1)&&(UO(n,t,e,u),n[Fo]=(n[Fo]&4294901760)+u+2),u++}function WD(n,e){Mn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),Mn(5,n,e)}}function UO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Fo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,WD(a,o)):WD(a,o)}var Uo=-1,Ti=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function BO(n){return n instanceof Ti}function $O(n){return(n.flags&8)!==0}function qO(n){return(n.flags&16)!==0}var mg={},Vg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Id(r);let i=this.injector.get(e,mg,r);return i!==mg||t===mg?i:this.parentInjector.get(e,t,r)}};function I0(n){return n!==Uo}function td(n){return n&32767}function HO(n){return n>>16}function nd(n,e){let t=HO(n),r=e;for(;t>0;)r=r[Xo],t--;return r}var Lg=!0;function KD(n){let e=Lg;return Lg=n,e}var zO=256,D0=zO-1,C0=5,GO=0,xn={};function WO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty($a)&&(r=t[$a]),r==null&&(r=t[$a]=GO++);let i=r&D0,o=1<<i;e.data[n+(i>>C0)]|=o}function rd(n,e){let t=b0(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,yg(r.data,n),yg(e,null),yg(r.blueprint,null));let i=Rm(n,e),o=n.injectorIndex;if(I0(i)){let s=td(i),a=nd(i,e),u=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function yg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function b0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=x0(i),r===null)return Uo;if(t++,i=i[Xo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Uo}function jg(n,e,t){WO(n,e,t)}function T0(n,e,t){if(t&ue.Optional||n!==void 0)return n;_m(e,"NodeInjector")}function A0(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[Ho],o=Zt(void 0);try{return i?i.get(e,r,t&ue.Optional):SC(e,r,t&ue.Optional)}finally{Zt(o)}}return T0(r,e,t)}function S0(n,e,t,r=ue.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ue.Self)){let s=JO(n,e,t,r,xn);if(s!==xn)return s}let o=M0(n,e,t,r,xn);if(o!==xn)return o}return A0(e,t,r,i)}function M0(n,e,t,r,i){let o=YO(t);if(typeof o=="function"){if(!f0(e,n,r))return r&ue.Host?T0(i,t,r):A0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))_m(t);else return s}finally{y0()}}else if(typeof o=="number"){let s=null,a=b0(n,e),u=Uo,l=r&ue.Host?e[Xt][_n]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?Rm(n,e):e[a+8],u===Uo||!YD(r,!1)?a=-1:(s=e[he],a=td(u),e=nd(u,e)));a!==-1;){let h=e[he];if(QD(o,a,h.data)){let f=KO(a,e,t,s,r,l);if(f!==xn)return f}u=e[a+8],u!==Uo&&YD(r,e[he].data[a+8]===l)&&QD(o,a,e)?(s=h,a=td(u),e=nd(u,e)):a=-1}}return i}function KO(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],u=r==null?tu(a)&&Lg:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=QO(a,s,t,u,l);return h!==null?Wo(e,s,h,a):xn}function QO(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,f=r?a:a+h,m=i?a+h:l;for(let y=f;y<m;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&kr(y)&&y.type===t)return u}return null}function Wo(n,e,t,r){let i=n[t],o=e.data;if(BO(i)){let s=i;s.resolving&&bP(CP(o[t]));let a=KD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Zt(s.injectImpl):null,h=f0(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&jO(t,o[t],e)}finally{l!==null&&Zt(l),KD(a),s.resolving=!1,y0()}}return i}function YO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty($a)?n[$a]:void 0;return typeof e=="number"?e>=0?e&D0:ZO:e}function QD(n,e,t){let r=1<<n;return!!(t[e+(n>>C0)]&r)}function YD(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var Ii=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return S0(this._tNode,this._lView,e,Id(r),t)}};function ZO(){return new Ii(Ft(),xe())}function iu(n){return Za(()=>{let e=n.prototype.constructor,t=e[Hl]||Ug(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Hl]||Ug(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ug(n){return IC(n)?()=>{let e=Ug(St(n));return e&&e()}:Bo(n)}function JO(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=M0(o,s,t,r|ue.Self,xn);if(a!==xn)return a;let u=o.parent;if(!u){let l=s[GC];if(l){let h=l.get(t,xn,r);if(h!==xn)return h}u=x0(s),s=s[Xo]}o=u}return i}function x0(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[_n]:null}function ZD(n,e=null,t=null,r){let i=R0(n,e,t,r);return i.resolveInjectorInitializers(),i}function R0(n,e=null,t=null,r,i=new Set){let o=[t||Bt,eO(n)];return r=r||(typeof n=="object"?void 0:Mt(n)),new Ga(o,e||Dm(),r||null,i)}var kt=class n{static{this.THROW_IF_NOT_FOUND=Ha}static{this.NULL=new Kl}static create(e,t){if(Array.isArray(e))return ZD({name:""},t,e,"");{let r=e.name??"";return ZD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>L(RC)})}static{this.__NG_ELEMENT_ID__=-1}};var XO=new q("");XO.__NG_ELEMENT_ID__=n=>{let e=Ft();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new K(204,!1)};var ek="ngOriginalError";function vg(n){return n[ek]}var N0=!0,Nm=(()=>{class n{static{this.__NG_ELEMENT_ID__=tk}static{this.__NG_ENV_ID__=t=>t}}return n})(),Bg=class extends Nm{constructor(e){super(),this._lView=e}onDestroy(e){return r0(this._lView,e),()=>EO(this._lView,e)}};function tk(){return new Bg(xe())}var Pi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ht(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var $g=class extends ke{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,zC()&&(this.destroyRef=k(Nm,{optional:!0})??void 0,this.pendingTasks=k(Pi,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=$g;function id(...n){}function P0(n){let e,t;function r(){n=id;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function JD(n){return queueMicrotask(()=>n()),()=>{n=id}}var Pm="isAngularZone",od=Pm+"_ID",nk=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=N0}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ok(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Pm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,rk,id,id);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rk={};function Om(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ik(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){P0(()=>{n.callbackScheduled=!1,qg(n),n.isCheckStableRunning=!0,Om(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),qg(n)}function ok(n){let e=()=>{ik(n)},t=nk++;n._inner=n._inner.fork({name:"angular",properties:{[Pm]:!0,[od]:t,[od+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(sk(u))return r.invokeTask(o,s,a,u);try{return XD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),eC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return XD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ak(u)&&e(),eC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,qg(n),Om(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function qg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function XD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function eC(n){n._nesting--,Om(n)}var sd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function sk(n){return O0(n,"__ignore_ng_zone__")}function ak(n){return O0(n,"__scheduler_tick__")}function O0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function uk(n="zone.js",e){return n==="noop"?new sd:n==="zone.js"?new pe(e):n}var nr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vg(e);for(;t&&vg(t);)t=vg(t);return t||null}},ck=new q("",{providedIn:"root",factory:()=>{let n=k(pe),e=k(nr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function lk(){return Sd(Ft(),xe())}function Sd(n,e){return new Ur(tn(n,e))}var Ur=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=lk}}return n})();var dk="ngSkipHydration",hk="ngskiphydration";function k0(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===hk)return!0}return!1}function F0(n){return n.hasAttribute(dk)}function ad(n){return(n.flags&128)===128}function fk(n){if(ad(n))return!0;let e=n.parent;for(;e;){if(ad(n)||k0(e))return!0;e=e.parent}return!1}var V0=new Map,pk=0;function gk(){return pk++}function mk(n){V0.set(n[bd],n)}function Hg(n){V0.delete(n[bd])}var tC="__ngContext__";function Ai(n,e){gn(e)?(n[tC]=e[bd],mk(e)):n[tC]=e}function L0(n){return U0(n[Wa])}function j0(n){return U0(n[pn])}function U0(n){for(;n!==null&&!On(n);)n=n[pn];return n}var zg;function B0(n){zg=n}function Md(){if(zg!==void 0)return zg;if(typeof document<"u")return document;throw new K(210,!1)}var ou=new q("",{providedIn:"root",factory:()=>yk}),yk="ng",km=new q(""),ft=new q("",{providedIn:"platform",factory:()=>"unknown"});var Fm=new q("",{providedIn:"root",factory:()=>Md().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function vk(){let n=new ts;return k(ft)==="browser"&&(n.store=_k(Md(),k(ou))),n}var ts=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=W({token:n,providedIn:"root",factory:vk})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function _k(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var $0="h",q0="b",Gg=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Gg||{}),wk="e",Ek="t",Vm="c",H0="x",ud="r",Ik="i",Dk="n",z0="d";var Ck="__nghData__",G0=Ck,_g="ngh",bk="nghm",W0=()=>null;function Tk(n,e,t=!1){let r=n.getAttribute(_g);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,u={};if(r!==""){let h=e.get(ts,null,{optional:!0});h!==null&&(u=h.get(G0,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,xd(l,0,n.nextSibling)),a?n.setAttribute(_g,a):n.removeAttribute(_g),l}function Ak(){W0=Tk}function Lm(n,e,t=!1){return W0(n,e,t)}function Sk(n){let e=n._lView;return e[he].type===2?null:(Xl(e)&&(e=e[Ot]),e)}function Mk(n){return n.textContent?.replace(/\s/gm,"")}function xk(n){let e=Md(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Mk(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function xd(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Wg(n,e){return n.segmentHeads?.[e]??null}function Rk(n,e){let t=n.data,r=t[wk]?.[e]??null;return r===null&&t[Vm]?.[e]&&(r=jm(n,e)),r}function K0(n,e){return n.data[Vm]?.[e]??null}function jm(n,e){let t=K0(n,e)??[],r=0;for(let i of t)r+=i[ud]*(i[H0]??1);return r}function Nk(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[z0];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function su(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[z0];n.disconnectedNodes=t?new Set(t):null}return!!Nk(n)?.has(e)}var Ol=new q(""),Q0=!1,Y0=new q("",{providedIn:"root",factory:()=>Q0});var Kg=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pP})`}};function Um(n){return n instanceof Kg?n.changingThisBreaksApplicationSecurity:n}var Pk=/^>|^->|<!--|-->|--!>|<!-$/g,Ok=/(<|>)/g,kk="\u200B$1\u200B";function Fk(n){return n.replace(Pk,e=>e.replace(Ok,kk))}function Vk(n){return n.ownerDocument.body}function Z0(n){return n instanceof Function?n():n}function Ua(n){return(n??k(kt)).get(ft)==="browser"}var Pn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Pn||{}),Lk;function Bm(n,e){return Lk(n,e)}function Vo(n,e,t,r,i){if(r!=null){let o,s=!1;On(r)?o=r:gn(r)&&(s=!0,r=r[Ht]);let a=yn(r);n===0&&t!==null?i==null?rb(e,t,a):cd(e,t,a,i||null,!0):n===1&&t!==null?cd(e,t,a,i||null,!0):n===2?zm(e,a,s):n===3&&e.destroyNode(a),o!=null&&Xk(e,n,o,t,i)}}function J0(n,e){return n.createText(e)}function jk(n,e,t){n.setValue(e,t)}function X0(n,e){return n.createComment(Fk(e))}function $m(n,e,t){return n.createElement(e,t)}function Uk(n,e){eb(n,e),e[Ht]=null,e[_n]=null}function Bk(n,e,t,r,i,o){r[Ht]=i,r[_n]=e,Rd(n,r,t,1,i,o)}function eb(n,e){e[er].changeDetectionScheduler?.notify(9),Rd(n,e,e[Ve],2,null,null)}function $k(n){let e=n[Wa];if(!e)return wg(n[he],n);for(;e;){let t=null;if(gn(e))t=e[Wa];else{let r=e[$t];r&&(t=r)}if(!t){for(;e&&!e[pn]&&e!==n;)gn(e)&&wg(e[he],e),e=e[_t];e===null&&(e=n),gn(e)&&wg(e[he],e),t=e&&e[pn]}e=t}}function qk(n,e,t,r){let i=$t+r,o=t.length;r>0&&(t[i-1][pn]=e),r<o-$t?(e[pn]=t[i],xC(t,$t+r,e)):(t.push(e),e[pn]=null),e[_t]=t;let s=e[zo];s!==null&&t!==s&&tb(s,e);let a=e[Go];a!==null&&a.insertView(n),kg(e),e[ne]|=128}function tb(n,e){let t=n[Zl],r=e[_t];if(gn(r))n[ne]|=Jl.HasTransplantedViews;else{let i=r[_t][Xt];e[Xt]!==i&&(n[ne]|=Jl.HasTransplantedViews)}t===null?n[Zl]=[e]:t.push(e)}function qm(n,e){let t=n[Zl],r=t.indexOf(e);t.splice(r,1)}function Qg(n,e){if(n.length<=$t)return;let t=$t+e,r=n[t];if(r){let i=r[zo];i!==null&&i!==n&&qm(i,r),e>0&&(n[t-1][pn]=r[pn]);let o=Wl(n,$t+e);Uk(r[he],r);let s=o[Go];s!==null&&s.detachView(o[he]),r[_t]=null,r[pn]=null,r[ne]&=-129}return r}function nb(n,e){if(!(e[ne]&256)){let t=e[Ve];t.destroyNode&&Rd(n,e,t,3,null,null),$k(e)}}function wg(n,e){if(e[ne]&256)return;let t=_e(null);try{e[ne]&=-129,e[ne]|=256,e[Jt]&&zp(e[Jt]),zk(n,e),Hk(n,e),e[he].type===1&&e[Ve].destroy();let r=e[zo];if(r!==null&&On(e[_t])){r!==e[_t]&&qm(r,e);let i=e[Go];i!==null&&i.detachView(n)}Hg(e)}finally{_e(t)}}function Hk(n,e){let t=n.cleanup,r=e[Ql];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ql]=null);let i=e[Nr];if(i!==null){e[Nr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function zk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ti)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Mn(4,a,u);try{u.call(a)}finally{Mn(5,a,u)}}else{Mn(4,i,o);try{o.call(i)}finally{Mn(5,i,o)}}}}}function Gk(n,e,t){return Wk(n,e.parent,t)}function Wk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ht];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Rn.None||o===Rn.Emulated)return null}return tn(r,t)}}function cd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function rb(n,e,t){n.appendChild(e,t)}function nC(n,e,t,r,i){r!==null?cd(n,e,t,r,i):rb(n,e,t)}function ib(n,e){return n.parentNode(e)}function Kk(n,e){return n.nextSibling(e)}function Qk(n,e,t){return Zk(n,e,t)}function Yk(n,e,t){return n.type&40?tn(n,t):null}var Zk=Yk,rC;function Hm(n,e,t,r){let i=Gk(n,r,e),o=e[Ve],s=r.parent||e[_n],a=Qk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)nC(o,i,t[u],a,!1);else nC(o,i,t,a,!1);rC!==void 0&&rC(o,r,e,t,i)}function Ba(n,e){if(e!==null){let t=e.type;if(t&3)return tn(e,n);if(t&4)return Yg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ba(n,r);{let i=n[e.index];return On(i)?Yg(-1,i):yn(i)}}else{if(t&128)return Ba(n,e.next);if(t&32)return Bm(e,n)()||yn(n[e.index]);{let r=ob(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ci(n[Xt]);return Ba(i,r)}else return Ba(n,e.next)}}}return null}function ob(n,e){if(e!==null){let r=n[Xt][_n],i=e.projection;return r.projection[i]}return null}function Yg(n,e){let t=$t+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return Ba(r,i)}return e[tr]}function zm(n,e,t){n.removeChild(null,e,t)}function sb(n){n.textContent=""}function Gm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Ai(yn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Gm(n,e,t.child,r,i,o,!1),Vo(e,n,i,a,o);else if(u&32){let l=Bm(t,r),h;for(;h=l();)Vo(e,n,i,h,o);Vo(e,n,i,a,o)}else u&16?Jk(n,e,r,t,i,o):Vo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Rd(n,e,t,r,i,o){Gm(t,r,n.firstChild,e,i,o,!1)}function Jk(n,e,t,r,i,o){let s=t[Xt],u=s[_n].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Vo(e,n,i,h,o)}else{let l=u,h=s[_t];ad(r)&&(l.flags|=128),Gm(n,e,l,h,i,o,!0)}}function Xk(n,e,t,r,i){let o=t[tr],s=yn(t);o!==s&&Vo(e,n,r,o,i);for(let a=$t;a<t.length;a++){let u=t[a];Rd(u[he],u,n,e,r,o)}}function e1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Pn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Pn.Important),n.setStyle(t,r,i,o))}}function t1(n,e,t){n.setAttribute(e,"style",t)}function ab(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ub(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&xg(n,e,r),i!==null&&ab(n,e,i),o!==null&&t1(n,e,o)}var or={};function ct(n=1){cb(nn(),xe(),Ni()+n,!1)}function cb(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Bl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&$l(e,o,0,t)}bi(t)}function Ee(n,e=ue.Default){let t=xe();if(t===null)return L(n,e);let r=Ft();return S0(r,t,St(n),e)}function lb(){let n="invalid";throw new Error(n)}function db(n,e,t,r,i,o){let s=_e(null);try{let a=null;i&Pr.SignalBased&&(a=e[r][Yn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Pr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):QC(e,a,r,o)}finally{_e(s)}}function n1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)bi(~i);else{let o=i,s=t[++r],a=t[++r];OO(s,o);let u=e[o];a(2,u)}}}finally{bi(-1)}}function Nd(n,e,t,r,i,o,s,a,u,l,h){let f=e.blueprint.slice();return f[Ht]=i,f[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(f[ne]|=2048),t0(f),f[_t]=f[Xo]=n,f[mn]=t,f[er]=s||n&&n[er],f[Ve]=a||n&&n[Ve],f[Ho]=u||n&&n[Ho]||null,f[_n]=o,f[bd]=gk(),f[Nn]=h,f[GC]=l,f[Xt]=e.type==2?n[Xt]:f,f}function Pd(n,e,t,r,i){let o=n.data[e];if(o===null)o=r1(n,e,t,r,i),PO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=SO();o.injectorIndex=s===null?-1:s.injectorIndex}return ru(o,!0),o}function r1(n,e,t,r,i){let o=u0(),s=c0(),a=s?o:o&&o.parent,u=n.data[e]=c1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function hb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function fb(n,e,t,r,i){let o=Ni(),s=r&2;try{bi(-1),s&&e.length>Ot&&cb(n,e,Ot,!1),Mn(s?2:0,i),t(r,i)}finally{bi(o),Mn(s?3:1,i)}}function pb(n,e,t){if(KC(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function gb(n,e,t){o0()&&(g1(n,e,t,tn(t,e)),(t.flags&64)===64&&Ib(n,e,t))}function mb(n,e,t=tn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function yb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Wm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Wm(n,e,t,r,i,o,s,a,u,l,h){let f=Ot+r,m=f+i,y=i1(f,m),D=typeof l=="function"?l():l;return y[he]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function i1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:or);return t}function o1(n,e,t,r){let o=r.get(Y0,Q0)||t===Rn.ShadowDom,s=n.selectRootElement(e,o);return s1(s),s}function s1(n){vb(n)}var vb=()=>null;function a1(n){F0(n)?sb(n):xk(n)}function u1(){vb=a1}function c1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return nu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function iC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Pr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?oC(r,t,l,a,u):oC(r,t,l,a)}return r}function oC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function l1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let f=o[h],m=t?t.get(f):null,y=m?m.inputs:null,D=m?m.outputs:null;u=iC(0,f.inputs,h,u,y),l=iC(1,f.outputs,h,l,D);let S=u!==null&&s!==null&&!Em(e)?C1(u,h,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function d1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function _b(n,e,t,r,i,o,s,a){let u=tn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Km(n,t,h,r,i),tu(e)&&h1(t,e.index)):e.type&3?(r=d1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function h1(n,e){let t=Lr(e,n);t[ne]&16||(t[ne]|=64)}function wb(n,e,t,r){if(o0()){let i=r===null?null:{"":-1},o=y1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Eb(n,e,t,s,i,a),i&&v1(t,r,i)}t.mergedAttrs=za(t.mergedAttrs,t.attrs)}function Eb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)jg(rd(t,e),n,r[l].type);w1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=hb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=za(t.mergedAttrs,h.hostAttrs),E1(n,t,e,u,h),_1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let f=h.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}l1(n,t,o)}function f1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;p1(s)!=a&&s.push(a),s.push(t,r,o)}}function p1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function g1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;tu(t)&&I1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||rd(t,e),Ai(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Wo(e,n,a,t);if(Ai(l,e),s!==null&&D1(e,a-i,l,u,t,s),kr(u)){let h=Lr(t.index,e);h[mn]=Wo(e,n,a,t)}}}function Ib(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=kO();try{bi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Fg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&m1(u,l)}}finally{bi(-1),Fg(s)}}function m1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function y1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(zP(e,s.selectors,!1))if(r||(r=[]),kr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Zg(n,e,u)}else r.unshift(s),Zg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Zg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function v1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}}function _1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;kr(e)&&(t[""]=n)}}function w1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function E1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Bo(i.type,!0)),s=new Ti(o,kr(i),Ee);n.blueprint[r]=s,t[r]=s,f1(n,e,r,hb(n,t,i.hostVars,or),i)}function I1(n,e,t){let r=tn(e,n),i=yb(t),o=n[er].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Od(n,Nd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function D1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],f=s[a++];db(r,t,u,l,h,f)}}function C1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Db(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Cb(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];h0(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Od(n,e){return n[Wa]?n[HD][pn]=e:n[Wa]=e,n[HD]=e,e}function Jg(n,e,t){h0(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function b1(n){return n[Ql]??=[]}function T1(n){return n.cleanup??=[]}function bb(n,e){let t=n[Ho],r=t?t.get(nr,null):null;r&&r.handleError(e)}function Km(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];db(h,l,r,a,u,i)}}function Tb(n,e,t){let r=XC(e,n);jk(n[Ve],r,t)}function A1(n,e){let t=Lr(e,n),r=t[he];S1(r,t);let i=t[Ht];i!==null&&t[Nn]===null&&(t[Nn]=Lm(i,t[Ho])),Qm(r,t,t[mn])}function S1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Qm(n,e,t){Am(e);try{let r=n.viewQuery;r!==null&&Jg(1,r,t);let i=n.template;i!==null&&fb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Go]?.finishViewCreation(n),n.staticContentQueries&&Cb(n,e),n.staticViewQueries&&Jg(2,n.viewQuery,t);let o=n.components;o!==null&&M1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Sm()}}function M1(n,e){for(let t=0;t<e.length;t++)A1(n,e[t])}function x1(n,e,t,r){let i=_e(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=Nd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[zo]=l;let h=n[Go];return h!==null&&(u[Go]=h.createEmbeddedView(o)),Qm(o,u,t),u}finally{_e(i)}}function sC(n,e){return!e||e.firstChild===null||ad(n)}function R1(n,e,t,r=!0){let i=e[he];if(qk(i,e,n,t),r){let s=Yg(t,n),a=e[Ve],u=ib(a,n[tr]);u!==null&&Bk(i,n[_n],a,e,u,s)}let o=e[Nn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ld(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(yn(o)),On(o)&&N1(o,r);let s=t.type;if(s&8)ld(n,e,t.child,r);else if(s&32){let a=Bm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ob(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ci(e[Xt]);ld(u[he],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function N1(n,e){for(let t=$t;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&ld(r[he],r,i,e)}n[tr]!==n[Ht]&&e.push(n[tr])}var Ab=[];function P1(n){return n[Jt]??O1(n)}function O1(n){let e=Ab.pop()??Object.create(F1);return e.lView=n,e}function k1(n){n.lView[Jt]!==n&&(n.lView=null,Ab.push(n))}var F1=le(j({},Pa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ad(n.lView)},consumerOnSignalRead(){this.lView[Jt]=this}});function V1(n){let e=n[Jt]??Object.create(L1);return e.lView=n,e}var L1=le(j({},Pa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ci(n.lView);for(;e&&!Sb(e[he]);)e=Ci(e);e&&n0(e)},consumerOnSignalRead(){this.lView[Jt]=this}});function Sb(n){return n.type!==2}var j1=100;function Mb(n,e=!0,t=0){let r=n[er],i=r.rendererFactory,o=!1;o||i.begin?.();try{U1(n,t)}catch(s){throw e&&bb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function U1(n,e){let t=l0();try{GD(!0),Xg(n,e);let r=0;for(;Td(n);){if(r===j1)throw new K(103,!1);r++,Xg(n,1)}}finally{GD(t)}}function B1(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[er].inlineEffectRunner?.flush(),Am(e);let a=!0,u=null,l=null;o||(Sb(n)?(l=P1(e),u=rl(l)):XI()===null?(a=!1,l=V1(e),u=rl(l)):e[Jt]&&(zp(e[Jt]),e[Jt]=null));try{t0(e),NO(n.bindingStartIndex),t!==null&&fb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Bl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&$l(e,y,0,null),gg(e,0)}if(s||$1(e),xb(e,0),n.contentQueries!==null&&Cb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Bl(e,y)}else{let y=n.contentHooks;y!==null&&$l(e,y,1),gg(e,1)}n1(n,e);let f=n.components;f!==null&&Nb(e,f,0);let m=n.viewQuery;if(m!==null&&Jg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Bl(e,y)}else{let y=n.viewHooks;y!==null&&$l(e,y,2),gg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[pg]){for(let y of e[pg])y();e[pg]=null}o||(e[ne]&=-73)}catch(h){throw o||Ad(e),h}finally{l!==null&&(qp(l,u),a&&k1(l)),Sm()}}function xb(n,e){for(let t=L0(n);t!==null;t=j0(t))for(let r=$t;r<t.length;r++){let i=t[r];Rb(i,e)}}function $1(n){for(let e=L0(n);e!==null;e=j0(e)){if(!(e[ne]&Jl.HasTransplantedViews))continue;let t=e[Zl];for(let r=0;r<t.length;r++){let i=t[r];n0(i)}}}function q1(n,e,t){let r=Lr(e,n);Rb(r,t)}function Rb(n,e){bm(n)&&Xg(n,e)}function Xg(n,e){let r=n[he],i=n[ne],o=n[Jt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Hp(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)B1(r,n,r.template,n[mn]);else if(i&8192){xb(n,1);let a=r.components;a!==null&&Nb(n,a,1)}}function Nb(n,e,t){for(let r=0;r<e.length;r++)q1(n,e[r],t)}function Ym(n,e){let t=l0()?64:1088;for(n[er].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Ci(n);if(Xl(n)&&!r)return n;n=r}return null}var Si=class{get rootNodes(){let e=this._lView,t=e[he];return ld(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mn]}set context(e){this._lView[mn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if(On(e)){let t=e[Yl],r=t?t.indexOf(this):-1;r>-1&&(Qg(e,r),Wl(t,r))}this._attachedToViewContainer=!1}nb(this._lView[he],this._lView)}onDestroy(e){r0(this._lView,e)}markForCheck(){Ym(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){kg(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,Mb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Xl(this._lView),t=this._lView[zo];t!==null&&!e&&qm(t,this._lView),eb(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=Xl(this._lView),r=this._lView[zo];r!==null&&!t&&tb(r,this._lView),kg(this._lView)}},kd=(()=>{class n{static{this.__NG_ELEMENT_ID__=G1}}return n})(),H1=kd,z1=class extends H1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=x1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Si(i)}};function G1(){return W1(Ft(),xe())}function W1(n,e){return n.type&4?new z1(e,n,Sd(n,e)):null}var K1=new RegExp(`^(\\d+)*(${q0}|${$0})*(.*)`);function Q1(n){let e=n.match(K1),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let f=parseInt(h,10)||1;a.push(l,f)}return[s,...a]}function Y1(n){return!n.prev&&n.parent?.type===8}function Eg(n){return n.index-Ot}function Z1(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Fd(n,e,t,r){let i=Eg(r),o=Z1(n,i);if(o===void 0){let s=n.data[Dk];if(s?.[i])o=X1(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(Y1(r)){let l=Eg(r.parent);o=Wg(n,l)}else{let l=tn(u,t);if(a)o=l.firstChild;else{let h=Eg(u),f=Wg(n,h);if(u.type===2&&f){let y=jm(n,h)+1;o=Vd(y,f)}else o=l.nextSibling}}}}return o}function Vd(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function J1(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Gg.FirstChild:t=t.firstChild;break;case Gg.NextSibling:t=t.nextSibling;break}}return t}function X1(n,e){let[t,...r]=Q1(n),i;if(t===$0)i=e[Xt][Ht];else if(t===q0)i=Vk(e[Xt][Ht]);else{let o=Number(t);i=yn(e[o+Ot])}return J1(i,r)}var eF=!1;function tF(n){eF=n}function nF(n){let e=n[Nn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Ve];for(let o of r.values())rF(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function rF(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ot);i&&zm(n,i,!1)}}function Pb(n){let e=n[Ka]??[],r=n[_t][Ve];for(let i of e)iF(i,r);n[Ka]=Bt}function iF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[ud];for(;t<i;){let o=r.nextSibling;zm(e,r,!1),r=o,t++}}}function Ob(n){Pb(n);let e=n[Ht];gn(e)&&dd(e);for(let t=$t;t<n.length;t++)dd(n[t])}function dd(n){nF(n);let e=n[he];for(let t=Ot;t<e.bindingStartIndex;t++)if(On(n[t])){let r=n[t];Ob(r)}else gn(n[t])&&dd(n[t])}function oF(n){let e=n._views;for(let t of e){let r=Sk(t);r!==null&&r[Ht]!==null&&(gn(r)?dd(r):Ob(r))}}function sF(n,e){let t=[];for(let r of e)for(let i=0;i<(r[H0]??1);i++){let o={data:r,firstChild:null};r[ud]>0&&(o.firstChild=n,n=Vd(r[ud],n)),t.push(o)}return[n,t]}var kb=()=>null;function aF(n,e){let t=n[Ka];return!e||t===null||t.length===0?null:t[0].data[Ik]===e?t.shift():(Pb(n),null)}function uF(){kb=aF}function aC(n,e){return kb(n,e)}var Ko=class{},Fb=new q("",{providedIn:"root",factory:()=>!1});var Vb=new q(""),Lb=new q(""),em=class{},hd=class{};function cF(n){let e=Error(`No component factory found for ${Mt(n)}.`);return e[lF]=n,e}var lF="ngComponent";var tm=class{resolveComponentFactory(e){throw cF(e)}},Qo=class{static{this.NULL=new tm}},Yo=class{},Oi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>dF()}}return n})();function dF(){let n=xe(),e=Ft(),t=Lr(e.index,n);return(gn(t)?t:n)[Ve]}var hF=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function nm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=OD(i,a);else if(o==2){let u=a,l=e[++s];r=OD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var fd=class extends Qo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Or(e);return new Zo(t,this.ngModule)}};function uC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Pr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Pr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function fF(n){let e=n.toLowerCase();return e==="svg"?yO:e==="math"?vO:null}var Zo=class extends hd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=uC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return uC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=QP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Vg(e,s):e,u=a.get(Yo,null);if(u===null)throw new K(407,!1);let l=a.get(hF,null),h=a.get(Ko,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?o1(m,r,this.componentDef.encapsulation,a):$m(m,y,fF(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let M=null;D!==null&&(M=Lm(D,a,!0));let V=Wm(0,null,null,1,0,null,null,null,null,null,null),H=Nd(null,V,null,S,null,null,f,m,a,null,M);Am(H);let F,G,ee=null;try{let Y=this.componentDef,E,v=null;Y.findHostDirectiveDefs?(E=[],v=new Map,Y.findHostDirectiveDefs(Y,E,v),E.push(Y)):E=[Y];let w=pF(H,D);ee=gF(w,D,Y,E,H,f,m),G=e0(V,Ot),D&&vF(m,Y,D,r),t!==void 0&&_F(G,this.ngContentSelectors,t),F=yF(ee,Y,E,v,H,[wF]),Qm(V,H,null)}catch(Y){throw ee!==null&&Hg(ee),Hg(H),Y}finally{Sm()}return new rm(this.componentType,F,Sd(G,H),H,G)}finally{_e(o)}}},rm=class extends em{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Si(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Km(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Lr(this._tNode.index,o);Ym(s,1)}}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function pF(n,e){let t=n[he],r=Ot;return n[r]=e,Pd(t,r,2,"#host",null)}function gF(n,e,t,r,i,o,s){let a=i[he];mF(r,n,e,s);let u=null;e!==null&&(u=Lm(e,i[Ho]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let f=Nd(i,yb(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Zg(a,n,r.length-1),Od(i,f),i[n.index]=f}function mF(n,e,t,r){for(let i of n)e.mergedAttrs=za(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(nm(e,e.mergedAttrs,!0),t!==null&&ub(r,t,e))}function yF(n,e,t,r,i,o){let s=Ft(),a=i[he],u=tn(s,i);Eb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let f=s.directiveStart+h,m=Wo(i,a,f,s);Ai(m,i)}Ib(a,i,s),u&&Ai(u,i);let l=Wo(i,a,s.directiveStart+s.componentOffset,s);if(n[mn]=i[mn]=l,o!==null)for(let h of o)h(l,e);return pb(a,s,i),l}function vF(n,e,t,r){if(r)xg(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:o}=YP(e.selectors[0]);i&&xg(n,t,i),o&&o.length>0&&ab(n,t,o.join(" "))}}function _F(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function wF(){let n=Ft();xm(xe()[he],n)}var ns=(()=>{class n{static{this.__NG_ELEMENT_ID__=EF}}return n})();function EF(){let n=Ft();return DF(n,xe())}var IF=ns,jb=class extends IF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Sd(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rm(this._hostTNode,this._hostLView);if(I0(e)){let t=nd(e,this._hostLView),r=td(e),i=t[he].data[r+8];return new Ii(i,t)}else return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=cC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$t}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=aC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,sC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!fO(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new Zo(Or(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(qt,null);S&&(o=S)}let h=Or(u.componentType??{}),f=aC(this._lContainer,h?.id??null),m=f?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,sC(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(_O(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[_t],l=new jb(u,u[_n],u[_t]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return R1(s,i,o,r),e.attachToViewContainerRef(),xC(Ig(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=cC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Qg(this._lContainer,t);r&&(Wl(Ig(this._lContainer),t),nb(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=Qg(this._lContainer,t);return r&&Wl(Ig(this._lContainer),t)!=null?new Si(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function cC(n){return n[Yl]}function Ig(n){return n[Yl]||(n[Yl]=[])}function DF(n,e){let t,r=e[n.index];return On(r)?t=r:(t=Db(r,e,null,n),e[n.index]=t,Od(e,t)),Ub(t,e,n,r),new jb(t,n,e)}function CF(n,e){let t=n[Ve],r=t.createComment(""),i=tn(e,n),o=ib(t,i);return cd(t,o,r,Kk(t,i),!1),r}var Ub=Bb,Zm=()=>!1;function bF(n,e,t){return Zm(n,e,t)}function Bb(n,e,t,r){if(n[tr])return;let i;t.type&8?i=yn(r):i=CF(e,t),n[tr]=i}function TF(n,e,t){if(n[tr]&&n[Ka])return!0;let r=t[Nn],i=e.index-Ot;if(!r||fk(e)||su(r,i))return!1;let s=Wg(r,i),a=r.data[Vm]?.[i],[u,l]=sF(s,a);return n[tr]=u,n[Ka]=l,!0}function AF(n,e,t,r){Zm(n,t,e)||Bb(n,e,t,r)}function SF(){Ub=AF,Zm=TF}var lC=new Set;function Br(n){lC.has(n)||(lC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function MF(n){return typeof n=="function"&&n[Yn]!==void 0}function Ld(n,e){Br("NgSignals");let t=lD(n),r=t[Yn];return e?.equal&&(r.equal=e.equal),t.set=i=>Gp(r,i),t.update=i=>dD(r,i),t.asReadonly=xF.bind(t),t}function xF(){let n=this[Yn];if(n.readonlyFn===void 0){let e=()=>this();e[Yn]=n,n.readonlyFn=e}return n.readonlyFn}function $b(n){return MF(n)&&typeof n.set=="function"}function RF(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(kF))}return o}return pd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((f,m)=>{a.push(""),s.push(r(f).then(y=>{a[l+m]=y,h.splice(h.indexOf(f),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>FF(o));e.push(u)}),PF(),Promise.all(e).then(()=>{})}var pd=new Map,NF=new Set;function PF(){let n=pd;return pd=new Map,n}function OF(){return pd.size===0}function kF(n){return typeof n=="string"?n:n.text()}function FF(n){NF.delete(n)}function VF(n){return Object.getPrototypeOf(n.prototype).constructor}function rs(n){let e=VF(n.type),t=!0,r=[n];for(;e;){let i;if(kr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=kl(n.inputs),s.inputTransforms=kl(n.inputTransforms),s.declaredInputs=kl(n.declaredInputs),s.outputs=kl(n.outputs);let a=i.hostBindings;a&&$F(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&UF(n,u),l&&BF(n,l),LF(n,i),mP(n.outputs,i.outputs),kr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===rs&&(t=!1)}}e=Object.getPrototypeOf(e)}jF(r)}function LF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function jF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=za(i.hostAttrs,t=za(t,i.hostAttrs))}}function kl(n){return n===$o?{}:n===Bt?[]:n}function UF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function BF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function $F(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Fr=class{},Qa=class{};var gd=class extends Fr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fd(this);let o=LC(e);this._bootstrapComponents=Z0(o.bootstrap),this._r3Injector=R0(e,t,[{provide:Fr,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver},...r],Mt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},md=class extends Qa{constructor(e){super(),this.moduleType=e}create(e){return new gd(this.moduleType,e,[])}};function qF(n,e,t){return new gd(n,e,t,!1)}var im=class extends Fr{constructor(e){super(),this.componentFactoryResolver=new fd(this),this.instance=null;let t=new Ga([...e.providers,{provide:Fr,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver}],e.parent||Dm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jd(n,e,t=null){return new im({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function qb(n){return Jm(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function HF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Jm(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function zF(n,e,t){return n[e]=t}function Mi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function GF(n,e,t,r){let i=Mi(n,e,t);return Mi(n,e+1,r)||i}function au(n){return(n.flags&32)===32}function WF(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Pd(e,n,4,s||null,a||null);wb(e,t,h,ed(l,u)),xm(e,h);let f=h.tView=Wm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}function KF(n,e,t,r,i,o,s,a,u,l){let h=t+Ot,f=e.firstCreatePass?WF(h,e,n,r,i,o,s,a,u):e.data[h];ru(f,!1);let m=Hb(e,n,f,t);Mm()&&Hm(e,n,m,f),Ai(m,n);let y=Db(m,n,m,f);return n[h]=y,Od(n,y),bF(y,f,n),Cm(f)&&gb(e,n,f),u!=null&&mb(n,f,l),f}function ki(n,e,t,r,i,o,s,a){let u=xe(),l=nn(),h=ed(l.consts,o);return KF(u,l,n,e,t,r,i,h,s,a),ki}var Hb=zb;function zb(n,e,t,r){return jr(!0),e[Ve].createComment("")}function QF(n,e,t,r){let i=e[Nn],o=!i||nu()||au(t)||su(i,r);if(jr(o),o)return zb(n,e,t,r);let s=i.data[Ek]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Fd(i,n,e,t);xd(i,r,a);let u=jm(i,r);return Vd(u,a)}function YF(){Hb=QF}var Lo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Lo||{}),Gb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),om=class n{constructor(){this.ngZone=k(pe),this.scheduler=k(Ko),this.errorHandler=k(nr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Lo.EarlyRead,Lo.Write,Lo.MixedReadWrite,Lo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},sm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Xm(n,e){!e?.injector&&dO(Xm);let t=e?.injector??k(kt);return Ua(t)?(Br("NgAfterNextRender"),JF(n,t,e,!0)):XF}function ZF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function JF(n,e,t,r){let i=e.get(Gb);i.impl??=e.get(om);let o=t?.phase??Lo.MixedReadWrite,s=new sm(i.impl,ZF(n,o),r,e.get(Nm));return i.impl.register(s),s}var XF={destroy(){}};function eV(n,e,t,r){return Mi(n,Tm(),t)?e+zl(t)+r:or}function tV(n,e,t,r,i,o){let s=RO(),a=GF(n,s,t,i);return d0(2),a?e+zl(t)+r+zl(i)+o:or}function Fl(n,e){return n<<17|e<<2}function xi(n){return n>>17&32767}function nV(n){return(n&2)==2}function rV(n,e){return n&131071|e<<17}function am(n){return n|2}function Jo(n){return(n&131068)>>2}function Dg(n,e){return n&-131069|e<<2}function iV(n){return(n&1)===1}function um(n){return n|1}function oV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xi(s),u=Jo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let f=t;h=f[1],(h===null||Xa(f,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=xi(n[a+1]);n[r+1]=Fl(m,a),m!==0&&(n[m+1]=Dg(n[m+1],r)),n[a+1]=rV(n[a+1],r)}else n[r+1]=Fl(a,0),a!==0&&(n[a+1]=Dg(n[a+1],r)),a=r;else n[r+1]=Fl(u,0),a===0?a=r:n[u+1]=Dg(n[u+1],r),u=r;l&&(n[r+1]=am(n[r+1])),dC(n,h,r,!0),dC(n,h,r,!1),sV(e,h,n,r,o),s=Fl(a,u),o?e.classBindings=s:e.styleBindings=s}function sV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Xa(o,e)>=0&&(t[r+1]=um(t[r+1]))}function dC(n,e,t,r){let i=n[t+1],o=e===null,s=r?xi(i):Jo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];aV(u,e)&&(a=!0,n[s+1]=r?um(l):am(l)),s=r?xi(l):Jo(l)}a&&(n[t+1]=r?am(i):um(i))}function aV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Xa(n,e)>=0:!1}function rn(n,e,t){let r=xe(),i=Tm();if(Mi(r,i,e)){let o=nn(),s=v0();_b(o,s,r,n,e,r[Ve],t,!1)}return rn}function hC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Km(n,t,o[s],s,r)}function ey(n,e){return uV(n,e,null,!0),ey}function uV(n,e,t,r){let i=xe(),o=nn(),s=d0(2);if(o.firstUpdatePass&&lV(o,n,s,r),e!==or&&Mi(i,s,e)){let a=o.data[Ni()];gV(o,a,i,i[Ve],n,i[s+1]=mV(e,t),r,s)}}function cV(n,e){return e>=n.expandoStartIndex}function lV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ni()],s=cV(n,t);yV(o,r)&&e===null&&!s&&(e=!1),e=dV(i,o,e,r),oV(i,o,e,t,s,r)}}function dV(n,e,t,r){let i=FO(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Cg(null,n,e,t,r),t=Ya(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Cg(i,n,e,t,r),o===null){let u=hV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Cg(null,n,e,u[1],r),u=Ya(u,e.attrs,r),fV(n,e,r,u))}else o=pV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function hV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Jo(r)!==0)return n[xi(r)]}function fV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[xi(i)]=r}function pV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ya(r,s,t)}return Ya(r,e.attrs,t)}function Cg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ya(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ya(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),FP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function gV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=iV(l)?fC(u,e,t,i,Jo(l),s):void 0;if(!yd(h)){yd(o)||nV(l)&&(o=fC(u,null,t,i,a,s));let f=XC(Ni(),t);e1(r,s,f,i,o)}}function fC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,f=h===null,m=t[i+1];m===or&&(m=f?Bt:void 0);let y=f?hg(m,r):h===r?m:void 0;if(l&&!yd(y)&&(y=hg(u,r)),yd(y)&&(a=y,s))return a;let D=n[i+1];i=s?xi(D):Jo(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=hg(u,r))}return a}function yd(n){return n!==void 0}function mV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mt(Um(n)))),n}function yV(n,e){return(n.flags&(e?8:16))!==0}function vV(n,e,t,r,i,o){let s=e.consts,a=ed(s,i),u=Pd(e,n,2,r,a);return wb(e,t,u,ed(s,o)),u.attrs!==null&&nm(u,u.attrs,!1),u.mergedAttrs!==null&&nm(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Le(n,e,t,r){let i=xe(),o=nn(),s=Ot+n,a=i[Ve],u=o.firstCreatePass?vV(s,o,i,e,t,r):o.data[s],l=Wb(o,i,u,a,e,n);i[s]=l;let h=Cm(u);return ru(u,!0),ub(a,l,u),!au(u)&&Mm()&&Hm(o,i,l,u),IO()===0&&Ai(l,i),DO(),h&&(gb(o,i,u),pb(o,u,i)),r!==null&&mb(i,u),Le}function je(){let n=Ft();c0()?MO():(n=n.parent,ru(n,!1));let e=n;bO(e)&&AO(),CO();let t=nn();return t.firstCreatePass&&(xm(t,n),KC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&$O(e)&&hC(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&qO(e)&&hC(t,e,xe(),e.stylesWithoutHost,!1),je}function Fi(n,e,t,r){return Le(n,e,t,r),je(),Fi}var Wb=(n,e,t,r,i,o)=>(jr(!0),$m(r,i,_0()));function _V(n,e,t,r,i,o){let s=e[Nn],a=!s||nu()||au(t)||su(s,o);if(jr(a),a)return $m(r,i,_0());let u=Fd(s,n,e,t);return K0(s,o)&&xd(s,o,u.nextSibling),s&&(k0(t)||F0(u))&&tu(t)&&(TO(t),sb(u)),u}function wV(){Wb=_V}var EV=(n,e,t,r)=>(jr(!0),X0(e[Ve],""));function IV(n,e,t,r){let i,o=e[Nn],s=!o||nu()||su(o,r)||au(t);if(jr(s),s)return X0(e[Ve],"");let a=Fd(o,n,e,t),u=Rk(o,r);return xd(o,r,a),i=Vd(u,a),i}function DV(){EV=IV}function Kb(){return xe()}var vd="en-US";var CV=vd;function bV(n){typeof n=="string"&&(CV=n.toLowerCase().replace(/_/g,"-"))}var TV=(n,e,t)=>{};function sr(n,e,t,r){let i=xe(),o=nn(),s=Ft();return Qb(o,i,i[Ve],s,n,e,r),sr}function AV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ql],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Qb(n,e,t,r,i,o,s){let a=Cm(r),l=n.firstCreatePass&&T1(n),h=e[mn],f=b1(e),m=!0;if(r.type&3||s){let S=tn(r,e),M=s?s(S):S,V=f.length,H=s?G=>s(yn(G[r.index])):r.index,F=null;if(!s&&a&&(F=AV(n,e,i,r.index)),F!==null){let G=F.__ngLastListenerFn__||F;G.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,m=!1}else{o=gC(r,e,h,o),TV(S,i,o);let G=t.listen(M,i,o);f.push(o,G),l&&l.push(i,H,V,V+1)}}else o=gC(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let S=D.length;if(S)for(let M=0;M<S;M+=2){let V=D[M],H=D[M+1],ee=e[V][H].subscribe(o),Y=f.length;f.push(o,ee),l&&l.push(i,r.index,Y,-(Y+1))}}}function pC(n,e,t,r){let i=_e(null);try{return Mn(6,e,t),t(r)!==!1}catch(o){return bb(n,o),!1}finally{Mn(7,e,t),_e(i)}}function gC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Lr(n.index,e):e;Ym(s,5);let a=pC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=pC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Vi(n=1){return LO(n)}function wt(n,e=""){let t=xe(),r=nn(),i=n+Ot,o=r.firstCreatePass?Pd(r,i,1,e,null):r.data[i],s=Yb(r,t,o,e,n);t[i]=s,Mm()&&Hm(r,t,s,o),ru(o,!1)}var Yb=(n,e,t,r,i)=>(jr(!0),J0(e[Ve],r));function SV(n,e,t,r,i){let o=e[Nn],s=!o||nu()||au(t)||su(o,i);return jr(s),s?J0(e[Ve],r):Fd(o,n,e,t)}function MV(){Yb=SV}function uu(n){return cu("",n,""),uu}function cu(n,e,t){let r=xe(),i=eV(r,n,e,t);return i!==or&&Tb(r,Ni(),i),cu}function lu(n,e,t,r,i){let o=xe(),s=tV(o,n,e,t,r,i);return s!==or&&Tb(o,Ni(),s),lu}function Ud(n,e,t){$b(e)&&(e=e());let r=xe(),i=Tm();if(Mi(r,i,e)){let o=nn(),s=v0();_b(o,s,r,n,e,r[Ve],t,!1)}return Ud}function ty(n,e){let t=$b(n);return t&&n.set(e),t}function Bd(n,e){let t=xe(),r=nn(),i=Ft();return Qb(r,t,t[Ve],i,n,e),Bd}function xV(n,e,t){let r=nn();if(r.firstCreatePass){let i=kr(n);cm(t,r.data,r.blueprint,i,!0),cm(e,r.data,r.blueprint,i,!1)}}function cm(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)cm(n[o],e,t,r,i);else{let o=nn(),s=xe(),a=Ft(),u=qo(n)?n:St(n.provide),l=HC(n),h=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(qo(n)||!n.multi){let y=new Ti(l,i,Ee),D=Tg(u,e,i?h:h+m,f);D===-1?(jg(rd(a,s),o,u),bg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=Tg(u,e,h+m,f),D=Tg(u,e,h,h+m),S=y>=0&&t[y],M=D>=0&&t[D];if(i&&!M||!i&&!S){jg(rd(a,s),o,u);let V=PV(i?NV:RV,t.length,i,r,l);!i&&M&&(t[D].providerFactory=V),bg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=Zb(t[i?D:y],l,!i&&r);bg(o,n,y>-1?y:D,V)}!i&&r&&M&&t[D].componentProviders++}}}function bg(n,e,t,r){let i=qo(e),o=iO(e);if(i||o){let u=(o?St(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Zb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Tg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function RV(n,e,t,r){return lm(this.multi,[])}function NV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Wo(t,t[he],this.providerFactory.index,r);o=a.slice(0,s),lm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],lm(i,o);return o}function lm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function PV(n,e,t,r,i){let o=new Ti(n,t,Ee);return o.multi=[],o.index=e,o.componentProviders=0,Zb(o,i,r&&!t),o}function ny(n,e=[]){return t=>{t.providersResolver=(r,i)=>xV(r,i?i(n):n,e)}}var OV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=BC(!1,t.type),i=r.length>0?jd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(L(qt))})}}return n})();function Jb(n){Br("NgStandalone"),n.getStandaloneInjector=e=>e.get(OV).getOrCreateStandaloneInjector(n)}function Xb(n,e,t,r){return FV(xe(),xO(),n,e,t,r)}function kV(n,e){let t=n[e];return t===or?void 0:t}function FV(n,e,t,r,i,o){let s=e+t;return Mi(n,s,i)?zF(n,s+1,o?r.call(o,i):r(i)):kV(n,s+1)}var Vl=null;function VV(n){Vl!==null&&(n.defaultEncapsulation!==Vl.defaultEncapsulation||n.preserveWhitespaces!==Vl.preserveWhitespaces)||(Vl=n)}var rr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},eT=new rr("18.2.5");var $d=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ry=new q(""),du=new q(""),qd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,iy||(LV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(pe),L(Hd),L(du))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Hd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return iy?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function LV(n){iy=n}var iy;function Li(n){return!!n&&typeof n.then=="function"}function tT(n){return!!n&&typeof n.subscribe=="function"}var zd=new q(""),nT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k(zd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Li(o))t.push(o);else if(tT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),is=new q("");function jV(){cD(()=>{throw new K(600,!1)})}function UV(n){return n.isBoundToModule}var BV=10;function $V(n,e,t){try{let r=t();return Li(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function rT(n,e){return Array.isArray(e)?e.reduce(rT,n):j(j({},n),e)}var wn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(ck),this.afterRenderManager=k(Gb),this.zonelessEnabled=k(Fb),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ke,this.afterTick=new ke,this.componentTypes=[],this.components=[],this.isStable=k(Pi).hasPendingTasks.pipe(X(t=>!t)),this._injector=k(qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof hd;if(!this._injector.get(nT).done){let m=!i&&VC(t),y=!1;throw new K(405,y)}let s;i?s=t:s=this._injector.get(Qo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=UV(s)?void 0:this._injector.get(Fr),u=r||s.selector,l=s.create(kt.NULL,[],u,a),h=l.location.nativeElement,f=l.injector.get(ry,null);return f?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),ql(this.components,l),f?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Yo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<BV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)qV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Td(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ql(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(is,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ql(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ql(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Ll;function Gd(n){Ll??=new WeakMap;let e=Ll.get(n);if(e)return e;let t=n.isStable.pipe(Ut(r=>r)).toPromise().then(()=>{});return Ll.set(n,t),n.onDestroy(()=>Ll?.delete(n)),t}function qV(n,e,t,r){if(!t&&!Td(n))return;Mb(n,e,t&&!r?0:1)}var dm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Wd=(()=>{class n{compileModuleSync(t){return new md(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=LC(t),o=Z0(i.declarations).reduce((s,a)=>{let u=Or(a);return u&&s.push(new Zo(u)),s},[]);return new dm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HV=new q("");function zV(n,e,t){let r=new md(t);return Promise.resolve(r)}function mC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var GV=(()=>{class n{constructor(){this.zone=k(pe),this.changeDetectionScheduler=k(Ko),this.applicationRef=k(wn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function WV({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(le(j({},iT()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:Di,multi:!0,useFactory:()=>{let r=k(GV,{optional:!0});return()=>r.initialize()}},{provide:Di,multi:!0,useFactory:()=>{let r=k(KV);return()=>{r.initialize()}}},e===!0?{provide:Vb,useValue:!0}:[],{provide:Lb,useValue:t??N0}]}function iT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var KV=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=k(pe),this.pendingTasks=k(Pi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var QV=(()=>{class n{constructor(){this.appRef=k(wn),this.taskService=k(Pi),this.ngZone=k(pe),this.zonelessEnabled=k(Fb),this.disableScheduling=k(Vb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(od):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Lb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?JD:P0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(od+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YV(){return typeof $localize<"u"&&$localize.locale||vd}var oy=new q("",{providedIn:"root",factory:()=>k(oy,ue.Optional|ue.SkipSelf)||YV()});var sy=new q("");function jl(n){return!!n.platformInjector}function ZV(n){let e=jl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{jl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(nr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),jl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(sy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else n.moduleRef.onDestroy(()=>{ql(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return $V(r,t,()=>{let o=e.get(nT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(oy,vd);if(bV(s||vd),jl(n)){let a=e.get(wn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return JV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function JV(n,e){let t=n.injector.get(wn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new K(-403,!1);e.push(n)}var oT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>uk(r?.ngZone,le(j({},iT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[WV({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ko,useExisting:QV}],u=qF(t.moduleType,this.injector,a);return ZV({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(t,r=[]){let i=rT({},r);return zV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(sy,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(kt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),qa=null,sT=new q("");function XV(n){if(qa&&!qa.get(sT,!1))throw new K(400,!1);jV(),qa=n;let e=n.get(oT);return nL(n),e}function ay(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=aT();if(!s||s.injector.get(sT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):XV(eL(a,r))}return tL(i)}}function eL(n=[],e){return kt.create({name:e,providers:[{provide:Cd,useValue:"platform"},{provide:sy,useValue:new Set([()=>qa=null])},...n]})}function tL(n){let e=aT();if(!e)throw new K(401,!1);return e}function aT(){return qa?.get(oT)??null}function nL(n){n.get(km,null)?.forEach(t=>t())}function uy(){return!1}var ji=(()=>{class n{static{this.__NG_ELEMENT_ID__=rL}}return n})();function rL(n){return iL(Ft(),xe(),(n&16)===16)}function iL(n,e,t){if(tu(n)&&!t){let r=Lr(n.index,e);return new Si(r,r)}else if(n.type&175){let r=e[Xt];return new Si(r,e)}return null}var hm=class{constructor(){}supports(e){return qb(e)}create(e){return new fm(e)}},oL=(n,e)=>e,fm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<yC(r,i,o)?t:r,a=yC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let f=s.previousIndex;o[f]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!qb(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,HF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new pm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new _d),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _d),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},pm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},gm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},_d=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new gm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function yC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var mm=class{constructor(){}supports(e){return e instanceof Map||Jm(e)}create(){return new ym}},ym=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Jm(e)))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new vm(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},vm=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function vC(){return new cy([new hm])}var cy=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:vC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||vC()),deps:[[n,new Dd,new Ri]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();function _C(){return new ly([new mm])}var ly=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:_C})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||_C()),deps:[[n,new Dd,new Ri]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();var uT=ay(null,"core",[]),cT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(wn))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();var lT=new q("");var wC=!1;function sL(){wC||(wC=!0,Ak(),wV(),MV(),DV(),YF(),SF(),uF(),u1())}function aL(n,e){return Gd(n)}function dT(){return eu([{provide:Ol,useFactory:()=>{let n=!0;return Ua()&&(n=!!k(ts,{optional:!0})?.get(G0,null)),n&&Br("NgHydration"),n}},{provide:Di,useValue:()=>{tF(!1),Ua()&&k(Ol)&&(uL(),sL())},multi:!0},{provide:Y0,useFactory:()=>Ua()&&k(Ol)},{provide:is,useFactory:()=>{if(Ua()&&k(Ol)){let n=k(wn),e=k(kt);return()=>{aL(n,e).then(()=>{oF(n)})}}return()=>{}},multi:!0}])}function uL(){let n=Md(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===bk){e=t;break}if(!e)throw new K(-507,!1)}function Kd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Qd(n,e){Br("NgSignals");let t=sD(n);return e?.equal&&(t[Yn].equal=e.equal),t}function $r(n){let e=_e(null);try{return n()}finally{_e(e)}}function hT(n){let e=Or(n);if(!e)return null;let t=new Zo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var yT=null;function kn(){return yT}function vT(n){yT??=n}var Yd=class{};var Et=new q(""),gy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(dL),providedIn:"platform"})}}return n})(),_T=new q(""),dL=(()=>{class n extends gy{constructor(){super(),this._doc=k(Et),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kn().getBaseHref(this._doc)}onPopState(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function my(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function fT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ar(n){return n&&n[0]!=="?"?"?"+n:n}var Ui=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(yy),providedIn:"root"})}}return n})(),wT=new q(""),yy=(()=>{class n extends Ui{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return my(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ar(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ar(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ar(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(gy),L(wT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ET=(()=>{class n extends Ui{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=my(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ar(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ar(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(gy),L(wT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),os=(()=>{class n{constructor(t){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=pL(fT(pT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ar(r))}normalize(t){return n.stripTrailingSlash(fL(this._basePath,pT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ar(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ar(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ar}static{this.joinWithSlash=my}static{this.stripTrailingSlash=fT}static{this.\u0275fac=function(r){return new(r||n)(L(Ui))}}static{this.\u0275prov=W({token:n,factory:()=>hL(),providedIn:"root"})}}return n})();function hL(){return new os(L(Ui))}function fL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function pT(n){return n.replace(/\/index.html$/,"")}function pL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function vy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var dy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},IT=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new dy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),gT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);gT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ee(ns),Ee(kd),Ee(cy))}}static{this.\u0275dir=en({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function gT(n,e){n.context.$implicit=e.item}var Jd=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new hy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ee(ns),Ee(kd))}}static{this.\u0275dir=en({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),hy=class{constructor(){this.$implicit=null,this.ngIf=null}};function mT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Mt(e)}'.`)}var DT=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Pn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Ee(Ur),Ee(ly),Ee(Oi))}}static{this.\u0275dir=en({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var CT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})(),_y="browser",gL="server";function mL(n){return n===_y}function ur(n){return n===gL}var bT=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>mL(k(ft))?new fy(k(Et),window):new py})}}return n})(),fy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=yL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function yL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var py=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Zd=class{};var eh=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var OT=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(OT||{}),wy=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new eh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var th=class n extends wy{constructor(e={}){super(e),this.type=OT.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var vL=new q("");var _L=new q(""),AT="b",ST="h",MT="s",xT="st",RT="u",NT="rt",Xd=new q(""),wL=["GET","HEAD"];function EL(n,e){let y=k(Xd),{isCacheActive:t}=y,r=$I(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!wL.includes(o)||!r.includeRequestsWithAuthHeaders&&IL(n)||r.filter?.(n)===!1)return e(n);let s=k(ts),a=k(_L,{optional:!0}),u=ur(k(ft));if(a&&!u)throw new K(2803,!1);let l=u&&a?TL(n.url,a):n.url,h=CL(n,l),f=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),f){let{[AT]:D,[NT]:S,[ST]:M,[MT]:V,[xT]:H,[RT]:F}=f,G=D;switch(S){case"arraybuffer":G=new TextEncoder().encode(D).buffer;break;case"blob":G=new Blob([D]);break}let ee=new eh(M);return Z(new th({body:G,headers:ee,status:V,statusText:H,url:F}))}return e(n).pipe(He(D=>{D instanceof th&&u&&s.set(h,{[AT]:D.body,[ST]:DL(D.headers,m),[MT]:D.status,[xT]:D.statusText,[RT]:l,[NT]:n.responseType})}))}function IL(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function DL(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function PT(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function CL(n,e){let{params:t,method:r,responseType:i}=n,o=PT(t),s=n.serializeBody();s instanceof URLSearchParams?s=PT(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=bL(a);return u}function bL(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function kT(n){return[{provide:Xd,useFactory:()=>(Br("NgHttpTransferCache"),j({isCacheActive:!0},n))},{provide:vL,useValue:EL,multi:!0,deps:[ts,Xd]},{provide:is,multi:!0,useFactory:()=>{let e=k(wn),t=k(Xd);return()=>{Gd(e).then(()=>{t.isCacheActive=!1})}}}]}function TL(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var Dy=class extends Yd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Cy=class n extends Dy{static makeCurrent(){vT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=AL();return t==null?null:SL(t)}resetBaseElement(){hu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vy(document.cookie,e)}},hu=null;function AL(){return hu=hu||document.querySelector("base"),hu?hu.getAttribute("href"):null}function SL(n){return new URL(n,document.baseURI).pathname}var by=class{addToWindow(e){ir.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new K(5103,!1);return o},ir.getAllAngularTestabilities=()=>e.getAllTestabilities(),ir.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=ir.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};ir.frameworkStabilizers||(ir.frameworkStabilizers=[]),ir.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?kn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},ML=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),nh=new q(""),jT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(nh),L(pe))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),fu=class{constructor(e){this._doc=e}},Ey="ng-app-id",UT=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ur(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ey}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Ey),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Ey,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Et),L(ou),L(Fm,8),L(ft))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Iy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sy=/%COMP%/g,BT="%COMP%",xL=`_nghost-${BT}`,RL=`_ngcontent-${BT}`,NL=!0,PL=new q("",{providedIn:"root",factory:()=>NL});function OL(n){return RL.replace(Sy,n)}function kL(n){return xL.replace(Sy,n)}function $T(n,e){return e.map(t=>t.replace(Sy,n))}var FT=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ur(a),this.defaultRenderer=new pu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rn.ShadowDom&&(r=le(j({},r),{encapsulation:Rn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof rh?i.applyToHost(t):i instanceof gu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Rn.Emulated:o=new rh(u,l,r,this.appId,h,s,a,f);break;case Rn.ShadowDom:return new Ty(u,l,t,r,s,a,this.nonce,f);default:o=new gu(u,l,r,h,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(jT),L(UT),L(ou),L(PL),L(Et),L(ft),L(pe),L(Fm))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),pu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Iy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(VT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(VT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Iy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Iy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Pn.DashCase|Pn.Important)?e.style.setProperty(t,r,i&Pn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Pn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=kn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function VT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ty=class extends pu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=$T(i.id,i.styles);for(let h of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gu=class extends pu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?$T(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rh=class extends gu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=OL(l),this.hostAttr=kL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},FL=(()=>{class n extends fu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),VL=(()=>{class n extends fu{constructor(t){super(t),this.delegate=k(lT,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,r,i){return this.delegate.addEventListener(t,r,i)}removeEventListener(t,r,i){return this.delegate.removeEventListener(t,r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),LT=["alt","control","meta","shift"],LL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},UL=(()=>{class n extends fu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),LT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=LL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),LT.forEach(s=>{if(s!==i){let a=jL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function BL(){Cy.makeCurrent()}function $L(){return new nr}function qL(){return B0(document),document}var HL=[{provide:ft,useValue:_y},{provide:km,useValue:BL,multi:!0},{provide:Et,useFactory:qL,deps:[]}],qT=ay(uT,"browser",HL),zL=new q(""),GL=[{provide:du,useClass:by,deps:[]},{provide:ry,useClass:qd,deps:[pe,Hd,du]},{provide:qd,useClass:qd,deps:[pe,Hd,du]}],WL=[{provide:Cd,useValue:"root"},{provide:nr,useFactory:$L,deps:[]},{provide:nh,useClass:FL,multi:!0,deps:[Et,pe,ft]},{provide:nh,useClass:UL,multi:!0,deps:[Et]},{provide:nh,useClass:VL,multi:!0},FT,UT,jT,{provide:Yo,useExisting:FT},{provide:Zd,useClass:ML,deps:[]},[]],HT=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ou,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(zL,12))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({providers:[...WL,...GL],imports:[CT,cT]})}}return n})();var zT=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ay=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Ay||{});function GT(...n){let e=[],t=new Set,r=t.has(Ay.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return eu([[],dT(),t.has(Ay.NoHttpTransferCache)||r?[]:kT({}),e])}var oe="primary",xu=Symbol("RouteTitle"),Py=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ds(n){return new Py(n)}function QL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fn(n[t],e[t]))return!1;return!0}function Fn(n,e){let t=n?Oy(n):void 0,r=e?Oy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!iA(n[i],e[i]))return!1;return!0}function Oy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function iA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function oA(n){return n.length>0?n[n.length-1]:null}function Hr(n){return ig(n)?n:Li(n)?ge(Promise.resolve(n)):Z(n)}var ZL={exact:aA,subset:uA},sA={exact:JL,subset:XL,ignored:()=>!0};function KT(n,e,t){return ZL[t.paths](n.root,e.root,t.matrixParams)&&sA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function JL(n,e){return Fn(n,e)}function aA(n,e,t){if(!$i(n.segments,e.segments)||!sh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!aA(n.children[r],e.children[r],t))return!1;return!0}function XL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>iA(n[t],e[t]))}function uA(n,e,t){return cA(n,e,e.segments,t)}function cA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!$i(i,t)||e.hasChildren()||!sh(i,t,r))}else if(n.segments.length===t.length){if(!$i(n.segments,t)||!sh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!uA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!$i(n.segments,i)||!sh(n.segments,i,r)||!n.children[oe]?!1:cA(n.children[oe],e,o,r)}}function sh(n,e,t){return e.every((r,i)=>sA[t](n[i].parameters,r.parameters))}var lr=class{constructor(e=new Ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ds(this.queryParams),this._queryParamMap}toString(){return nj.serialize(this)}},Ie=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ah(this)}},Bi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ds(this.parameters),this._parameterMap}toString(){return dA(this)}};function ej(n,e){return $i(n,e)&&n.every((t,r)=>Fn(t.parameters,e[r].parameters))}function $i(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function tj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Ru=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new hs,providedIn:"root"})}}return n})(),hs=class{parse(e){let t=new Fy(e);return new lr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${mu(e.root,!0)}`,r=oj(e.queryParams),i=typeof e.fragment=="string"?`#${rj(e.fragment)}`:"";return`${t}${r}${i}`}},nj=new hs;function ah(n){return n.segments.map(e=>dA(e)).join("/")}function mu(n,e){if(!n.hasChildren())return ah(n);if(e){let t=n.children[oe]?mu(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${mu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=tj(n,(r,i)=>i===oe?[mu(n.children[oe],!1)]:[`${i}:${mu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${ah(n)}/${t[0]}`:`${ah(n)}/(${t.join("//")})`}}function lA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ih(n){return lA(n).replace(/%3B/gi,";")}function rj(n){return encodeURI(n)}function ky(n){return lA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uh(n){return decodeURIComponent(n)}function QT(n){return uh(n.replace(/\+/g,"%20"))}function dA(n){return`${ky(n.path)}${ij(n.parameters)}`}function ij(n){return Object.entries(n).map(([e,t])=>`;${ky(e)}=${ky(t)}`).join("")}function oj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ih(t)}=${ih(i)}`).join("&"):`${ih(t)}=${ih(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var sj=/^[^\/()?;#]+/;function My(n){let e=n.match(sj);return e?e[0]:""}var aj=/^[^\/()?;=#]+/;function uj(n){let e=n.match(aj);return e?e[0]:""}var cj=/^[^=?&#]+/;function lj(n){let e=n.match(cj);return e?e[0]:""}var dj=/^[^&#]+/;function hj(n){let e=n.match(dj);return e?e[0]:""}var Fy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ie(e,t)),r}parseSegment(){let e=My(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Bi(uh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=uj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=My(this.remaining);i&&(r=i,this.capture(r))}e[uh(t)]=uh(r)}parseQueryParam(e){let t=lj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=hj(this.remaining);s&&(r=s,this.capture(r))}let i=QT(t),o=QT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=My(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ie([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function hA(n){return n.segments.length>0?new Ie([],{[oe]:n}):n}function fA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=fA(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ie(n.segments,e);return fj(t)}function fj(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ie(n.segments.concat(e.segments),e.children)}return n}function Iu(n){return n instanceof lr}function pj(n,e,t=null,r=null){let i=pA(n);return gA(i,e,t,r)}function pA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ie(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=hA(r);return e??i}function gA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return xy(i,i,i,t,r);let o=gj(e);if(o.toRoot())return xy(i,i,new Ie([],{}),t,r);let s=mj(o,i,n),a=s.processChildren?_u(s.segmentGroup,s.index,o.commands):yA(s.segmentGroup,s.index,o.commands);return xy(i,s.segmentGroup,a,t,r)}function ch(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Du(n){return typeof n=="object"&&n!=null&&n.outlets}function xy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=mA(n,e,t);let a=hA(fA(s));return new lr(a,o,i)}function mA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=mA(o,e,t)}),new Ie(n.segments,r)}var lh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ch(r[0]))throw new K(4003,!1);let i=r.find(Du);if(i&&i!==oA(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new lh(t,e,r)}var us=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function mj(n,e,t){if(n.isAbsolute)return new us(e,!0,0);if(!t)return new us(e,!1,NaN);if(t.parent===null)return new us(t,!0,0);let r=ch(n.commands[0])?0:1,i=t.segments.length-1+r;return yj(t,i,n.numberOfDoubleDots)}function yj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new us(r,!1,i-o)}function vj(n){return Du(n[0])?n[0].outlets:{[oe]:n}}function yA(n,e,t){if(n??=new Ie([],{}),n.segments.length===0&&n.hasChildren())return _u(n,e,t);let r=_j(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ie(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ie(n.segments.slice(r.pathIndex),n.children),_u(o,0,i)}else return r.match&&i.length===0?new Ie(n.segments,{}):r.match&&!n.hasChildren()?Vy(n,e,t):r.match?_u(n,0,i):Vy(n,e,t)}function _u(n,e,t){if(t.length===0)return new Ie(n.segments,{});{let r=vj(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=_u(n.children[oe],e,t);return new Ie(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=yA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(n.segments,i)}}function _j(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Du(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ZT(u,l,s))return o;r+=2}else{if(!ZT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Du(o)){let u=wj(o.outlets);return new Ie(r,u)}if(i===0&&ch(t[0])){let u=n.segments[e];r.push(new Bi(u.path,YT(t[0]))),i++;continue}let s=Du(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ch(a)?(r.push(new Bi(s,YT(a))),i+=2):(r.push(new Bi(s,{})),i++)}return new Ie(r,{})}function wj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Vy(new Ie([],{}),0,r))}),e}function YT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ZT(n,e,t){return n==t.path&&Fn(e,t.parameters)}var wu="imperative",lt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(lt||{}),on=class{constructor(e,t){this.id=e,this.url=t}},fs=class extends on{constructor(e,t,r="imperative",i=null){super(e,t),this.type=lt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},dr=class extends on{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Wt||{}),dh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(dh||{}),cr=class extends on{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qr=class extends on{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=lt.NavigationSkipped}},Cu=class extends on{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hh=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class extends on{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Uy=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},By=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qy=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hy=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zy=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gy=class{constructor(e){this.snapshot=e,this.type=lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wy=class{constructor(e){this.snapshot=e,this.type=lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=lt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},bu=class{},ps=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Ej(n,e){return n.providers&&!n._injector&&(n._injector=jd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function En(n){return n.outlet||oe}function Ij(n,e){let t=n.filter(r=>En(r)===e);return t.push(...n.filter(r=>En(r)!==e)),t}function Nu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ky=class{get injector(){return Nu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Pu(this.rootInjector),this.attachRef=null}},Pu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ky(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(qt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ph=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Qy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Yy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yy(e,this._root).map(t=>t.value)}};function Qy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Qy(n,t);if(r)return r}return null}function Yy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Yy(n,t);if(r.length)return r.unshift(e),r}return[]}var Gt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function as(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var gh=class extends ph{constructor(e,t){super(e),this.snapshot=t,ov(this,e)}toString(){return this.snapshot.toString()}};function vA(n){let e=Dj(n),t=new ht([new Bi("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new gs(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new gh(new Gt(a,[]),e)}function Dj(n){let e={},t={},r={},i="",o=new cs([],e,r,i,t,oe,n,null,{});return new yh("",new Gt(o,[]))}var gs=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[xu]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>ds(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>ds(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&wA(i)&&(r.resolve[xu]=i.title),r}var cs=class{get title(){return this.data?.[xu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ds(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ds(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yh=class extends ph{constructor(e,t){super(t),this.url=e,ov(this,t)}toString(){return _A(this._root)}};function ov(n,e){e.value._routerState=n,e.children.forEach(t=>ov(n,t))}function _A(n){let e=n.children.length>0?` { ${n.children.map(_A).join(", ")} } `:"";return`${n.value}${e}`}function Ry(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fn(e.params,t.params)||n.paramsSubject.next(t.params),YL(e.url,t.url)||n.urlSubject.next(t.url),Fn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zy(n,e){let t=Fn(n.params,e.params)&&ej(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Zy(n.parent,e.parent))}function wA(n){return typeof n.title=="string"||n.title===null}var sv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=k(Pu),this.location=k(ns),this.changeDetector=k(ji),this.inputBinder=k(Ih,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Jy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=en({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[es]})}}return n})(),Jy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===gs?this.route:e===Pu?this.childContexts:this.parent.get(e,t)}},Ih=new q(""),JT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=La([r.queryParams,r.params,r.data]).pipe(Fe(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=hT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function Cj(n,e,t){let r=Tu(n,e._root,t?t._root:void 0);return new gh(r,e)}function Tu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bj(n,e,t);return new Gt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Tu(n,a)),s}}let r=Tj(e.value),i=e.children.map(o=>Tu(n,o));return new Gt(r,i)}}function bj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tu(n,r,i);return Tu(n,r)})}function Tj(n){return new gs(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var Au=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},EA="ngNavigationCancelingError";function vh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Iu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=IA(!1,Wt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function IA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[EA]=!0,t.cancellationCode=e,t}function Aj(n){return DA(n)&&Iu(n.url)}function DA(n){return!!n&&n[EA]}var Sj=(n,e,t,r)=>X(i=>(new Xy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Xy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ry(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=as(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=as(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=as(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=as(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Wy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Ry(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ry(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},_h=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ls=class{constructor(e,t){this.component=e,this.route=t}};function Mj(n,e,t){let r=n._root,i=e?e._root:null;return yu(r,i,t,[r.value])}function xj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ys(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!DC(n)?n:e.get(n):r}function yu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=as(e);return n.children.forEach(s=>{Rj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Eu(a,t.getContext(s),i)),i}function Rj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Nj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new _h(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?yu(n,e,a?a.children:null,r,i):yu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ls(a.outlet.component,s))}else s&&Eu(e,a,i),i.canActivateChecks.push(new _h(r)),o.component?yu(n,null,a?a.children:null,r,i):yu(n,null,t,r,i);return i}function Nj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$i(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$i(n.url,e.url)||!Fn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zy(n,e)||!Fn(n.queryParams,e.queryParams);case"paramsChange":default:return!Zy(n,e)}}function Eu(n,e,t){let r=as(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Eu(s,e.children.getContext(o),t):Eu(s,null,t):Eu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ls(e.outlet.component,i)):t.canDeactivateChecks.push(new ls(null,i)):t.canDeactivateChecks.push(new ls(null,i))}function Ou(n){return typeof n=="function"}function Pj(n){return typeof n=="boolean"}function Oj(n){return n&&Ou(n.canLoad)}function kj(n){return n&&Ou(n.canActivate)}function Fj(n){return n&&Ou(n.canActivateChild)}function Vj(n){return n&&Ou(n.canDeactivate)}function Lj(n){return n&&Ou(n.canMatch)}function CA(n){return n instanceof Jn||n?.name==="EmptyError"}var oh=Symbol("INITIAL_VALUE");function ms(){return Fe(n=>La(n.map(e=>e.pipe(Xn(1),Ei(oh)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===oh)return oh;if(t===!1||jj(t))return t}return!0}),ut(e=>e!==oh),Xn(1)))}function jj(n){return Iu(n)||n instanceof Au}function Uj(n,e){return Qe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(le(j({},t),{guardsResult:!0})):Bj(s,r,i,n).pipe(Qe(a=>a&&Pj(a)?$j(r,o,n,e):Z(a)),X(a=>le(j({},t),{guardsResult:a})))})}function Bj(n,e,t,r){return ge(n).pipe(Qe(i=>Wj(i.component,i.route,t,e,r)),Ut(i=>i!==!0,!0))}function $j(n,e,t,r){return ge(e).pipe(Mr(i=>No(Hj(i.route.parent,r),qj(i.route,r),Gj(n,i.path,t),zj(n,i.route,t))),Ut(i=>i!==!0,!0))}function qj(n,e){return n!==null&&e&&e(new Gy(n)),Z(!0)}function Hj(n,e){return n!==null&&e&&e(new Hy(n)),Z(!0)}function zj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Ml(()=>{let s=Nu(e)??t,a=ys(o,s),u=kj(a)?a.canActivate(e,n):vn(s,()=>a(e,n));return Hr(u).pipe(Ut())}));return Z(i).pipe(ms())}function Gj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>xj(s)).filter(s=>s!==null).map(s=>Ml(()=>{let a=s.guards.map(u=>{let l=Nu(s.node)??t,h=ys(u,l),f=Fj(h)?h.canActivateChild(r,n):vn(l,()=>h(r,n));return Hr(f).pipe(Ut())});return Z(a).pipe(ms())}));return Z(o).pipe(ms())}function Wj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Nu(e)??i,l=ys(a,u),h=Vj(l)?l.canDeactivate(n,e,t,r):vn(u,()=>l(n,e,t,r));return Hr(h).pipe(Ut())});return Z(s).pipe(ms())}function Kj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=ys(s,n),u=Oj(a)?a.canLoad(e,t):vn(n,()=>a(e,t));return Hr(u)});return Z(o).pipe(ms(),bA(r))}function bA(n){return Jp(He(e=>{if(typeof e!="boolean")throw vh(n,e)}),X(e=>e===!0))}function Qj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=ys(s,n),u=Lj(a)?a.canMatch(e,t):vn(n,()=>a(e,t));return Hr(u)});return Z(o).pipe(ms(),bA(r))}var Su=class{constructor(e){this.segmentGroup=e||null}},Mu=class extends Error{constructor(e){super(),this.urlTree=e}};function ss(n){return Ro(new Su(n))}function Yj(n){return Ro(new K(4e3,!1))}function Zj(n){return Ro(IA(!1,Wt.GuardRejected))}var ev=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[oe])return Yj(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:f,outlet:m,params:y,data:D,title:S}=i,M=vn(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:h,url:f,outlet:m,title:S}));if(M instanceof lr)throw new Mu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Mu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new lr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},tv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jj(n,e,t,r,i){let o=TA(n,e,t);return o.matched?(r=Ej(e,r),Qj(r,e,t,i).pipe(X(s=>s===!0?o:j({},tv)))):Z(o)}function TA(n,e,t){if(e.path==="**")return Xj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},tv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||QL)(t,n,e);if(!i)return j({},tv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Xj(n){return{matched:!0,parameters:n.length>0?oA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function XT(n,e,t,r){return t.length>0&&n2(n,t,r)?{segmentGroup:new Ie(e,t2(r,new Ie(t,n.children))),slicedSegments:[]}:t.length===0&&r2(n,t,r)?{segmentGroup:new Ie(n.segments,e2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ie(n.segments,n.children),slicedSegments:t}}function e2(n,e,t,r){let i={};for(let o of t)if(Dh(n,e,o)&&!r[En(o)]){let s=new Ie([],{});i[En(o)]=s}return j(j({},r),i)}function t2(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&En(r)!==oe){let i=new Ie([],{});t[En(r)]=i}return t}function n2(n,e,t){return t.some(r=>Dh(n,e,r)&&En(r)!==oe)}function r2(n,e,t){return t.some(r=>Dh(n,e,r))}function Dh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function i2(n,e,t){return e.length===0&&!n.children[t]}var nv=class{};function o2(n,e,t,r,i,o,s="emptyOnly"){return new rv(n,e,t,r,i,s,o).recognize()}var s2=31,rv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ev(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=XT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new Gt(r,t),o=new yh("",i),s=pj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new cs([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(X(r=>({children:r,rootSnapshot:t})),Sr(r=>{if(r instanceof Mu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Su?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof Gt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ge(o).pipe(Mr(s=>{let a=r.children[s],u=Ij(t,s);return this.processSegmentGroup(e,u,a,s,i)}),wi((s,a)=>(s.push(...a),s)),xr(null),cg(),Qe(s=>{if(s===null)return ss(r);let a=AA(s);return a2(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return ge(t).pipe(Mr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Sr(l=>{if(l instanceof Su)return Z(null);throw l}))),Ut(u=>!!u),Sr(u=>{if(CA(u))return i2(r,i,o)?Z(new nv):ss(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return En(r)!==s&&(s===oe||!Dh(i,o,r))?ss(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ss(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:f,remainingSegments:m}=TA(t,i,o);if(!u)return ss(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s2&&(this.allowRedirects=!1));let y=new cs(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,eA(i),En(i),i.component??i._loadedComponent??null,i,tA(i)),D=mh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(Qe(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Jj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Fe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Fe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:y}=u,D=new cs(m,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,eA(r),En(r),r.component??r._loadedComponent??null,r,tA(r)),S=mh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(S.params),D.data=Object.freeze(S.data);let{segmentGroup:M,slicedSegments:V}=XT(t,m,y,l);if(V.length===0&&M.hasChildren())return this.processChildren(h,l,M,D).pipe(X(F=>new Gt(D,F)));if(l.length===0&&V.length===0)return Z(new Gt(D,[]));let H=En(r)===o;return this.processSegment(h,l,M,V,H?oe:o,!0,D).pipe(X(F=>new Gt(D,F instanceof Gt?[F]:[])))}))):ss(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):Kj(e,t,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,t).pipe(He(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Zj(t))):Z({routes:[],injector:e})}};function a2(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function u2(n){let e=n.value.routeConfig;return e&&e.path===""}function AA(n){let e=[],t=new Set;for(let r of n){if(!u2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AA(r.children);e.push(new Gt(r.value,i))}return e.filter(r=>!t.has(r))}function eA(n){return n.data||{}}function tA(n){return n.resolve||{}}function c2(n,e,t,r,i,o){return Qe(s=>o2(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>le(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function l2(n,e){return Qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of SA(u))s.add(l);let a=0;return ge(s).pipe(Mr(u=>o.has(u)?d2(u,r,n,e):(u.data=mh(u,u.parent,n).resolve,Z(void 0))),He(()=>a++),Oo(1),Qe(u=>a===s.size?Z(t):At))})}function SA(n){let e=n.children.map(t=>SA(t)).flat();return[n,...e]}function d2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!wA(i)&&(o[xu]=i.title),h2(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=mh(n,n.parent,t).resolve,null)))}function h2(n,e,t,r){let i=Oy(n);if(i.length===0)return Z({});let o={};return ge(i).pipe(Qe(s=>f2(n[s],e,t,r).pipe(Ut(),He(a=>{if(a instanceof Au)throw vh(new hs,a);o[s]=a}))),Oo(1),ag(o),Sr(s=>CA(s)?At:Ro(s)))}function f2(n,e,t,r){let i=Nu(e)??r,o=ys(n,i),s=o.resolve?o.resolve(e,t):vn(i,()=>o(e,t));return Hr(s)}function Ny(n){return Fe(e=>{let t=n(e);return t?ge(t).pipe(X(()=>e)):Z(e)})}var MA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[xu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(p2),providedIn:"root"})}}return n})(),p2=(()=>{class n extends MA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(zT))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ku=new q("",{providedIn:"root",factory:()=>({})}),g2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Jb],decls:1,vars:0,template:function(r,i){r&1&&Fi(0,"router-outlet")},dependencies:[sv],encapsulation:2})}}return n})();function av(n){let e=n.children&&n.children.map(av),t=e?le(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=g2),t}var wh=new q(""),uv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Wd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Hr(t.loadComponent()).pipe(X(xA),He(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Po(()=>{this.componentLoaders.delete(t)})),i=new Ao(r,()=>new ke).pipe(To());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=m2(r,this.compiler,t,this.onLoadEndListener).pipe(Po(()=>{this.childrenLoaders.delete(r)})),s=new Ao(o,()=>new ke).pipe(To());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function m2(n,e,t,r){return Hr(n.loadChildren()).pipe(X(xA),Qe(i=>i instanceof Qa||Array.isArray(i)?Z(i):ge(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(wh,[],{optional:!0,self:!0}).flat()),{routes:s.map(av),injector:o}}))}function y2(n){return n&&typeof n=="object"&&"default"in n}function xA(n){return y2(n)?n.default:n}var cv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(v2),providedIn:"root"})}}return n})(),v2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RA=new q(""),NA=new q("");function _2(n,e,t){let r=n.get(NA),i=n.get(Et);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),w2(n))),{onViewTransitionCreated:u}=r;return u&&vn(n,()=>u({transition:a,from:e,to:t})),s})}function w2(n){return new Promise(e=>{Xm({read:()=>setTimeout(e)},{injector:n})})}var E2=new q(""),lv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ke,this.transitionAbortSubject=new ke,this.configLoader=k(uv),this.environmentInjector=k(qt),this.urlSerializer=k(Ru),this.rootContexts=k(Pu),this.location=k(os),this.inputBindingEnabled=k(Ih,{optional:!0})!==null,this.titleStrategy=k(MA),this.options=k(ku,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(cv),this.createViewTransition=k(RA,{optional:!0}),this.navigationErrorHandler=k(E2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new $y(i)),r=i=>this.events.next(new qy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ht({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:wu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(o=>o.id!==0),X(o=>le(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fe(o=>{let s=!1,a=!1;return Z(o).pipe(Fe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Wt.SupersededByNewNavigation),At;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?le(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new qr(u.id,this.urlSerializer.serialize(u.rawUrl),f,dh.IgnoredSameUrlNavigation)),u.resolve(!1),At}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(Fe(f=>{let m=this.transitions?.getValue();return this.events.next(new fs(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?At:Promise.resolve(f)}),c2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),He(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=le(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new hh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:m,source:y,restoredState:D,extras:S}=u,M=new fs(f,this.urlSerializer.serialize(m),y,D);this.events.next(M);let V=vA(this.rootComponentType).snapshot;return this.currentTransition=o=le(j({},u),{targetSnapshot:V,urlAfterRedirects:m,extras:le(j({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let f="";return this.events.next(new qr(u.id,this.urlSerializer.serialize(u.extractedUrl),f,dh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),At}}),He(u=>{let l=new Ly(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),X(u=>(this.currentTransition=o=le(j({},u),{guards:Mj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),Uj(this.environmentInjector,u=>this.events.next(u)),He(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw vh(this.urlSerializer,u.guardsResult);let l=new jy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ut(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Wt.GuardRejected),!1)),Ny(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(He(l=>{let h=new Uy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Fe(l=>{let h=!1;return Z(l).pipe(l2(this.paramsInheritanceStrategy,this.environmentInjector),He({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Wt.NoDataFromResolver)}}))}),He(l=>{let h=new By(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Ny(u=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(He(m=>{h.component=m}),X(()=>{})));for(let m of h.children)f.push(...l(m));return f};return La(l(u.targetSnapshot.root)).pipe(xr(null),Xn(1))}),Ny(()=>this.afterPreactivation()),Fe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ge(h).pipe(X(()=>o)):Z(o)}),X(u=>{let l=Cj(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=le(j({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),He(()=>{this.events.next(new bu)}),Sj(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Xn(1),He({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new dr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),dg(this.transitionAbortSubject.pipe(He(u=>{throw u}))),Po(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Wt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sr(u=>{if(a=!0,DA(u))this.events.next(new cr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Aj(u)?this.events.next(new ps(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Cu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=vn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Au){let{message:f,cancellationCode:m}=vh(this.urlSerializer,h);this.events.next(new cr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new ps(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return At}))}))}cancelNavigationTransition(t,r,i){let o=new cr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function I2(n){return n!==wu}var D2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(C2),providedIn:"root"})}}return n})(),iv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},C2=(()=>{class n extends iv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=iu(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),PA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(b2),providedIn:"root"})}}return n})(),b2=(()=>{class n extends PA{constructor(){super(...arguments),this.location=k(os),this.urlSerializer=k(Ru),this.options=k(ku,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(cv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new lr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof fs)this.stateMemento=this.createStateMemento();else if(t instanceof qr)this.rawUrlTree=r.initialUrl;else if(t instanceof hh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof bu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof cr&&(t.code===Wt.GuardRejected||t.code===Wt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Cu?this.restoreHistory(r,!0):t instanceof dr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof lr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=iu(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(vu||{});function OA(n,e){n.events.pipe(ut(t=>t instanceof dr||t instanceof cr||t instanceof Cu||t instanceof qr),X(t=>t instanceof dr||t instanceof qr?vu.COMPLETE:(t instanceof cr?t.code===Wt.Redirect||t.code===Wt.SupersededByNewNavigation:!1)?vu.REDIRECTING:vu.FAILED),ut(t=>t!==vu.REDIRECTING),Xn(1)).subscribe(()=>{e()})}function T2(n){throw n}var A2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k($d),this.stateManager=k(PA),this.options=k(ku,{optional:!0})||{},this.pendingTasks=k(Pi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(lv),this.urlSerializer=k(Ru),this.location=k(os),this.urlHandlingStrategy=k(cv),this._events=new ke,this.errorHandler=this.options.errorHandler||T2,this.navigated=!1,this.routeReuseStrategy=k(D2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(wh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(Ih,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof cr&&r.code!==Wt.Redirect&&r.code!==Wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof dr)this.navigated=!0;else if(r instanceof ps){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||I2(i.source)},s);this.scheduleNavigation(a,wu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}x2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(av),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=pA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return gA(f,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Iu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,wu,null,r)}navigate(t,r={skipLocationChange:!1}){return M2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},A2):r===!1?i=j({},S2):i=r,Iu(t))return KT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return KT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,m)=>{a=f,u=m});let h=this.pendingTasks.add();return OA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function M2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function x2(n){return!(n instanceof bu)&&!(n instanceof ps)}var Eh=class{};var R2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ut(t=>t instanceof dr),Mr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=jd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ge(i).pipe(Ar())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(Qe(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ge([o,s]).pipe(Ar())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(qi),L(Wd),L(qt),L(Eh),L(uv))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kA=new q(""),N2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof dr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qr&&t.code===dh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){lb()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function P2(n){return n.routerState.root}function Fu(n,e){return{\u0275kind:n,\u0275providers:e}}function O2(){let n=k(kt);return e=>{let t=n.get(wn);if(e!==t.components[0])return;let r=n.get(qi),i=n.get(FA);n.get(dv)===1&&r.initialNavigation(),n.get(VA,null,ue.Optional)?.setUpPreloading(),n.get(kA,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FA=new q("",{factory:()=>new ke}),dv=new q("",{providedIn:"root",factory:()=>1});function k2(){return Fu(2,[{provide:dv,useValue:0},{provide:zd,multi:!0,deps:[kt],useFactory:e=>{let t=e.get(_T,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(qi),o=e.get(FA);OA(i,()=>{r(!0)}),e.get(lv).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function F2(){return Fu(3,[{provide:zd,multi:!0,useFactory:()=>{let e=k(qi);return()=>{e.setUpLocationChangeListener()}}},{provide:dv,useValue:2}])}var VA=new q("");function V2(n){return Fu(0,[{provide:VA,useExisting:R2},{provide:Eh,useExisting:n}])}function L2(){return Fu(8,[JT,{provide:Ih,useExisting:JT}])}function j2(n){let e=[{provide:RA,useValue:_2},{provide:NA,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Fu(9,e)}var nA=new q("ROUTER_FORROOT_GUARD"),U2=[os,{provide:Ru,useClass:hs},qi,Pu,{provide:gs,useFactory:P2,deps:[qi]},uv,[]],hv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[U2,[],{provide:wh,multi:!0,useValue:t},{provide:nA,useFactory:H2,deps:[[qi,new Ri,new Dd]]},{provide:ku,useValue:r||{}},r?.useHash?$2():q2(),B2(),r?.preloadingStrategy?V2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?z2(r):[],r?.bindToComponentInputs?L2().\u0275providers:[],r?.enableViewTransitions?j2().\u0275providers:[],G2()]}}static forChild(t){return{ngModule:n,providers:[{provide:wh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(nA,8))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();function B2(){return{provide:kA,useFactory:()=>{let n=k(bT),e=k(pe),t=k(ku),r=k(lv),i=k(Ru);return t.scrollOffset&&n.setOffset(t.scrollOffset),new N2(i,r,n,e,t)}}}function $2(){return{provide:Ui,useClass:ET}}function q2(){return{provide:Ui,useClass:yy}}function H2(n){return"guarded"}function z2(n){return[n.initialNavigation==="disabled"?F2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?k2().\u0275providers:[]]}var rA=new q("");function G2(){return[{provide:rA,useFactory:O2},{provide:is,multi:!0,useExisting:rA}]}var K2="firebase",Q2="10.13.2";at.registerVersion(K2,Q2,"app-compat");var Y2="firebase",Z2="10.13.2";Tr(Y2,Z2,"app");var vs=new rr("ANGULARFIRE2_VERSION");var J2=(n,e)=>{let t=e?[e]:ZI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Hi=class{constructor(){return J2(X2)}},X2="app-check";function fv(){}var Ch=class{zone;delegate;constructor(e,t=ng){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},pv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fv,{},fv,fv)),t.pipe(He({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ch(Zone.current)),this.insideAngular=t.run(()=>new Ch(Zone.current,Va)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(pe))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eU(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Vt(n){return tU(eU())(n)}function tU(n){return function(t){return t=t.lift(new pv(n.ngZone)),t.pipe(hn(n.outsideAngular),Yt(n.insideAngular))}}var iU=new Map,oU={activated:!1,tokenObservers:[]},sU={initialized:!1,enabled:!1};function In(n){return iU.get(n)||Object.assign({},oU)}function qA(){return sU}var aU="https://content-firebaseappcheck.googleapis.com/v1";var uU="exchangeDebugToken",jA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},m6=24*60*60*1e3;var mv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Vp,this.pending.promise.catch(t=>{}),yield cU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function cU(n){return new Promise(e=>{setTimeout(e,n)})}var lU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},zr=new QI("appCheck","AppCheck",lU);function HA(n){if(!In(n).activated)throw zr.create("use-before-activation",{appName:n.name})}function zA(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw zr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw zr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw zr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw zr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function GA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${aU}/projects/${t}/apps/${r}:${uU}?key=${i}`,body:{debug_token:e}}}var dU="firebase-app-check-database",hU=1,yv="firebase-app-check-store";var Th=null;function fU(){return Th||(Th=new Promise((n,e)=>{try{let t=indexedDB.open(dU,hU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(zr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yv,{keyPath:"compositeKey"})}}}catch(t){e(zr.create("storage-open",{originalErrorMessage:t?.message}))}}),Th)}function pU(n,e){return gU(mU(n),e)}function gU(n,e){return N(this,null,function*(){let r=(yield fU()).transaction(yv,"readwrite"),o=r.objectStore(yv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(zr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function mU(n){return`${n.options.appId}-${n.name}`}var vv=new Xc("@firebase/app-check");function gv(n,e){return Jc()?pU(n,e).catch(t=>{vv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function WA(){return qA().enabled}function KA(){return N(this,null,function*(){let n=qA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var yU={error:"UNKNOWN_ERROR"};function vU(n){return GI.encodeString(JSON.stringify(n),!1)}function _v(n,e=!1){return N(this,null,function*(){let t=n.app;HA(t);let r=In(t),i=r.token,o;if(i&&!Vu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Vu(u)?i=u:yield gv(t,void 0))}if(!e&&i&&Vu(i))return{token:i.token};let s=!1;if(WA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=zA(GA(t,yield KA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield gv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield In(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?vv.warn(u.message):vv.error(u),o=u}let a;return i?o?Vu(i)?a={token:i.token,internalError:o}:a=BA(o):(a={token:i.token},r.token=i,yield gv(t,i)):a=BA(o),s&&IU(t,a),a})}function _U(n){return N(this,null,function*(){let e=n.app;HA(e);let{provider:t}=In(e);if(WA()){let r=yield KA(),{token:i}=yield zA(GA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function wU(n,e,t,r){let{app:i}=n,o=In(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),UA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>UA(n))}function QA(n,e){let t=In(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function UA(n){let{app:e}=n,t=In(e),r=t.tokenRefresher;r||(r=EU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function EU(n){let{app:e}=n;return new mv(()=>N(this,null,function*(){let t=In(e),r;if(t.token?r=yield _v(n,!0):r=yield _v(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=In(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jA.RETRIAL_MIN_WAIT,jA.RETRIAL_MAX_WAIT)}function IU(n,e){let t=In(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vu(n){return n.expireTimeMillis-Date.now()>0}function BA(n){return{token:vU(yU),error:n}}var wv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=In(this.app);for(let t of e)QA(this.app,t.next);return Promise.resolve()}};function DU(n,e){return new wv(n,e)}function CU(n){return{getToken:e=>_v(n,e),getLimitedUseToken:()=>_U(n),addTokenListener:e=>wU(n,"INTERNAL",e),removeTokenListener:e=>QA(n.app,e)}}var bU="@firebase/app-check",TU="0.8.8";var AU="app-check",$A="app-check-internal";function SU(){Ra(new mi(AU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return DU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($A).initialize()})),Ra(new mi($A,n=>{let e=n.getProvider("app-check").getImmediate();return CU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Tr(bU,TU)}SU();var MU=["localhost","0.0.0.0","127.0.0.1"],S6=typeof window<"u"&&MU.includes(window.location.hostname);var xU=["ngOnDestroy"],JA=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(xU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let f=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Ah=class{constructor(e){return e}},_s=new q("angularfire2.app.options"),ws=new q("angularfire2.app.name");function Lu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=at.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>at.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;RU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ah(s)}var RU=(n,...e)=>{uy()&&typeof console<"u"&&console[n](...e)},NU={provide:Ah,useFactory:Lu,deps:[_s,pe,[new Ri,ws]]},XA=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:_s,useValue:t},{provide:ws,useValue:r}]}}constructor(t){at.registerVersion("angularfire",vs.full,"core"),at.registerVersion("angularfire",vs.full,"app-compat"),at.registerVersion("angular",eT.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(ft))};static \u0275mod=it({type:n});static \u0275inj=rt({providers:[NU]})}return n})();function Sh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return PU(i,s)||(ZA("error",`${e} was already initialized on the ${t} Firebase App with different settings.${OU?" You may need to reload as Firebase is not HMR aware.":""}`),ZA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function PU(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var OU=typeof module<"u"&&!!module.hot,ZA=(n,...e)=>{uy()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ev=new q("angularfire2.auth.use-emulator"),Iv=new q("angularfire2.auth.settings"),Dv=new q("angularfire2.auth.tenant-id"),Cv=new q("angularfire2.auth.langugage-code"),bv=new q("angularfire2.auth.use-device-language"),Tv=new q("angularfire.auth.persistence"),Av=(n,e,t,r,i,o,s,a)=>Sh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),eS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,f,m,y){let D=new ke,S=Z(void 0).pipe(Yt(s.outsideAngular),Fe(()=>o.runOutsideAngular(()=>import("./chunk-63EJ5QCV.js"))),X(()=>Lu(t,o,r)),X(M=>Av(M,o,a,l,h,f,u,m)),Rl({bufferSize:1,refCount:!1}));if(ur(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{S.pipe(Ut()).subscribe();let M=S.pipe(Fe(F=>F.getRedirectResult().then(G=>G,()=>null)),Vt,Rl({bufferSize:1,refCount:!1})),V=S.pipe(Fe(F=>new de(G=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))})))),H=S.pipe(Fe(F=>new de(G=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))}))));this.authState=M.pipe(Nl(V),hn(s.outsideAngular),Yt(s.insideAngular)),this.user=M.pipe(Nl(H),hn(s.outsideAngular),Yt(s.insideAngular)),this.idToken=this.user.pipe(Fe(F=>F?ge(F.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Fe(F=>F?ge(F.getIdTokenResult()):Z(null))),this.credential=sg(M,D,this.authState.pipe(ut(F=>!F))).pipe(X(F=>F?.user?F:null),hn(s.outsideAngular),Yt(s.insideAngular))}return JA(this,S,o,{spy:{apply:(M,V,H)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&H.then(F=>D.next(F))}}})}static \u0275fac=function(r){return new(r||n)(L(_s),L(ws,8),L(ft),L(pe),L(bh),L(Ev,8),L(Iv,8),L(Dv,8),L(Cv,8),L(bv,8),L(Tv,8),L(Hi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var tS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nS={};var Gr,Sv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,T){for(var _=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)_[Wn-2]=arguments[Wn];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var T=E.g[3],_=v+(T^w&(C^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[C++]=E.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<v;)if(I[C++]=E[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var T=E[C]|0;I&&T==v||(w[C]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=f,C=0;C<E.length;C+=8){var T=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var f=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(S(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(S(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=G(w,v).g;w=V(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function S(E){return E.h==-1}n.l=function(E){return E=V(this,E),S(E)?-1:D(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return S(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var T=I+(this.i(C)&65535)+(E.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(E,v){return E.add(M(v))}n.j=function(E){if(D(this)||D(E))return f;if(S(this))return S(E)?M(this).j(M(E)):M(M(this).j(E));if(S(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var T=this.i(I)>>>16,_=this.i(I)&65535,Wn=E.i(C)>>>16,da=E.i(C)&65535;w[2*I+2*C]+=_*da,H(w,2*I+2*C),w[2*I+2*C+1]+=T*da,H(w,2*I+2*C+1),w[2*I+2*C+1]+=_*Wn,H(w,2*I+2*C+1),w[2*I+2*C+2]+=T*Wn,H(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function H(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function F(E,v){this.g=E,this.h=v}function G(E,v){if(D(v))throw Error("division by zero");if(D(E))return new F(f,f);if(S(E))return v=G(M(E),v),new F(M(v.g),M(v.h));if(S(v))return v=G(E,M(v)),new F(M(v.g),v.h);if(30<E.g.length){if(S(E)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=ee(w),I=ee(I);var C=Y(w,1),T=Y(I,1);for(I=Y(I,2),w=Y(w,2);!D(I);){var _=T.add(I);0>=_.l(E)&&(C=C.add(w),T=_),I=Y(I,1),w=Y(w,1)}return v=V(E,C.j(v)),new F(C,v)}for(C=f;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);S(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);D(T)&&(T=m),C=C.add(T),E=V(E,_)}return new F(C,E)}n.A=function(E){return G(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ee(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function Y(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],T=0;T<I;T++)C[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sv=nS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Gr=nS.Integer=s}).apply(typeof tS<"u"?tS:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hr={};var Mv,xv,Es,Rv,ju,xh,Nv,Pv,Ov;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,p){return c==Array.prototype||c==Object.prototype||(c[d]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var d=0;d<c.length;++d){var p=c[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var p=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in p))break e;p=p[b]}c=c[c.length-1],g=p[c],d=d(g),d!=g&&d!=null&&e(p,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var p=0,g=!1,b={next:function(){if(!g&&p<c.length){var R=p++;return{value:d(R,c[R]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,p){return p})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,p){return c.call.apply(c.bind,arguments)}function f(c,d,p){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(c,d){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,d){function p(){}p.prototype=d.prototype,c.aa=d.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(g,b,R){for(var U=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)U[Ce-2]=arguments[Ce];return d.prototype[b].apply(g,U)}}function S(c){let d=c.length;if(0<d){let p=Array(d);for(let g=0;g<d;g++)p[g]=c[g];return p}return[]}function M(c,d){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(u(g)){let b=c.length||0,R=g.length||0;c.length=b+R;for(let U=0;U<R;U++)c[b+U]=g[U]}else c.push(g)}}class V{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Y(c,d,p){for(let g in c)d.call(p,c[g],g,c)}function E(c,d){for(let p in c)d.call(void 0,c[p],p,c)}function v(c){let d={};for(let p in c)d[p]=c[p];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let p,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(p in g)c[p]=g[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(g,p)&&(c[p]=g[p])}}function C(c){var d=1;c=c.split(":");let p=[];for(;0<d&&c.length;)p.push(c.shift()),d--;return c.length&&p.push(c.join(":")),p}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=dp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Wn{constructor(){this.h=this.g=null}add(d,p){let g=da.get();g.set(d,p),this.h?this.h.next=g:this.g=g,this.h=g}}var da=new V(()=>new sN,c=>c.reset());class sN{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ha,fa=!1,dp=new Wn,BE=()=>{let c=a.Promise.resolve(void 0);ha=()=>{c.then(aN)}};var aN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){T(p)}var d=da;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}fa=!1};function Ir(){this.s=this.s,this.C=this.C}Ir.prototype.s=!1,Ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var uN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return c}();function pa(c,d){if(gt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{G(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else p=="mouseover"?d=c.fromElement:p=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:cN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&pa.aa.h.call(this)}}D(pa,gt);var cN={2:"touch",3:"pen",4:"mouse"};pa.prototype.h=function(){pa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ga="closure_listenable_"+(1e6*Math.random()|0),lN=0;function dN(c,d,p,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=p,this.capture=!!g,this.ha=b,this.key=++lN,this.da=this.fa=!1}function Oc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function kc(c){this.src=c,this.g={},this.h=0}kc.prototype.add=function(c,d,p,g,b){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var U=fp(c,d,g,b);return-1<U?(d=c[U],p||(d.fa=!1)):(d=new dN(d,this.src,R,!!g,b),d.fa=p,c.push(d)),d};function hp(c,d){var p=d.type;if(p in c.g){var g=c.g[p],b=Array.prototype.indexOf.call(g,d,void 0),R;(R=0<=b)&&Array.prototype.splice.call(g,b,1),R&&(Oc(d),c.g[p].length==0&&(delete c.g[p],c.h--))}}function fp(c,d,p,g){for(var b=0;b<c.length;++b){var R=c[b];if(!R.da&&R.listener==d&&R.capture==!!p&&R.ha==g)return b}return-1}var pp="closure_lm_"+(1e6*Math.random()|0),gp={};function $E(c,d,p,g,b){if(g&&g.once)return HE(c,d,p,g,b);if(Array.isArray(d)){for(var R=0;R<d.length;R++)$E(c,d[R],p,g,b);return null}return p=_p(p),c&&c[ga]?c.K(d,p,l(g)?!!g.capture:!!g,b):qE(c,d,p,!1,g,b)}function qE(c,d,p,g,b,R){if(!d)throw Error("Invalid event type");var U=l(b)?!!b.capture:!!b,Ce=yp(c);if(Ce||(c[pp]=Ce=new kc(c)),p=Ce.add(d,p,g,U,R),p.proxy)return p;if(g=hN(),p.proxy=g,g.src=c,g.listener=p,c.addEventListener)uN||(b=U),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(GE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function hN(){function c(p){return d.call(c.src,c.listener,p)}let d=fN;return c}function HE(c,d,p,g,b){if(Array.isArray(d)){for(var R=0;R<d.length;R++)HE(c,d[R],p,g,b);return null}return p=_p(p),c&&c[ga]?c.L(d,p,l(g)?!!g.capture:!!g,b):qE(c,d,p,!0,g,b)}function zE(c,d,p,g,b){if(Array.isArray(d))for(var R=0;R<d.length;R++)zE(c,d[R],p,g,b);else g=l(g)?!!g.capture:!!g,p=_p(p),c&&c[ga]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],p=fp(R,p,g,b),-1<p&&(Oc(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=yp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=fp(d,p,g,b)),(p=-1<c?d[c]:null)&&mp(p))}function mp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ga])hp(d.i,c);else{var p=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(p,g,c.capture):d.detachEvent?d.detachEvent(GE(p),g):d.addListener&&d.removeListener&&d.removeListener(g),(p=yp(d))?(hp(p,c),p.h==0&&(p.src=null,d[pp]=null)):Oc(c)}}}function GE(c){return c in gp?gp[c]:gp[c]="on"+c}function fN(c,d){if(c.da)c=!0;else{d=new pa(d,this);var p=c.listener,g=c.ha||c.src;c.fa&&mp(c),c=p.call(g,d)}return c}function yp(c){return c=c[pp],c instanceof kc?c:null}var vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function _p(c){return typeof c=="function"?c:(c[vp]||(c[vp]=function(d){return c.handleEvent(d)}),c[vp])}function mt(){Ir.call(this),this.i=new kc(this),this.M=this,this.F=null}D(mt,Ir),mt.prototype[ga]=!0,mt.prototype.removeEventListener=function(c,d,p,g){zE(this,c,d,p,g)};function Ct(c,d){var p,g=c.F;if(g)for(p=[];g;g=g.F)p.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new gt(d,c);else if(d instanceof gt)d.target=d.target||c;else{var b=d;d=new gt(g,c),I(d,b)}if(b=!0,p)for(var R=p.length-1;0<=R;R--){var U=d.g=p[R];b=Fc(U,g,!0,d)&&b}if(U=d.g=c,b=Fc(U,g,!0,d)&&b,b=Fc(U,g,!1,d)&&b,p)for(R=0;R<p.length;R++)U=d.g=p[R],b=Fc(U,g,!1,d)&&b}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var p=c.g[d],g=0;g<p.length;g++)Oc(p[g]);delete c.g[d],c.h--}}this.F=null},mt.prototype.K=function(c,d,p,g){return this.i.add(String(c),d,!1,p,g)},mt.prototype.L=function(c,d,p,g){return this.i.add(String(c),d,!0,p,g)};function Fc(c,d,p,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,R=0;R<d.length;++R){var U=d[R];if(U&&!U.da&&U.capture==p){var Ce=U.listener,dt=U.ha||U.src;U.fa&&hp(c.i,U),b=Ce.call(dt,g)!==!1&&b}}return b&&!g.defaultPrevented}function WE(c,d,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function KE(c){c.g=WE(()=>{c.g=null,c.i&&(c.i=!1,KE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class pN extends Ir{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:KE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ma(c){Ir.call(this),this.h=c,this.g={}}D(ma,Ir);var QE=[];function YE(c){Y(c.g,function(d,p){this.g.hasOwnProperty(p)&&mp(d)},c),c.g={}}ma.prototype.N=function(){ma.aa.N.call(this),YE(this)},ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wp=a.JSON.stringify,gN=a.JSON.parse,mN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ep(){}Ep.prototype.h=null;function ZE(c){return c.h||(c.h=c.i())}function JE(){}var ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ip(){gt.call(this,"d")}D(Ip,gt);function Dp(){gt.call(this,"c")}D(Dp,gt);var hi={},XE=null;function Vc(){return XE=XE||new mt}hi.La="serverreachability";function eI(c){gt.call(this,hi.La,c)}D(eI,gt);function va(c){let d=Vc();Ct(d,new eI(d))}hi.STAT_EVENT="statevent";function tI(c,d){gt.call(this,hi.STAT_EVENT,c),this.stat=d}D(tI,gt);function bt(c){let d=Vc();Ct(d,new tI(d,c))}hi.Ma="timingevent";function nI(c,d){gt.call(this,hi.Ma,c),this.size=d}D(nI,gt);function _a(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function wa(){this.g=!0}wa.prototype.xa=function(){this.g=!1};function yN(c,d,p,g,b,R){c.info(function(){if(c.g)if(R)for(var U="",Ce=R.split("&"),dt=0;dt<Ce.length;dt++){var we=Ce[dt].split("=");if(1<we.length){var yt=we[0];we=we[1];var vt=yt.split("_");U=2<=vt.length&&vt[1]=="type"?U+(yt+"="+we+"&"):U+(yt+"=redacted&")}}else U=null;else U=R;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+p+`
`+U})}function vN(c,d,p,g,b,R,U){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+p+`
`+R+" "+U})}function vo(c,d,p,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+wN(c,p)+(g?" "+g:"")})}function _N(c,d){c.info(function(){return"TIMEOUT: "+d})}wa.prototype.info=function(){};function wN(c,d){if(!c.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var g=p[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var U=1;U<b.length;U++)b[U]=""}}}}return wp(p)}catch{return d}}var Lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cp;function jc(){}D(jc,Ep),jc.prototype.g=function(){return new XMLHttpRequest},jc.prototype.i=function(){return{}},Cp=new jc;function Dr(c,d,p,g){this.j=c,this.i=d,this.l=p,this.R=g||1,this.U=new ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iI}function iI(){this.i=null,this.g="",this.h=!1}var oI={},bp={};function Tp(c,d,p){c.L=1,c.v=qc(Kn(d)),c.m=p,c.P=!0,sI(c,null)}function sI(c,d){c.F=Date.now(),Uc(c),c.A=Kn(c.v);var p=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),wI(p.i,"t",g),c.C=0,p=c.j.J,c.h=new iI,c.g=LI(c.j,p?d:null,!c.m),0<c.O&&(c.M=new pN(m(c.Y,c,c.g),c.O)),d=c.U,p=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(QE[0]=b.toString()),b=QE);for(var R=0;R<b.length;R++){var U=$E(p,b[R],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),va(),yN(c.i,c.u,c.A,c.l,c.R,c.m)}Dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Qn(c)==3?d.j():this.Y(c)},Dr.prototype.Y=function(c){try{if(c==this.g)e:{let vt=Qn(this.g);var d=this.g.Ba();let Eo=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||AI(this.g)))){this.J||vt!=4||d==7||(d==8||0>=Eo?va(3):va(2)),Ap(this);var p=this.g.Z();this.X=p;t:if(aI(this)){var g=AI(this.g);c="";var b=g.length,R=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),Ea(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(R&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,vN(this.i,this.u,this.A,this.l,this.R,vt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,dt=this.g;if((Ce=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ce)){var we=Ce;break t}}we=null}if(p=we)vo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sp(this,p);else{this.o=!1,this.s=3,bt(12),fi(this),Ea(this);break e}}if(this.P){p=!0;let ln;for(;!this.J&&this.C<U.length;)if(ln=EN(this,U),ln==bp){vt==4&&(this.s=4,bt(14),p=!1),vo(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==oI){this.s=4,bt(15),vo(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else vo(this.i,this.l,ln,null),Sp(this,ln);if(aI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||U.length!=0||this.h.h||(this.s=1,bt(16),p=!1),this.o=this.o&&p,!p)vo(this.i,this.l,U,"[Invalid Chunked Response]"),fi(this),Ea(this);else if(0<U.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Op(yt),yt.M=!0,bt(11))}}else vo(this.i,this.l,U,null),Sp(this,U);vt==4&&fi(this),this.o&&!this.J&&(vt==4?OI(this.j,this):(this.o=!1,Uc(this)))}else LN(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),fi(this),Ea(this)}}}catch{}finally{}};function aI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function EN(c,d){var p=c.C,g=d.indexOf(`
`,p);return g==-1?bp:(p=Number(d.substring(p,g)),isNaN(p)?oI:(g+=1,g+p>d.length?bp:(d=d.slice(g,g+p),c.C=g+p,d)))}Dr.prototype.cancel=function(){this.J=!0,fi(this)};function Uc(c){c.S=Date.now()+c.I,uI(c,c.I)}function uI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=_a(m(c.ba,c),d)}function Ap(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(_N(this.i,this.A),this.L!=2&&(va(),bt(17)),fi(this),this.s=2,Ea(this)):uI(this,this.S-c)};function Ea(c){c.j.G==0||c.J||OI(c.j,c)}function fi(c){Ap(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,YE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Sp(c,d){try{var p=c.j;if(p.G!=0&&(p.g==c||Mp(p.h,c))){if(!c.K&&Mp(p.h,c)&&p.G==3){try{var g=p.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Kc(p),Gc(p);else break e;Pp(p),bt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=_a(m(p.Za,p),6e3));if(1>=dI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else gi(p,11)}else if((c.K||p.g==c)&&Kc(p),!H(d))for(b=p.Da.g.parse(d),d=0;d<b.length;d++){let we=b[d];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let yt=we[3];yt!=null&&(p.la=yt,p.j.info("VER="+p.la));let vt=we[4];vt!=null&&(p.Aa=vt,p.j.info("SVER="+p.Aa));let Eo=we[5];Eo!=null&&typeof Eo=="number"&&0<Eo&&(g=1.5*Eo,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let ln=c.g;if(ln){let Yc=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yc){var R=g.h;R.g||Yc.indexOf("spdy")==-1&&Yc.indexOf("quic")==-1&&Yc.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(xp(R,R.h),R.h=null))}if(g.D){let kp=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;kp&&(g.ya=kp,Se(g.I,g.D,kp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=c;if(g.qa=VI(g,g.J?g.ia:null,g.W),U.K){hI(g.h,U);var Ce=U,dt=g.L;dt&&(Ce.I=dt),Ce.B&&(Ap(Ce),Uc(Ce)),g.g=U}else NI(g);0<p.i.length&&Wc(p)}else we[0]!="stop"&&we[0]!="close"||gi(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?gi(p,7):Np(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}va(4)}catch{}}var IN=class{constructor(c,d){this.g=c,this.map=d}};function cI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function dI(c){return c.h?1:c.g?c.g.size:0}function Mp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function xp(c,d){c.g?c.g.add(d):c.h=d}function hI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}cI.prototype.cancel=function(){if(this.i=fI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function fI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let p of c.g.values())d=d.concat(p.D);return d}return S(c.i)}function DN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],p=c.length,g=0;g<p;g++)d.push(c[g]);return d}d=[],p=0;for(g in c)d[p++]=c[g];return d}function CN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var p=0;p<c;p++)d.push(p);return d}d=[],p=0;for(let g in c)d[p++]=g;return d}}}function pI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var p=CN(c),g=DN(c),b=g.length,R=0;R<b;R++)d.call(void 0,g[R],p&&p[R],c)}var gI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bN(c,d){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var g=c[p].indexOf("="),b=null;if(0<=g){var R=c[p].substring(0,g);b=c[p].substring(g+1)}else R=c[p];d(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function pi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof pi){this.h=c.h,Bc(this,c.j),this.o=c.o,this.g=c.g,$c(this,c.s),this.l=c.l;var d=c.i,p=new Ca;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),mI(this,p),this.m=c.m}else c&&(d=String(c).match(gI))?(this.h=!1,Bc(this,d[1]||"",!0),this.o=Ia(d[2]||""),this.g=Ia(d[3]||"",!0),$c(this,d[4]),this.l=Ia(d[5]||"",!0),mI(this,d[6]||"",!0),this.m=Ia(d[7]||"")):(this.h=!1,this.i=new Ca(null,this.h))}pi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Da(d,yI,!0),":");var p=this.g;return(p||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Da(d,yI,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Da(p,p.charAt(0)=="/"?SN:AN,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Da(p,xN)),c.join("")};function Kn(c){return new pi(c)}function Bc(c,d,p){c.j=p?Ia(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function $c(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function mI(c,d,p){d instanceof Ca?(c.i=d,RN(c.i,c.h)):(p||(d=Da(d,MN)),c.i=new Ca(d,c.h))}function Se(c,d,p){c.i.set(d,p)}function qc(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ia(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Da(c,d,p){return typeof c=="string"?(c=encodeURI(c).replace(d,TN),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function TN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yI=/[#\/\?@]/g,AN=/[#\?:]/g,SN=/[#\?]/g,MN=/[#\?@]/g,xN=/#/g;function Ca(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Cr(c){c.g||(c.g=new Map,c.h=0,c.i&&bN(c.i,function(d,p){c.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=Ca.prototype,n.add=function(c,d){Cr(this),this.i=null,c=_o(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(d),this.h+=1,this};function vI(c,d){Cr(c),d=_o(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function _I(c,d){return Cr(c),d=_o(c,d),c.g.has(d)}n.forEach=function(c,d){Cr(this),this.g.forEach(function(p,g){p.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Cr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let g=0;g<d.length;g++){let b=c[g];for(let R=0;R<b.length;R++)p.push(d[g])}return p},n.V=function(c){Cr(this);let d=[];if(typeof c=="string")_I(this,c)&&(d=d.concat(this.g.get(_o(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)d=d.concat(c[p])}return d},n.set=function(c,d){return Cr(this),this.i=null,c=_o(this,c),_I(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function wI(c,d,p){vI(c,d),0<p.length&&(c.i=null,c.g.set(_o(c,d),S(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var g=d[p];let R=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var b=R;U[g]!==""&&(b+="="+encodeURIComponent(String(U[g]))),c.push(b)}}return this.i=c.join("&")};function _o(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function RN(c,d){d&&!c.j&&(Cr(c),c.i=null,c.g.forEach(function(p,g){var b=g.toLowerCase();g!=b&&(vI(this,g),wI(this,b,p))},c)),c.j=d}function NN(c,d){let p=new wa;if(a.Image){let g=new Image;g.onload=y(br,p,"TestLoadImage: loaded",!0,d,g),g.onerror=y(br,p,"TestLoadImage: error",!1,d,g),g.onabort=y(br,p,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(br,p,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function PN(c,d){let p=new wa,g=new AbortController,b=setTimeout(()=>{g.abort(),br(p,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(R=>{clearTimeout(b),R.ok?br(p,"TestPingServer: ok",!0,d):br(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),br(p,"TestPingServer: error",!1,d)})}function br(c,d,p,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(p)}catch{}}function ON(){this.g=new mN}function kN(c,d,p){let g=p||"";try{pI(c,function(b,R){let U=b;l(b)&&(U=wp(b)),d.push(g+R+"="+encodeURIComponent(U))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function ba(c){this.l=c.Ub||null,this.j=c.eb||!1}D(ba,Ep),ba.prototype.g=function(){return new Hc(this.l,this.j)},ba.prototype.i=function(c){return function(){return c}}({});function Hc(c,d){mt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Hc,mt),n=Hc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Aa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ta(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;EI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function EI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ta(this):Aa(this),this.readyState==3&&EI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ta(this))},n.Qa=function(c){this.g&&(this.response=c,Ta(this))},n.ga=function(){this.g&&Ta(this)};function Ta(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Aa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=d.next();return c.join(`\r
`)};function Aa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Hc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function II(c){let d="";return Y(c,function(p,g){d+=g,d+=":",d+=p,d+=`\r
`}),d}function Rp(c,d,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=II(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Se(c,d,p))}function Be(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Be,mt);var FN=/^https?$/i,VN=["POST","PUT"];n=Be.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cp.g(),this.v=this.o?ZE(this.o):ZE(Cp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){DI(this,R);return}if(c=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)p.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let R of g.keys())p.set(R,g.get(R));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(VN,d,void 0))||g||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,U]of p)this.g.setRequestHeader(R,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{TI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){DI(this,R)}};function DI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,CI(c),zc(c)}function CI(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),zc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zc(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bI(this):this.bb())},n.bb=function(){bI(this)};function bI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Qn(c)!=4||c.Z()!=2)){if(c.u&&Qn(c)==4)WE(c.Ea,0,c);else if(Ct(c,"readystatechange"),Qn(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var g;if(g=U===0){var b=String(c.D).match(gI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!FN.test(b?b.toLowerCase():"")}p=g}if(p)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var R=2<Qn(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",CI(c)}}finally{zc(c)}}}}function zc(c,d){if(c.g){TI(c);let p=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ct(c,"ready");try{p.onreadystatechange=g}catch{}}}function TI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Qn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),gN(d)}};function AI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function LN(c){let d={};c=(c.g&&2<=Qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(H(c[g]))continue;var p=C(c[g]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=d[b]||[];d[b]=R,R.push(p)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(c,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||d}function SI(c){this.Aa=0,this.i=[],this.j=new wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,c),this.cb=Sa("retryDelaySeedMs",1e4,c),this.Wa=Sa("forwardChannelMaxRetries",2,c),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cI(c&&c.concurrentRequestLimit),this.Da=new ON,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=SI.prototype,n.la=8,n.G=1,n.connect=function(c,d,p,g){bt(0),this.W=c,this.H=d||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=VI(this,null,this.W),Wc(this)};function Np(c){if(MI(c),c.G==3){var d=c.U++,p=Kn(c.I);if(Se(p,"SID",c.K),Se(p,"RID",d),Se(p,"TYPE","terminate"),Ma(c,p),d=new Dr(c,c.j,d),d.L=2,d.v=qc(Kn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=LI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Uc(d)}FI(c)}function Gc(c){c.g&&(Op(c),c.g.cancel(),c.g=null)}function MI(c){Gc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Kc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Wc(c){if(!lI(c.h)&&!c.s){c.s=!0;var d=c.Ga;ha||BE(),fa||(ha(),fa=!0),dp.add(d,c),c.B=0}}function jN(c,d){return dI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=_a(m(c.Ga,c,d),kI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Dr(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=RI(this,b,d),p=Kn(this.I),Se(p,"RID",c),Se(p,"CVER",22),this.D&&Se(p,"X-HTTP-Session-Id",this.D),Ma(this,p),R&&(this.O?d="headers="+encodeURIComponent(String(II(R)))+"&"+d:this.m&&Rp(p,this.m,R)),xp(this.h,b),this.Ua&&Se(p,"TYPE","init"),this.P?(Se(p,"$req",d),Se(p,"SID","null"),b.T=!0,Tp(b,p,null)):Tp(b,p,d),this.G=2}}else this.G==3&&(c?xI(this,c):this.i.length==0||lI(this.h)||xI(this))};function xI(c,d){var p;d?p=d.l:p=c.U++;let g=Kn(c.I);Se(g,"SID",c.K),Se(g,"RID",p),Se(g,"AID",c.T),Ma(c,g),c.m&&c.o&&Rp(g,c.m,c.o),p=new Dr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),d&&(c.i=d.D.concat(c.i)),d=RI(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xp(c.h,p),Tp(p,g,d)}function Ma(c,d){c.H&&Y(c.H,function(p,g){Se(d,g,p)}),c.l&&pI({},function(p,g){Se(d,g,p)})}function RI(c,d,p){p=Math.min(c.i.length,p);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let R=-1;for(;;){let U=["count="+p];R==-1?0<p?(R=b[0].g,U.push("ofs="+R)):R=0:U.push("ofs="+R);let Ce=!0;for(let dt=0;dt<p;dt++){let we=b[dt].g,yt=b[dt].map;if(we-=R,0>we)R=Math.max(0,b[dt].g-100),Ce=!1;else try{kN(yt,U,"req"+we+"_")}catch{g&&g(yt)}}if(Ce){g=U.join("&");break e}}}return c=c.i.splice(0,p),d.D=c,g}function NI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ha||BE(),fa||(ha(),fa=!0),dp.add(d,c),c.v=0}}function Pp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=_a(m(c.Fa,c),kI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,PI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=_a(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Gc(this),PI(this))};function Op(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function PI(c){c.g=new Dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Kn(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),Ma(c,d),c.m&&c.o&&Rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=qc(Kn(d)),p.m=null,p.P=!0,sI(p,c)}n.Za=function(){this.C!=null&&(this.C=null,Gc(this),Pp(this),bt(19))};function Kc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function OI(c,d){var p=null;if(c.g==d){Kc(c),Op(c),c.g=null;var g=2}else if(Mp(c.h,d))p=d.D,hI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Vc(),Ct(g,new nI(g,p)),Wc(c)}else NI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&jN(c,d)||g==2&&Pp(c)))switch(p&&0<p.length&&(d=c.h,d.i=d.i.concat(p)),b){case 1:gi(c,5);break;case 4:gi(c,10);break;case 3:gi(c,6);break;default:gi(c,2)}}}function kI(c,d){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*d}function gi(c,d){if(c.j.info("Error code "+d),d==2){var p=m(c.fb,c),g=c.Xa;let b=!g;g=new pi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bc(g,"https"),qc(g),b?NN(g.toString(),p):PN(g.toString(),p)}else bt(2);c.G=0,c.l&&c.l.sa(d),FI(c),MI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function FI(c){if(c.G=0,c.ka=[],c.l){let d=fI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function VI(c,d,p){var g=p instanceof pi?Kn(p):new pi(p);if(g.g!="")d&&(g.g=d+"."+g.g),$c(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var R=new pi(null);g&&Bc(R,g),d&&(R.g=d),b&&$c(R,b),p&&(R.l=p),g=R}return p=c.D,d=c.ya,p&&d&&Se(g,p,d),Se(g,"VER",c.la),Ma(c,g),g}function LI(c,d,p){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Be(new ba({eb:p})):new Be(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jI(){}n=jI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qc(){}Qc.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){mt.call(this),this.g=new SI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new wo(this)}D(jt,mt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Np(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=wp(c),c=p);d.i.push(new IN(d.Ya++,c)),d.G==3&&Wc(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,Np(this.g),delete this.g,jt.aa.N.call(this)};function UI(c){Ip.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let p in d){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(UI,Ip);function BI(){Dp.call(this),this.status=1}D(BI,Dp);function wo(c){this.g=c}D(wo,jI),wo.prototype.ua=function(){Ct(this.g,"a")},wo.prototype.ta=function(c){Ct(this.g,new UI(c))},wo.prototype.sa=function(c){Ct(this.g,new BI)},wo.prototype.ra=function(){Ct(this.g,"b")},Qc.prototype.createWebChannel=Qc.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Ov=hr.createWebChannelTransport=function(){return new Qc},Pv=hr.getStatEventTarget=function(){return Vc()},Nv=hr.Event=hi,xh=hr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,ju=hr.ErrorCode=Lc,rI.COMPLETE="complete",Rv=hr.EventType=rI,JE.EventType=ya,ya.OPEN="a",ya.CLOSE="b",ya.ERROR="c",ya.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Es=hr.WebChannel=JE,xv=hr.FetchXmlHttpFactory=ba,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Mv=hr.XhrIo=Be}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});var rS="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var Js="10.13.2";var Xr=new Xc("@firebase/firestore");function Ts(){return Xr.logLevel}function oM(n){Xr.setLogLevel(n)}function O(n,...e){if(Xr.logLevel<=An.DEBUG){let t=e.map(jw);Xr.debug(`Firestore (${Js}): ${n}`,...t)}}function ze(n,...e){if(Xr.logLevel<=An.ERROR){let t=e.map(jw);Xr.error(`Firestore (${Js}): ${n}`,...t)}}function an(n,...e){if(Xr.logLevel<=An.WARN){let t=e.map(jw);Xr.warn(`Firestore (${Js}): ${n}`,...t)}}function jw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: `+n;throw ze(e),new Error(e)}function Q(n,e){n||z()}function sM(n,e){n||z()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends KI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xe=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Bh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},Uv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Bv=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xe)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new Bh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new Je(e)}},$v=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},qv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $v(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Hv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new Hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function FU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var $h=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=FU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function ks(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function aM(n){return n+"\0"}var Ue=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ue(0,0))}static max(){return new n(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var qh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ye=class n extends qh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},VU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ge=class n extends qh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return VU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var Fs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Gv(n){return n.fields.find(e=>e.kind===2)}function Gi(n){return n.fields.filter(e=>e.kind!==2)}Fs.UNKNOWN_ID=-1;var Ns=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Zu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,un.min())}};function uM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new un(i,$.empty(),e)}function cM(n){return new un(n.readTime,n.key,-1)}var un=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),$.empty(),-1)}static max(){return new n(J.max(),$.empty(),-1)}};function Uw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var lM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ci(n){return N(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==lM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var zh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ji(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Bw(r.target.error);this.V.reject(new Ji(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Ji(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Kv(t)}},ei=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(xa())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Jc())return!1;if(n.v())return!0;let e=xa(),t=n.S(e),r=0<t&&t<10,i=dM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Ji(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ji(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=zh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function dM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Wv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wi(this.B.delete())}},Ji=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function li(n){return n.name==="IndexedDbTransactionError"}var Kv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wi(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Wi(this.store.add(e))}get(e){return Wi(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Wi(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Wi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=o=>{let s=Bw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Wv(a),l=t(a.primaryKey,a.value,u);if(l instanceof A){let h=l.catch(f=>(u.done(),A.reject(f)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Wi(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Bw(r.target.error);t(i)}})}var iS=!1;function Bw(n){let e=ei.S(xa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iS||(iS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Qv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){li(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ci(t)}yield this.X(6e4)}))}},Yv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=cM(o);Uw(s,r)>0&&(r=s)}),new un(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Kt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function wc(n){return n==null}function Ju(n){return n===0&&1/n==-1/0}function hM(n){return typeof n=="number"&&Number.isInteger(n)&&!Ju(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oS(e)),e=LU(n.get(t),e);return oS(e)}function LU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function oS(n){return n+""}function Vn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ye(r)}var sS=["userId","batchId"];function kh(n,e){return[n,xt(e)]}function fM(n,e,t){return[n,xt(e),t]}var jU={},UU=["prefixPath","collectionGroup","readTime","documentId"],BU=["prefixPath","collectionGroup","documentId"],$U=["collectionGroup","readTime","prefixPath","documentId"],qU=["canonicalId","targetId"],HU=["targetId","path"],zU=["path","targetId"],GU=["collectionId","parent"],WU=["indexId","uid"],KU=["uid","sequenceNumber"],QU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YU=["indexId","uid","orderedDocumentKey"],ZU=["userId","collectionPath","documentId"],JU=["userId","collectionPath","largestBatchId"],XU=["userId","collectionGroup","largestBatchId"],pM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eB=[...pM,"documentOverlays"],gM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mM=gM,$w=[...mM,"indexConfiguration","indexState","indexEntries"],tB=$w,nB=[...$w,"globals"];var Xu=class extends Hh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ot(n,e){let t=B(n);return ei.F(t._e,e)}function aS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Re=class n{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rs(this.root,e,this.comparator,!0)}},Rs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Te=class n{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gh(this.data.getIterator())}getIteratorFrom(e){return new Gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Is(n){return n.hasNext()?n.getNext():void 0}var Qt=class n{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new n([])}unionWith(e){let t=new Te(Ge.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ks(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function vM(){return typeof atob<"u"}var Ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var rB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(Q(!!n),typeof n=="string"){let e=0,t=rB.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ti(n){return typeof n=="string"?Ke.fromBase64String(n):Ke.fromUint8Array(n)}function Lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function qw(n){let e=n.mapValue.fields.__previous_value__;return Lf(e)?qw(e):e}function ec(n){let e=gr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}var Zv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},ni=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fh={nullValue:"NULL_VALUE"};function Xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lf(n)?4:_M(n)?9007199254740991:jf(n)?10:11:z()}function $n(n,e){if(n===e)return!0;let t=Xi(n);if(t!==Xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ec(n).isEqual(ec(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),a=gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ti(i.bytesValue).isEqual(ti(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Ju(s)===Ju(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ks(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(aS(s)!==aS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!$n(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function tc(n,e){return(n.values||[]).find(t=>$n(t,e))!==void 0}function ri(n,e){if(n===e)return 0;let t=Xi(n),r=Xi(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return uS(n.timestampValue,e.timestampValue);case 4:return uS(ec(n),ec(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ti(o),u=ti(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ne(o.latitude),Ne(s.latitude));return a!==0?a:re(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return cS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let f=o.fields||{},m=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=m.value)===null||u===void 0?void 0:u.arrayValue,S=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:cS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Zr.mapValue&&s===Zr.mapValue)return 0;if(o===Zr.mapValue)return 1;if(s===Zr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){let m=re(u[f],h[f]);if(m!==0)return m;let y=ri(a[u[f]],l[h[f]]);if(y!==0)return y}return re(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function uS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=gr(n),r=gr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function cS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ri(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function Vs(n){return Jv(n)}function Jv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ti(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Jv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Jv(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function eo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xv(n){return!!n&&"integerValue"in n}function nc(n){return!!n&&"arrayValue"in n}function lS(n){return!!n&&"nullValue"in n}function dS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vh(n){return!!n&&"mapValue"in n}function jf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Gu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return lo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _M(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var wM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iB(n){return"nullValue"in n?Fh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?eo(ni.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?jf(n)?wM:{mapValue:{}}:z()}function oB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?eo(ni.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?wM:"mapValue"in n?jf(n)?{mapValue:{}}:Zr:z()}function hS(n,e){let t=ri(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fS(n,e){let t=ri(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Dt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=Ge.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Gu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Gu(this.value))}};function EM(n){let e=[];return lo(n.fields,(t,r)=>{let i=new Ge([t]);if(Vh(r)){let o=EM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Qt(e)}var et=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Dt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Dt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qn=class{constructor(e,t){this.position=e,this.inclusive=t}};function pS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=ri(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function gS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}var to=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Kh=class{},fe=class n extends Kh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new n_(e,t,r):t==="array-contains"?new o_(e,r):t==="in"?new Qh(e,r):t==="not-in"?new s_(e,r):t==="array-contains-any"?new a_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new r_(e,r):new i_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ri(t,this.value)):t!==null&&Xi(this.value)===Xi(t)&&this.matchesComparison(ri(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},De=class n extends Kh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ls(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ls(n){return n.op==="and"}function e_(n){return n.op==="or"}function Hw(n){return IM(n)&&Ls(n)}function IM(n){for(let e of n.filters)if(e instanceof De)return!1;return!0}function t_(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Vs(n.value);if(Hw(n))return n.filters.map(e=>t_(e)).join(",");{let e=n.filters.map(t=>t_(t)).join(",");return`${n.op}(${e})`}}function DM(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(n,e):n instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&DM(s,i.filters[a]),!0):!1}(n,e):void z()}function CM(n,e){let t=n.filters.concat(e);return De.create(t,n.op)}function bM(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Vs(t.value)}`}(n):n instanceof De?function(t){return t.op.toString()+" {"+t.getFilters().map(bM).join(" ,")+"}"}(n):"Filter"}var n_=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},r_=class extends fe{constructor(e,t){super(e,"in",t),this.keys=TM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},i_=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=TM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var o_=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nc(t)&&tc(t.arrayValue,this.value)}},Qh=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&tc(this.value.arrayValue,t)}},s_=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!tc(this.value.arrayValue,t)}},a_=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}};var u_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function c_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new u_(n,e,t,r,i,o,s)}function no(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>t_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vs(r)).join(",")),e.ue=t}return e.ue}function Ec(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gS(n.startAt,e.startAt)&&gS(n.endAt,e.endAt)}function Yh(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zh(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function mS(n,e,t){let r=Fh,i=!0;for(let o of Zh(n,e)){let s=Fh,a=!0;switch(o.op){case"<":case"<=":s=iB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Fh}hS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];hS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function yS(n,e,t){let r=Zr,i=!0;for(let o of Zh(n,e)){let s=Zr,a=!0;switch(o.op){case">=":case">":s=oB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Zr}fS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];fS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Dn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function AM(n,e,t,r,i,o,s,a){return new Dn(n,e,t,r,i,o,s,a)}function Xs(n){return new Dn(n)}function vS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zw(n){return n.collectionGroup!==null}function Ps(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Te(Ge.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new to(o,r))}),t.has(Ge.keyField().canonicalString())||e.ce.push(new to(Ge.keyField(),r))}return e.ce}function Rt(n){let e=B(n);return e.le||(e.le=aB(e,Ps(n))),e.le}function aB(n,e){if(n.limitType==="F")return c_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new to(i.field,o)});let t=n.endAt?new qn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qn(n.startAt.position,n.startAt.inclusive):null;return c_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function l_(n,e){let t=n.filters.concat([e]);return new Dn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jh(n,e,t){return new Dn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ic(n,e){return Ec(Rt(n),Rt(e))&&n.limitType===e.limitType}function SM(n){return`${no(Rt(n))}|lt:${n.limitType}`}function As(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bM(i)).join(", ")}]`),wc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vs(i)).join(",")),`Target(${r})`}(Rt(n))}; limitType=${n.limitType})`}function Dc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ps(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=pS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ps(r),i)||r.endAt&&!function(s,a,u){let l=pS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ps(r),i))}(n,e)}function MM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xM(n){return(e,t)=>{let r=!1;for(let i of Ps(n)){let o=uB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uB(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ri(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Hn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return yM(this.inner)}size(){return this.innerSize}};var cB=new Re($.comparator);function Lt(){return cB}var RM=new Re($.comparator);function Hu(...n){let e=RM;for(let t of n)e=e.insert(t.key,t);return e}function NM(n){let e=RM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ln(){return Wu()}function PM(){return Wu()}function Wu(){return new Hn(n=>n.toString(),(n,e)=>n.isEqual(e))}var lB=new Re($.comparator),dB=new Te($.comparator);function ie(...n){let e=dB;for(let t of n)e=e.add(t);return e}var hB=new Te(re);function Gw(){return hB}function Ww(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function OM(n){return{integerValue:""+n}}function kM(n,e){return hM(e)?OM(e):Ww(n,e)}var js=class{constructor(){this._=void 0}};function fB(n,e,t){return n instanceof ii?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Lf(o)&&(o=qw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof mr?VM(n,e):n instanceof yr?LM(n,e):function(i,o){let s=FM(i,o),a=_S(s)+_S(i.Pe);return Xv(s)&&Xv(i.Pe)?OM(a):Ww(i.serializer,a)}(n,e)}function pB(n,e,t){return n instanceof mr?VM(n,e):n instanceof yr?LM(n,e):t}function FM(n,e){return n instanceof oi?function(r){return Xv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ii=class extends js{},mr=class extends js{constructor(e){super(),this.elements=e}};function VM(n,e){let t=jM(e);for(let r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}var yr=class extends js{constructor(e){super(),this.elements=e}};function LM(n,e){let t=jM(e);for(let r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}var oi=class extends js{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function _S(n){return Ne(n.integerValue||n.doubleValue)}function jM(n){return nc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ro=class{constructor(e,t){this.field=e,this.transform=t}};function gB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mr&&i instanceof mr||r instanceof yr&&i instanceof yr?ks(r.elements,i.elements,$n):r instanceof oi&&i instanceof oi?$n(r.Pe,i.Pe):r instanceof ii&&i instanceof ii}(n.transform,e.transform)}var d_=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Us=class{};function UM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ai(n.key,qe.none()):new si(n.key,n.data,qe.none());{let t=n.data,r=Dt.empty(),i=new Te(Ge.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Cn(n.key,r,new Qt(i.toArray()),qe.none())}}function mB(n,e,t){n instanceof si?function(i,o,s){let a=i.value.clone(),u=ES(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Cn?function(i,o,s){if(!Lh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ES(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(BM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ku(n,e,t,r){return n instanceof si?function(o,s,a,u){if(!Lh(o.precondition,s))return a;let l=o.value.clone(),h=IS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cn?function(o,s,a,u){if(!Lh(o.precondition,s))return a;let l=IS(o.fieldTransforms,u,s),h=s.data;return h.setAll(BM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Lh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function yB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=FM(r.transform,i||null);o!=null&&(t===null&&(t=Dt.empty()),t.set(r.field,o))}return t||null}function wS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ks(r,i,(o,s)=>gB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var si=class extends Us{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cn=class extends Us{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ES(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pB(s,a,t[i]))}return r}function IS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,fB(o,s,e))}return r}var ai=class extends Us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},rc=class extends Us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ic=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&mB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=PM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=UM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&ks(this.mutations,e.mutations,(t,r)=>wS(t,r))&&ks(this.baseMutations,e.baseMutations,(t,r)=>wS(t,r))}},h_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return lB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var oc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var f_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ye,me;function $M(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function qM(n){if(n===void 0)return ze("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ye.OK:return x.OK;case Ye.CANCELLED:return x.CANCELLED;case Ye.UNKNOWN:return x.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return x.INTERNAL;case Ye.UNAVAILABLE:return x.UNAVAILABLE;case Ye.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ye.NOT_FOUND:return x.NOT_FOUND;case Ye.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ye.ABORTED:return x.ABORTED;case Ye.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ye.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(me=Ye||(Ye={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var DS=null;function HM(){return new TextEncoder}var vB=new Gr([4294967295,4294967295],0);function CS(n){let e=HM().encode(n),t=new Sv;return t.update(e),new Uint8Array(t.digest())}function bS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gr([t,r],0),new Gr([i,o],0)]}var p_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zi(`Invalid padding: ${t}`);if(r<0)throw new Zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Gr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Gr.fromNumber(r)));return i.compare(vB)===1&&(i=new Gr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=CS(e),[r,i]=bS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=CS(e),[r,i]=bS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Zi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Re(re),Lt(),ie())}},ac=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var Os=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Xh=class{constructor(e,t){this.targetId=e,this.me=t}},ef=class{constructor(e,t,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},tf=class{constructor(){this.fe=0,this.ge=AS(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new ac(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=AS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},g_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lt(),this.qe=TS(),this.Qe=new Re(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Yh(o))if(r===0){let s=new $(o.path);this.Ue(t,s,et.newNoDocument(s,J.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}DS?.et(function(h,f,m,y,D){var S,M,V,H,F,G;let ee={localCacheCount:h,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},Y=f.unchangedNames;return Y&&(ee.bloomFilter={applied:D===0,hashCount:(S=Y?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(H=(V=(M=Y?.bits)===null||M===void 0?void 0:M.bitmap)===null||V===void 0?void 0:V.length)!==null&&H!==void 0?H:0,padding:(G=(F=Y?.bits)===null||F===void 0?void 0:F.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ti(r).toUint8Array()}catch(u){if(u instanceof Wh)return an("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new p_(s,i,o)}catch(u){return an(u instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Yh(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,et.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new sc(e,t,this.Qe,this.ke,r);return this.ke=Lt(),this.qe=TS(),this.Qe=new Re(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new tf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Te(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function TS(){return new Re($.comparator)}function AS(){return new Re($.comparator)}var _B={asc:"ASCENDING",desc:"DESCENDING"},wB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EB={and:"AND",or:"OR"},m_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function y_(n,e){return n.useProto3Json||wc(e)?e:{value:e}}function Bs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IB(n,e){return Bs(n,e.toTimestamp())}function We(n){return Q(!!n),J.fromTimestamp(function(t){let r=gr(t);return new Ue(r.seconds,r.nanos)}(n))}function Kw(n,e){return v_(n,e).canonicalString()}function v_(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function GM(n){let e=ye.fromString(n);return Q(nx(e)),e}function uc(n,e){return Kw(n.databaseId,e.path)}function Un(n,e){let t=GM(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(QM(t))}function WM(n,e){return Kw(n.databaseId,e)}function KM(n){let e=GM(n);return e.length===4?ye.emptyPath():QM(e)}function __(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QM(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function SS(n,e,t){return{name:uc(n,e),fields:t.value.mapValue.fields}}function YM(n,e,t){let r=Un(n,e.name),i=We(e.updateTime),o=e.createTime?We(e.createTime):J.min(),s=new Dt({mapValue:{fields:e.fields}}),a=et.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function DB(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=Un(r,i.found.name),s=We(i.found.updateTime),a=i.found.createTime?We(i.found.createTime):J.min(),u=new Dt({mapValue:{fields:i.found.fields}});return et.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=Un(r,i.missing),s=We(i.readTime);return et.newNoDocument(o,s)}(n,e):z()}function CB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Q(h===void 0||typeof h=="string"),Ke.fromBase64String(h||"")):(Q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ke.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:qM(l.code);return new P(h,l.message||"")}(s);t=new ef(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Un(n,r.document.name),o=We(r.document.updateTime),s=r.document.createTime?We(r.document.createTime):J.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Os(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Un(n,r.document),o=r.readTime?We(r.readTime):J.min(),s=et.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Os([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Un(n,r.document),o=r.removedTargetIds||[];t=new Os([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new f_(i,o),a=r.targetId;t=new Xh(a,s)}}return t}function cc(n,e){let t;if(e instanceof si)t={update:SS(n,e.key,e.value)};else if(e instanceof ai)t={delete:uc(n,e.key)};else if(e instanceof Cn)t={update:SS(n,e.key,e.data),updateMask:xB(e.fieldMask)};else{if(!(e instanceof rc))return z();t={verify:uc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ii)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:IB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function w_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(We(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new ii;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new mr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new yr(h)}else"increment"in a?u=new oi(s,a.increment):z();let l=Ge.fromServerFormat(a.fieldPath);return new ro(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Un(n,e.update.name),o=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Qt(l.map(h=>Ge.fromServerFormat(h)))}(e.updateMask);return new Cn(i,o,s,t,r)}return new si(i,o,t,r)}if(e.delete){let i=Un(n,e.delete);return new ai(i,t)}if(e.verify){let i=Un(n,e.verify);return new rc(i,t)}return z()}function bB(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?We(i.updateTime):We(o);return s.isEqual(J.min())&&(s=We(o)),new d_(s,i.transformResults||[])}(t,e))):[]}function ZM(n,e){return{documents:[WM(n,e.path)]}}function JM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=WM(n,i);let o=function(l){if(l.length!==0)return tx(De.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ss(m.field),direction:AB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=y_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function XM(n){let e=KM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(f){let m=ex(f);return m instanceof De&&Hw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(D){return new to(Ms(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,wc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(f){let m=!!f.before,y=f.values||[];return new qn(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let m=!f.before,y=f.values||[];return new qn(y,m)}(t.endAt)),AM(e,i,s,o,a,"F",u,l)}function TB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ex(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ms(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ms(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ms(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ms(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(Ms(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return De.create(t.compositeFilter.filters.map(r=>ex(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function AB(n){return _B[n]}function SB(n){return wB[n]}function MB(n){return EB[n]}function Ss(n){return{fieldPath:n.canonicalString()}}function Ms(n){return Ge.fromServerFormat(n.fieldPath)}function tx(n){return n instanceof fe?function(t){if(t.op==="=="){if(dS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NAN"}};if(lS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NAN"}};if(lS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(t.field),op:SB(t.op),value:t.value}}}(n):n instanceof De?function(t){let r=t.getFilters().map(i=>tx(i));return r.length===1?r[0]:{compositeFilter:{op:MB(t.op),filters:r}}}(n):z()}function xB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var $s=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nf=class{constructor(e){this.ct=e}};function RB(n,e){let t;if(e.document)t=YM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=oo(e.noDocument.readTime);t=et.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=oo(e.unknownDocument.version);t=et.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ue(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),t}function MS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:uc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Bs(o,s.version.toTimestamp()),createTime:Bs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:io(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:io(e.version)}}return r}function rf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function io(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function oo(n){let e=new Ue(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function Ki(n,e){let t=(e.baseMutations||[]).map(o=>w_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>w_(n.ct,o)),i=Ue.fromMillis(e.localWriteTimeMs);return new ic(e.batchId,i,t,r)}function zu(n){let e=oo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?oo(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),Rt(Xs(KM(o.documents[0])))}(n.query):function(o){return Rt(XM(o))}(n.query),new $s(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ke.fromBase64String(n.resumeToken))}function rx(n,e){let t=io(e.snapshotVersion),r=io(e.lastLimboFreeSnapshotVersion),i;i=Yh(e.target)?ZM(n.ct,e.target):JM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:no(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qw(n){let e=XM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jh(e,e.limit,"L"):e}function kv(n,e){return new oc(e.largestBatchId,w_(n.ct,e.overlayMutation))}function xS(n,e){let t=e.path.lastSegment();return[n,xt(e.path.popLast()),t]}function RS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:io(r.readTime),documentKey:xt(r.documentKey.path),largestBatchId:r.largestBatchId}}var E_=class{getBundleMetadata(e,t){return NS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:oo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return NS(e).put(function(i){return{bundleId:i.id,createTime:io(We(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return PS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Qw(o.bundledQuery),readTime:oo(o.readTime)}}(r)})}saveNamedQuery(e,t){return PS(e).put(function(i){return{name:i.name,readTime:io(We(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function NS(n){return ot(n,"bundles")}function PS(n){return ot(n,"namedQueries")}var of=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Uu(e).get(xS(this.userId,t)).next(r=>r?kv(this.serializer,r):null)}getOverlays(e,t){let r=Ln();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new oc(t,s);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(xt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Uu(e).j("collectionPathOverlayIndex",a))}),A.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Ln(),o=xt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Uu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=kv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Ln(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Uu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let f=kv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Uu(e).put(function(i,o,s){let[a,u,l]=xS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:cc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Uu(n){return ot(n,"documentOverlays")}var I_=class{Pt(e){return ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ke.fromUint8Array(r):Ke.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var fr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ju(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=gr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ti(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?_M(e)?this.dt(t,Number.MAX_SAFE_INTEGER):jf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ne(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};fr.vt=new fr;function NB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function OS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=NB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var D_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=OS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=OS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},C_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},b_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Qi=class{constructor(){this.jt=new D_,this.Ht=new C_(this.jt),this.Jt=new b_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Yi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Wr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=kS(n.arrayValue,e.arrayValue),t!==0?t:(t=kS(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function kS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var sf=class{constructor(e){this.Xt=new Te((t,r)=>Ge.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Gv(e);if(t!==void 0&&!this.sn(t))return!1;let r=Gi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Te(Ge.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ns(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ns(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ns(r.field,r.dir==="asc"?0:1)));return new Fs(Fs.UNKNOWN_ID,this.collectionId,t,Zu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function ix(n){var e,t;if(Q(n instanceof fe||n instanceof De),n instanceof fe){if(n instanceof Qh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return De.create(i,"or")}return n}let r=n.filters.map(i=>ix(i));return De.create(r,n.op)}function PB(n){if(n.getFilters().length===0)return[];let e=S_(ix(n));return Q(ox(e)),T_(e)||A_(e)?[e]:e.getFilters()}function T_(n){return n instanceof fe}function A_(n){return n instanceof De&&Hw(n)}function ox(n){return T_(n)||A_(n)||function(t){if(t instanceof De&&e_(t)){for(let r of t.getFilters())if(!T_(r)&&!A_(r))return!1;return!0}return!1}(n)}function S_(n){if(Q(n instanceof fe||n instanceof De),n instanceof fe)return n;if(n.filters.length===1)return S_(n.filters[0]);let e=n.filters.map(r=>S_(r)),t=De.create(e,n.op);return t=af(t),ox(t)?t:(Q(t instanceof De),Q(Ls(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>Yw(r,i)))}function Yw(n,e){let t;return Q(n instanceof fe||n instanceof De),Q(e instanceof fe||e instanceof De),t=n instanceof fe?e instanceof fe?function(i,o){return De.create([i,o],"and")}(n,e):FS(n,e):e instanceof fe?FS(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),Ls(i)&&Ls(o))return CM(i,o.getFilters());let s=e_(i)?i:o,a=e_(i)?o:i,u=s.filters.map(l=>Yw(l,a));return De.create(u,"or")}(n,e),af(t)}function FS(n,e){if(Ls(e))return CM(e,n.getFilters());{let t=e.filters.map(r=>Yw(n,r));return De.create(t,"or")}}function af(n){if(Q(n instanceof fe||n instanceof De),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return af(e[0]);if(IM(n))return n;let t=e.map(i=>af(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof De&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,n.op)}var M_=class{constructor(){this.un=new lc}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(un.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(un.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},lc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Te(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Te(ye.comparator)).toArray()}};var Rh=new Uint8Array(0),x_=class{constructor(e,t){this.databaseId=t,this.cn=new lc,this.ln=new Hn(r=>no(r),(r,i)=>Ec(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:xt(i)};return VS(e).put(o)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[aM(t),""],!1,!0);return VS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Vn(s.parent))}return r})}addFieldIndex(e,t){let r=Bu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Cs(e);return o.next(a=>{s.put(RS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Bu(e),i=Cs(e),o=Ds(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Bu(e),r=Ds(e),i=Cs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new sf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ds(e),i=!0,o=new Map;return A.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return A.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(u)} to execute ${no(t)}`);let h=function(F,G){let ee=Gv(G);if(ee===void 0)return null;for(let Y of Zh(F,ee.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,u),f=function(F,G){let ee=new Map;for(let Y of Gi(G))for(let E of Zh(F,Y.fieldPath))switch(E.op){case"==":case"in":ee.set(Y.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ee.set(Y.fieldPath.canonicalString(),E.value),Array.from(ee.values())}return null}(l,u),m=function(F,G){let ee=[],Y=!0;for(let E of Gi(G)){let v=E.kind===0?mS(F,E.fieldPath,F.startAt):yS(F,E.fieldPath,F.startAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new qn(ee,Y)}(l,u),y=function(F,G){let ee=[],Y=!0;for(let E of Gi(G)){let v=E.kind===0?yS(F,E.fieldPath,F.endAt):mS(F,E.fieldPath,F.endAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new qn(ee,Y)}(l,u),D=this.In(u,l,m),S=this.In(u,l,y),M=this.Tn(u,l,f),V=this.En(u.indexId,h,D,m.inclusive,S,y.inclusive,M);return A.forEach(V,H=>r.G(H,t.limit).next(F=>{F.forEach(G=>{let ee=$.fromSegments(G.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=PB(De.create(e.filters,"and")).map(r=>c_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let f=0;f<u;++f){let m=t?this.dn(t[f/l]):Rh,y=this.An(e,m,r[f%l],i),D=this.Rn(e,m,o[f%l],s),S=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,D,S))}return h}An(e,t,r,i){let o=new Yi(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Yi(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new sf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Te(Ge.comparator),h=!1;for(let f of u.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Qi;for(let i of Gi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);fr.vt.It(o,s)}return r.zt()}dn(e){let t=new Qi;return fr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Qi;return fr.vt.It(eo(this.databaseId,t),r.Yt(function(o){let s=Gi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Qi);let o=0;for(let s of Gi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&nc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);fr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Qi;u.seed(a.zt()),fr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Bu(e),i=Cs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,f){let m=f?new Zu(f.sequenceNumber,new un(oo(f.readTime),new $(Vn(f.documentKey)),f.largestBatchId)):Zu.empty(),y=h.fields.map(([D,S])=>new Ns(Ge.fromServerFormat(D),S));return new Fs(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Bu(e),o=Cs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,u=>o.put(RS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?A.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Ds(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ds(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ds(e),o=new Te(Wr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Yi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Te(Wr),i=this.Vn(t,e);if(i==null)return r;let o=Gv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(nc(s))for(let a of s.arrayValue.values||[])r=r.add(new Yi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Yi(t.indexId,e.key,Rh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,f,m){let y=u.getIterator(),D=l.getIterator(),S=Is(y),M=Is(D);for(;S||M;){let V=!1,H=!1;if(S&&M){let F=h(S,M);F<0?H=!0:F>0&&(V=!0)}else S!=null?H=!0:V=!0;V?(f(M),M=Is(D)):H?(m(S),S=Is(y)):(S=Is(y),M=Is(D))}}(i,o,Wr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),A.waitFor(s)}yn(e){let t=1;return Cs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Wr(s,a)).filter((s,a,u)=>!a||Wr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Wr(s,e),u=Wr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Rh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Rh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Wr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(LS)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(LS)}};function VS(n){return ot(n,"collectionParents")}function Ds(n){return ot(n,"indexEntries")}function Bu(n){return ot(n,"indexConfiguration")}function Cs(n){return ot(n,"indexState")}function LS(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Uw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new un(e.readTime,e.documentKey,t)}var jS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function sx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,f,m)=>(a++,m.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let h of t.mutations){let f=fM(e,h.key.path,t.batchId);o.push(i.delete(f)),l.push(h.key)}return A.waitFor(o).next(()=>l)}function uf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);var cf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=xs(e),s=Kr(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new ic(a,t,r,i),l=function(y,D,S){let M=S.baseMutations.map(H=>cc(y.ct,H)),V=S.mutations.map(H=>cc(y.ct,H));return{userId:D,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:M,mutations:V}}(this.serializer,this.userId,u),h=[],f=new Te((m,y)=>re(m.canonicalString(),y.canonicalString()));for(let m of i){let y=fM(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,jU))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),A.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Kr(e).get(t).next(r=>r?(Q(r.userId===this.userId),Ki(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Kr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=Ki(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Kr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ki(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=kh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return xs(e).J({range:i},(s,a,u)=>{let[l,h,f]=s,m=Vn(h);if(l===this.userId&&t.path.isEqual(m))return Kr(e).get(f).next(y=>{if(!y)throw z();Q(y.userId===this.userId),o.push(Ki(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(re),i=[];return t.forEach(o=>{let s=kh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=xs(e).J({range:a},(l,h,f)=>{let[m,y,D]=l,S=Vn(y);m===this.userId&&o.path.isEqual(S)?r=r.add(D):f.done()});i.push(u)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=kh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Te(re);return xs(e).J({range:s},(u,l,h)=>{let[f,m,y]=u,D=Vn(m);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Kr(e).get(o).next(s=>{if(s===null)throw z();Q(s.userId===this.userId),r.push(Ki(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return xs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Vn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return ax(e,this.userId,t)}Nn(e){return ux(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function ax(n,e,t){let r=kh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return xs(n).J({range:o,H:!0},(a,u,l)=>{let[h,f,m]=a;h===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Kr(n){return ot(n,"mutations")}function xs(n){return ot(n,"documentMutations")}function ux(n){return ot(n,"mutationQueues")}var qs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var R_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new qs(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>J.fromTimestamp(new Ue(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return bs(e).J((s,a)=>{let u=zu(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,t){return bs(e).J((r,i)=>{let o=zu(i);t(o)})}qn(e){return US(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return US(e).put("targetGlobalKey",t)}Kn(e,t){return bs(e).put(rx(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=no(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return bs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=zu(a);Ec(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Qr(e);return t.forEach(s=>{let a=xt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=Qr(e);return A.forEach(t,o=>{let s=xt(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Qr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qr(e),o=ie();return i.J({range:r,H:!0},(s,a,u)=>{let l=Vn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=xt(t.path),i=IDBKeyRange.bound([r],[aM(r)],!1,!0),o=0;return Qr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return bs(e).get(t).next(r=>r?zu(r):null)}};function bs(n){return ot(n,"targets")}function US(n){return ot(n,"targetGlobal")}function Qr(n){return ot(n,"targetDocuments")}function BS([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var N_=class{constructor(e){this.Un=e,this.buffer=new Te(BS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();BS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},P_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){li(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ci(t)}yield this.Hn(3e5)}))}},O_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(Kt.oe);let r=new N_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(jS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Ts()<=An.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function OB(n,e){return new O_(n,e)}var k_=class{constructor(e,t){this.db=e,this.garbageCollector=OB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Nh(e,r)}removeReference(e,t,r){return Nh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nh(e,t)}nr(e,t){return function(i,o){let s=!1;return ux(i).Y(a=>ax(i,a,o).next(u=>(u&&(s=!0),A.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),Qr(e).delete(function(f){return[0,xt(f.path)]}(s))))});i.push(u)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nh(e,t)}tr(e,t){let r=Qr(e),i,o=Kt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Kt.oe&&t(new $(Vn(i)),o),o=l,i=u):o=Kt.oe}).next(()=>{o!==Kt.oe&&t(new $(Vn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Nh(n,e){return Qr(n).put(function(r,i){return{targetId:0,path:xt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var lf=class{constructor(){this.changes=new Hn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var F_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zi(e).put(r)}removeEntry(e,t,r){return zi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],rf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=et.newInvalidDocument(t);return zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($u(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:et.newInvalidDocument(t)};return zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($u(t))},(i,o)=>{r={document:this.ir(t,o),size:uf(o)}}).next(()=>r)}getEntries(e,t){let r=Lt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Lt(),i=new Re($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,uf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new Te(HS);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound($u(i.first()),$u(i.last())),s=i.getIterator(),a=s.getNext();return zi(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&HS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$($u(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Lt();for(let f of l){let m=this.ir($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Dc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Lt(),s=qS(t,r),a=qS(t,un.max());return zi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let f=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new V_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $S(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return $S(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=RB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return et.newInvalidDocument(e)}};function cx(n){return new F_(n)}var V_=class extends lf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Hn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Te((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=MS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=uf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=MS(this.cr.serializer,s.convertToNoDocument(J.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function $S(n){return ot(n,"remoteDocumentGlobal")}function zi(n){return ot(n,"remoteDocumentsV14")}function $u(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qS(n,e){let t=e.documentKey.path.toArray();return[n,rf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var L_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var df=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ku(r.mutation,i,Qt.empty(),Ue.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Ln();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Hu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ln();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Lt(),s=Wu(),a=function(){return Wu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Cn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ku(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):s.set(l.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var f;return a.set(l,new L_(h,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Wu(),i=new Re((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let f=(i.get(a.batchId)||ie()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,f=PM();h.forEach(m=>{if(!o.has(m)){let y=UM(t.get(m),r.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(Ln()),a=-1,u=o;return s.next(l=>A.forEach(l,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(h=>({batchId:a,changes:NM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Hu();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,u=>{let l=function(f,m){return new Dn(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,et.newInvalidDocument(h)))});let a=Hu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ku(h.mutation,l,Qt.empty(),Ue.now()),Dc(t,l)&&(a=a.insert(u,l))}),a})}};var j_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:We(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Qw(i.bundledQuery),readTime:We(i.readTime)}}(t)),A.resolve()}};var U_=class{constructor(){this.overlays=new Re($.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ln();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=Ln(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Re((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ln(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ln(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new oc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var B_=class{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var dc=class{constructor(){this.Tr=new Te(Ze.Er),this.dr=new Te(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ze(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ze(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ye([])),r=new Ze(t,e),i=new Ze(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ye([])),r=new Ze(t,e),i=new Ze(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ze(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ze=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var $_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Te(Ze.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ic(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ze(t,0),i=new Ze(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(re);return t.forEach(i=>{let o=new Ze(i,0),s=new Ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ze(new $(o),0),a=new Te(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let o=new Ze(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ze(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var q_=class{constructor(e){this.Mr=e,this.docs=function(){return new Re($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():et.newInvalidDocument(t))}getEntries(e,t){let r=Lt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():et.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Lt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Uw(cM(h),r)<=0||(i.has(h.key)||Dc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new H_(this)}getSize(e){return A.resolve(this.size)}},H_=class extends lf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var z_=class{constructor(e){this.persistence=e,this.Nr=new Hn(t=>no(t),Ec),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dc,this.targetCount=0,this.kr=qs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new qs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var hf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Kt(0),this.Kr=!1,this.Kr=!0,this.$r=new B_,this.referenceDelegate=e(this),this.Ur=new z_(this),this.indexManager=new M_,this.remoteDocumentCache=function(i){return new q_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new nf(t),this.Gr=new j_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new $_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new G_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},G_=class extends Hh{constructor(e){super(),this.currentSequenceNumber=e}},ff=class n{constructor(e){this.persistence=e,this.Jr=new dc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var W_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new zh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sS,{unique:!0}),u.createObjectStore("documentMutations")}(e),zS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),zS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sS,{unique:!0});let f=l.store("mutations"),m=h.map(y=>f.put(y));return A.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:ZU});l.createIndex("collectionPathOverlayIndex",JU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",XU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:UU});l.createIndex("documentKeyIndex",BU),l.createIndex("collectionGroupIndex",$U)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:WU}).createIndex("sequenceNumberIndex",KU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:QU}).createIndex("documentKeyIndex",YU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=uf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>A.forEach(a,u=>{Q(u.userId===o.userId);let l=Ki(this.serializer,u);return sx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ye(s),l=function(f){return[0,xt(f)]}(u);o.push(t.get(l).next(h=>h?A.resolve():(f=>t.put({targetId:0,path:xt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>A.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:GU});let r=t.store("collectionParents"),i=new lc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:xt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ye(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Vn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=zu(i),s=rx(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new $(ye.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=cx(this.serializer),o=new hf(ff.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ie();Ki(this.serializer,u).keys().forEach(f=>h=h.add(f)),a.set(u.userId,h)}),A.forEach(a,(u,l)=>{let h=new Je(l),f=of.lt(this.serializer,h),m=o.getIndexManager(h),y=cf.lt(h,this.serializer,m,o.referenceDelegate);return new df(i,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Xu(t,Kt.oe),u).next()})})}};function zS(n){n.createObjectStore("targetDocuments",{keyPath:HU}).createIndex("documentTargetsIndex",zU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qU,{unique:!0}),n.createObjectStore("targetGlobal")}var Fv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",K_=class n{constructor(e,t,r,i,o,s,a,u,l,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k_(this,i),this.Ai=t+"main",this.serializer=new nf(u),this.Ri=new ei(this.Ai,this.hi,new W_(this.serializer)),this.$r=new I_,this.Ur=new R_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cx(this.serializer),this.Gr=new E_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Fv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Kt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ph(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(li(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return qu(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return Ph(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ot(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):qu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Fv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ph(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Xu(e,Kt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ph(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return cf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new x_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return of.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?nB:u===16?tB:u===15?$w:u===14?mM:u===13?gM:u===12?eB:u===11?pM:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Xu(a,this.Qr?this.Qr.next():Kt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,lM);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return qu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Fv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qu(e).put("owner",t)}static D(){return ei.D()}bi(e){let t=qu(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Lp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function qu(n){return ot(n,"owner")}function Ph(n){return ot(n,"clientMetadata")}function Zw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Q_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Y_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Lp()?8:dM(xa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Y_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ts()<=An.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",As(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(Ts()<=An.DEBUG&&O("QueryEngine","Query:",As(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ts()<=An.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",As(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rt(t))):A.resolve())}Yi(e,t){if(vS(t))return A.resolve(null);let r=Rt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Jh(t,null,"F"),r=Rt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Jh(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return vS(t)||i.isEqual(J.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?A.resolve(null):(Ts()<=An.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),As(t)),this.rs(e,s,t,uM(i,-1)).next(a=>a))})}ts(e,t){let r=new Te(xM(e));return t.forEach((i,o)=>{Dc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ts()<=An.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",As(t)),this.Ji.getDocumentsMatchingQuery(e,t,un.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Z_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Re(re),this._s=new Hn(o=>no(o),Ec),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new df(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function lx(n,e,t,r){return new Z_(n,e,t,r)}function dx(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function kB(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let f=l.batch,m=f.keys(),y=A.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(S=>{let M=l.docVersions.get(D);Q(M!==null),S.version.compareTo(M)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function hx(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function FB(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,f)=>{let m=i.get(f);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ke.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(S,M,V){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=Lt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(fx(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(J.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function fx(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Lt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function VB(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hs(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new $s(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function zs(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!li(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function gf(n,e,t){let r=B(n),i=J.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let f=B(u),m=f._s.get(h);return m!==void 0?A.resolve(f.os.get(m)):f.Ur.getTargetData(l,h)}(r,s,Rt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:ie())).next(a=>(mx(r,MM(e),a),{documents:a,Ts:o})))}function px(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function gx(n,e){let t=B(n),r=t.us.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,uM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(mx(t,e,i),i))}function mx(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function LB(n,e,t,r){return N(this,null,function*(){let i=B(n),o=ie(),s=Lt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Hs(i,function(h){return Rt(Xs(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>fx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function jB(r,i){return N(this,arguments,function*(n,e,t=ie()){let o=yield Hs(n,Rt(Qw(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=We(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ke.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function GS(n,e){return`firestore_clients_${n}_${e}`}function WS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Vv(n,e){return`firestore_targets_${n}_${e}`}var mf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Qu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Gw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=hM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},J_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},hc=class{constructor(){this.activeTargetIds=Gw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Yu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Re(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=GS(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new hc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(GS(this.persistenceKey,r));if(i){let o=yf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Vv(this.persistenceKey,e));if(i){let o=Qu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Kt.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Kt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new mf(this.currentUser,e,t,r),o=WS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=WS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Vv(this.persistenceKey,e),o=new Qu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return yf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return mf.Rs(new Je(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Qu.Rs(i,t)}Ls(e){return J_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Gw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},vf=class{constructor(){this.so=new hc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var X_=class{_o(e){}shutdown(){}};var _f=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Oh=null;function Lv(){return Oh===null?Oh=function(){return 268435456+Math.round(2147483648*Math.random())}():Oh++,"0x"+Oh.toString(16)}var UB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ew=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var It="WebChannelConnection",tw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Lv(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw an("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=UB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Lv();return new Promise((s,a)=>{let u=new Mv;u.setWithCredentials(!0),u.listenOnce(Rv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ju.NO_ERROR:let h=u.getResponseJson();O(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case ju.TIMEOUT:O(It,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:let f=u.getStatus();if(O(It,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(M){let V=M.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(V)>=0?V:x.UNKNOWN}(y.status);a(new P(D,y.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{O(It,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(It,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Lv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ov(),a=Pv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new xv({})),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(It,`Creating RPC '${e}' stream ${i}: ${h}`,u);let f=s.createWebChannel(h,u),m=!1,y=!1,D=new ew({Io:M=>{y?O(It,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(O(It,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),O(It,`RPC '${e}' stream ${i} sending:`,M),f.send(M))},To:()=>f.close()}),S=(M,V,H)=>{M.listen(V,F=>{try{H(F)}catch(G){setTimeout(()=>{throw G},0)}})};return S(f,Es.EventType.OPEN,()=>{y||(O(It,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),S(f,Es.EventType.CLOSE,()=>{y||(y=!0,O(It,`RPC '${e}' stream ${i} transport closed`),D.So())}),S(f,Es.EventType.ERROR,M=>{y||(y=!0,an(It,`RPC '${e}' stream ${i} transport errored:`,M),D.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),S(f,Es.EventType.MESSAGE,M=>{var V;if(!y){let H=M.data[0];Q(!!H);let F=H,G=F.error||((V=F[0])===null||V===void 0?void 0:V.error);if(G){O(It,`RPC '${e}' stream ${i} received error:`,G);let ee=G.status,Y=function(w){let I=Ye[w];if(I!==void 0)return qM(I)}(ee),E=G.message;Y===void 0&&(Y=x.INTERNAL,E="Unknown error status: "+ee+" with message "+G.message),y=!0,D.So(new P(Y,E)),f.close()}else O(It,`RPC '${e}' stream ${i} received:`,H),D.bo(H)}}),S(a,Nv.STAT_EVENT,M=>{M.stat===xh.PROXY?O(It,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===xh.NOPROXY&&O(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function yx(){return typeof window<"u"?window:null}function jh(){return typeof document<"u"?document:null}function Cc(n){return new m_(n,!0)}var fc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var wf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(ze(t.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nw=class extends wf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=CB(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?We(s.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=__(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Yh(u)?{documents:ZM(o,u)}:{query:JM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=zM(o,s.resumeToken);let l=y_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Bs(o,s.snapshotVersion.toTimestamp());let l=y_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=TB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=__(this.serializer),t.removeTarget=e,this.a_(t)}},rw=class extends wf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=bB(e.writeResults,e.commitTime),r=We(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=__(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>cc(this.serializer,r))};this.a_(t)}};var iw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,v_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,v_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ow=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ze(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var sw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){di(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.L_.add(4),yield ea(l),l.q_.set("Unknown"),l.L_.delete(4),yield bc(l)})}(this))}))}),this.q_=new ow(r,i)}};function bc(n){return N(this,null,function*(){if(di(n))for(let e of n.B_)yield e(!0)})}function ea(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Uf(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),eE(t)?Xw(t):na(t).r_()&&Jw(t,e))}function Gs(n,e){let t=B(n),r=na(t);t.N_.delete(e),r.r_()&&vx(t,e),t.N_.size===0&&(r.r_()?r.o_():di(t)&&t.q_.set("Unknown"))}function Jw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}na(n).A_(e)}function vx(n,e){n.Q_.xe(e),na(n).R_(e)}function Xw(n){n.Q_=new g_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),na(n).start(),n.q_.v_()}function eE(n){return di(n)&&!na(n).n_()&&n.N_.size>0}function di(n){return B(n).L_.size===0}function _x(n){n.Q_=void 0}function BB(n){return N(this,null,function*(){n.q_.set("Online")})}function $B(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{Jw(n,e)})})}function qB(n,e){return N(this,null,function*(){_x(n),eE(n)?(n.q_.M_(e),Xw(n)):n.q_.set("Unknown")})}function HB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof ef&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ef(n,r)}else if(e instanceof Os?n.Q_.Ke(e):e instanceof Xh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield hx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ke.EMPTY_BYTE_STRING,h.snapshotVersion)),vx(o,u);let f=new $s(h.target,u,l,h.sequenceNumber);Jw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Ef(n,r)}})}function Ef(n,e,t){return N(this,null,function*(){if(!li(e))throw e;n.L_.add(1),yield ea(n),n.q_.set("Offline"),t||(t=()=>hx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield bc(n)}))})}function wx(n,e){return e().catch(t=>Ef(n,t,e))}function ta(n){return N(this,null,function*(){let e=B(n),t=ui(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zB(e);)try{let i=yield VB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GB(e,i)}catch(i){yield Ef(e,i)}Ex(e)&&Ix(e)})}function zB(n){return di(n)&&n.O_.length<10}function GB(n,e){n.O_.push(e);let t=ui(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Ex(n){return di(n)&&!ui(n).n_()&&n.O_.length>0}function Ix(n){ui(n).start()}function WB(n){return N(this,null,function*(){ui(n).p_()})}function KB(n){return N(this,null,function*(){let e=ui(n);for(let t of n.O_)e.m_(t.mutations)})}function QB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=h_.from(r,e,t);yield wx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ta(n)})}function YB(n,e){return N(this,null,function*(){e&&ui(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return $M(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();ui(r).s_(),yield wx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ta(r)}})}(n,e)),Ex(n)&&Ix(n)})}function KS(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=di(t);t.L_.add(3),yield ea(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield bc(t)})}function aw(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield bc(t)):e||(t.L_.add(2),yield ea(t),t.q_.set("Unknown"))})}function na(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new nw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BB.bind(null,n),Ro:$B.bind(null,n),mo:qB.bind(null,n),d_:HB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),eE(n)?Xw(n):n.q_.set("Unknown")):(yield n.K_.stop(),_x(n))}))),n.K_}function ui(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new rw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WB.bind(null,n),mo:YB.bind(null,n),f_:KB.bind(null,n),g_:QB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield ta(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var uw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ra(n,e){if(ze("AsyncQueue",`${e}: ${n}`),li(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var If=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Hu(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Df=class{constructor(){this.W_=new Re($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ws=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,If.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var cw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},lw=class{constructor(){this.queries=QS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=QS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function QS(){return new Hn(n=>SM(n),Ic)}function tE(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new cw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ra(s,`Initialization of query '${As(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&rE(t)})}function nE(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZB(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&rE(t)}function JB(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function rE(n){n.Y_.forEach(e=>{e.next()})}var dw,YS;(YS=dw||(dw={})).ea="default",YS.Cache="cache";var pc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dw.Cache}};var hw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Cf=class{constructor(e){this.serializer=e}Es(e){return Un(this.serializer,e)}ds(e){return e.metadata.exists?YM(this.serializer,e.document,!1):et.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return We(e)}},fw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Cf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield LB(this.localStore,new Cf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield jB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function Dx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var bf=class{constructor(e){this.key=e}},Tf=class{constructor(e){this.key=e}},Af=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=xM(e),this.Ra=new If(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Df,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{let m=i.get(h),y=Dc(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?D!==S&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,f)=>function(y,D){let S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return S(y)-S(D)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ws(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Df,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Tf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new bf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ws.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},pw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},gw=class{constructor(e){this.key=e,this.va=!1}},mw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Hn(a=>SM(a),Ic),this.Ma=new Map,this.xa=new Set,this.Oa=new Re($.comparator),this.Na=new Map,this.La=new dc,this.Ba={},this.ka=new Map,this.qa=qs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function XB(n,e,t=!0){return N(this,null,function*(){let r=Bf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Cx(r,e,t,!0),i})}function e$(n,e){return N(this,null,function*(){let t=Bf(n);yield Cx(t,e,!0,!1)})}function Cx(n,e,t,r){return N(this,null,function*(){let i=yield Hs(n.localStore,Rt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield iE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Uf(n.remoteStore,i),a})}function iE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,m,y)=>function(S,M,V,H){return N(this,null,function*(){let F=M.view.ma(V);F.ns&&(F=yield gf(S.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,F)));let G=H&&H.targetChanges.get(M.targetId),ee=H&&H.targetMismatches.get(M.targetId)!=null,Y=M.view.applyChanges(F,S.isPrimaryClient,G,ee);return yw(S,M.targetId,Y.wa),Y.snapshot})}(n,f,m,y);let o=yield gf(n.localStore,e,!0),s=new Af(e,o.Ts),a=s.ma(o.documents),u=ac.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);yw(n,t,l.wa);let h=new pw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function t$(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Ic(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Gs(r.remoteStore,i.targetId),Ks(r,i.targetId)}).catch(ci))):(Ks(r,i.targetId),yield zs(r.localStore,i.targetId,!0))})}function n$(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gs(t.remoteStore,r.targetId))})}function r$(n,e,t){return N(this,null,function*(){let r=uE(n);try{let i=yield function(s,a){let u=B(s),l=Ue.now(),h=a.reduce((y,D)=>y.add(D.key),ie()),f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Lt(),S=ie();return u.cs.getEntries(y,h).next(M=>{D=M,D.forEach((V,H)=>{H.isValidDocument()||(S=S.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{f=M;let V=[];for(let H of a){let F=yB(H,f.get(H.key).overlayedDocument);F!=null&&V.push(new Cn(H.key,F,EM(F.value.mapValue),qe.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(M=>{m=M;let V=M.applyToLocalDocumentSet(f,S);return u.documentOverlayCache.saveOverlays(y,M.batchId,V)})}).then(()=>({batchId:m.batchId,changes:NM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Re(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield wr(r,i.changes),yield ta(r.remoteStore)}catch(i){let o=ra(i,"Failed to persist write");t.reject(o)}})}function bx(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield FB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield wr(t,r,e)}catch(r){yield ci(r)}})}function ZS(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((h,f)=>{for(let m of f.j_)m.Z_(a)&&(l=!0)}),l&&rE(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i$(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Re($.comparator);s=s.insert(o,et.newNoDocument(o,J.min()));let a=ie().add(o),u=new sc(J.min(),new Map,new Re(re),s,a);yield bx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),aE(r)}else yield zs(r.localStore,e,!1).then(()=>Ks(r,e,t)).catch(ci)})}function o$(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield kB(t.localStore,e);sE(t,r,null),oE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wr(t,i)}catch(i){yield ci(i)}})}function s$(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Q(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);sE(r,e,t),oE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wr(r,i)}catch(i){yield ci(i)}})}function a$(n,e){return N(this,null,function*(){let t=B(n);di(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ra(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function oE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function sE(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ks(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Tx(n,r)})}function Tx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Gs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),aE(n))}function yw(n,e,t){for(let r of t)r instanceof bf?(n.La.addReference(r.key,e),u$(n,r)):r instanceof Tf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Tx(n,r.key)):z()}function u$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),aE(n))}function aE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ye.fromString(e)),r=n.qa.next();n.Na.set(r,new gw(t)),n.Oa=n.Oa.insert(t,r),Uf(n.remoteStore,new $s(Rt(Xs(t.path)),r,"TargetPurposeLimboResolution",Kt.oe))}}function wr(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Q_.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=B(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>A.forEach(l,m=>A.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>A.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!li(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let y=h.os.get(m),D=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,S)}}})}(r.localStore,o))})}function c$(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield dx(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wr(t,r.hs)}})}function l$(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function d$(n,e){return N(this,null,function*(){let t=B(n),r=yield gf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&yw(t,e.targetId,i.wa),i})}function h$(n,e){return N(this,null,function*(){let t=B(n);return gx(t.localStore,e).then(r=>wr(t,r))})}function f$(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,u).next(m=>m?l.localDocuments.getDocuments(f,m):A.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ta(i.remoteStore):t==="acknowledged"||t==="rejected"?(sE(i,e,r||null),oE(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield wr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function p$(n,e){return N(this,null,function*(){let t=B(n);if(Bf(t),uE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield JS(t,r.toArray());t.Qa=!0,yield aw(t.remoteStore,!0);for(let o of i)Uf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ks(t,s),zs(t.localStore,s,!0))),Gs(t.remoteStore,s)}),yield i,yield JS(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{Gs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Re($.comparator)}(t),t.Qa=!1,yield aw(t.remoteStore,!1)}})}function JS(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Hs(r.localStore,Rt(u[0]));for(let l of u){let h=r.Fa.get(l),f=yield d$(r,h);f.snapshot&&o.push(f.snapshot)}}else{let l=yield px(r.localStore,s);a=yield Hs(r.localStore,l),yield iE(r,Ax(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Ax(n){return AM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g$(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function m$(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield gx(i.localStore,MM(o[0])),a=sc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ke.EMPTY_BYTE_STRING);yield wr(i,s,a);break}case"rejected":yield zs(i.localStore,e,!0),Ks(i,e,r);break;default:z()}})}function y$(n,e,t){return N(this,null,function*(){let r=Bf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield px(r.localStore,i),s=yield Hs(r.localStore,o);yield iE(r,Ax(o),s.targetId,!1,s.resumeToken),Uf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield zs(r.localStore,i,!1).then(()=>{Gs(r.remoteStore,i),Ks(r,i)}).catch(ci))}})}function Bf(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i$.bind(null,e),e.Ca.d_=ZB.bind(null,e.eventManager),e.Ca.$a=JB.bind(null,e.eventManager),e}function uE(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s$.bind(null,e),e}function v$(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let S=B(y),M=We(D.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",V=>S.Gr.getBundleMetadata(V,D.id)).then(V=>!!V&&V.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(Dx(u));let l=new fw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let f=yield l.complete();return yield wr(o,f.Ia,void 0),yield function(y,D){let S=B(y);return S.persistence.runTransaction("Save bundle","readwrite",M=>S.Gr.saveBundleMetadata(M,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return an("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var gc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Cc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return lx(this.persistence,new pf,e.initialUser,this.serializer)}createPersistence(e){return new hf(ff.Zr,this.serializer)}createSharedClientState(e){return new vf}terminate(){return N(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Sf=class n extends gc{constructor(e,t,r){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Fp(n.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield uE(this.Wa.syncEngine),yield ta(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return lx(this.persistence,new pf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new P_(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new Yv(t,this.persistence);return new Qv(e.asyncQueue,r)}createPersistence(e){let t=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new K_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yx(),jh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new vf}},vw=class n extends Sf{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Fp(n.prototype,this,"initialize").call(this,e);let t=this.Wa.syncEngine;this.sharedClientState instanceof Yu&&(this.sharedClientState.syncEngine={no:f$.bind(null,t),ro:m$.bind(null,t),io:y$.bind(null,t),Qi:g$.bind(null,t),eo:h$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield p$(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=yx();if(!Yu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},mc=class{initialize(e,t){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=c$.bind(null,this.syncEngine),yield aw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new lw}()}createDatastore(e){let t=Cc(e.databaseInfo.databaseId),r=function(o){return new tw(o)}(e.databaseInfo);return function(o,s,a,u){return new iw(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new sw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>ZS(this.syncEngine,t,0),function(){return _f.D()?new _f:new X_}())}createSyncEngine(e,t){return function(i,o,s,a,u,l,h){let f=new mw(i,o,s,a,u,l);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return N(this,null,function*(){var e,t;yield function(i){return N(this,null,function*(){let o=B(i);O("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield ea(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};function XS(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Qs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var _w=class{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new Xe,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let t=this.Ha.decode(e),r=Number(t);isNaN(r)&&this.Za(`length string (${t}) is not valid number`);let i=yield this.Xa(r);return new hw(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let t=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var ww=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>uc(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let m=DB(s.serializer,f);l.set(m.key.toString(),m)});let h=[];return o.forEach(f=>{let m=l.get(f.toString());Q(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ai(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new rc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>cc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Ew=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.nu=r.maxAttempts,this.t_=new fc(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new ww(this.datastore),t=this.su(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let t=this.updateFunction(e);return!wc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!$M(t)}return!1}};var Iw=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=$h.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){O("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ra(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Uh(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield dx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Dw(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield cE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KS(e.remoteStore,i)),n._onlineComponents=e})}function Sx(n){return n.name==="FirebaseError"?n.code===x.FAILED_PRECONDITION||n.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function cE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Uh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!Sx(t))throw t;an("Error using user provided cache. Falling back to memory cache: "+t),yield Uh(n,new gc)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Uh(n,new gc);return n._offlineComponents})}function $f(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dw(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield Dw(n,new mc))),n._onlineComponents})}function Mx(n){return cE(n).then(e=>e.persistence)}function lE(n){return cE(n).then(e=>e.localStore)}function xx(n){return $f(n).then(e=>e.remoteStore)}function dE(n){return $f(n).then(e=>e.syncEngine)}function _$(n){return $f(n).then(e=>e.datastore)}function Ys(n){return N(this,null,function*(){let e=yield $f(n),t=e.eventManager;return t.onListen=XB.bind(null,e.syncEngine),t.onUnlisten=t$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=n$.bind(null,e.syncEngine),t})}function w$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Mx(n),t=yield xx(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),bc(o)}(t)}))}function E$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Mx(n),t=yield xx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield ea(o),o.q_.set("Offline")})}(t)}))}function I$(n,e){let t=new Xe;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let f=B(l);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ra(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield lE(n),e,t)})),t.promise}function Rx(n,e,t={}){let r=new Xe;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Qs({next:m=>{s.enqueueAndForget(()=>nE(o,f));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new pc(Xs(a.path),h,{includeMetadataChanges:!0,_a:!0});return tE(o,f)}(yield Ys(n),n.asyncQueue,e,t,r)})),r.promise}function D$(n,e){let t=new Xe;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield gf(i,o,!0),u=new Af(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=ra(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield lE(n),e,t)})),t.promise}function Nx(n,e,t={}){let r=new Xe;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Qs({next:m=>{s.enqueueAndForget(()=>nE(o,f)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new pc(a,h,{includeMetadataChanges:!0,_a:!0});return tE(o,f)}(yield Ys(n),n.asyncQueue,e,t,r)})),r.promise}function C$(n,e){let t=new Qs(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield Ys(n),t)})),()=>{t.za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield Ys(n),t)}))}}function b$(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?HM().encode(s):s,function(h,f){return new _w(h,f)}(function(h,f){if(h instanceof Uint8Array)return XS(h,f);if(h instanceof ArrayBuffer)return XS(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Cc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){v$(yield dE(n),i,r)}))}function T$(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield lE(n),e)}))}function Px(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eM=new Map;function hE(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fE(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tM(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nM(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=qf(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ox(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Mf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Px((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},so=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jv;switch(r.type){case"firstParty":return new qv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=eM.get(t);r&&(O("ComponentProvider","Removing Datastore"),eM.delete(t),r.terminate())}(this),Promise.resolve()}};function kx(n,e,t,r={}){var i;let o=(n=ve(n,so))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&an("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Je.MOCK_USER;else{a=WI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(l)}n._authCredentials=new Uv(new Bh(a,u))}}var pt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ae=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bn=class n extends pt{constructor(e,t,r){super(e,t,Xs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ae(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pE(n,e,...t){if(n=Oe(n),hE("collection","path",e),n instanceof so){let r=ye.fromString(e,...t);return nM(r),new Bn(n,null,r)}{if(!(n instanceof Ae||n instanceof Bn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return nM(r),new Bn(n.firestore,null,r)}}function Fx(n,e){if(n=ve(n,so),hE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pt(n,null,function(r){return new Dn(ye.emptyPath(),r)}(e))}function Tc(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=$h.newId()),hE("doc","path",e),n instanceof so){let r=ye.fromString(e,...t);return tM(r),new Ae(n,null,new $(r))}{if(!(n instanceof Ae||n instanceof Bn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return tM(r),new Ae(n.firestore,n instanceof Bn?n.converter:null,new $(r))}}function gE(n,e){return n=Oe(n),e=Oe(e),(n instanceof Ae||n instanceof Bn)&&(e instanceof Ae||e instanceof Bn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mE(n,e){return n=Oe(n),e=Oe(e),n instanceof pt&&e instanceof pt&&n.firestore===e.firestore&&Ic(n._query,e._query)&&n.converter===e.converter}var Cw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new fc(this,"async_queue_retry"),this.Eu=()=>{let t=jh();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=jh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=jh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Xe;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!li(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=uw.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&z()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function bw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Tw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Vx=-1,Pe=class extends so{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Cw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Lx(this),this._firestoreClient.terminate()}};function st(n){return n._firestoreClient||Lx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Lx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Zv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Px(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Iw(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function jx(n,e){Kx(n=ve(n,Pe));let t=st(n);if(t._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");an("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new mc;return Bx(t,i,new Sf(i,r.cacheSizeBytes,e?.forceOwnership))}function Ux(n){Kx(n=ve(n,Pe));let e=st(n);if(e._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");an("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new mc;return Bx(e,r,new vw(r,t.cacheSizeBytes))}function Bx(n,e,t){let r=new Xe;return n.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Uh(n,t),yield Dw(n,e),r.resolve()}catch(i){let o=i;if(!Sx(o))throw o;an("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function $x(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Xe;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!ei.D())return Promise.resolve();let i=r+"main";yield ei.delete(i)})}(Zw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function qx(n){return function(t){let r=new Xe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return a$(yield dE(t),r)})),r.promise}(st(n=ve(n,Pe)))}function Hx(n){return w$(st(n=ve(n,Pe)))}function zx(n){return E$(st(n=ve(n,Pe)))}function Gx(n,e){let t=st(n=ve(n,Pe)),r=new Tw;return b$(t,n._databaseId,e,r),r}function Wx(n,e){return T$(st(n=ve(n,Pe)),e).then(t=>t?new pt(n,null,t.query):null)}function Kx(n){if(n._initialized||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ke.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var bn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vr=class{constructor(e){this._methodName=e}};var ao=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var yc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var A$=/^__.*__$/,Aw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cn(e,this.data,this.fieldMask,t,this.fieldTransforms):new si(e,this.data,t,this.fieldTransforms)}},xf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Qx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Rf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Nf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Qx(this.wu)&&A$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Sw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cc(e)}Nu(e,t,r,i=!1){return new Rf({wu:e,methodName:t,Ou:r,path:Ge.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ho(n){let e=n._freezeSettings(),t=Cc(n._databaseId);return new Sw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Hf(n,e,t,r,i,o={}){let s=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);_E("Data must be an object, but it was:",s,r);let a=Jx(r,s),u,l;if(o.merge)u=new Qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let f of o.mergeFields){let m=Pw(e,f,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);eR(h,m)||h.push(m)}u=new Qt(h),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new Aw(new Dt(a),u,l)}var vc=class n extends vr{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Yx(n,e,t){return new Rf({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Mw=class n extends vr{_toFieldTransform(e){return new ro(e.path,new ii)}isEqual(e){return e instanceof n}},xw=class n extends vr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=Yx(this,e,!0),r=this.Lu.map(o=>fo(o,t)),i=new mr(r);return new ro(e.path,i)}isEqual(e){return e instanceof n&&jp(this.Lu,e.Lu)}},Rw=class n extends vr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=Yx(this,e,!0),r=this.Lu.map(o=>fo(o,t)),i=new yr(r);return new ro(e.path,i)}isEqual(e){return e instanceof n&&jp(this.Lu,e.Lu)}},Nw=class n extends vr{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){let t=new oi(e.serializer,kM(e.serializer,this.Bu));return new ro(e.path,t)}isEqual(e){return e instanceof n&&this.Bu===e.Bu}};function yE(n,e,t,r){let i=n.Nu(1,e,t);_E("Data must be an object, but it was:",i,r);let o=[],s=Dt.empty();lo(r,(u,l)=>{let h=wE(e,u,t);l=Oe(l);let f=i.Cu(h);if(l instanceof vc)o.push(h);else{let m=fo(l,f);m!=null&&(o.push(h),s.set(h,m))}});let a=new Qt(o);return new xf(s,a,i.fieldTransforms)}function vE(n,e,t,r,i,o){let s=n.Nu(1,e,t),a=[Pw(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Pw(e,o[m])),u.push(o[m+1]);let l=[],h=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!eR(l,a[m])){let y=a[m],D=u[m];D=Oe(D);let S=s.Cu(y);if(D instanceof vc)l.push(y);else{let M=fo(D,S);M!=null&&(l.push(y),h.set(y,M))}}let f=new Qt(l);return new xf(h,f,s.fieldTransforms)}function Zx(n,e,t,r=!1){return fo(t,n.Nu(r?4:3,e))}function fo(n,e){if(Xx(n=Oe(n)))return _E("Unsupported field value:",e,n),Jx(n,e);if(n instanceof vr)return function(r,i){if(!Qx(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=fo(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:Bs(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bs(i.serializer,o)}}if(r instanceof ao)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:zM(i.serializer,r._byteString)};if(r instanceof Ae){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Kw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Ww(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${qf(r)}`)}(n,e)}function Jx(n,e){let t={};return yM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,(r,i)=>{let o=fo(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Xx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof ao||n instanceof zn||n instanceof Ae||n instanceof vr||n instanceof yc)}function _E(n,e,t){if(!Xx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=qf(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function Pw(n,e,t){if((e=Oe(e))instanceof bn)return e._internalPath;if(typeof e=="string")return wE(n,e);throw Nf("Field path arguments must be of type string or ",n,!1,void 0,t)}var S$=new RegExp("[~\\*/\\[\\]]");function wE(n,e,t){if(e.search(S$)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bn(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function eR(n,e){return n.some(t=>t.isEqual(e))}var uo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ae(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ow(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(zf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ow=class extends uo{data(){return super.data()}};function zf(n,e){return typeof e=="string"?wE(n,e):e instanceof bn?e._internalPath:e._delegate._internalPath}function tR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _c=class{},co=class extends _c{};function Er(n,e,...t){let r=[];e instanceof _c&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof kw).length,a=o.filter(u=>u instanceof Pf).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Pf=class n extends co{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return dR(e._query,t),new pt(e.firestore,e.converter,l_(e._query,t))}_parse(e){let t=ho(e.firestore);return function(o,s,a,u,l,h,f){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){iM(f,h);let y=[];for(let D of f)y.push(rM(u,o,D));m={arrayValue:{values:y}}}else m=rM(u,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||iM(f,h),m=Zx(a,s,f,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function nR(n,e,t){let r=e,i=zf("where",n);return Pf._create(i,r,t)}var kw=class n extends _c{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:De.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)dR(s,u),s=l_(s,u)}(e._query,t),new pt(e.firestore,e.converter,l_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Fw=class n extends co{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new to(o,s)}(e._query,this._field,this._direction);return new pt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Dn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function rR(n,e="asc"){let t=e,r=zf("orderBy",n);return Fw._create(r,t)}var Of=class n extends co{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new pt(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}};function iR(n){return Ox("limit",n),Of._create("limit",n,"F")}function oR(n){return Ox("limitToLast",n),Of._create("limitToLast",n,"L")}var kf=class n extends co{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=lR(e,this.type,this._docOrFields,this._inclusive);return new pt(e.firestore,e.converter,function(i,o){return new Dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function sR(...n){return kf._create("startAt",n,!0)}function aR(...n){return kf._create("startAfter",n,!1)}var Ff=class n extends co{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=lR(e,this.type,this._docOrFields,this._inclusive);return new pt(e.firestore,e.converter,function(i,o){return new Dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function uR(...n){return Ff._create("endBefore",n,!1)}function cR(...n){return Ff._create("endAt",n,!0)}function lR(n,e,t,r){if(t[0]=Oe(t[0]),t[0]instanceof uo)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let f of Ps(o))if(f.field.isKeyField())h.push(eo(s,u.key));else{let m=u.data.field(f.field);if(Lf(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=f.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new qn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ho(n.firestore);return function(s,a,u,l,h,f){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let S=h[D];if(m[D].field.isKeyField()){if(typeof S!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!zw(s)&&S.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let M=s.path.child(ye.fromString(S));if(!$.isDocumentKey(M))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let V=new $(M);y.push(eo(a,V))}else{let M=Zx(u,l,S);y.push(M)}}return new qn(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function rM(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eo(n,new $(r))}if(t instanceof Ae)return eo(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(t)}.`)}function iM(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Zs=class{convertValue(e,t="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return lo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new yc(o)}convertGeoPoint(e){return new ao(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){let t=gr(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);Q(nx(r));let i=new ni(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Gf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Vw=class extends Zs{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,t)}};var pr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cn=class extends uo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Jr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Jr=class extends cn{data(e={}){return super.data(e)}},Tn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Jr(this._firestore,this._userDataWriter,r.key,r,new pr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Jr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Jr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:M$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function M$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function EE(n,e){return n instanceof cn&&e instanceof cn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Tn&&e instanceof Tn&&n._firestore===e._firestore&&mE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hR(n){n=ve(n,Ae);let e=ve(n.firestore,Pe);return Rx(st(e),n._key).then(t=>bE(e,n,t))}var _r=class extends Zs{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,t)}};function fR(n){n=ve(n,Ae);let e=ve(n.firestore,Pe),t=st(e),r=new _r(e);return I$(t,n._key).then(i=>new cn(e,r,n._key,i,new pr(i!==null&&i.hasLocalMutations,!0),n.converter))}function pR(n){n=ve(n,Ae);let e=ve(n.firestore,Pe);return Rx(st(e),n._key,{source:"server"}).then(t=>bE(e,n,t))}function gR(n){n=ve(n,pt);let e=ve(n.firestore,Pe),t=st(e),r=new _r(e);return tR(n._query),Nx(t,n._query).then(i=>new Tn(e,r,n,i))}function mR(n){n=ve(n,pt);let e=ve(n.firestore,Pe),t=st(e),r=new _r(e);return D$(t,n._query).then(i=>new Tn(e,r,n,i))}function yR(n){n=ve(n,pt);let e=ve(n.firestore,Pe),t=st(e),r=new _r(e);return Nx(t,n._query,{source:"server"}).then(i=>new Tn(e,r,n,i))}function IE(n,e,t){n=ve(n,Ae);let r=ve(n.firestore,Pe),i=Gf(n.converter,e,t);return ia(r,[Hf(ho(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function DE(n,e,t,...r){n=ve(n,Ae);let i=ve(n.firestore,Pe),o=ho(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof bn?vE(o,"updateDoc",n._key,e,t,r):yE(o,"updateDoc",n._key,e),ia(i,[s.toMutation(n._key,qe.exists(!0))])}function vR(n){return ia(ve(n.firestore,Pe),[new ai(n._key,qe.none())])}function _R(n,e){let t=ve(n.firestore,Pe),r=Tc(n),i=Gf(n.converter,e);return ia(t,[Hf(ho(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function CE(n,...e){var t,r,i;n=Oe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||bw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(bw(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,h;if(n instanceof Ae)l=ve(n.firestore,Pe),h=Xs(n._key.path),u={next:f=>{e[s]&&e[s](bE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ve(n,pt);l=ve(f.firestore,Pe),h=f._query;let m=new _r(l);u={next:y=>{e[s]&&e[s](new Tn(l,m,f,y))},error:e[s+1],complete:e[s+2]},tR(n._query)}return function(m,y,D,S){let M=new Qs(S),V=new pc(y,M,D);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return tE(yield Ys(m),V)})),()=>{M.za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return nE(yield Ys(m),V)}))}}(st(l),h,a,u)}function wR(n,e){return C$(st(n=ve(n,Pe)),bw(e)?e:{next:e})}function ia(n,e){return function(r,i){let o=new Xe;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return r$(yield dE(r),i,o)})),o.promise}(st(n),e)}function bE(n,e,t){let r=t.docs.get(e._key),i=new _r(n);return new cn(n,i,e._key,r,new pr(t.hasPendingWrites,t.fromCache),e.converter)}var x$={maxAttempts:5};var Vf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ho(e)}set(e,t,r){this._verifyNotCommitted();let i=Yr(e,this._firestore),o=Gf(i.converter,t,r),s=Hf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Yr(e,this._firestore),s;return s=typeof(t=Oe(t))=="string"||t instanceof bn?vE(this._dataReader,"WriteBatch.update",o._key,t,r,i):yE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Yr(e,this._firestore);return this._mutations=this._mutations.concat(new ai(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Yr(n,e){if((n=Oe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Lw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ho(t)}get(t){let r=Yr(t,this._firestore),i=new Vw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new uo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new uo(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Yr(t,this._firestore),s=Gf(o.converter,r,i),a=Hf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Yr(t,this._firestore),a;return a=typeof(r=Oe(r))=="string"||r instanceof bn?vE(this._dataReader,"Transaction.update",s._key,r,i,o):yE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Yr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Yr(e,this._firestore),r=new _r(this._firestore);return super.get(e).then(i=>new cn(this._firestore,r,t._key,i._document,new pr(!1,!1),t.converter))}};function ER(n,e,t){n=ve(n,Pe);let r=Object.assign(Object.assign({},x$),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Xe;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield _$(o);new Ew(o.asyncQueue,l,a,s,u).ru()})),u.promise}(st(n),i=>e(new Lw(n,i)),r)}function IR(){return new vc("deleteField")}function DR(){return new Mw("serverTimestamp")}function CR(...n){return new xw("arrayUnion",n)}function bR(...n){return new Rw("arrayRemove",n)}function TR(n){return new Nw("increment",n)}(function(e,t=!0){(function(i){Js=i})(YI),Ra(new mi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Pe(new Bv(r.getProvider("auth-internal")),new zv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ni(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Tr(rS,"4.7.2",e),Tr(rS,"4.7.2","esm2017")})();var R$="@firebase/firestore-compat",N$="0.3.37";function RE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function AR(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function SR(){if(!vM())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Wf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return SR(),new n(zn.fromBase64String(e))}static fromUint8Array(e){return AR(),new n(zn.fromUint8Array(e))}toBase64(){return SR(),this._delegate.toBase64()}toUint8Array(){return AR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function TE(n){return P$(n,["next","error","complete"])}function P$(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var AE=class{enableIndexedDbPersistence(e,t){return jx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Ux(e._delegate)}clearIndexedDbPersistence(e){return $x(e._delegate)}},Kf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ni||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&an("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){kx(this._delegate,e,t,r)}enableNetwork(){return Hx(this._delegate)}disableNetwork(){return zx(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qx(this._delegate)}onSnapshotsInSync(e){return wR(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new aa(this,pE(this._delegate,e))}catch(t){throw Nt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gn(this,Tc(this._delegate,e))}catch(t){throw Nt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new yo(this,Fx(this._delegate,e))}catch(t){throw Nt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ER(this._delegate,t=>e(new Qf(this,t)))}batch(){return st(this._delegate),new Yf(new Vf(this._delegate,e=>ia(this._delegate,e)))}loadBundle(e){return Gx(this._delegate,e)}namedQuery(e){return Wx(this._delegate,e).then(t=>t?new yo(this,t):null)}},oa=class extends Zs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wf(new zn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Gn.forKey(t,this.firestore,null)}};function O$(n){oM(n)}var Qf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oa(e)}get(e){let t=po(e);return this._delegate.get(t).then(r=>new go(this._firestore,new cn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=po(e);return r?(RE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=po(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=po(e);return this._delegate.delete(t),this}},Yf=class{constructor(e){this._delegate=e}set(e,t,r){let i=po(e);return r?(RE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=po(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=po(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},sa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Jr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new oa(e),t),i.set(t,o)),o}};sa.INSTANCES=new WeakMap;var Gn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oa(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ae(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Ae(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new aa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new aa(this.firestore,pE(this._delegate,e))}catch(t){throw Nt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Oe(e),e instanceof Ae?gE(this._delegate,e):!1}set(e,t){t=RE("DocumentReference.set",t);try{return t?IE(this._delegate,e,t):IE(this._delegate,e)}catch(r){throw Nt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?DE(this._delegate,e):DE(this._delegate,e,t,...r)}catch(i){throw Nt(i,"updateDoc()","DocumentReference.update()")}}delete(){return vR(this._delegate)}onSnapshot(...e){let t=MR(e),r=xR(e,i=>new go(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=fR(this._delegate):e?.source==="server"?t=pR(this._delegate):t=hR(this._delegate),t.then(r=>new go(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Nt(n,e,t){return n.message=n.message.replace(e,t),n}function MR(n){for(let e of n)if(typeof e=="object"&&!TE(e))return e;return{}}function xR(n,e){var t,r;let i;return TE(n[0])?i=n[0]:TE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var go=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EE(this._delegate,e._delegate)}},mo=class extends go{data(e){let t=this._delegate.data(e);return this._delegate._converter||sM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},yo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oa(e)}where(e,t,r){try{return new n(this.firestore,Er(this._delegate,nR(e,t,r)))}catch(i){throw Nt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Er(this._delegate,rR(e,t)))}catch(r){throw Nt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Er(this._delegate,iR(e)))}catch(t){throw Nt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Er(this._delegate,oR(e)))}catch(t){throw Nt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Er(this._delegate,sR(...e)))}catch(t){throw Nt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Er(this._delegate,aR(...e)))}catch(t){throw Nt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Er(this._delegate,uR(...e)))}catch(t){throw Nt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Er(this._delegate,cR(...e)))}catch(t){throw Nt(t,"endAt()","Query.endAt()")}}isEqual(e){return mE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=mR(this._delegate):e?.source==="server"?t=yR(this._delegate):t=gR(this._delegate),t.then(r=>new Ac(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=MR(e),r=xR(e,i=>new Ac(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},SE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ac=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mo(this._firestore,r))})}isEqual(e){return EE(this._delegate,e._delegate)}},aa=class n extends yo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Gn(this.firestore,e):null}doc(e){try{return e===void 0?new Gn(this.firestore,Tc(this._delegate)):new Gn(this.firestore,Tc(this._delegate,e))}catch(t){throw Nt(t,"doc()","CollectionReference.doc()")}}add(e){return _R(this._delegate,e).then(t=>new Gn(this.firestore,t))}isEqual(e){return gE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function po(n){return ve(n,Ae)}var ME=class n{constructor(...e){this._delegate=new bn(...e)}static documentId(){return new n(Ge.keyField().canonicalString())}isEqual(e){return e=Oe(e),e instanceof bn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var xE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=DR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=IR();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=CR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=bR(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=TR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var k$={Firestore:Kf,GeoPoint:ao,Timestamp:Ue,Blob:Wf,Transaction:Qf,WriteBatch:Yf,DocumentReference:Gn,DocumentSnapshot:go,Query:yo,QueryDocumentSnapshot:mo,QuerySnapshot:Ac,CollectionReference:aa,FieldPath:ME,FieldValue:xE,setLogLevel:O$,CACHE_SIZE_UNLIMITED:Vx};function F$(n,e){n.INTERNAL.registerComponent(new mi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},k$)))}function V$(n){F$(n,(e,t)=>new Kf(e,t,new AE)),n.registerVersion(R$,N$)}V$(at);function L$(n,e=Va){return new de(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function RR(n,e){return L$(n,e)}function j$(n,e){return RR(n,e).pipe(Ei(void 0),ja(),X(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function OE(n,e){return RR(n,e).pipe(X(t=>({payload:t,type:"query"})))}var Zf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=FR(r,t);return new Xf(i,o,this.afs)}snapshotChanges(){return j$(this.ref,this.afs.schedulers.outsideAngular).pipe(Vt)}valueChanges(e={}){return this.snapshotChanges().pipe(X(({payload:t})=>e.idField?le(j({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ge(this.ref.get(e)).pipe(Vt)}};function Jf(n,e){return OE(n,e).pipe(Ei(void 0),ja(),X(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function NR(n,e,t){return Jf(n,t).pipe(wi((r,i)=>U$(r,i.map(o=>o.payload),e),[]),ug(),X(r=>r.map(i=>({type:i.type,payload:i}))))}function U$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=B$(n,r))}),n}function NE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function B$(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return NE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return NE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return NE(n,e.oldIndex,1);break}return n}function PR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Xf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Jf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(X(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ei(void 0),ja(),ut(([r,i])=>i.length>0||!r),X(([,r])=>r),Vt)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=PR(e);return NR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vt)}valueChanges(e={}){return OE(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.payload.docs.map(r=>e.idField?le(j({},r.data()),{[e.idField]:r.id}):r.data())),Vt)}get(e){return ge(this.query.get(e)).pipe(Vt)}add(e){return this.ref.add(e)}doc(e){return new Zf(this.ref.doc(e),this.afs)}},PE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Jf(this.query,this.afs.schedulers.outsideAngular).pipe(Vt):Jf(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.filter(r=>e.indexOf(r.type)>-1)),ut(t=>t.length>0),Vt)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=PR(e);return NR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vt)}valueChanges(e={}){return OE(this.query,this.afs.schedulers.outsideAngular).pipe(X(r=>r.payload.docs.map(i=>e.idField?j({[e.idField]:i.id},i.data()):i.data())),Vt)}get(e){return ge(this.query.get(e)).pipe(Vt)}},OR=new q("angularfire2.enableFirestorePersistence"),kR=new q("angularfire2.firestore.persistenceSettings"),$$=new q("angularfire2.firestore.settings"),q$=new q("angularfire2.firestore.use-emulator");function FR(n,e=t=>t){return{query:e(n),ref:n}}var Sc=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,f,m,y,D,S,M,V,H){this.schedulers=u;let F=Lu(t,a,r),G=h;f&&Av(F,a,m,D,S,M,y,V),[this.firestore,this.persistenceEnabled$]=Sh(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),G&&ee.useEmulator(...G),i&&!ur(s)){let Y=()=>{try{return ge(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Z(!1)}};return[ee,a.runOutsideAngular(Y)]}else return[ee,Z(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=FR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Xf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new PE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Zf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(_s),L(ws,8),L(OR,8),L($$,8),L(ft),L(pe),L(bh),L(kR,8),L(q$,8),L(eS,8),L(Ev,8),L(Iv,8),L(Dv,8),L(Cv,8),L(bv,8),L(Tv,8),L(Hi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),VR=(()=>{class n{constructor(){at.registerVersion("angularfire",vs.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:OR,useValue:!0},{provide:kR,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=rt({providers:[Sc]})}return n})();var GR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ee(Oi),Ee(Ur))}}static{this.\u0275dir=en({type:n})}}return n})(),H$=(()=>{class n extends GR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=iu(n)))(i||n)}})()}static{this.\u0275dir=en({type:n,features:[rs]})}}return n})(),WR=new q("");var z$={provide:WR,useExisting:Ja(()=>ip),multi:!0};function G$(){let n=kn()?kn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var W$=new q(""),ip=(()=>{class n extends GR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!G$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ee(Oi),Ee(Ur),Ee(W$,8))}}static{this.\u0275dir=en({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&sr("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[ny([z$]),rs]})}}return n})();var K$=new q(""),Q$=new q("");function KR(n){return n!=null}function QR(n){return Li(n)?ge(n):n}function YR(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function ZR(n,e){return e.map(t=>t(n))}function Y$(n){return!n.validate}function JR(n){return n.map(e=>Y$(e)?e:t=>e.validate(t))}function Z$(n){if(!n)return null;let e=n.filter(KR);return e.length==0?null:function(t){return YR(ZR(t,e))}}function XR(n){return n!=null?Z$(JR(n)):null}function J$(n){if(!n)return null;let e=n.filter(KR);return e.length==0?null:function(t){let r=ZR(t,e).map(QR);return og(r).pipe(X(YR))}}function eN(n){return n!=null?J$(JR(n)):null}function jR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function X$(n){return n._rawValidators}function eq(n){return n._rawAsyncValidators}function kE(n){return n?Array.isArray(n)?n:[n]:[]}function tp(n,e){return Array.isArray(n)?n.includes(e):n===e}function UR(n,e){let t=kE(e);return kE(n).forEach(i=>{tp(t,i)||t.push(i)}),t}function BR(n,e){return kE(e).filter(t=>!tp(n,t))}var np=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=XR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},FE=class extends np{get formDirective(){return null}get path(){return null}},Pc=class extends np{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},VE=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},tq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},YW=le(j({},tq),{"[class.ng-submitted]":"isSubmitted"}),tN=(()=>{class n extends VE{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ee(Pc,2))}}static{this.\u0275dir=en({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ey("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[rs]})}}return n})();var Mc="VALID",ep="INVALID",ua="PENDING",xc="DISABLED",la=class{},rp=class extends la{constructor(e,t){super(),this.value=e,this.source=t}},Rc=class extends la{constructor(e,t){super(),this.pristine=e,this.source=t}},Nc=class extends la{constructor(e,t){super(),this.touched=e,this.source=t}},ca=class extends la{constructor(e,t){super(),this.status=e,this.source=t}};function nq(n){return(op(n)?n.validators:n)||null}function rq(n){return Array.isArray(n)?XR(n):n||null}function iq(n,e){return(op(e)?e.asyncValidators:n)||null}function oq(n){return Array.isArray(n)?eN(n):n||null}function op(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var LE=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Qd(()=>this.statusReactive()),this.statusReactive=Ld(void 0),this._pristine=Qd(()=>this.pristineReactive()),this.pristineReactive=Ld(!0),this._touched=Qd(()=>this.touchedReactive()),this.touchedReactive=Ld(!1),this._events=new ke,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return $r(this.statusReactive)}set status(e){$r(()=>this.statusReactive.set(e))}get valid(){return this.status===Mc}get invalid(){return this.status===ep}get pending(){return this.status==ua}get disabled(){return this.status===xc}get enabled(){return this.status!==xc}get pristine(){return $r(this.pristineReactive)}set pristine(e){$r(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return $r(this.touchedReactive)}set touched(e){$r(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(UR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(UR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(BR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(BR(e,this._rawAsyncValidators))}hasValidator(e){return tp(this._rawValidators,e)}hasAsyncValidator(e){return tp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Nc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Nc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Rc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Rc(!0,r))}markAsPending(e={}){this.status=ua;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ca(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xc,this.errors=null,this._forEachChild(i=>{i.disable(le(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rp(this.value,r)),this._events.next(new ca(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mc,this._forEachChild(r=>{r.enable(le(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mc||this.status===ua)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rp(this.value,t)),this._events.next(new ca(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xc:Mc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ua,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=QR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ca(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?xc:this.errors?ep:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ua)?ua:this._anyControlsHaveStatus(ep)?ep:Mc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Rc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Nc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){op(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=oq(this._rawAsyncValidators)}};var nN=new q("CallSetDisabledState",{providedIn:"root",factory:()=>jE}),jE="always";function sq(n,e){return[...e.path,n]}function aq(n,e,t=jE){cq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),lq(n,e),hq(n,e),dq(n,e),uq(n,e)}function $R(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function cq(n,e){let t=X$(n);e.validator!==null?n.setValidators(jR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=eq(n);e.asyncValidator!==null?n.setAsyncValidators(jR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();$R(e._rawValidators,i),$R(e._rawAsyncValidators,i)}function lq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rN(n,e)})}function dq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function fq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function pq(n){return Object.getPrototypeOf(n.constructor)===H$}function gq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ip?t=o:pq(o)?r=o:i=o}),i||r||t||null}function qR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function HR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var mq=class extends LE{constructor(e=null,t,r){super(nq(t),iq(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),op(t)&&(t.nonNullable||t.initialValueIsDefault)&&(HR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){HR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yq={provide:Pc,useExisting:Ja(()=>UE)},zR=Promise.resolve(),UE=(()=>{class n extends Pc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new mq,this._registered=!1,this.name="",this.update=new nt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=gq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),fq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){aq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){zR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Kd(r);zR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?sq(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ee(FE,9),Ee(K$,10),Ee(Q$,10),Ee(WR,10),Ee(ji,8),Ee(nN,8))}}static{this.\u0275dir=en({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ny([yq]),rs,es]})}}return n})();var vq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();var iN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nN,useValue:t.callSetDisabledState??jE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({imports:[vq]})}}return n})();var wq=n=>({transform:n});function Eq(n,e){if(n&1){let t=Kb();Le(0,"li"),wt(1),Le(2,"button",18),sr("click",function(){let i=s0(t).index,o=Vi();return a0(o.deleteName(i))}),wt(3,"Delete"),je()()}if(n&2){let t=e.$implicit;ct(),cu(" ",t," ")}}function Iq(n,e){if(n&1&&(Le(0,"div",19),wt(1),je()),n&2){let t=e.$implicit,r=e.index,i=Vi();rn("ngStyle",i.getDegreePosition(r,t)),ct(),cu(" ",t," ")}}function Dq(n,e){n&1&&(Le(0,"div",20)(1,"p"),wt(2,"Spin stuff to get questions and stuff, also Astro is sexy"),je()())}function Cq(n,e){if(n&1&&(Le(0,"div",20)(1,"p"),wt(2),je(),Le(3,"p",21),wt(4),je()()),n&2){let t=Vi();ct(2),lu("",t.selectedAsker," must ask ",t.selectedResponder,":"),ct(2),uu(t.selectedQuestion)}}var sp=class n{constructor(e){this.firestore=e}rotationDegrees=0;newName="";names=[];previousIndex=null;previousResponder=null;selectedQuestion="";selectedAsker="";selectedResponder="";newQuestion="";questions=["What is your favorite hobby?","What's the most interesting place you've visited?","What is your dream job?","Who is your role model?","What is your favorite movie?","What is the weirdest food you've ever eaten?","If you could live anywhere in the world, where would it be?","What's one thing you couldn't live without?","What's your favorite book?","What's one thing you're afraid of?"];ngOnInit(){this.firestore.collection("spins").doc("currentSpin").valueChanges().subscribe(e=>{e&&(e.rotationDegrees!==this.rotationDegrees&&(this.rotationDegrees=e.rotationDegrees),this.selectedAsker=e.asker,this.selectedResponder=e.responder,this.selectedQuestion=e.question)}),this.firestore.collection("names").doc("currentNames").valueChanges().subscribe(e=>{e&&e.names&&(this.names=e.names)}),this.firestore.collection("questions").doc("currentQuestions").valueChanges().subscribe(e=>{e&&e.questions&&(this.questions=e.questions)})}addQuestion(){this.newQuestion.trim()&&(this.questions.push(this.newQuestion),this.firestore.collection("questions").doc("currentQuestions").set({questions:at.firestore.FieldValue.arrayUnion(this.newQuestion)},{merge:!0}).then(()=>{console.log("Question added to Firestore")}).catch(t=>{console.error("Error adding question: ",t)}),this.newQuestion="")}addName(){this.newName&&(this.firestore.collection("names").doc("currentNames").set({names:at.firestore.FieldValue.arrayUnion(this.newName)},{merge:!0}).then(()=>{console.log("Name added to Firestore")}).catch(t=>{console.error("Error adding name: ",t)}),this.newName="")}deleteName(e){let t=this.names[e];this.firestore.collection("names").doc("currentNames").update({names:at.firestore.FieldValue.arrayRemove(t)}).then(()=>{console.log("Name deleted from Firestore")}).catch(i=>{console.error("Error deleting name: ",i)})}getDegreePosition(e,t){let o=360/this.names.length*e,s=300,a=250,u=this.getTextWidth(t,"18px Arial");u>100&&(s+=(u-100)/2);let l=o*Math.PI/180,h=Math.cos(l)*s+a,f=Math.sin(l)*s+a;return{left:`${h}px`,top:`${f}px`}}getTextWidth(e,t){let i=document.createElement("canvas").getContext("2d");return i?(i.font=t,i.measureText(e).width):0}isLongName(e){return e.length>10}spin(){if(this.names.length>1){let e,t;do e=Math.floor(Math.random()*this.names.length);while(this.previousIndex===e);this.previousIndex=e;let i=360/this.names.length*e,o=3*360+i,s=4e3,a=this.rotationDegrees;this.firestore.collection("spins").doc("currentSpin").set({rotationDegrees:a+o,asker:"",responder:"",question:""});let u=performance.now(),l=h=>{let f=h-u,m=Math.min(f/s,1),y=this.easeOutCubic(m);if(this.rotationDegrees=a+o*y,m<1)requestAnimationFrame(l);else{this.selectedAsker=this.names[e];do t=Math.floor(Math.random()*this.names.length);while(t===e||t===this.previousResponder);this.selectedResponder=this.names[t],this.previousResponder=t,this.selectedQuestion=this.questions[Math.floor(Math.random()*this.questions.length)],this.firestore.collection("spins").doc("currentSpin").set({rotationDegrees:this.rotationDegrees,asker:this.selectedAsker,responder:this.selectedResponder,question:this.selectedQuestion}).then(()=>{console.log("Final spin data updated in Firestore for synchronization.")}).catch(D=>{console.error("Error updating final spin data: ",D)})}};requestAnimationFrame(l)}}easeOutCubic(e){return 1-Math.pow(1-e,3)}static \u0275fac=function(t){return new(t||n)(Ee(Sc))};static \u0275cmp=Vr({type:n,selectors:[["app-arrow-spinner"]],decls:27,vars:9,consts:[[1,"main-container"],[1,"input-section"],[1,"input-container"],["for","nameInput"],["id","nameInput","placeholder","Add name",3,"ngModelChange","ngModel"],[3,"click"],[1,"names-list"],[4,"ngFor","ngForOf"],[1,"circle-container"],[1,"spin-container"],[1,"circle"],[1,"center-circle"],[1,"arrow",3,"ngStyle"],["class","name-label",3,"ngStyle",4,"ngFor","ngForOf"],["class","question-container",4,"ngIf"],[1,"question-input-section"],["for","questionInput"],["id","questionInput","placeholder","Add a question",2,"margin-left","2px",3,"ngModelChange","ngModel"],[1,"delete-button",3,"click"],[1,"name-label",3,"ngStyle"],[1,"question-container"],[1,"question-text"]],template:function(t,r){t&1&&(Le(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),wt(4,"Enter Names: "),je(),Le(5,"input",4),Bd("ngModelChange",function(o){return ty(r.newName,o)||(r.newName=o),o}),je(),Le(6,"button",5),sr("click",function(){return r.addName()}),wt(7,"Add Name"),je()(),Le(8,"div",6)(9,"ul"),ki(10,Eq,4,1,"li",7),je()()(),Le(11,"div",8)(12,"div",9)(13,"button",5),sr("click",function(){return r.spin()}),wt(14,"Spin"),je()(),Le(15,"div",10),Fi(16,"div",11)(17,"div",12),ki(18,Iq,2,2,"div",13),je(),ki(19,Dq,3,0,"div",14)(20,Cq,5,3,"div",14),je(),Le(21,"div",15)(22,"label",16),wt(23,"Enter a New Question:"),je(),Le(24,"input",17),Bd("ngModelChange",function(o){return ty(r.newQuestion,o)||(r.newQuestion=o),o}),je(),Le(25,"button",5),sr("click",function(){return r.addQuestion()}),wt(26,"Add Question"),je()()()),t&2&&(ct(5),Ud("ngModel",r.newName),ct(5),rn("ngForOf",r.names),ct(7),rn("ngStyle",Xb(7,wq,"rotate("+r.rotationDegrees+"deg)")),ct(),rn("ngForOf",r.names),ct(),rn("ngIf",!r.selectedQuestion),ct(),rn("ngIf",r.selectedQuestion),ct(4),Ud("ngModel",r.newQuestion))},dependencies:[IT,Jd,DT,ip,tN,UE],styles:['.main-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:95.7vh;padding:20px;background-color:#1d1d1d;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.input-section[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#f2f2f2;padding:30px;border-radius:10px;box-shadow:0 4px 8px #00000080;color:#333}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center;font-size:16px}input[_ngcontent-%COMP%]{font-size:14px;padding:8px;border:1px solid #ccc;border-radius:5px;width:200px;background-color:#fff;color:#333;box-shadow:inset 0 1px 3px #0000001a}.pointer[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;transform-origin:50% 100%;width:50px;height:150px;transition:transform 1s ease-out}button[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;cursor:pointer;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#ff4736}.delete-button[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff;border:none;border-radius:5px;padding:5px 10px;margin-left:10px;cursor:pointer}.delete-button[_ngcontent-%COMP%]:hover{background-color:#ff1a1a}.names-list[_ngcontent-%COMP%]{margin-top:20px;font-size:14px;list-style:none;padding:0;width:100%}.names-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.names-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px 0;padding:8px;background-color:#dedede;border-radius:5px;color:#333;width:100%;display:flex;justify-content:space-between;align-items:center}.circle-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:70%;position:relative}.spin-container[_ngcontent-%COMP%]{position:absolute;top:-100px;display:flex;justify-content:center;align-items:center}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:12px 25px;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff4736}.circle[_ngcontent-%COMP%]{position:relative;width:500px;height:500px;border:4px solid #ff6f61;border-radius:50%;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 20px #00000080;background-color:#292929}.center-circle[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;background-color:#ff6f61;border-radius:50%;z-index:10;box-shadow:0 2px 8px #0000004d;top:50%;left:50%;transform:translate(-50%,-35%)}.arrow[_ngcontent-%COMP%]{position:absolute;width:200px;height:20px;background-color:#ff6f61;top:50%;left:50%;transform-origin:0 50%;transition:transform 1s ease-out;transform:translateY(-50%)}.arrow[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;right:-30px;transform:translateY(-50%);width:0;height:0;border-left:30px solid #ff6f61;border-top:10px solid transparent;border-bottom:10px solid transparent}.name-label[_ngcontent-%COMP%]{position:absolute;font-size:18px;color:#ff6f61;font-weight:700;transform:translate(-50%,-50%);width:auto;text-align:center;word-wrap:break-word;white-space:normal;overflow:hidden;text-overflow:ellipsis}.name-label.long-name[_ngcontent-%COMP%]{font-size:14px}.question-container[_ngcontent-%COMP%]{margin-top:30px;text-align:center;font-size:22px;background-color:#333;padding:15px;border-radius:10px;color:#ff6f61;box-shadow:0 4px 10px #00000080;max-width:700px}.question-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;white-space:normal}.question-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-weight:700}']})};function bq(n,e){if(n&1&&(Le(0,"h2",4),wt(1),je()),n&2){let t=Vi();ct(),lu("",t.selectedAsker," must ask ",t.selectedResponder,":")}}function Tq(n,e){if(n&1&&(Le(0,"p",5),wt(1),je()),n&2){let t=Vi();ct(),uu(t.selectedQuestion)}}function Aq(n,e){n&1&&(Le(0,"p",4),wt(1,"Waiting for the spin to complete..."),je())}var ap=class n{constructor(e){this.firestore=e}selectedAsker="";selectedResponder="";selectedQuestion="";ngOnInit(){this.firestore.collection("spins").doc("currentSpin").valueChanges().subscribe(e=>{e&&(this.selectedAsker=e.asker,this.selectedResponder=e.responder,this.selectedQuestion=e.question,console.log(`Asker: ${this.selectedAsker}, Responder: ${this.selectedResponder}, Question: ${this.selectedQuestion}`))})}static \u0275fac=function(t){return new(t||n)(Ee(Sc))};static \u0275cmp=Vr({type:n,selectors:[["app-view-question"]],decls:5,vars:3,consts:[[1,"question-container"],[1,"question-card"],["class","question-header",4,"ngIf"],["class","question-text",4,"ngIf"],[1,"question-header"],[1,"question-text"]],template:function(t,r){t&1&&(Le(0,"div",0)(1,"div",1),ki(2,bq,2,2,"h2",2)(3,Tq,2,1,"p",3)(4,Aq,2,0,"p",2),je()()),t&2&&(ct(2),rn("ngIf",r.selectedQuestion),ct(),rn("ngIf",r.selectedQuestion),ct(),rn("ngIf",!r.selectedQuestion))},dependencies:[Jd],styles:[".question-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100vh;background-color:#1d1d1d;position:relative}.pointer-info[_ngcontent-%COMP%]{background-color:#292929;color:#fff;min-width:30vw;padding:10px 20px;border-radius:8px;margin-bottom:20px;font-size:18px;text-align:center;border:2px solid #ff6f61}.question-card[_ngcontent-%COMP%]{background-color:#292929;border:4px solid #ff6f61;border-radius:10px;padding:40px;box-shadow:0 4px 20px #00000080;color:#ff6f61;max-width:800px;width:80%;text-align:center;position:relative}.question-text[_ngcontent-%COMP%]{font-size:24px;line-height:1.5}.placeholder[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#fff}"]})};var Sq=[{path:"",redirectTo:"/spinner",pathMatch:"full"},{path:"spinner",component:sp},{path:"question",component:ap}],up=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=it({type:n});static \u0275inj=rt({imports:[hv.forRoot(Sq,{useHash:!0}),hv]})};var cp=class n{title="spinArrowApp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Vr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Fi(0,"router-outlet")},dependencies:[sv]})};var Mq={apiKey:"AIzaSyB9ReI8QdMrvsi0gIXlT2CkfFaKWR8ukOE",authDomain:"spinbottleapp.firebaseapp.com",projectId:"spinbottleapp",storageBucket:"spinbottleapp.appspot.com",messagingSenderId:"285539728216",appId:"1:285539728216:web:a069b60b7bb7960410c32d"},lp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=it({type:n,bootstrap:[cp]});static \u0275inj=rt({providers:[GT()],imports:[HT,iN,up,XA.initializeApp(Mq),VR]})};qT().bootstrapModule(lp,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
