import{A as ot,a as j,b as le,c as jI,d as Rp,e as N,f as UI,g as Wc,h as BI,i as $I,j as qI,k as Np,l as HI,m as Sa,n as Pp,o as Kc,p as zI,q as GI,r as Op,s as Oe,t as gi,u as Tn,v as Qc,w as Ma,x as WI,y as KI,z as br}from"./chunk-LIK74K6L.js";function QI(n,e){return Object.is(n,e)}var Xe=null,Yc=!1,Zc=1,Qn=Symbol("SIGNAL");function _e(n){let e=Xe;return Xe=n,e}function YI(){return Xe}var Ra={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vp(n){if(Yc)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(n);let e=Xe.nextProducerIndex++;if(tl(Xe),e<Xe.producerNode.length&&Xe.producerNode[e]!==n&&xa(Xe)){let t=Xe.producerNode[e];el(t,Xe.producerIndexOfThis[e])}Xe.producerNode[e]!==n&&(Xe.producerNode[e]=n,Xe.producerIndexOfThis[e]=xa(Xe)?eD(n,Xe,e):0),Xe.producerLastReadVersion[e]=n.version}function kN(){Zc++}function ZI(n){if(!(xa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Zc)){if(!n.producerMustRecompute(n)&&!jp(n)){n.dirty=!1,n.lastCleanEpoch=Zc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Zc}}function JI(n){if(n.liveConsumerNode===void 0)return;let e=Yc;Yc=!0;try{for(let t of n.liveConsumerNode)t.dirty||FN(t)}finally{Yc=e}}function XI(){return Xe?.consumerAllowSignalWrites!==!1}function FN(n){n.dirty=!0,JI(n),n.consumerMarkedDirty?.(n)}function Xc(n){return n&&(n.nextProducerIndex=0),_e(n)}function Lp(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(xa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)el(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function jp(n){tl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(ZI(t),r!==t.version))return!0}return!1}function Up(n){if(tl(n),xa(n))for(let e=0;e<n.producerNode.length;e++)el(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function eD(n,e,t){if(tD(n),n.liveConsumerNode.length===0&&nD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=eD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function el(n,e){if(tD(n),n.liveConsumerNode.length===1&&nD(n))for(let r=0;r<n.producerNode.length;r++)el(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];tl(i),i.producerIndexOfThis[r]=e}}function xa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function tl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function tD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function nD(n){return n.producerNode!==void 0}function rD(n){let e=Object.create(VN);e.computation=n;let t=()=>{if(ZI(e),Vp(e),e.value===Jc)throw e.error;return e.value};return t[Qn]=e,t}var kp=Symbol("UNSET"),Fp=Symbol("COMPUTING"),Jc=Symbol("ERRORED"),VN=le(j({},Ra),{value:kp,dirty:!0,error:null,equal:QI,producerMustRecompute(n){return n.value===kp||n.value===Fp},producerRecomputeValue(n){if(n.value===Fp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Fp;let t=Xc(n),r;try{r=n.computation()}catch(i){r=Jc,n.error=i}finally{Lp(n,t)}if(e!==kp&&e!==Jc&&r!==Jc&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function LN(){throw new Error}var iD=LN;function oD(){iD()}function sD(n){iD=n}var jN=null;function aD(n){let e=Object.create(cD);e.value=n;let t=()=>(Vp(e),e.value);return t[Qn]=e,t}function Bp(n,e){XI()||oD(),n.equal(n.value,e)||(n.value=e,UN(n))}function uD(n,e){XI()||oD(),Bp(n,e(n.value))}var cD=le(j({},Ra),{equal:QI,value:void 0});function UN(n){n.version++,kN(),JI(n),jN?.()}function te(n){return typeof n=="function"}function _o(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var nl=_o(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function mi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof nl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{lD(o)}catch(s){e=e??[],s instanceof nl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new nl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)lD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&mi(t,e)}remove(e){let{_finalizers:t}=this;t&&mi(t,e),e instanceof n&&e._removeParent(this)}};Ue.EMPTY=(()=>{let n=new Ue;return n.closed=!0,n})();var $p=Ue.EMPTY;function rl(n){return n instanceof Ue||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function lD(n){te(n)?n():n.unsubscribe()}var ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wo={setTimeout(n,e,...t){let{delegate:r}=wo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=wo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function il(n){wo.setTimeout(()=>{let{onUnhandledError:e}=ln;if(e)e(n);else throw n})}function Na(){}var dD=qp("C",void 0,void 0);function hD(n){return qp("E",void 0,n)}function fD(n){return qp("N",n,void 0)}function qp(n,e,t){return{kind:n,value:e,error:t}}var yi=null;function Eo(n){if(ln.useDeprecatedSynchronousErrorHandling){let e=!yi;if(e&&(yi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=yi;if(yi=null,t)throw r}}else n()}function pD(n){ln.useDeprecatedSynchronousErrorHandling&&yi&&(yi.errorThrown=!0,yi.error=n)}var vi=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,rl(e)&&e.add(this)):this.destination=qN}static create(e,t,r){return new Yn(e,t,r)}next(e){this.isStopped?zp(fD(e),this):this._next(e)}error(e){this.isStopped?zp(hD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zp(dD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BN=Function.prototype.bind;function Hp(n,e){return BN.call(n,e)}var Gp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ol(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ol(r)}else ol(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ol(t)}}},Yn=class extends vi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ln.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Hp(e.next,o),error:e.error&&Hp(e.error,o),complete:e.complete&&Hp(e.complete,o)}):i=e}this.destination=new Gp(i)}};function ol(n){ln.useDeprecatedSynchronousErrorHandling?pD(n):il(n)}function $N(n){throw n}function zp(n,e){let{onStoppedNotification:t}=ln;t&&wo.setTimeout(()=>t(n,e))}var qN={closed:!0,next:Na,error:$N,complete:Na};var Io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ct(n){return n}function Wp(...n){return Kp(n)}function Kp(n){return n.length===0?Ct:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=zN(t)?t:new Yn(t,r,i);return Eo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=gD(r),new r((i,o)=>{let s=new Yn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Io](){return this}pipe(...t){return Kp(t)(this)}toPromise(t){return t=gD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function gD(n){var e;return(e=n??ln.Promise)!==null&&e!==void 0?e:Promise}function HN(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function zN(n){return n&&n instanceof vi||HN(n)&&rl(n)}function Qp(n){return te(n?.lift)}function se(n){return e=>{if(Qp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new Yp(n,e,t,r,i)}var Yp=class extends vi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Do(){return se((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Co=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Qp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return Do()(this)}};var mD=_o(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new sl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new mD}next(t){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?$p:(this.currentObservers=null,o.push(t),new Ue(()=>{this.currentObservers=null,mi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new sl(e,t),n})(),sl=class extends ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:$p}};var dt=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Pa={now(){return(Pa.delegate||Date).now()},delegate:void 0};var al=class extends ke{constructor(e=1/0,t=1/0,r=Pa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var ul=class extends Ue{constructor(e,t){super()}schedule(e,t=0){return this}};var Oa={setInterval(n,e,...t){let{delegate:r}=Oa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Oa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var bo=class extends ul{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Oa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Oa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,mi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var To=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};To.now=Pa.now;var Ao=class extends To{constructor(e,t=To.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ka=new Ao(bo);var cl=class extends bo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ll=class extends Ao{};var Zp=new ll(cl);var bt=new de(n=>n.complete());function yD(n){return n&&te(n.schedule)}function Jp(n){return n[n.length-1]}function dl(n){return te(Jp(n))?n.pop():void 0}function An(n){return yD(Jp(n))?n.pop():void 0}function vD(n,e){return typeof Jp(n)=="number"?n.pop():e}var hl=n=>n&&typeof n.length=="number"&&typeof n!="function";function fl(n){return te(n?.then)}function pl(n){return te(n[Io])}function gl(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function ml(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yl=GN();function vl(n){return te(n?.[yl])}function _l(n){return BI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Wc(t.read());if(i)return yield Wc(void 0);yield yield Wc(r)}}finally{t.releaseLock()}})}function wl(n){return te(n?.getReader)}function Me(n){if(n instanceof de)return n;if(n!=null){if(pl(n))return WN(n);if(hl(n))return KN(n);if(fl(n))return QN(n);if(gl(n))return _D(n);if(vl(n))return YN(n);if(wl(n))return ZN(n)}throw ml(n)}function WN(n){return new de(e=>{let t=n[Io]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KN(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function QN(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,il)})}function YN(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function _D(n){return new de(e=>{JN(n,e).catch(t=>e.error(t))})}function ZN(n){return _D(_l(n))}function JN(n,e){var t,r,i,o;return UI(this,void 0,void 0,function*(){try{for(t=$I(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wt(n,e=0){return se((t,r)=>{t.subscribe(ae(r,i=>Rt(r,n,()=>r.next(i),e),()=>Rt(r,n,()=>r.complete(),e),i=>Rt(r,n,()=>r.error(i),e)))})}function dn(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wD(n,e){return Me(n).pipe(dn(e),Wt(e))}function ED(n,e){return Me(n).pipe(dn(e),Wt(e))}function ID(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function DD(n,e){return new de(t=>{let r;return Rt(t,e,()=>{r=n[yl](),Rt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function El(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{Rt(t,e,()=>{let r=n[Symbol.asyncIterator]();Rt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function CD(n,e){return El(_l(n),e)}function bD(n,e){if(n!=null){if(pl(n))return wD(n,e);if(hl(n))return ID(n,e);if(fl(n))return ED(n,e);if(gl(n))return El(n,e);if(vl(n))return DD(n,e);if(wl(n))return CD(n,e)}throw ml(n)}function ge(n,e){return e?bD(n,e):Me(n)}function Z(...n){let e=An(n);return ge(n,e)}function So(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function Xp(n){return!!n&&(n instanceof de||te(n.lift)&&te(n.subscribe))}var Zn=_o(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:XN}=Array;function eP(n,e){return XN(e)?n(...e):n(e)}function Il(n){return X(e=>eP(n,e))}var{isArray:tP}=Array,{getPrototypeOf:nP,prototype:rP,keys:iP}=Object;function Dl(n){if(n.length===1){let e=n[0];if(tP(e))return{args:e,keys:null};if(oP(e)){let t=iP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function oP(n){return n&&typeof n=="object"&&nP(n)===rP}function Cl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Fa(...n){let e=An(n),t=dl(n),{args:r,keys:i}=Dl(n);if(r.length===0)return ge([],e);let o=new de(sP(r,e,i?s=>Cl(i,s):Ct));return t?o.pipe(Il(t)):o}function sP(n,e,t=Ct){return r=>{TD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)TD(e,()=>{let l=ge(n[u],e),h=!1;l.subscribe(ae(r,f=>{o[u]=f,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TD(n,e,t){n?Rt(t,n,e):e()}function AD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,f=!1,m=()=>{f&&!u.length&&!l&&e.complete()},y=S=>l<r?D(S):u.push(S),D=S=>{o&&e.next(S),l++;let M=!1;Me(t(S,h++)).subscribe(ae(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let V=u.shift();s?Rt(e,s,()=>D(V)):D(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(ae(e,y,()=>{f=!0,m()})),()=>{a?.()}}function We(n,e,t=1/0){return te(e)?We((r,i)=>X((o,s)=>e(r,o,i,s))(Me(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>AD(r,i,n,t)))}function Tr(n=1/0){return We(Ct,n)}function SD(){return Tr(1)}function Mo(...n){return SD()(ge(n,An(n)))}function bl(n){return new de(e=>{Me(n()).subscribe(e)})}function eg(...n){let e=dl(n),{args:t,keys:r}=Dl(n),i=new de(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let f=!1;Me(t[h]).subscribe(ae(o,m=>{f||(f=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Cl(r,a):a),o.complete())}))}});return e?i.pipe(Il(e)):i}function tg(...n){let e=An(n),t=vD(n,1/0),r=n;return r.length?r.length===1?Me(r[0]):Tr(t)(ge(r,e)):bt}function st(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ar(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ae(t,void 0,void 0,s=>{o=Me(n(s,Ar(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function MD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ae(s,h=>{let f=l++;u=a?n(u,h,f):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Sr(n,e){return te(e)?We(n,e,1):We(n,1)}function Mr(n){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Jn(n){return n<=0?()=>bt:se((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ng(n){return X(()=>n)}function rg(n,e=Ct){return n=n??aP,se((t,r)=>{let i,o=!0;t.subscribe(ae(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function aP(n,e){return n===e}function Tl(n=uP){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function uP(){return new Zn}function xo(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Lt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?st((i,o)=>n(i,o,r)):Ct,Jn(1),t?Mr(e):Tl(()=>new Zn))}function Ro(n){return n<=0?()=>bt:se((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ig(n,e){let t=arguments.length>=2;return r=>r.pipe(n?st((i,o)=>n(i,o,r)):Ct,Ro(1),t?Mr(e):Tl(()=>new Zn))}function Va(){return se((n,e)=>{let t,r=!1;n.subscribe(ae(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function _i(n,e){return se(MD(n,e,arguments.length>=2,!0))}function xD(n={}){let{connector:e=()=>new ke,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=f=!1},D=()=>{let S=s;y(),S?.unsubscribe()};return se((S,M)=>{l++,!f&&!h&&m();let V=u=u??e();M.add(()=>{l--,l===0&&!f&&!h&&(a=og(D,i))}),V.subscribe(M),!s&&l>0&&(s=new Yn({next:H=>V.next(H),error:H=>{f=!0,m(),a=og(y,t,H),V.error(H)},complete:()=>{h=!0,m(),a=og(y,r),V.complete()}}),Me(S).subscribe(s))})(o)}}function og(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Yn({next:()=>{r.unsubscribe(),n()}});return Me(e(...t)).subscribe(r)}function Al(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,xD({connector:()=>new al(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function wi(...n){let e=An(n);return se((t,r)=>{(e?Mo(n,t,e):Mo(n,t)).subscribe(r)})}function Fe(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;Me(n(u,h)).subscribe(i=ae(r,f=>r.next(e?e(u,f,h,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Sl(n,e){return te(e)?Fe(()=>n,e):Fe(()=>n)}function sg(n){return se((e,t)=>{Me(n).subscribe(ae(t,()=>t.complete(),Na)),!t.closed&&e.subscribe(t)})}function $e(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ct}var cP="https://g.co/ng/security#xss",K=class extends Error{constructor(e,t){super(md(e,t)),this.code=e}};function md(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Qa(n){return{toString:n}.toString()}var Ml="__parameters__";function lP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function vC(n,e,t){return Qa(()=>{let r=lP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let f=u.hasOwnProperty(Ml)?u[Ml]:Object.defineProperty(u,Ml,{value:[]})[Ml];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var rr=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function dP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function At(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(At).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function RD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var hP=be({__forward_ref__:be});function Ya(n){return n.__forward_ref__=Ya,n.toString=function(){return At(this())},n}function Tt(n){return _C(n)?n():n}function _C(n){return typeof n=="function"&&n.hasOwnProperty(hP)&&n.__forward_ref__===Ya}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yd(n){return ND(n,EC)||ND(n,IC)}function wC(n){return yd(n)!==null}function ND(n,e){return n.hasOwnProperty(e)?n[e]:null}function fP(n){let e=n&&(n[EC]||n[IC]);return e||null}function PD(n){return n&&(n.hasOwnProperty(OD)||n.hasOwnProperty(pP))?n[OD]:null}var EC=be({\u0275prov:be}),OD=be({\u0275inj:be}),IC=be({ngInjectableDef:be}),pP=be({ngInjectorDef:be}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function DC(n){return n&&!!n.\u0275providers}var gP=be({\u0275cmp:be}),mP=be({\u0275dir:be}),yP=be({\u0275pipe:be}),vP=be({\u0275mod:be}),Ul=be({\u0275fac:be}),Ua=be({__NG_ELEMENT_ID__:be}),kD=be({__NG_ENV_ID__:be});function Bl(n){return typeof n=="string"?n:n==null?"":String(n)}function _P(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Bl(n)}function wP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new K(-200,n)}function pm(n,e){throw new K(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Ig;function CC(){return Ig}function Kt(n){let e=Ig;return Ig=n,e}function bC(n,e,t){let r=yd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;pm(n,"Injector")}var EP={},$a=EP,Dg="__NG_DI_FLAG__",$l="ngTempTokenPath",IP="ngTokenPath",DP=/\n/gm,CP="\u0275",FD="__source",Fo;function bP(){return Fo}function xr(n){let e=Fo;return Fo=n,e}function TP(n,e=ue.Default){if(Fo===void 0)throw new K(-203,!1);return Fo===null?bC(n,void 0,e):Fo.get(n,e&ue.Optional?null:void 0,e)}function L(n,e=ue.Default){return(CC()||TP)(Tt(n),e)}function k(n,e=ue.Default){return L(n,vd(e))}function vd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cg(n){let e=[];for(let t=0;t<n.length;t++){let r=Tt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=AP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function TC(n,e){return n[Dg]=e,n.prototype[Dg]=e,n}function AP(n){return n[Dg]}function SP(n,e,t,r){let i=n[$l];throw e[FD]&&i.unshift(e[FD]),n.message=MP(`
`+n.message,i,t,r),n[IP]=i,n[$l]=null,n}function MP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==CP?n.slice(2):n;let i=At(e);if(Array.isArray(e))i=e.map(At).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(DP,`
  `)}`}var xi=TC(vC("Optional"),8);var _d=TC(vC("SkipSelf"),4);function Lo(n,e){let t=n.hasOwnProperty(Ul);return t?n[Ul]:null}function gm(n,e){n.forEach(t=>Array.isArray(t)?gm(t,e):e(t))}function AC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ql(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function RP(n,e,t){let r=Za(n,e);return r>=0?n[r|1]=t:(r=~r,xP(n,r,e,t)),r}function ag(n,e){let t=Za(n,e);if(t>=0)return n[t|1]}function Za(n,e){return NP(n,e,1)}function NP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var jo={},jt=[],Ii=new q(""),SC=new q("",-1),MC=new q(""),Hl=class{get(e,t=$a){if(t===$a){let r=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw r.name="NullInjectorError",r}return t}},xC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(xC||{}),xn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(xn||{}),Nr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Nr||{});function PP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function bg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];kP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function OP(n){return n===3||n===4||n===6}function kP(n){return n.charCodeAt(0)===64}function qa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?VD(n,t,i,null,e[++r]):VD(n,t,i,null,null))}}return n}function VD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var RC="ng-template";function FP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&PP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(mm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function mm(n){return n.type===4&&n.value!==RC}function VP(n,e,t){let r=n.type===4&&!t?RC:n.value;return e===r}function LP(n,e,t){let r=4,i=n.attrs,o=i!==null?BP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!hn(r)&&!hn(u))return!1;if(s&&hn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!VP(n,u,t)||u===""&&e.length===1){if(hn(r))return!1;s=!0}}else if(r&8){if(i===null||!FP(n,i,u,t)){if(hn(r))return!1;s=!0}}else{let l=e[++a],h=jP(u,i,mm(n),t);if(h===-1){if(hn(r))return!1;s=!0;continue}if(l!==""){let f;if(h>o?f="":f=i[h+1].toLowerCase(),r&2&&l!==f){if(hn(r))return!1;s=!0}}}}return hn(r)||s}function hn(n){return(n&1)===0}function jP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return $P(e,n)}function UP(n,e,t=!1){for(let r=0;r<e.length;r++)if(LP(n,e[r],t))return!0;return!1}function BP(n){for(let e=0;e<n.length;e++){let t=n[e];if(OP(t))return e}return n.length}function $P(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LD(n,e){return n?":not("+e.trim()+")":e}function qP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hn(s)&&(e+=LD(o,i),i=""),r=s,o=o||!hn(r);t++}return i!==""&&(e+=LD(o,i)),e}function HP(n){return n.map(qP).join(",")}function zP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hn(i))break;i=o}r++}return{attrs:e,classes:t}}function Yo(n){return Qa(()=>{let e=FC(n),t=le(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xn.Emulated,styles:n.styles||jt,_:null,schemas:n.schemas||null,tView:null,id:""});VC(t);let r=n.dependencies;return t.directiveDefs=UD(r,!1),t.pipeDefs=UD(r,!0),t.id=KP(t),t})}function GP(n){return Pr(n)||NC(n)}function WP(n){return n!==null}function nt(n){return Qa(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jD(n,e){if(n==null)return jo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Nr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Nr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Zt(n){return Qa(()=>{let e=FC(n);return VC(e),e})}function Pr(n){return n[gP]||null}function NC(n){return n[mP]||null}function PC(n){return n[yP]||null}function OC(n){let e=Pr(n)||NC(n)||PC(n);return e!==null?e.standalone:!1}function kC(n,e){let t=n[vP]||null;if(!t&&e===!0)throw new Error(`Type ${At(n)} does not have '\u0275mod' property.`);return t}function FC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||jo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jD(n.inputs,e),outputs:jD(n.outputs),debugInfo:null}}function VC(n){n.features?.forEach(e=>e(n))}function UD(n,e){if(!n)return null;let t=e?PC:GP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(WP)}function KP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ja(n){return{\u0275providers:n}}function QP(...n){return{\u0275providers:LC(!0,n),\u0275fromNgModule:!0}}function LC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return gm(e,s=>{let a=s;Tg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jC(i,o),t}function jC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ym(i,o=>{e(o,r)})}}function Tg(n,e,t,r){if(n=Tt(n),!n)return!1;let i=null,o=PD(n),s=!o&&Pr(n);if(!o&&!s){let u=n.ngModule;if(o=PD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Tg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{gm(o.imports,h=>{Tg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&jC(l,e)}if(!a){let l=Lo(i)||(()=>new i);e({provide:i,useFactory:l,deps:jt},i),e({provide:MC,useValue:i,multi:!0},i),e({provide:Ii,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;ym(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function ym(n,e){for(let t of n)DC(t)&&(t=t.\u0275providers),Array.isArray(t)?ym(t,e):e(t)}var YP=be({provide:String,useValue:be});function UC(n){return n!==null&&typeof n=="object"&&YP in n}function ZP(n){return!!(n&&n.useExisting)}function JP(n){return!!(n&&n.useFactory)}function Uo(n){return typeof n=="function"}function XP(n){return!!n.useClass}var wd=new q(""),Fl={},eO={},ug;function vm(){return ug===void 0&&(ug=new Hl),ug}var Bt=class{},Ha=class extends Bt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sg(e,s=>this.processProvider(s)),this.records.set(SC,No(void 0,this)),i.has("environment")&&this.records.set(Bt,No(void 0,this));let o=this.records.get(wd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(MC,jt,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=xr(this),r=Kt(void 0),i;try{return e()}finally{xr(t),Kt(r)}}get(e,t=$a,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(kD))return e[kD](this);r=vd(r);let i,o=xr(this),s=Kt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=oO(e)&&yd(e);l&&this.injectableDefInScope(l)?u=No(Ag(e),Fl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?vm():this.parent;return t=r&ue.Optional&&t===$a?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[$l]=a[$l]||[]).unshift(At(e)),o)throw a;return SP(a,e,"R3InjectorError",this.source)}else throw a}finally{Kt(s),xr(o)}}resolveInjectorInitializers(){let e=_e(null),t=xr(this),r=Kt(void 0),i;try{let o=this.get(Ii,jt,ue.Self);for(let s of o)s()}finally{xr(t),Kt(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(At(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=Tt(e);let t=Uo(e)?e:Tt(e&&e.provide),r=nO(e);if(!Uo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=No(void 0,Fl,!0),i.factory=()=>Cg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===Fl&&(t.value=eO,t.value=t.factory()),typeof t.value=="object"&&t.value&&iO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Tt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ag(n){let e=yd(n),t=e!==null?e.factory:Lo(n);if(t!==null)return t;if(n instanceof q)throw new K(204,!1);if(n instanceof Function)return tO(n);throw new K(204,!1)}function tO(n){if(n.length>0)throw new K(204,!1);let t=fP(n);return t!==null?()=>t.factory(n):()=>new n}function nO(n){if(UC(n))return No(void 0,n.useValue);{let e=BC(n);return No(e,Fl)}}function BC(n,e,t){let r;if(Uo(n)){let i=Tt(n);return Lo(i)||Ag(i)}else if(UC(n))r=()=>Tt(n.useValue);else if(JP(n))r=()=>n.useFactory(...Cg(n.deps||[]));else if(ZP(n))r=()=>L(Tt(n.useExisting));else{let i=Tt(n&&(n.useClass||n.provide));if(rO(n))r=()=>new i(...Cg(n.deps));else return Lo(i)||Ag(i)}return r}function No(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rO(n){return!!n.deps}function iO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function oO(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Sg(n,e){for(let t of n)Array.isArray(t)?Sg(t,e):t&&DC(t)?Sg(t.\u0275providers,e):e(t)}function yn(n,e){n instanceof Ha&&n.assertNotDestroyed();let t,r=xr(n),i=Kt(void 0);try{return e()}finally{xr(r),Kt(i)}}function $C(){return CC()!==void 0||bP()!=null}function sO(n){if(!$C())throw new K(-203,!1)}function aO(n){let e=rr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function uO(n){return typeof n=="function"}var $t=0,he=1,ne=2,vt=3,fn=4,vn=5,Rn=6,zl=7,gn=8,Bo=9,Xn=10,Ve=11,za=12,BD=13,Zo=14,Yt=15,$o=16,Po=17,qo=18,Ed=19,qC=20,Rr=21,cg=22,Qt=23,Nt=25,HC=1,Ga=6,er=7,Gl=8,Wl=9,Ut=10,Kl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Kl||{});function pn(n){return Array.isArray(n)&&typeof n[HC]=="object"}function Pn(n){return Array.isArray(n)&&n[HC]===!0}function zC(n){return(n.flags&4)!==0}function Xa(n){return n.componentOffset>-1}function _m(n){return(n.flags&1)===1}function Or(n){return!!n.template}function Ql(n){return(n[ne]&512)!==0}var Mg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function GC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Jo(){return WC}function WC(n){return n.type.prototype.ngOnChanges&&(n.setInput=lO),cO}Jo.ngInherit=!0;function cO(){let n=QC(this),e=n?.current;if(e){let t=n.previous;if(t===jo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function lO(n,e,t,r,i){let o=this.declaredInputs[r],s=QC(n)||dO(n,{previous:jo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Mg(l&&l.currentValue,t,u===jo),GC(n,e,i,t)}var KC="__ngSimpleChanges__";function QC(n){return n[KC]||null}function dO(n,e){return n[KC]=e}var $D=null;var Sn=function(n,e,t){$D?.(n,e,t)},hO="svg",fO="math";function mn(n){for(;Array.isArray(n);)n=n[$t];return n}function YC(n,e){return mn(e[n])}function Jt(n,e){return mn(e[n.index])}function ZC(n,e){return n.data[e]}function Fr(n,e){let t=e[n];return pn(t)?t:t[$t]}function wm(n){return(n[ne]&128)===128}function pO(n){return Pn(n[vt])}function Yl(n,e){return e==null?null:n[e]}function JC(n){n[Po]=0}function XC(n){n[ne]&1024||(n[ne]|=1024,wm(n)&&Dd(n))}function gO(n,e){for(;n>0;)e=e[Zo],n--;return e}function Id(n){return!!(n[ne]&9216||n[Qt]?.dirty)}function xg(n){n[Xn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Id(n)&&Dd(n)}function Dd(n){n[Xn].changeDetectionScheduler?.notify(0);let e=Di(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!wm(e)));)e=Di(e)}function e0(n,e){if((n[ne]&256)===256)throw new K(911,!1);n[Rr]===null&&(n[Rr]=[]),n[Rr].push(e)}function mO(n,e){if(n[Rr]===null)return;let t=n[Rr].indexOf(e);t!==-1&&n[Rr].splice(t,1)}function Di(n){let e=n[vt];return Pn(e)?e[vt]:e}var ce={lFrame:h0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var t0=!1;function yO(){return ce.lFrame.elementDepthCount}function vO(){ce.lFrame.elementDepthCount++}function _O(){ce.lFrame.elementDepthCount--}function n0(){return ce.bindingsEnabled}function eu(){return ce.skipHydrationRootTNode!==null}function wO(n){return ce.skipHydrationRootTNode===n}function EO(n){ce.skipHydrationRootTNode=n}function IO(){ce.skipHydrationRootTNode=null}function xe(){return ce.lFrame.lView}function Xt(){return ce.lFrame.tView}function r0(n){return ce.lFrame.contextLView=n,n[gn]}function i0(n){return ce.lFrame.contextLView=null,n}function Ot(){let n=o0();for(;n!==null&&n.type===64;)n=n.parent;return n}function o0(){return ce.lFrame.currentTNode}function DO(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function tu(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function s0(){return ce.lFrame.isParent}function CO(){ce.lFrame.isParent=!1}function a0(){return t0}function qD(n){t0=n}function bO(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function TO(){return ce.lFrame.bindingIndex}function AO(n){return ce.lFrame.bindingIndex=n}function Em(){return ce.lFrame.bindingIndex++}function u0(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function SO(){return ce.lFrame.inI18n}function MO(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rg(e)}function xO(){return ce.lFrame.currentDirectiveIndex}function Rg(n){ce.lFrame.currentDirectiveIndex=n}function RO(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function c0(n){ce.lFrame.currentQueryIndex=n}function NO(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[vn]:null}function l0(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=NO(o),i===null||(o=o[Zo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=d0();return r.currentTNode=e,r.lView=n,!0}function Im(n){let e=d0(),t=n[he];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function d0(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?h0(n):e}function h0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function f0(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var p0=f0;function Dm(){let n=f0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function PO(n){return(ce.lFrame.contextLView=gO(n,ce.lFrame.contextLView))[gn]}function Ri(){return ce.lFrame.selectedIndex}function Ci(n){ce.lFrame.selectedIndex=n}function g0(){let n=ce.lFrame;return ZC(n.tView,n.selectedIndex)}function m0(){return ce.lFrame.currentNamespace}var y0=!0;function Cm(){return y0}function Vr(n){y0=n}function OO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=WC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function bm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Vl(n,e,t){v0(n,e,3,t)}function Ll(n,e,t,r){(n[ne]&3)===t&&v0(n,e,t,r)}function lg(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function v0(n,e,t,r){let i=r!==void 0?n[Po]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Po]+=65536),(a<o||o==-1)&&(kO(n,t,e,u),n[Po]=(n[Po]&4294901760)+u+2),u++}function HD(n,e){Sn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),Sn(5,n,e)}}function kO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Po]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,HD(a,o)):HD(a,o)}var Vo=-1,bi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function FO(n){return n instanceof bi}function VO(n){return(n.flags&8)!==0}function LO(n){return(n.flags&16)!==0}var dg={},Ng=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=vd(r);let i=this.injector.get(e,dg,r);return i!==dg||t===dg?i:this.parentInjector.get(e,t,r)}};function _0(n){return n!==Vo}function Zl(n){return n&32767}function jO(n){return n>>16}function Jl(n,e){let t=jO(n),r=e;for(;t>0;)r=r[Zo],t--;return r}var Pg=!0;function zD(n){let e=Pg;return Pg=n,e}var UO=256,w0=UO-1,E0=5,BO=0,Mn={};function $O(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ua)&&(r=t[Ua]),r==null&&(r=t[Ua]=BO++);let i=r&w0,o=1<<i;e.data[n+(i>>E0)]|=o}function Xl(n,e){let t=I0(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,hg(r.data,n),hg(e,null),hg(r.blueprint,null));let i=Tm(n,e),o=n.injectorIndex;if(_0(i)){let s=Zl(i),a=Jl(i,e),u=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function hg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function I0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Tm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=A0(i),r===null)return Vo;if(t++,i=i[Zo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Vo}function Og(n,e,t){$O(n,e,t)}function D0(n,e,t){if(t&ue.Optional||n!==void 0)return n;pm(e,"NodeInjector")}function C0(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[Bo],o=Kt(void 0);try{return i?i.get(e,r,t&ue.Optional):bC(e,r,t&ue.Optional)}finally{Kt(o)}}return D0(r,e,t)}function b0(n,e,t,r=ue.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ue.Self)){let s=WO(n,e,t,r,Mn);if(s!==Mn)return s}let o=T0(n,e,t,r,Mn);if(o!==Mn)return o}return C0(e,t,r,i)}function T0(n,e,t,r,i){let o=zO(t);if(typeof o=="function"){if(!l0(e,n,r))return r&ue.Host?D0(i,t,r):C0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))pm(t);else return s}finally{p0()}}else if(typeof o=="number"){let s=null,a=I0(n,e),u=Vo,l=r&ue.Host?e[Yt][vn]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?Tm(n,e):e[a+8],u===Vo||!WD(r,!1)?a=-1:(s=e[he],a=Zl(u),e=Jl(u,e)));a!==-1;){let h=e[he];if(GD(o,a,h.data)){let f=qO(a,e,t,s,r,l);if(f!==Mn)return f}u=e[a+8],u!==Vo&&WD(r,e[he].data[a+8]===l)&&GD(o,a,e)?(s=h,a=Zl(u),e=Jl(u,e)):a=-1}}return i}function qO(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],u=r==null?Xa(a)&&Pg:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=HO(a,s,t,u,l);return h!==null?Ho(e,s,h,a):Mn}function HO(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,f=r?a:a+h,m=i?a+h:l;for(let y=f;y<m;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Or(y)&&y.type===t)return u}return null}function Ho(n,e,t,r){let i=n[t],o=e.data;if(FO(i)){let s=i;s.resolving&&wP(_P(o[t]));let a=zD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Kt(s.injectImpl):null,h=l0(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&OO(t,o[t],e)}finally{l!==null&&Kt(l),zD(a),s.resolving=!1,p0()}}return i}function zO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ua)?n[Ua]:void 0;return typeof e=="number"?e>=0?e&w0:GO:e}function GD(n,e,t){let r=1<<n;return!!(t[e+(n>>E0)]&r)}function WD(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var Ei=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return b0(this._tNode,this._lView,e,vd(r),t)}};function GO(){return new Ei(Ot(),xe())}function nu(n){return Qa(()=>{let e=n.prototype.constructor,t=e[Ul]||kg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ul]||kg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function kg(n){return _C(n)?()=>{let e=kg(Tt(n));return e&&e()}:Lo(n)}function WO(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=T0(o,s,t,r|ue.Self,Mn);if(a!==Mn)return a;let u=o.parent;if(!u){let l=s[qC];if(l){let h=l.get(t,Mn,r);if(h!==Mn)return h}u=A0(s),s=s[Zo]}o=u}return i}function A0(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[vn]:null}function KD(n,e=null,t=null,r){let i=S0(n,e,t,r);return i.resolveInjectorInitializers(),i}function S0(n,e=null,t=null,r,i=new Set){let o=[t||jt,QP(n)];return r=r||(typeof n=="object"?void 0:At(n)),new Ha(o,e||vm(),r||null,i)}var Pt=class n{static{this.THROW_IF_NOT_FOUND=$a}static{this.NULL=new Hl}static create(e,t){if(Array.isArray(e))return KD({name:""},t,e,"");{let r=e.name??"";return KD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>L(SC)})}static{this.__NG_ELEMENT_ID__=-1}};var KO=new q("");KO.__NG_ELEMENT_ID__=n=>{let e=Ot();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new K(204,!1)};var QO="ngOriginalError";function fg(n){return n[QO]}var M0=!0,Am=(()=>{class n{static{this.__NG_ELEMENT_ID__=YO}static{this.__NG_ENV_ID__=t=>t}}return n})(),Fg=class extends Am{constructor(e){super(),this._lView=e}onDestroy(e){return e0(this._lView,e),()=>mO(this._lView,e)}};function YO(){return new Fg(xe())}var Ni=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Vg=class extends ke{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,$C()&&(this.destroyRef=k(Am,{optional:!0})??void 0,this.pendingTasks=k(Ni,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},et=Vg;function ed(...n){}function x0(n){let e,t;function r(){n=ed;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function QD(n){return queueMicrotask(()=>n()),()=>{n=ed}}var Sm="isAngularZone",td=Sm+"_ID",ZO=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=M0}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ek(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JO,ed,ed);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},JO={};function Mm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function XO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){x0(()=>{n.callbackScheduled=!1,Lg(n),n.isCheckStableRunning=!0,Mm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Lg(n)}function ek(n){let e=()=>{XO(n)},t=ZO++;n._inner=n._inner.fork({name:"angular",properties:{[Sm]:!0,[td]:t,[td+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(tk(u))return r.invokeTask(o,s,a,u);try{return YD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ZD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return YD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!nk(u)&&e(),ZD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Lg(n),Mm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Lg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function YD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ZD(n){n._nesting--,Mm(n)}var nd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function tk(n){return R0(n,"__ignore_ng_zone__")}function nk(n){return R0(n,"__scheduler_tick__")}function R0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function rk(n="zone.js",e){return n==="noop"?new nd:n==="zone.js"?new pe(e):n}var tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&fg(e);for(;t&&fg(t);)t=fg(t);return t||null}},ik=new q("",{providedIn:"root",factory:()=>{let n=k(pe),e=k(tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function ok(){return Cd(Ot(),xe())}function Cd(n,e){return new Lr(Jt(n,e))}var Lr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=ok}}return n})();var sk="ngSkipHydration",ak="ngskiphydration";function N0(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===ak)return!0}return!1}function P0(n){return n.hasAttribute(sk)}function rd(n){return(n.flags&128)===128}function uk(n){if(rd(n))return!0;let e=n.parent;for(;e;){if(rd(n)||N0(e))return!0;e=e.parent}return!1}var O0=new Map,ck=0;function lk(){return ck++}function dk(n){O0.set(n[Ed],n)}function jg(n){O0.delete(n[Ed])}var JD="__ngContext__";function Ti(n,e){pn(e)?(n[JD]=e[Ed],dk(e)):n[JD]=e}function k0(n){return V0(n[za])}function F0(n){return V0(n[fn])}function V0(n){for(;n!==null&&!Pn(n);)n=n[fn];return n}var Ug;function L0(n){Ug=n}function bd(){if(Ug!==void 0)return Ug;if(typeof document<"u")return document;throw new K(210,!1)}var ru=new q("",{providedIn:"root",factory:()=>hk}),hk="ng",xm=new q(""),ht=new q("",{providedIn:"platform",factory:()=>"unknown"});var Rm=new q("",{providedIn:"root",factory:()=>bd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function fk(){let n=new Xo;return k(ht)==="browser"&&(n.store=pk(bd(),k(ru))),n}var Xo=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=W({token:n,providedIn:"root",factory:fk})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function pk(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var j0="h",U0="b",Bg=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Bg||{}),gk="e",mk="t",Nm="c",B0="x",id="r",yk="i",vk="n",$0="d";var _k="__nghData__",q0=_k,pg="ngh",wk="nghm",H0=()=>null;function Ek(n,e,t=!1){let r=n.getAttribute(pg);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,u={};if(r!==""){let h=e.get(Xo,null,{optional:!0});h!==null&&(u=h.get(q0,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Td(l,0,n.nextSibling)),a?n.setAttribute(pg,a):n.removeAttribute(pg),l}function Ik(){H0=Ek}function Pm(n,e,t=!1){return H0(n,e,t)}function Dk(n){let e=n._lView;return e[he].type===2?null:(Ql(e)&&(e=e[Nt]),e)}function Ck(n){return n.textContent?.replace(/\s/gm,"")}function bk(n){let e=bd(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Ck(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Td(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function $g(n,e){return n.segmentHeads?.[e]??null}function Tk(n,e){let t=n.data,r=t[gk]?.[e]??null;return r===null&&t[Nm]?.[e]&&(r=Om(n,e)),r}function z0(n,e){return n.data[Nm]?.[e]??null}function Om(n,e){let t=z0(n,e)??[],r=0;for(let i of t)r+=i[id]*(i[B0]??1);return r}function Ak(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[$0];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function iu(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[$0];n.disconnectedNodes=t?new Set(t):null}return!!Ak(n)?.has(e)}var xl=new q(""),G0=!1,W0=new q("",{providedIn:"root",factory:()=>G0});var qg=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cP})`}};function km(n){return n instanceof qg?n.changingThisBreaksApplicationSecurity:n}var Sk=/^>|^->|<!--|-->|--!>|<!-$/g,Mk=/(<|>)/g,xk="\u200B$1\u200B";function Rk(n){return n.replace(Sk,e=>e.replace(Mk,xk))}function Nk(n){return n.ownerDocument.body}function K0(n){return n instanceof Function?n():n}function La(n){return(n??k(Pt)).get(ht)==="browser"}var Nn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Nn||{}),Pk;function Fm(n,e){return Pk(n,e)}function Oo(n,e,t,r,i){if(r!=null){let o,s=!1;Pn(r)?o=r:pn(r)&&(s=!0,r=r[$t]);let a=mn(r);n===0&&t!==null?i==null?eb(e,t,a):od(e,t,a,i||null,!0):n===1&&t!==null?od(e,t,a,i||null,!0):n===2?Um(e,a,s):n===3&&e.destroyNode(a),o!=null&&Kk(e,n,o,t,i)}}function Q0(n,e){return n.createText(e)}function Ok(n,e,t){n.setValue(e,t)}function Y0(n,e){return n.createComment(Rk(e))}function Vm(n,e,t){return n.createElement(e,t)}function kk(n,e){Z0(n,e),e[$t]=null,e[vn]=null}function Fk(n,e,t,r,i,o){r[$t]=i,r[vn]=e,Ad(n,r,t,1,i,o)}function Z0(n,e){e[Xn].changeDetectionScheduler?.notify(9),Ad(n,e,e[Ve],2,null,null)}function Vk(n){let e=n[za];if(!e)return gg(n[he],n);for(;e;){let t=null;if(pn(e))t=e[za];else{let r=e[Ut];r&&(t=r)}if(!t){for(;e&&!e[fn]&&e!==n;)pn(e)&&gg(e[he],e),e=e[vt];e===null&&(e=n),pn(e)&&gg(e[he],e),t=e&&e[fn]}e=t}}function Lk(n,e,t,r){let i=Ut+r,o=t.length;r>0&&(t[i-1][fn]=e),r<o-Ut?(e[fn]=t[i],AC(t,Ut+r,e)):(t.push(e),e[fn]=null),e[vt]=t;let s=e[$o];s!==null&&t!==s&&J0(s,e);let a=e[qo];a!==null&&a.insertView(n),xg(e),e[ne]|=128}function J0(n,e){let t=n[Wl],r=e[vt];if(pn(r))n[ne]|=Kl.HasTransplantedViews;else{let i=r[vt][Yt];e[Yt]!==i&&(n[ne]|=Kl.HasTransplantedViews)}t===null?n[Wl]=[e]:t.push(e)}function Lm(n,e){let t=n[Wl],r=t.indexOf(e);t.splice(r,1)}function Hg(n,e){if(n.length<=Ut)return;let t=Ut+e,r=n[t];if(r){let i=r[$o];i!==null&&i!==n&&Lm(i,r),e>0&&(n[t-1][fn]=r[fn]);let o=ql(n,Ut+e);kk(r[he],r);let s=o[qo];s!==null&&s.detachView(o[he]),r[vt]=null,r[fn]=null,r[ne]&=-129}return r}function X0(n,e){if(!(e[ne]&256)){let t=e[Ve];t.destroyNode&&Ad(n,e,t,3,null,null),Vk(e)}}function gg(n,e){if(e[ne]&256)return;let t=_e(null);try{e[ne]&=-129,e[ne]|=256,e[Qt]&&Up(e[Qt]),Uk(n,e),jk(n,e),e[he].type===1&&e[Ve].destroy();let r=e[$o];if(r!==null&&Pn(e[vt])){r!==e[vt]&&Lm(r,e);let i=e[qo];i!==null&&i.detachView(n)}jg(e)}finally{_e(t)}}function jk(n,e){let t=n.cleanup,r=e[zl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[zl]=null);let i=e[Rr];if(i!==null){e[Rr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Uk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof bi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Sn(4,a,u);try{u.call(a)}finally{Sn(5,a,u)}}else{Sn(4,i,o);try{o.call(i)}finally{Sn(5,i,o)}}}}}function Bk(n,e,t){return $k(n,e.parent,t)}function $k(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[$t];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===xn.None||o===xn.Emulated)return null}return Jt(r,t)}}function od(n,e,t,r,i){n.insertBefore(e,t,r,i)}function eb(n,e,t){n.appendChild(e,t)}function XD(n,e,t,r,i){r!==null?od(n,e,t,r,i):eb(n,e,t)}function tb(n,e){return n.parentNode(e)}function qk(n,e){return n.nextSibling(e)}function Hk(n,e,t){return Gk(n,e,t)}function zk(n,e,t){return n.type&40?Jt(n,t):null}var Gk=zk,eC;function jm(n,e,t,r){let i=Bk(n,r,e),o=e[Ve],s=r.parent||e[vn],a=Hk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)XD(o,i,t[u],a,!1);else XD(o,i,t,a,!1);eC!==void 0&&eC(o,r,e,t,i)}function ja(n,e){if(e!==null){let t=e.type;if(t&3)return Jt(e,n);if(t&4)return zg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ja(n,r);{let i=n[e.index];return Pn(i)?zg(-1,i):mn(i)}}else{if(t&128)return ja(n,e.next);if(t&32)return Fm(e,n)()||mn(n[e.index]);{let r=nb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Di(n[Yt]);return ja(i,r)}else return ja(n,e.next)}}}return null}function nb(n,e){if(e!==null){let r=n[Yt][vn],i=e.projection;return r.projection[i]}return null}function zg(n,e){let t=Ut+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return ja(r,i)}return e[er]}function Um(n,e,t){n.removeChild(null,e,t)}function rb(n){n.textContent=""}function Bm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Ti(mn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Bm(n,e,t.child,r,i,o,!1),Oo(e,n,i,a,o);else if(u&32){let l=Fm(t,r),h;for(;h=l();)Oo(e,n,i,h,o);Oo(e,n,i,a,o)}else u&16?Wk(n,e,r,t,i,o):Oo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ad(n,e,t,r,i,o){Bm(t,r,n.firstChild,e,i,o,!1)}function Wk(n,e,t,r,i,o){let s=t[Yt],u=s[vn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Oo(e,n,i,h,o)}else{let l=u,h=s[vt];rd(r)&&(l.flags|=128),Bm(n,e,l,h,i,o,!0)}}function Kk(n,e,t,r,i){let o=t[er],s=mn(t);o!==s&&Oo(e,n,r,o,i);for(let a=Ut;a<t.length;a++){let u=t[a];Ad(u[he],u,n,e,r,o)}}function Qk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Nn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Nn.Important),n.setStyle(t,r,i,o))}}function Yk(n,e,t){n.setAttribute(e,"style",t)}function ib(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ob(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&bg(n,e,r),i!==null&&ib(n,e,i),o!==null&&Yk(n,e,o)}var ir={};function en(n=1){sb(Xt(),xe(),Ri()+n,!1)}function sb(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Vl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ll(e,o,0,t)}Ci(t)}function De(n,e=ue.Default){let t=xe();if(t===null)return L(n,e);let r=Ot();return b0(r,t,Tt(n),e)}function ab(){let n="invalid";throw new Error(n)}function ub(n,e,t,r,i,o){let s=_e(null);try{let a=null;i&Nr.SignalBased&&(a=e[r][Qn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Nr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):GC(e,a,r,o)}finally{_e(s)}}function Zk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ci(~i);else{let o=i,s=t[++r],a=t[++r];MO(s,o);let u=e[o];a(2,u)}}}finally{Ci(-1)}}function Sd(n,e,t,r,i,o,s,a,u,l,h){let f=e.blueprint.slice();return f[$t]=i,f[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(f[ne]|=2048),JC(f),f[vt]=f[Zo]=n,f[gn]=t,f[Xn]=s||n&&n[Xn],f[Ve]=a||n&&n[Ve],f[Bo]=u||n&&n[Bo]||null,f[vn]=o,f[Ed]=lk(),f[Rn]=h,f[qC]=l,f[Yt]=e.type==2?n[Yt]:f,f}function Md(n,e,t,r,i){let o=n.data[e];if(o===null)o=Jk(n,e,t,r,i),SO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=DO();o.injectorIndex=s===null?-1:s.injectorIndex}return tu(o,!0),o}function Jk(n,e,t,r,i){let o=o0(),s=s0(),a=s?o:o&&o.parent,u=n.data[e]=i1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function cb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function lb(n,e,t,r,i){let o=Ri(),s=r&2;try{Ci(-1),s&&e.length>Nt&&sb(n,e,Nt,!1),Sn(s?2:0,i),t(r,i)}finally{Ci(o),Sn(s?3:1,i)}}function db(n,e,t){if(zC(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function hb(n,e,t){n0()&&(l1(n,e,t,Jt(t,e)),(t.flags&64)===64&&_b(n,e,t))}function fb(n,e,t=Jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function pb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=$m(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $m(n,e,t,r,i,o,s,a,u,l,h){let f=Nt+r,m=f+i,y=Xk(f,m),D=typeof l=="function"?l():l;return y[he]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function Xk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ir);return t}function e1(n,e,t,r){let o=r.get(W0,G0)||t===xn.ShadowDom,s=n.selectRootElement(e,o);return t1(s),s}function t1(n){gb(n)}var gb=()=>null;function n1(n){P0(n)?rb(n):bk(n)}function r1(){gb=n1}function i1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return eu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function tC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Nr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?nC(r,t,l,a,u):nC(r,t,l,a)}return r}function nC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function o1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let f=o[h],m=t?t.get(f):null,y=m?m.inputs:null,D=m?m.outputs:null;u=tC(0,f.inputs,h,u,y),l=tC(1,f.outputs,h,l,D);let S=u!==null&&s!==null&&!mm(e)?_1(u,h,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function s1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function mb(n,e,t,r,i,o,s,a){let u=Jt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(qm(n,t,h,r,i),Xa(e)&&a1(t,e.index)):e.type&3?(r=s1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function a1(n,e){let t=Fr(e,n);t[ne]&16||(t[ne]|=64)}function yb(n,e,t,r){if(n0()){let i=r===null?null:{"":-1},o=h1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&vb(n,e,t,s,i,a),i&&f1(t,r,i)}t.mergedAttrs=qa(t.mergedAttrs,t.attrs)}function vb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Og(Xl(t,e),n,r[l].type);g1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=cb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=qa(t.mergedAttrs,h.hostAttrs),m1(n,t,e,u,h),p1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let f=h.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}o1(n,t,o)}function u1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;c1(s)!=a&&s.push(a),s.push(t,r,o)}}function c1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function l1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Xa(t)&&y1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Xl(t,e),Ti(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Ho(e,n,a,t);if(Ti(l,e),s!==null&&v1(e,a-i,l,u,t,s),Or(u)){let h=Fr(t.index,e);h[gn]=Ho(e,n,a,t)}}}function _b(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=xO();try{Ci(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Rg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&d1(u,l)}}finally{Ci(-1),Rg(s)}}function d1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function h1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(UP(e,s.selectors,!1))if(r||(r=[]),Or(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Gg(n,e,u)}else r.unshift(s),Gg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Gg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function f1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}}function p1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Or(e)&&(t[""]=n)}}function g1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function m1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Lo(i.type,!0)),s=new bi(o,Or(i),De);n.blueprint[r]=s,t[r]=s,u1(n,e,r,cb(n,t,i.hostVars,ir),i)}function y1(n,e,t){let r=Jt(e,n),i=pb(t),o=n[Xn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=xd(n,Sd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function v1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],f=s[a++];ub(r,t,u,l,h,f)}}function _1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function wb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Eb(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];c0(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function xd(n,e){return n[za]?n[BD][fn]=e:n[za]=e,n[BD]=e,e}function Wg(n,e,t){c0(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function w1(n){return n[zl]??=[]}function E1(n){return n.cleanup??=[]}function Ib(n,e){let t=n[Bo],r=t?t.get(tr,null):null;r&&r.handleError(e)}function qm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];ub(h,l,r,a,u,i)}}function Db(n,e,t){let r=YC(e,n);Ok(n[Ve],r,t)}function I1(n,e){let t=Fr(e,n),r=t[he];D1(r,t);let i=t[$t];i!==null&&t[Rn]===null&&(t[Rn]=Pm(i,t[Bo])),Hm(r,t,t[gn])}function D1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hm(n,e,t){Im(e);try{let r=n.viewQuery;r!==null&&Wg(1,r,t);let i=n.template;i!==null&&lb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[qo]?.finishViewCreation(n),n.staticContentQueries&&Eb(n,e),n.staticViewQueries&&Wg(2,n.viewQuery,t);let o=n.components;o!==null&&C1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Dm()}}function C1(n,e){for(let t=0;t<e.length;t++)I1(n,e[t])}function b1(n,e,t,r){let i=_e(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=Sd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[$o]=l;let h=n[qo];return h!==null&&(u[qo]=h.createEmbeddedView(o)),Hm(o,u,t),u}finally{_e(i)}}function rC(n,e){return!e||e.firstChild===null||rd(n)}function T1(n,e,t,r=!0){let i=e[he];if(Lk(i,e,n,t),r){let s=zg(t,n),a=e[Ve],u=tb(a,n[er]);u!==null&&Fk(i,n[vn],a,e,u,s)}let o=e[Rn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function sd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(mn(o)),Pn(o)&&A1(o,r);let s=t.type;if(s&8)sd(n,e,t.child,r);else if(s&32){let a=Fm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=nb(e,t);if(Array.isArray(a))r.push(...a);else{let u=Di(e[Yt]);sd(u[he],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function A1(n,e){for(let t=Ut;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&sd(r[he],r,i,e)}n[er]!==n[$t]&&e.push(n[er])}var Cb=[];function S1(n){return n[Qt]??M1(n)}function M1(n){let e=Cb.pop()??Object.create(R1);return e.lView=n,e}function x1(n){n.lView[Qt]!==n&&(n.lView=null,Cb.push(n))}var R1=le(j({},Ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Dd(n.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function N1(n){let e=n[Qt]??Object.create(P1);return e.lView=n,e}var P1=le(j({},Ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Di(n.lView);for(;e&&!bb(e[he]);)e=Di(e);e&&XC(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function bb(n){return n.type!==2}var O1=100;function Tb(n,e=!0,t=0){let r=n[Xn],i=r.rendererFactory,o=!1;o||i.begin?.();try{k1(n,t)}catch(s){throw e&&Ib(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function k1(n,e){let t=a0();try{qD(!0),Kg(n,e);let r=0;for(;Id(n);){if(r===O1)throw new K(103,!1);r++,Kg(n,1)}}finally{qD(t)}}function F1(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Xn].inlineEffectRunner?.flush(),Im(e);let a=!0,u=null,l=null;o||(bb(n)?(l=S1(e),u=Xc(l)):YI()===null?(a=!1,l=N1(e),u=Xc(l)):e[Qt]&&(Up(e[Qt]),e[Qt]=null));try{JC(e),AO(n.bindingStartIndex),t!==null&&lb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Vl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Ll(e,y,0,null),lg(e,0)}if(s||V1(e),Ab(e,0),n.contentQueries!==null&&Eb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Vl(e,y)}else{let y=n.contentHooks;y!==null&&Ll(e,y,1),lg(e,1)}Zk(n,e);let f=n.components;f!==null&&Mb(e,f,0);let m=n.viewQuery;if(m!==null&&Wg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Vl(e,y)}else{let y=n.viewHooks;y!==null&&Ll(e,y,2),lg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cg]){for(let y of e[cg])y();e[cg]=null}o||(e[ne]&=-73)}catch(h){throw o||Dd(e),h}finally{l!==null&&(Lp(l,u),a&&x1(l)),Dm()}}function Ab(n,e){for(let t=k0(n);t!==null;t=F0(t))for(let r=Ut;r<t.length;r++){let i=t[r];Sb(i,e)}}function V1(n){for(let e=k0(n);e!==null;e=F0(e)){if(!(e[ne]&Kl.HasTransplantedViews))continue;let t=e[Wl];for(let r=0;r<t.length;r++){let i=t[r];XC(i)}}}function L1(n,e,t){let r=Fr(e,n);Sb(r,t)}function Sb(n,e){wm(n)&&Kg(n,e)}function Kg(n,e){let r=n[he],i=n[ne],o=n[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&jp(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)F1(r,n,r.template,n[gn]);else if(i&8192){Ab(n,1);let a=r.components;a!==null&&Mb(n,a,1)}}function Mb(n,e,t){for(let r=0;r<e.length;r++)L1(n,e[r],t)}function zm(n,e){let t=a0()?64:1088;for(n[Xn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Di(n);if(Ql(n)&&!r)return n;n=r}return null}var Ai=class{get rootNodes(){let e=this._lView,t=e[he];return sd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gn]}set context(e){this._lView[gn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(Pn(e)){let t=e[Gl],r=t?t.indexOf(this):-1;r>-1&&(Hg(e,r),ql(t,r))}this._attachedToViewContainer=!1}X0(this._lView[he],this._lView)}onDestroy(e){e0(this._lView,e)}markForCheck(){zm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){xg(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,Tb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ql(this._lView),t=this._lView[$o];t!==null&&!e&&Lm(t,this._lView),Z0(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=Ql(this._lView),r=this._lView[$o];r!==null&&!t&&J0(r,this._lView),xg(this._lView)}},Rd=(()=>{class n{static{this.__NG_ELEMENT_ID__=B1}}return n})(),j1=Rd,U1=class extends j1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=b1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ai(i)}};function B1(){return $1(Ot(),xe())}function $1(n,e){return n.type&4?new U1(e,n,Cd(n,e)):null}var q1=new RegExp(`^(\\d+)*(${U0}|${j0})*(.*)`);function H1(n){let e=n.match(q1),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let f=parseInt(h,10)||1;a.push(l,f)}return[s,...a]}function z1(n){return!n.prev&&n.parent?.type===8}function mg(n){return n.index-Nt}function G1(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Nd(n,e,t,r){let i=mg(r),o=G1(n,i);if(o===void 0){let s=n.data[vk];if(s?.[i])o=K1(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(z1(r)){let l=mg(r.parent);o=$g(n,l)}else{let l=Jt(u,t);if(a)o=l.firstChild;else{let h=mg(u),f=$g(n,h);if(u.type===2&&f){let y=Om(n,h)+1;o=Pd(y,f)}else o=l.nextSibling}}}}return o}function Pd(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function W1(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Bg.FirstChild:t=t.firstChild;break;case Bg.NextSibling:t=t.nextSibling;break}}return t}function K1(n,e){let[t,...r]=H1(n),i;if(t===j0)i=e[Yt][$t];else if(t===U0)i=Nk(e[Yt][$t]);else{let o=Number(t);i=mn(e[o+Nt])}return W1(i,r)}var Q1=!1;function Y1(n){Q1=n}function Z1(n){let e=n[Rn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Ve];for(let o of r.values())J1(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function J1(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Nt);i&&Um(n,i,!1)}}function xb(n){let e=n[Ga]??[],r=n[vt][Ve];for(let i of e)X1(i,r);n[Ga]=jt}function X1(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[id];for(;t<i;){let o=r.nextSibling;Um(e,r,!1),r=o,t++}}}function Rb(n){xb(n);let e=n[$t];pn(e)&&ad(e);for(let t=Ut;t<n.length;t++)ad(n[t])}function ad(n){Z1(n);let e=n[he];for(let t=Nt;t<e.bindingStartIndex;t++)if(Pn(n[t])){let r=n[t];Rb(r)}else pn(n[t])&&ad(n[t])}function eF(n){let e=n._views;for(let t of e){let r=Dk(t);r!==null&&r[$t]!==null&&(pn(r)?ad(r):Rb(r))}}function tF(n,e){let t=[];for(let r of e)for(let i=0;i<(r[B0]??1);i++){let o={data:r,firstChild:null};r[id]>0&&(o.firstChild=n,n=Pd(r[id],n)),t.push(o)}return[n,t]}var Nb=()=>null;function nF(n,e){let t=n[Ga];return!e||t===null||t.length===0?null:t[0].data[yk]===e?t.shift():(xb(n),null)}function rF(){Nb=nF}function iC(n,e){return Nb(n,e)}var zo=class{},Pb=new q("",{providedIn:"root",factory:()=>!1});var Ob=new q(""),kb=new q(""),Qg=class{},ud=class{};function iF(n){let e=Error(`No component factory found for ${At(n)}.`);return e[oF]=n,e}var oF="ngComponent";var Yg=class{resolveComponentFactory(e){throw iF(e)}},Go=class{static{this.NULL=new Yg}},Wo=class{},Pi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>sF()}}return n})();function sF(){let n=xe(),e=Ot(),t=Fr(e.index,n);return(pn(t)?t:n)[Ve]}var aF=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function Zg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=RD(i,a);else if(o==2){let u=a,l=e[++s];r=RD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var cd=class extends Go{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Pr(e);return new Ko(t,this.ngModule)}};function oC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Nr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Nr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function uF(n){let e=n.toLowerCase();return e==="svg"?hO:e==="math"?fO:null}var Ko=class extends ud{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=oC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return oC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=HP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof Bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ng(e,s):e,u=a.get(Wo,null);if(u===null)throw new K(407,!1);let l=a.get(aF,null),h=a.get(zo,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?e1(m,r,this.componentDef.encapsulation,a):Vm(m,y,uF(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let M=null;D!==null&&(M=Pm(D,a,!0));let V=$m(0,null,null,1,0,null,null,null,null,null,null),H=Sd(null,V,null,S,null,null,f,m,a,null,M);Im(H);let F,G,ee=null;try{let Y=this.componentDef,E,v=null;Y.findHostDirectiveDefs?(E=[],v=new Map,Y.findHostDirectiveDefs(Y,E,v),E.push(Y)):E=[Y];let w=cF(H,D);ee=lF(w,D,Y,E,H,f,m),G=ZC(V,Nt),D&&fF(m,Y,D,r),t!==void 0&&pF(G,this.ngContentSelectors,t),F=hF(ee,Y,E,v,H,[gF]),Hm(V,H,null)}catch(Y){throw ee!==null&&jg(ee),jg(H),Y}finally{Dm()}return new Jg(this.componentType,F,Cd(G,H),H,G)}finally{_e(o)}}},Jg=class extends Qg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ai(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;qm(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Fr(this._tNode.index,o);zm(s,1)}}get injector(){return new Ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cF(n,e){let t=n[he],r=Nt;return n[r]=e,Md(t,r,2,"#host",null)}function lF(n,e,t,r,i,o,s){let a=i[he];dF(r,n,e,s);let u=null;e!==null&&(u=Pm(e,i[Bo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let f=Sd(i,pb(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Gg(a,n,r.length-1),xd(i,f),i[n.index]=f}function dF(n,e,t,r){for(let i of n)e.mergedAttrs=qa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Zg(e,e.mergedAttrs,!0),t!==null&&ob(r,t,e))}function hF(n,e,t,r,i,o){let s=Ot(),a=i[he],u=Jt(s,i);vb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let f=s.directiveStart+h,m=Ho(i,a,f,s);Ti(m,i)}_b(a,i,s),u&&Ti(u,i);let l=Ho(i,a,s.directiveStart+s.componentOffset,s);if(n[gn]=i[gn]=l,o!==null)for(let h of o)h(l,e);return db(a,s,i),l}function fF(n,e,t,r){if(r)bg(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:o}=zP(e.selectors[0]);i&&bg(n,t,i),o&&o.length>0&&ib(n,t,o.join(" "))}}function pF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function gF(){let n=Ot();bm(xe()[he],n)}var es=(()=>{class n{static{this.__NG_ELEMENT_ID__=mF}}return n})();function mF(){let n=Ot();return vF(n,xe())}var yF=es,Fb=class extends yF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Cd(this._hostTNode,this._hostLView)}get injector(){return new Ei(this._hostTNode,this._hostLView)}get parentInjector(){let e=Tm(this._hostTNode,this._hostLView);if(_0(e)){let t=Jl(e,this._hostLView),r=Zl(e),i=t[he].data[r+8];return new Ei(i,t)}else return new Ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=iC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,rC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!uO(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new Ko(Pr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(Bt,null);S&&(o=S)}let h=Pr(u.componentType??{}),f=iC(this._lContainer,h?.id??null),m=f?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,rC(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(pO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[vt],l=new Fb(u,u[vn],u[vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return T1(s,i,o,r),e.attachToViewContainerRef(),AC(yg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Hg(this._lContainer,t);r&&(ql(yg(this._lContainer),t),X0(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=Hg(this._lContainer,t);return r&&ql(yg(this._lContainer),t)!=null?new Ai(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sC(n){return n[Gl]}function yg(n){return n[Gl]||(n[Gl]=[])}function vF(n,e){let t,r=e[n.index];return Pn(r)?t=r:(t=wb(r,e,null,n),e[n.index]=t,xd(e,t)),Vb(t,e,n,r),new Fb(t,n,e)}function _F(n,e){let t=n[Ve],r=t.createComment(""),i=Jt(e,n),o=tb(t,i);return od(t,o,r,qk(t,i),!1),r}var Vb=Lb,Gm=()=>!1;function wF(n,e,t){return Gm(n,e,t)}function Lb(n,e,t,r){if(n[er])return;let i;t.type&8?i=mn(r):i=_F(e,t),n[er]=i}function EF(n,e,t){if(n[er]&&n[Ga])return!0;let r=t[Rn],i=e.index-Nt;if(!r||uk(e)||iu(r,i))return!1;let s=$g(r,i),a=r.data[Nm]?.[i],[u,l]=tF(s,a);return n[er]=u,n[Ga]=l,!0}function IF(n,e,t,r){Gm(n,t,e)||Lb(n,e,t,r)}function DF(){Vb=IF,Gm=EF}var aC=new Set;function jr(n){aC.has(n)||(aC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function CF(n){return typeof n=="function"&&n[Qn]!==void 0}function Od(n,e){jr("NgSignals");let t=aD(n),r=t[Qn];return e?.equal&&(r.equal=e.equal),t.set=i=>Bp(r,i),t.update=i=>uD(r,i),t.asReadonly=bF.bind(t),t}function bF(){let n=this[Qn];if(n.readonlyFn===void 0){let e=()=>this();e[Qn]=n,n.readonlyFn=e}return n.readonlyFn}function jb(n){return CF(n)&&typeof n.set=="function"}function TF(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(xF))}return o}return ld.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((f,m)=>{a.push(""),s.push(r(f).then(y=>{a[l+m]=y,h.splice(h.indexOf(f),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>RF(o));e.push(u)}),SF(),Promise.all(e).then(()=>{})}var ld=new Map,AF=new Set;function SF(){let n=ld;return ld=new Map,n}function MF(){return ld.size===0}function xF(n){return typeof n=="string"?n:n.text()}function RF(n){AF.delete(n)}function NF(n){return Object.getPrototypeOf(n.prototype).constructor}function ts(n){let e=NF(n.type),t=!0,r=[n];for(;e;){let i;if(Or(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Rl(n.inputs),s.inputTransforms=Rl(n.inputTransforms),s.declaredInputs=Rl(n.declaredInputs),s.outputs=Rl(n.outputs);let a=i.hostBindings;a&&VF(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&kF(n,u),l&&FF(n,l),PF(n,i),dP(n.outputs,i.outputs),Or(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ts&&(t=!1)}}e=Object.getPrototypeOf(e)}OF(r)}function PF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function OF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qa(i.hostAttrs,t=qa(t,i.hostAttrs))}}function Rl(n){return n===jo?{}:n===jt?[]:n}function kF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function FF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function VF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var kr=class{},Wa=class{};var dd=class extends kr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cd(this);let o=kC(e);this._bootstrapComponents=K0(o.bootstrap),this._r3Injector=S0(e,t,[{provide:kr,useValue:this},{provide:Go,useValue:this.componentFactoryResolver},...r],At(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},hd=class extends Wa{constructor(e){super(),this.moduleType=e}create(e){return new dd(this.moduleType,e,[])}};function LF(n,e,t){return new dd(n,e,t,!1)}var Xg=class extends kr{constructor(e){super(),this.componentFactoryResolver=new cd(this),this.instance=null;let t=new Ha([...e.providers,{provide:kr,useValue:this},{provide:Go,useValue:this.componentFactoryResolver}],e.parent||vm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kd(n,e,t=null){return new Xg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Ub(n){return Wm(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function jF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Wm(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function UF(n,e,t){return n[e]=t}function Si(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function BF(n,e,t,r){let i=Si(n,e,t);return Si(n,e+1,r)||i}function ou(n){return(n.flags&32)===32}function $F(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Md(e,n,4,s||null,a||null);yb(e,t,h,Yl(l,u)),bm(e,h);let f=h.tView=$m(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}function qF(n,e,t,r,i,o,s,a,u,l){let h=t+Nt,f=e.firstCreatePass?$F(h,e,n,r,i,o,s,a,u):e.data[h];tu(f,!1);let m=Bb(e,n,f,t);Cm()&&jm(e,n,m,f),Ti(m,n);let y=wb(m,n,m,f);return n[h]=y,xd(n,y),wF(y,f,n),_m(f)&&hb(e,n,f),u!=null&&fb(n,f,l),f}function su(n,e,t,r,i,o,s,a){let u=xe(),l=Xt(),h=Yl(l.consts,o);return qF(u,l,n,e,t,r,i,h,s,a),su}var Bb=$b;function $b(n,e,t,r){return Vr(!0),e[Ve].createComment("")}function HF(n,e,t,r){let i=e[Rn],o=!i||eu()||ou(t)||iu(i,r);if(Vr(o),o)return $b(n,e,t,r);let s=i.data[mk]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Nd(i,n,e,t);Td(i,r,a);let u=Om(i,r);return Pd(u,a)}function zF(){Bb=HF}var ko=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ko||{}),qb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),em=class n{constructor(){this.ngZone=k(pe),this.scheduler=k(zo),this.errorHandler=k(tr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ko.EarlyRead,ko.Write,ko.MixedReadWrite,ko.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},tm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Km(n,e){!e?.injector&&sO(Km);let t=e?.injector??k(Pt);return La(t)?(jr("NgAfterNextRender"),WF(n,t,e,!0)):KF}function GF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function WF(n,e,t,r){let i=e.get(qb);i.impl??=e.get(em);let o=t?.phase??ko.MixedReadWrite,s=new tm(i.impl,GF(n,o),r,e.get(Am));return i.impl.register(s),s}var KF={destroy(){}};function QF(n,e,t,r){return Si(n,Em(),t)?e+Bl(t)+r:ir}function YF(n,e,t,r,i,o){let s=TO(),a=BF(n,s,t,i);return u0(2),a?e+Bl(t)+r+Bl(i)+o:ir}function Nl(n,e){return n<<17|e<<2}function Mi(n){return n>>17&32767}function ZF(n){return(n&2)==2}function JF(n,e){return n&131071|e<<17}function nm(n){return n|2}function Qo(n){return(n&131068)>>2}function vg(n,e){return n&-131069|e<<2}function XF(n){return(n&1)===1}function rm(n){return n|1}function eV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Mi(s),u=Qo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let f=t;h=f[1],(h===null||Za(f,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Mi(n[a+1]);n[r+1]=Nl(m,a),m!==0&&(n[m+1]=vg(n[m+1],r)),n[a+1]=JF(n[a+1],r)}else n[r+1]=Nl(a,0),a!==0&&(n[a+1]=vg(n[a+1],r)),a=r;else n[r+1]=Nl(u,0),a===0?a=r:n[u+1]=vg(n[u+1],r),u=r;l&&(n[r+1]=nm(n[r+1])),uC(n,h,r,!0),uC(n,h,r,!1),tV(e,h,n,r,o),s=Nl(a,u),o?e.classBindings=s:e.styleBindings=s}function tV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Za(o,e)>=0&&(t[r+1]=rm(t[r+1]))}function uC(n,e,t,r){let i=n[t+1],o=e===null,s=r?Mi(i):Qo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];nV(u,e)&&(a=!0,n[s+1]=r?rm(l):nm(l)),s=r?Mi(l):Qo(l)}a&&(n[t+1]=r?nm(i):rm(i))}function nV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Za(n,e)>=0:!1}function Ur(n,e,t){let r=xe(),i=Em();if(Si(r,i,e)){let o=Xt(),s=g0();mb(o,s,r,n,e,r[Ve],t,!1)}return Ur}function cC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";qm(n,t,o[s],s,r)}function Qm(n,e){return rV(n,e,null,!0),Qm}function rV(n,e,t,r){let i=xe(),o=Xt(),s=u0(2);if(o.firstUpdatePass&&oV(o,n,s,r),e!==ir&&Si(i,s,e)){let a=o.data[Ri()];lV(o,a,i,i[Ve],n,i[s+1]=dV(e,t),r,s)}}function iV(n,e){return e>=n.expandoStartIndex}function oV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ri()],s=iV(n,t);hV(o,r)&&e===null&&!s&&(e=!1),e=sV(i,o,e,r),eV(i,o,e,t,s,r)}}function sV(n,e,t,r){let i=RO(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=_g(null,n,e,t,r),t=Ka(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=_g(i,n,e,t,r),o===null){let u=aV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=_g(null,n,e,u[1],r),u=Ka(u,e.attrs,r),uV(n,e,r,u))}else o=cV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function aV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Qo(r)!==0)return n[Mi(r)]}function uV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Mi(i)]=r}function cV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ka(r,s,t)}return Ka(r,e.attrs,t)}function _g(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ka(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ka(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),RP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function lV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=XF(l)?lC(u,e,t,i,Qo(l),s):void 0;if(!fd(h)){fd(o)||ZF(l)&&(o=lC(u,null,t,i,a,s));let f=YC(Ri(),t);Qk(r,s,f,i,o)}}function lC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,f=h===null,m=t[i+1];m===ir&&(m=f?jt:void 0);let y=f?ag(m,r):h===r?m:void 0;if(l&&!fd(y)&&(y=ag(u,r)),fd(y)&&(a=y,s))return a;let D=n[i+1];i=s?Mi(D):Qo(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ag(u,r))}return a}function fd(n){return n!==void 0}function dV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=At(km(n)))),n}function hV(n,e){return(n.flags&(e?8:16))!==0}function fV(n,e,t,r,i,o){let s=e.consts,a=Yl(s,i),u=Md(e,n,2,r,a);return yb(e,t,u,Yl(s,o)),u.attrs!==null&&Zg(u,u.attrs,!1),u.mergedAttrs!==null&&Zg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function at(n,e,t,r){let i=xe(),o=Xt(),s=Nt+n,a=i[Ve],u=o.firstCreatePass?fV(s,o,i,e,t,r):o.data[s],l=Hb(o,i,u,a,e,n);i[s]=l;let h=_m(u);return tu(u,!0),ob(a,l,u),!ou(u)&&Cm()&&jm(o,i,l,u),yO()===0&&Ti(l,i),vO(),h&&(hb(o,i,u),db(o,u,i)),r!==null&&fb(i,u),at}function ut(){let n=Ot();s0()?CO():(n=n.parent,tu(n,!1));let e=n;wO(e)&&IO(),_O();let t=Xt();return t.firstCreatePass&&(bm(t,n),zC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&VO(e)&&cC(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&LO(e)&&cC(t,e,xe(),e.stylesWithoutHost,!1),ut}function Oi(n,e,t,r){return at(n,e,t,r),ut(),Oi}var Hb=(n,e,t,r,i,o)=>(Vr(!0),Vm(r,i,m0()));function pV(n,e,t,r,i,o){let s=e[Rn],a=!s||eu()||ou(t)||iu(s,o);if(Vr(a),a)return Vm(r,i,m0());let u=Nd(s,n,e,t);return z0(s,o)&&Td(s,o,u.nextSibling),s&&(N0(t)||P0(u))&&Xa(t)&&(EO(t),rb(u)),u}function gV(){Hb=pV}var mV=(n,e,t,r)=>(Vr(!0),Y0(e[Ve],""));function yV(n,e,t,r){let i,o=e[Rn],s=!o||eu()||iu(o,r)||ou(t);if(Vr(s),s)return Y0(e[Ve],"");let a=Nd(o,n,e,t),u=Tk(o,r);return Td(o,r,a),i=Pd(u,a),i}function vV(){mV=yV}function zb(){return xe()}var pd="en-US";var _V=pd;function wV(n){typeof n=="string"&&(_V=n.toLowerCase().replace(/_/g,"-"))}var EV=(n,e,t)=>{};function or(n,e,t,r){let i=xe(),o=Xt(),s=Ot();return Gb(o,i,i[Ve],s,n,e,r),or}function IV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[zl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Gb(n,e,t,r,i,o,s){let a=_m(r),l=n.firstCreatePass&&E1(n),h=e[gn],f=w1(e),m=!0;if(r.type&3||s){let S=Jt(r,e),M=s?s(S):S,V=f.length,H=s?G=>s(mn(G[r.index])):r.index,F=null;if(!s&&a&&(F=IV(n,e,i,r.index)),F!==null){let G=F.__ngLastListenerFn__||F;G.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,m=!1}else{o=hC(r,e,h,o),EV(S,i,o);let G=t.listen(M,i,o);f.push(o,G),l&&l.push(i,H,V,V+1)}}else o=hC(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let S=D.length;if(S)for(let M=0;M<S;M+=2){let V=D[M],H=D[M+1],ee=e[V][H].subscribe(o),Y=f.length;f.push(o,ee),l&&l.push(i,r.index,Y,-(Y+1))}}}function dC(n,e,t,r){let i=_e(null);try{return Sn(6,e,t),t(r)!==!1}catch(o){return Ib(n,o),!1}finally{Sn(7,e,t),_e(i)}}function hC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Fr(n.index,e):e;zm(s,5);let a=dC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=dC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Fd(n=1){return PO(n)}function tn(n,e=""){let t=xe(),r=Xt(),i=n+Nt,o=r.firstCreatePass?Md(r,i,1,e,null):r.data[i],s=Wb(r,t,o,e,n);t[i]=s,Cm()&&jm(r,t,s,o),tu(o,!1)}var Wb=(n,e,t,r,i)=>(Vr(!0),Q0(e[Ve],r));function DV(n,e,t,r,i){let o=e[Rn],s=!o||eu()||ou(t)||iu(o,i);return Vr(s),s?Q0(e[Ve],r):Nd(o,n,e,t)}function CV(){Wb=DV}function Ym(n){return au("",n,""),Ym}function au(n,e,t){let r=xe(),i=QF(r,n,e,t);return i!==ir&&Db(r,Ri(),i),au}function Zm(n,e,t,r,i){let o=xe(),s=YF(o,n,e,t,r,i);return s!==ir&&Db(o,Ri(),s),Zm}function Vd(n,e,t){jb(e)&&(e=e());let r=xe(),i=Em();if(Si(r,i,e)){let o=Xt(),s=g0();mb(o,s,r,n,e,r[Ve],t,!1)}return Vd}function Jm(n,e){let t=jb(n);return t&&n.set(e),t}function Ld(n,e){let t=xe(),r=Xt(),i=Ot();return Gb(r,t,t[Ve],i,n,e),Ld}function bV(n,e,t){let r=Xt();if(r.firstCreatePass){let i=Or(n);im(t,r.data,r.blueprint,i,!0),im(e,r.data,r.blueprint,i,!1)}}function im(n,e,t,r,i){if(n=Tt(n),Array.isArray(n))for(let o=0;o<n.length;o++)im(n[o],e,t,r,i);else{let o=Xt(),s=xe(),a=Ot(),u=Uo(n)?n:Tt(n.provide),l=BC(n),h=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Uo(n)||!n.multi){let y=new bi(l,i,De),D=Eg(u,e,i?h:h+m,f);D===-1?(Og(Xl(a,s),o,u),wg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=Eg(u,e,h+m,f),D=Eg(u,e,h,h+m),S=y>=0&&t[y],M=D>=0&&t[D];if(i&&!M||!i&&!S){Og(Xl(a,s),o,u);let V=SV(i?AV:TV,t.length,i,r,l);!i&&M&&(t[D].providerFactory=V),wg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=Kb(t[i?D:y],l,!i&&r);wg(o,n,y>-1?y:D,V)}!i&&r&&M&&t[D].componentProviders++}}}function wg(n,e,t,r){let i=Uo(e),o=XP(e);if(i||o){let u=(o?Tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Kb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Eg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function TV(n,e,t,r){return om(this.multi,[])}function AV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ho(t,t[he],this.providerFactory.index,r);o=a.slice(0,s),om(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],om(i,o);return o}function om(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function SV(n,e,t,r,i){let o=new bi(n,t,De);return o.multi=[],o.index=e,o.componentProviders=0,Kb(o,i,r&&!t),o}function Xm(n,e=[]){return t=>{t.providersResolver=(r,i)=>bV(r,i?i(n):n,e)}}var MV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=LC(!1,t.type),i=r.length>0?kd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(L(Bt))})}}return n})();function Qb(n){jr("NgStandalone"),n.getStandaloneInjector=e=>e.get(MV).getOrCreateStandaloneInjector(n)}function Yb(n,e,t,r){return RV(xe(),bO(),n,e,t,r)}function xV(n,e){let t=n[e];return t===ir?void 0:t}function RV(n,e,t,r,i,o){let s=e+t;return Si(n,s,i)?UF(n,s+1,o?r.call(o,i):r(i)):xV(n,s+1)}var Pl=null;function NV(n){Pl!==null&&(n.defaultEncapsulation!==Pl.defaultEncapsulation||n.preserveWhitespaces!==Pl.preserveWhitespaces)||(Pl=n)}var nr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Zb=new nr("18.2.5");var jd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ey=new q(""),uu=new q(""),Ud=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ty||(PV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(pe),L(Bd),L(uu))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Bd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return ty?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function PV(n){ty=n}var ty;function ki(n){return!!n&&typeof n.then=="function"}function Jb(n){return!!n&&typeof n.subscribe=="function"}var $d=new q(""),Xb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k($d,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ki(o))t.push(o);else if(Jb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ns=new q("");function OV(){sD(()=>{throw new K(600,!1)})}function kV(n){return n.isBoundToModule}var FV=10;function VV(n,e,t){try{let r=t();return ki(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function eT(n,e){return Array.isArray(e)?e.reduce(eT,n):j(j({},n),e)}var _n=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(ik),this.afterRenderManager=k(qb),this.zonelessEnabled=k(Pb),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ke,this.afterTick=new ke,this.componentTypes=[],this.components=[],this.isStable=k(Ni).hasPendingTasks.pipe(X(t=>!t)),this._injector=k(Bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ud;if(!this._injector.get(Xb).done){let m=!i&&OC(t),y=!1;throw new K(405,y)}let s;i?s=t:s=this._injector.get(Go).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=kV(s)?void 0:this._injector.get(kr),u=r||s.selector,l=s.create(Pt.NULL,[],u,a),h=l.location.nativeElement,f=l.injector.get(ey,null);return f?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),jl(this.components,l),f?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Wo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<FV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)LV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Id(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;jl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ns,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Ol;function qd(n){Ol??=new WeakMap;let e=Ol.get(n);if(e)return e;let t=n.isStable.pipe(Lt(r=>r)).toPromise().then(()=>{});return Ol.set(n,t),n.onDestroy(()=>Ol?.delete(n)),t}function LV(n,e,t,r){if(!t&&!Id(n))return;Tb(n,e,t&&!r?0:1)}var sm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Hd=(()=>{class n{compileModuleSync(t){return new hd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=kC(t),o=K0(i.declarations).reduce((s,a)=>{let u=Pr(a);return u&&s.push(new Ko(u)),s},[]);return new sm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jV=new q("");function UV(n,e,t){let r=new hd(t);return Promise.resolve(r)}function fC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var BV=(()=>{class n{constructor(){this.zone=k(pe),this.changeDetectionScheduler=k(zo),this.applicationRef=k(_n)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $V({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(le(j({},tT()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:Ii,multi:!0,useFactory:()=>{let r=k(BV,{optional:!0});return()=>r.initialize()}},{provide:Ii,multi:!0,useFactory:()=>{let r=k(qV);return()=>{r.initialize()}}},e===!0?{provide:Ob,useValue:!0}:[],{provide:kb,useValue:t??M0}]}function tT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var qV=(()=>{class n{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=k(pe),this.pendingTasks=k(Ni)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var HV=(()=>{class n{constructor(){this.appRef=k(_n),this.taskService=k(Ni),this.ngZone=k(pe),this.zonelessEnabled=k(Pb),this.disableScheduling=k(Ob,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ue,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(td):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(kb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof nd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?QD:x0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(td+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,QD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zV(){return typeof $localize<"u"&&$localize.locale||pd}var ny=new q("",{providedIn:"root",factory:()=>k(ny,ue.Optional|ue.SkipSelf)||zV()});var ry=new q("");function kl(n){return!!n.platformInjector}function GV(n){let e=kl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{kl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(tr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),kl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ry);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else n.moduleRef.onDestroy(()=>{jl(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return VV(r,t,()=>{let o=e.get(Xb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ny,pd);if(wV(s||pd),kl(n)){let a=e.get(_n);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return WV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function WV(n,e){let t=n.injector.get(_n);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new K(-403,!1);e.push(n)}var nT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>rk(r?.ngZone,le(j({},tT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[$V({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:zo,useExisting:HV}],u=LF(t.moduleType,this.injector,a);return GV({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(t,r=[]){let i=eT({},r);return UV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ry,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(Pt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ba=null,rT=new q("");function KV(n){if(Ba&&!Ba.get(rT,!1))throw new K(400,!1);OV(),Ba=n;let e=n.get(nT);return ZV(n),e}function iy(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=iT();if(!s||s.injector.get(rT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):KV(QV(a,r))}return YV(i)}}function QV(n=[],e){return Pt.create({name:e,providers:[{provide:wd,useValue:"platform"},{provide:ry,useValue:new Set([()=>Ba=null])},...n]})}function YV(n){let e=iT();if(!e)throw new K(401,!1);return e}function iT(){return Ba?.get(nT)??null}function ZV(n){n.get(xm,null)?.forEach(t=>t())}function oy(){return!1}var Fi=(()=>{class n{static{this.__NG_ELEMENT_ID__=JV}}return n})();function JV(n){return XV(Ot(),xe(),(n&16)===16)}function XV(n,e,t){if(Xa(n)&&!t){let r=Fr(n.index,e);return new Ai(r,r)}else if(n.type&175){let r=e[Yt];return new Ai(r,e)}return null}var am=class{constructor(){}supports(e){return Ub(e)}create(e){return new um(e)}},eL=(n,e)=>e,um=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||eL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<pC(r,i,o)?t:r,a=pC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let f=s.previousIndex;o[f]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Ub(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,jF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new cm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new gd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},cm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},lm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},gd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new lm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var dm=class{constructor(){}supports(e){return e instanceof Map||Wm(e)}create(){return new hm}},hm=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Wm(e)))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new fm(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},fm=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function gC(){return new sy([new am])}var sy=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:gC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||gC()),deps:[[n,new _d,new xi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();function mC(){return new ay([new dm])}var ay=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:mC})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mC()),deps:[[n,new _d,new xi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new K(901,!1)}}return n})();var oT=iy(null,"core",[]),sT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(_n))}}static{this.\u0275mod=nt({type:n})}static{this.\u0275inj=tt({})}}return n})();var aT=new q("");var yC=!1;function tL(){yC||(yC=!0,Ik(),gV(),CV(),vV(),zF(),DF(),rF(),r1())}function nL(n,e){return qd(n)}function uT(){return Ja([{provide:xl,useFactory:()=>{let n=!0;return La()&&(n=!!k(Xo,{optional:!0})?.get(q0,null)),n&&jr("NgHydration"),n}},{provide:Ii,useValue:()=>{Y1(!1),La()&&k(xl)&&(rL(),tL())},multi:!0},{provide:W0,useFactory:()=>La()&&k(xl)},{provide:ns,useFactory:()=>{if(La()&&k(xl)){let n=k(_n),e=k(Pt);return()=>{nL(n,e).then(()=>{eF(n)})}}return()=>{}},multi:!0}])}function rL(){let n=bd(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===wk){e=t;break}if(!e)throw new K(-507,!1)}function zd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Gd(n,e){jr("NgSignals");let t=rD(n);return e?.equal&&(t[Qn].equal=e.equal),t}function Br(n){let e=_e(null);try{return n()}finally{_e(e)}}function cT(n){let e=Pr(n);if(!e)return null;let t=new Ko(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var pT=null;function On(){return pT}function gT(n){pT??=n}var Wd=class{};var _t=new q(""),hy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(sL),providedIn:"platform"})}}return n})(),mT=new q(""),sL=(()=>{class n extends hy{constructor(){super(),this._doc=k(_t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return On().getBaseHref(this._doc)}onPopState(t){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function fy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function lT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function sr(n){return n&&n[0]!=="?"?"?"+n:n}var Vi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(py),providedIn:"root"})}}return n})(),yT=new q(""),py=(()=>{class n extends Vi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(_t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+sr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+sr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+sr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(hy),L(yT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vT=(()=>{class n extends Vi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=fy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+sr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+sr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(hy),L(yT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),rs=(()=>{class n{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cL(lT(dT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+sr(r))}normalize(t){return n.stripTrailingSlash(uL(this._basePath,dT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=sr}static{this.joinWithSlash=fy}static{this.stripTrailingSlash=lT}static{this.\u0275fac=function(r){return new(r||n)(L(Vi))}}static{this.\u0275prov=W({token:n,factory:()=>aL(),providedIn:"root"})}}return n})();function aL(){return new rs(L(Vi))}function uL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function dT(n){return n.replace(/\/index.html$/,"")}function cL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function gy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var uy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},_T=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new uy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),hT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);hT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(es),De(Rd),De(sy))}}static{this.\u0275dir=Zt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function hT(n,e){n.context.$implicit=e.item}var wT=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(es),De(Rd))}}static{this.\u0275dir=Zt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),cy=class{constructor(){this.$implicit=null,this.ngIf=null}};function fT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${At(e)}'.`)}var ET=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Nn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(De(Lr),De(ay),De(Pi))}}static{this.\u0275dir=Zt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var IT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=nt({type:n})}static{this.\u0275inj=tt({})}}return n})(),my="browser",lL="server";function dL(n){return n===my}function ar(n){return n===lL}var DT=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>dL(k(ht))?new ly(k(_t),window):new dy})}}return n})(),ly=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=hL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function hL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var dy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Kd=class{};var Yd=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var RT=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(RT||{}),yy=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Yd,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Zd=class n extends yy{constructor(e={}){super(e),this.type=RT.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var pL=new q("");var gL=new q(""),CT="b",bT="h",TT="s",AT="st",ST="u",MT="rt",Qd=new q(""),mL=["GET","HEAD"];function yL(n,e){let y=k(Qd),{isCacheActive:t}=y,r=jI(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!mL.includes(o)||!r.includeRequestsWithAuthHeaders&&vL(n)||r.filter?.(n)===!1)return e(n);let s=k(Xo),a=k(gL,{optional:!0}),u=ar(k(ht));if(a&&!u)throw new K(2803,!1);let l=u&&a?IL(n.url,a):n.url,h=wL(n,l),f=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),f){let{[CT]:D,[MT]:S,[bT]:M,[TT]:V,[AT]:H,[ST]:F}=f,G=D;switch(S){case"arraybuffer":G=new TextEncoder().encode(D).buffer;break;case"blob":G=new Blob([D]);break}let ee=new Yd(M);return Z(new Zd({body:G,headers:ee,status:V,statusText:H,url:F}))}return e(n).pipe($e(D=>{D instanceof Zd&&u&&s.set(h,{[CT]:D.body,[bT]:_L(D.headers,m),[TT]:D.status,[AT]:D.statusText,[ST]:l,[MT]:n.responseType})}))}function vL(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function _L(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function xT(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function wL(n,e){let{params:t,method:r,responseType:i}=n,o=xT(t),s=n.serializeBody();s instanceof URLSearchParams?s=xT(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=EL(a);return u}function EL(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function NT(n){return[{provide:Qd,useFactory:()=>(jr("NgHttpTransferCache"),j({isCacheActive:!0},n))},{provide:pL,useValue:yL,multi:!0,deps:[Xo,Qd]},{provide:ns,multi:!0,useFactory:()=>{let e=k(_n),t=k(Qd);return()=>{qd(e).then(()=>{t.isCacheActive=!1})}}}]}function IL(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var wy=class extends Wd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ey=class n extends wy{static makeCurrent(){gT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=DL();return t==null?null:CL(t)}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return gy(document.cookie,e)}},cu=null;function DL(){return cu=cu||document.querySelector("base"),cu?cu.getAttribute("href"):null}function CL(n){return new URL(n,document.baseURI).pathname}var Iy=class{addToWindow(e){rr.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new K(5103,!1);return o},rr.getAllAngularTestabilities=()=>e.getAllTestabilities(),rr.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=rr.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};rr.frameworkStabilizers||(rr.frameworkStabilizers=[]),rr.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?On().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},bL=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Jd=new q(""),FT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(Jd),L(pe))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),lu=class{constructor(e){this._doc=e}},vy="ng-app-id",VT=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ar(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${vy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(vy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(vy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(_t),L(ru),L(Rm,8),L(ht))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),_y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},by=/%COMP%/g,LT="%COMP%",TL=`_nghost-${LT}`,AL=`_ngcontent-${LT}`,SL=!0,ML=new q("",{providedIn:"root",factory:()=>SL});function xL(n){return AL.replace(by,n)}function RL(n){return TL.replace(by,n)}function jT(n,e){return e.map(t=>t.replace(by,n))}var PT=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ar(a),this.defaultRenderer=new du(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===xn.ShadowDom&&(r=le(j({},r),{encapsulation:xn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Xd?i.applyToHost(t):i instanceof hu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case xn.Emulated:o=new Xd(u,l,r,this.appId,h,s,a,f);break;case xn.ShadowDom:return new Dy(u,l,t,r,s,a,this.nonce,f);default:o=new hu(u,l,r,h,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(FT),L(VT),L(ru),L(ML),L(_t),L(ht),L(pe),L(Rm))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),du=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(_y[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(OT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(OT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=_y[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=_y[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Nn.DashCase|Nn.Important)?e.style.setProperty(t,r,i&Nn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Nn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=On().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function OT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Dy=class extends du{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=jT(i.id,i.styles);for(let h of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},hu=class extends du{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?jT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xd=class extends hu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=xL(l),this.hostAttr=RL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},NL=(()=>{class n extends lu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(_t))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),PL=(()=>{class n extends lu{constructor(t){super(t),this.delegate=k(aT,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,r,i){return this.delegate.addEventListener(t,r,i)}removeEventListener(t,r,i){return this.delegate.removeEventListener(t,r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(_t))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),kT=["alt","control","meta","shift"],OL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},FL=(()=>{class n extends lu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>On().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),kT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=OL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),kT.forEach(s=>{if(s!==i){let a=kL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(_t))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function VL(){Ey.makeCurrent()}function LL(){return new tr}function jL(){return L0(document),document}var UL=[{provide:ht,useValue:my},{provide:xm,useValue:VL,multi:!0},{provide:_t,useFactory:jL,deps:[]}],UT=iy(oT,"browser",UL),BL=new q(""),$L=[{provide:uu,useClass:Iy,deps:[]},{provide:ey,useClass:Ud,deps:[pe,Bd,uu]},{provide:Ud,useClass:Ud,deps:[pe,Bd,uu]}],qL=[{provide:wd,useValue:"root"},{provide:tr,useFactory:LL,deps:[]},{provide:Jd,useClass:NL,multi:!0,deps:[_t,pe,ht]},{provide:Jd,useClass:FL,multi:!0,deps:[_t]},{provide:Jd,useClass:PL,multi:!0},PT,VT,FT,{provide:Wo,useExisting:PT},{provide:Kd,useClass:bL,deps:[]},[]],BT=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ru,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(BL,12))}}static{this.\u0275mod=nt({type:n})}static{this.\u0275inj=tt({providers:[...qL,...$L],imports:[IT,sT]})}}return n})();var $T=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(_t))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Cy=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Cy||{});function qT(...n){let e=[],t=new Set,r=t.has(Cy.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return Ja([[],uT(),t.has(Cy.NoHttpTransferCache)||r?[]:NT({}),e])}var oe="primary",Au=Symbol("RouteTitle"),xy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function cs(n){return new xy(n)}function zL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function GL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kn(n[t],e[t]))return!1;return!0}function kn(n,e){let t=n?Ry(n):void 0,r=e?Ry(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!tA(n[i],e[i]))return!1;return!0}function Ry(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function nA(n){return n.length>0?n[n.length-1]:null}function qr(n){return Xp(n)?n:ki(n)?ge(Promise.resolve(n)):Z(n)}var WL={exact:iA,subset:oA},rA={exact:KL,subset:QL,ignored:()=>!0};function zT(n,e,t){return WL[t.paths](n.root,e.root,t.matrixParams)&&rA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function KL(n,e){return kn(n,e)}function iA(n,e,t){if(!ji(n.segments,e.segments)||!nh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!iA(n.children[r],e.children[r],t))return!1;return!0}function QL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tA(n[t],e[t]))}function oA(n,e,t){return sA(n,e,e.segments,t)}function sA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ji(i,t)||e.hasChildren()||!nh(i,t,r))}else if(n.segments.length===t.length){if(!ji(n.segments,t)||!nh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ji(n.segments,i)||!nh(n.segments,i,r)||!n.children[oe]?!1:sA(n.children[oe],e,o,r)}}function nh(n,e,t){return e.every((r,i)=>rA[t](n[i].parameters,r.parameters))}var cr=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=cs(this.queryParams),this._queryParamMap}toString(){return JL.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rh(this)}},Li=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=cs(this.parameters),this._parameterMap}toString(){return uA(this)}};function YL(n,e){return ji(n,e)&&n.every((t,r)=>kn(t.parameters,e[r].parameters))}function ji(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function ZL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Su=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new ls,providedIn:"root"})}}return n})(),ls=class{parse(e){let t=new Py(e);return new cr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${fu(e.root,!0)}`,r=tj(e.queryParams),i=typeof e.fragment=="string"?`#${XL(e.fragment)}`:"";return`${t}${r}${i}`}},JL=new ls;function rh(n){return n.segments.map(e=>uA(e)).join("/")}function fu(n,e){if(!n.hasChildren())return rh(n);if(e){let t=n.children[oe]?fu(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${fu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=ZL(n,(r,i)=>i===oe?[fu(n.children[oe],!1)]:[`${i}:${fu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${rh(n)}/${t[0]}`:`${rh(n)}/(${t.join("//")})`}}function aA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eh(n){return aA(n).replace(/%3B/gi,";")}function XL(n){return encodeURI(n)}function Ny(n){return aA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ih(n){return decodeURIComponent(n)}function GT(n){return ih(n.replace(/\+/g,"%20"))}function uA(n){return`${Ny(n.path)}${ej(n.parameters)}`}function ej(n){return Object.entries(n).map(([e,t])=>`;${Ny(e)}=${Ny(t)}`).join("")}function tj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${eh(t)}=${eh(i)}`).join("&"):`${eh(t)}=${eh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var nj=/^[^\/()?;#]+/;function Ty(n){let e=n.match(nj);return e?e[0]:""}var rj=/^[^\/()?;=#]+/;function ij(n){let e=n.match(rj);return e?e[0]:""}var oj=/^[^=?&#]+/;function sj(n){let e=n.match(oj);return e?e[0]:""}var aj=/^[^&#]+/;function uj(n){let e=n.match(aj);return e?e[0]:""}var Py=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ee(e,t)),r}parseSegment(){let e=Ty(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Li(ih(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=ij(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ty(this.remaining);i&&(r=i,this.capture(r))}e[ih(t)]=ih(r)}parseQueryParam(e){let t=sj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=uj(this.remaining);s&&(r=s,this.capture(r))}let i=GT(t),o=GT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ty(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ee([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function cA(n){return n.segments.length>0?new Ee([],{[oe]:n}):n}function lA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=lA(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ee(n.segments,e);return cj(t)}function cj(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ee(n.segments.concat(e.segments),e.children)}return n}function _u(n){return n instanceof cr}function lj(n,e,t=null,r=null){let i=dA(n);return hA(i,e,t,r)}function dA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=cA(r);return e??i}function hA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ay(i,i,i,t,r);let o=dj(e);if(o.toRoot())return Ay(i,i,new Ee([],{}),t,r);let s=hj(o,i,n),a=s.processChildren?mu(s.segmentGroup,s.index,o.commands):pA(s.segmentGroup,s.index,o.commands);return Ay(i,s.segmentGroup,a,t,r)}function oh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function wu(n){return typeof n=="object"&&n!=null&&n.outlets}function Ay(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=fA(n,e,t);let a=cA(lA(s));return new cr(a,o,i)}function fA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=fA(o,e,t)}),new Ee(n.segments,r)}var sh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oh(r[0]))throw new K(4003,!1);let i=r.find(wu);if(i&&i!==nA(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sh(t,e,r)}var ss=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function hj(n,e,t){if(n.isAbsolute)return new ss(e,!0,0);if(!t)return new ss(e,!1,NaN);if(t.parent===null)return new ss(t,!0,0);let r=oh(n.commands[0])?0:1,i=t.segments.length-1+r;return fj(t,i,n.numberOfDoubleDots)}function fj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new ss(r,!1,i-o)}function pj(n){return wu(n[0])?n[0].outlets:{[oe]:n}}function pA(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return mu(n,e,t);let r=gj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ee(n.segments.slice(r.pathIndex),n.children),mu(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?Oy(n,e,t):r.match?mu(n,0,i):Oy(n,e,t)}function mu(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=pj(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=mu(n.children[oe],e,t);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=pA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function gj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(wu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!KT(u,l,s))return o;r+=2}else{if(!KT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Oy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(wu(o)){let u=mj(o.outlets);return new Ee(r,u)}if(i===0&&oh(t[0])){let u=n.segments[e];r.push(new Li(u.path,WT(t[0]))),i++;continue}let s=wu(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&oh(a)?(r.push(new Li(s,WT(a))),i+=2):(r.push(new Li(s,{})),i++)}return new Ee(r,{})}function mj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Oy(new Ee([],{}),0,r))}),e}function WT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function KT(n,e,t){return n==t.path&&kn(e,t.parameters)}var yu="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),rn=class{constructor(e,t){this.id=e,this.url=t}},ds=class extends rn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},lr=class extends rn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ht=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ht||{}),ah=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ah||{}),ur=class extends rn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$r=class extends rn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},Eu=class extends rn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},uh=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class extends rn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vy=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uy=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},By=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$y=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qy=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ch=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Iu=class{},hs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function yj(n,e){return n.providers&&!n._injector&&(n._injector=kd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wn(n){return n.outlet||oe}function vj(n,e){let t=n.filter(r=>wn(r)===e);return t.push(...n.filter(r=>wn(r)!==e)),t}function Mu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zy=class{get injector(){return Mu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new xu(this.rootInjector),this.attachRef=null}},xu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(Bt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Gy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Gy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Wy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wy(e,this._root).map(t=>t.value)}};function Gy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Gy(n,t);if(r)return r}return null}function Wy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Wy(n,t);if(r.length)return r.unshift(e),r}return[]}var qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function os(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var dh=class extends lh{constructor(e,t){super(e),this.snapshot=t,nv(this,e)}toString(){return this.snapshot.toString()}};function gA(n){let e=_j(n),t=new dt([new Li("",{})]),r=new dt({}),i=new dt({}),o=new dt({}),s=new dt(""),a=new fs(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new dh(new qt(a,[]),e)}function _j(n){let e={},t={},r={},i="",o=new as([],e,r,i,t,oe,n,null,{});return new fh("",new qt(o,[]))}var fs=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[Au]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>cs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>cs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&yA(i)&&(r.resolve[Au]=i.title),r}var as=class{get title(){return this.data?.[Au]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=cs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=cs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},fh=class extends lh{constructor(e,t){super(t),this.url=e,nv(this,t)}toString(){return mA(this._root)}};function nv(n,e){e.value._routerState=n,e.children.forEach(t=>nv(n,t))}function mA(n){let e=n.children.length>0?` { ${n.children.map(mA).join(", ")} } `:"";return`${n.value}${e}`}function Sy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kn(e.params,t.params)||n.paramsSubject.next(t.params),GL(e.url,t.url)||n.urlSubject.next(t.url),kn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ky(n,e){let t=kn(n.params,e.params)&&YL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ky(n.parent,e.parent))}function yA(n){return typeof n.title=="string"||n.title===null}var wj=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=k(xu),this.location=k(es),this.changeDetector=k(Fi),this.inputBinder=k(vh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Qy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Zt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jo]})}}return n})(),Qy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fs?this.route:e===xu?this.childContexts:this.parent.get(e,t)}},vh=new q(""),QT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Fa([r.queryParams,r.params,r.data]).pipe(Fe(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=cT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function Ej(n,e,t){let r=Du(n,e._root,t?t._root:void 0);return new dh(r,e)}function Du(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Ij(n,e,t);return new qt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Du(n,a)),s}}let r=Dj(e.value),i=e.children.map(o=>Du(n,o));return new qt(r,i)}}function Ij(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Du(n,r,i);return Du(n,r)})}function Dj(n){return new fs(new dt(n.url),new dt(n.params),new dt(n.queryParams),new dt(n.fragment),new dt(n.data),n.outlet,n.component,n)}var Cu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},vA="ngNavigationCancelingError";function ph(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=_u(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_A(!1,Ht.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function _A(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vA]=!0,t.cancellationCode=e,t}function Cj(n){return wA(n)&&_u(n.url)}function wA(n){return!!n&&n[vA]}var bj=(n,e,t,r)=>X(i=>(new Yy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Yy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=os(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=os(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Hy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $y(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Sy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Sy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},gh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},us=class{constructor(e,t){this.component=e,this.route=t}};function Tj(n,e,t){let r=n._root,i=e?e._root:null;return pu(r,i,t,[r.value])}function Aj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function gs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!wC(n)?n:e.get(n):r}function pu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=os(e);return n.children.forEach(s=>{Sj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vu(a,t.getContext(s),i)),i}function Sj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Mj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new gh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?pu(n,e,a?a.children:null,r,i):pu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new us(a.outlet.component,s))}else s&&vu(e,a,i),i.canActivateChecks.push(new gh(r)),o.component?pu(n,null,a?a.children:null,r,i):pu(n,null,t,r,i);return i}function Mj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ji(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ji(n.url,e.url)||!kn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ky(n,e)||!kn(n.queryParams,e.queryParams);case"paramsChange":default:return!Ky(n,e)}}function vu(n,e,t){let r=os(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?vu(s,e.children.getContext(o),t):vu(s,null,t):vu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new us(e.outlet.component,i)):t.canDeactivateChecks.push(new us(null,i)):t.canDeactivateChecks.push(new us(null,i))}function Ru(n){return typeof n=="function"}function xj(n){return typeof n=="boolean"}function Rj(n){return n&&Ru(n.canLoad)}function Nj(n){return n&&Ru(n.canActivate)}function Pj(n){return n&&Ru(n.canActivateChild)}function Oj(n){return n&&Ru(n.canDeactivate)}function kj(n){return n&&Ru(n.canMatch)}function EA(n){return n instanceof Zn||n?.name==="EmptyError"}var th=Symbol("INITIAL_VALUE");function ps(){return Fe(n=>Fa(n.map(e=>e.pipe(Jn(1),wi(th)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===th)return th;if(t===!1||Fj(t))return t}return!0}),st(e=>e!==th),Jn(1)))}function Fj(n){return _u(n)||n instanceof Cu}function Vj(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(le(j({},t),{guardsResult:!0})):Lj(s,r,i,n).pipe(We(a=>a&&xj(a)?jj(r,o,n,e):Z(a)),X(a=>le(j({},t),{guardsResult:a})))})}function Lj(n,e,t,r){return ge(n).pipe(We(i=>Hj(i.component,i.route,t,e,r)),Lt(i=>i!==!0,!0))}function jj(n,e,t,r){return ge(e).pipe(Sr(i=>Mo(Bj(i.route.parent,r),Uj(i.route,r),qj(n,i.path,t),$j(n,i.route,t))),Lt(i=>i!==!0,!0))}function Uj(n,e){return n!==null&&e&&e(new qy(n)),Z(!0)}function Bj(n,e){return n!==null&&e&&e(new By(n)),Z(!0)}function $j(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>bl(()=>{let s=Mu(e)??t,a=gs(o,s),u=Nj(a)?a.canActivate(e,n):yn(s,()=>a(e,n));return qr(u).pipe(Lt())}));return Z(i).pipe(ps())}function qj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Aj(s)).filter(s=>s!==null).map(s=>bl(()=>{let a=s.guards.map(u=>{let l=Mu(s.node)??t,h=gs(u,l),f=Pj(h)?h.canActivateChild(r,n):yn(l,()=>h(r,n));return qr(f).pipe(Lt())});return Z(a).pipe(ps())}));return Z(o).pipe(ps())}function Hj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Mu(e)??i,l=gs(a,u),h=Oj(l)?l.canDeactivate(n,e,t,r):yn(u,()=>l(n,e,t,r));return qr(h).pipe(Lt())});return Z(s).pipe(ps())}function zj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=gs(s,n),u=Rj(a)?a.canLoad(e,t):yn(n,()=>a(e,t));return qr(u)});return Z(o).pipe(ps(),IA(r))}function IA(n){return Wp($e(e=>{if(typeof e!="boolean")throw ph(n,e)}),X(e=>e===!0))}function Gj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=gs(s,n),u=kj(a)?a.canMatch(e,t):yn(n,()=>a(e,t));return qr(u)});return Z(o).pipe(ps(),IA(r))}var bu=class{constructor(e){this.segmentGroup=e||null}},Tu=class extends Error{constructor(e){super(),this.urlTree=e}};function is(n){return So(new bu(n))}function Wj(n){return So(new K(4e3,!1))}function Kj(n){return So(_A(!1,Ht.GuardRejected))}var Zy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[oe])return Wj(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:f,outlet:m,params:y,data:D,title:S}=i,M=yn(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:h,url:f,outlet:m,title:S}));if(M instanceof cr)throw new Tu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Tu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new cr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Jy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qj(n,e,t,r,i){let o=DA(n,e,t);return o.matched?(r=yj(e,r),Gj(r,e,t,i).pipe(X(s=>s===!0?o:j({},Jy)))):Z(o)}function DA(n,e,t){if(e.path==="**")return Yj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},Jy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zL)(t,n,e);if(!i)return j({},Jy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Yj(n){return{matched:!0,parameters:n.length>0?nA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function YT(n,e,t,r){return t.length>0&&Xj(n,t,r)?{segmentGroup:new Ee(e,Jj(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&e2(n,t,r)?{segmentGroup:new Ee(n.segments,Zj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function Zj(n,e,t,r){let i={};for(let o of t)if(_h(n,e,o)&&!r[wn(o)]){let s=new Ee([],{});i[wn(o)]=s}return j(j({},r),i)}function Jj(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&wn(r)!==oe){let i=new Ee([],{});t[wn(r)]=i}return t}function Xj(n,e,t){return t.some(r=>_h(n,e,r)&&wn(r)!==oe)}function e2(n,e,t){return t.some(r=>_h(n,e,r))}function _h(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function t2(n,e,t){return e.length===0&&!n.children[t]}var Xy=class{};function n2(n,e,t,r,i,o,s="emptyOnly"){return new ev(n,e,t,r,i,s,o).recognize()}var r2=31,ev=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Zy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=YT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new qt(r,t),o=new fh("",i),s=lj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new as([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(X(r=>({children:r,rootSnapshot:t})),Ar(r=>{if(r instanceof Tu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof bu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof qt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ge(o).pipe(Sr(s=>{let a=r.children[s],u=vj(t,s);return this.processSegmentGroup(e,u,a,s,i)}),_i((s,a)=>(s.push(...a),s)),Mr(null),ig(),We(s=>{if(s===null)return is(r);let a=CA(s);return i2(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return ge(t).pipe(Sr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Ar(l=>{if(l instanceof bu)return Z(null);throw l}))),Lt(u=>!!u),Ar(u=>{if(EA(u))return t2(r,i,o)?Z(new Xy):is(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return wn(r)!==s&&(s===oe||!_h(i,o,r))?is(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):is(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:f,remainingSegments:m}=DA(t,i,o);if(!u)return is(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>r2&&(this.allowRedirects=!1));let y=new as(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,ZT(i),wn(i),i.component??i._loadedComponent??null,i,JT(i)),D=hh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(We(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Qj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Fe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Fe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:y}=u,D=new as(m,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,ZT(r),wn(r),r.component??r._loadedComponent??null,r,JT(r)),S=hh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(S.params),D.data=Object.freeze(S.data);let{segmentGroup:M,slicedSegments:V}=YT(t,m,y,l);if(V.length===0&&M.hasChildren())return this.processChildren(h,l,M,D).pipe(X(F=>new qt(D,F)));if(l.length===0&&V.length===0)return Z(new qt(D,[]));let H=wn(r)===o;return this.processSegment(h,l,M,V,H?oe:o,!0,D).pipe(X(F=>new qt(D,F instanceof qt?[F]:[])))}))):is(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):zj(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe($e(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Kj(t))):Z({routes:[],injector:e})}};function i2(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function o2(n){let e=n.value.routeConfig;return e&&e.path===""}function CA(n){let e=[],t=new Set;for(let r of n){if(!o2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=CA(r.children);e.push(new qt(r.value,i))}return e.filter(r=>!t.has(r))}function ZT(n){return n.data||{}}function JT(n){return n.resolve||{}}function s2(n,e,t,r,i,o){return We(s=>n2(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>le(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function a2(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of bA(u))s.add(l);let a=0;return ge(s).pipe(Sr(u=>o.has(u)?u2(u,r,n,e):(u.data=hh(u,u.parent,n).resolve,Z(void 0))),$e(()=>a++),Ro(1),We(u=>a===s.size?Z(t):bt))})}function bA(n){let e=n.children.map(t=>bA(t)).flat();return[n,...e]}function u2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!yA(i)&&(o[Au]=i.title),c2(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=hh(n,n.parent,t).resolve,null)))}function c2(n,e,t,r){let i=Ry(n);if(i.length===0)return Z({});let o={};return ge(i).pipe(We(s=>l2(n[s],e,t,r).pipe(Lt(),$e(a=>{if(a instanceof Cu)throw ph(new ls,a);o[s]=a}))),Ro(1),ng(o),Ar(s=>EA(s)?bt:So(s)))}function l2(n,e,t,r){let i=Mu(e)??r,o=gs(n,i),s=o.resolve?o.resolve(e,t):yn(i,()=>o(e,t));return qr(s)}function My(n){return Fe(e=>{let t=n(e);return t?ge(t).pipe(X(()=>e)):Z(e)})}var TA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Au]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(d2),providedIn:"root"})}}return n})(),d2=(()=>{class n extends TA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L($T))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nu=new q("",{providedIn:"root",factory:()=>({})}),h2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Yo({type:n,selectors:[["ng-component"]],standalone:!0,features:[Qb],decls:1,vars:0,template:function(r,i){r&1&&Oi(0,"router-outlet")},dependencies:[wj],encapsulation:2})}}return n})();function rv(n){let e=n.children&&n.children.map(rv),t=e?le(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=h2),t}var mh=new q(""),iv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Hd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=qr(t.loadComponent()).pipe(X(AA),$e(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),xo(()=>{this.componentLoaders.delete(t)})),i=new Co(r,()=>new ke).pipe(Do());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=f2(r,this.compiler,t,this.onLoadEndListener).pipe(xo(()=>{this.childrenLoaders.delete(r)})),s=new Co(o,()=>new ke).pipe(Do());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function f2(n,e,t,r){return qr(n.loadChildren()).pipe(X(AA),We(i=>i instanceof Wa||Array.isArray(i)?Z(i):ge(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(mh,[],{optional:!0,self:!0}).flat()),{routes:s.map(rv),injector:o}}))}function p2(n){return n&&typeof n=="object"&&"default"in n}function AA(n){return p2(n)?n.default:n}var ov=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(g2),providedIn:"root"})}}return n})(),g2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),SA=new q(""),MA=new q("");function m2(n,e,t){let r=n.get(MA),i=n.get(_t);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),y2(n))),{onViewTransitionCreated:u}=r;return u&&yn(n,()=>u({transition:a,from:e,to:t})),s})}function y2(n){return new Promise(e=>{Km({read:()=>setTimeout(e)},{injector:n})})}var v2=new q(""),sv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ke,this.transitionAbortSubject=new ke,this.configLoader=k(iv),this.environmentInjector=k(Bt),this.urlSerializer=k(Su),this.rootContexts=k(xu),this.location=k(rs),this.inputBindingEnabled=k(vh,{optional:!0})!==null,this.titleStrategy=k(TA),this.options=k(Nu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(ov),this.createViewTransition=k(SA,{optional:!0}),this.navigationErrorHandler=k(v2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new jy(i)),r=i=>this.events.next(new Uy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new dt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:yu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(st(o=>o.id!==0),X(o=>le(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fe(o=>{let s=!1,a=!1;return Z(o).pipe(Fe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ht.SupersededByNewNavigation),bt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?le(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new $r(u.id,this.urlSerializer.serialize(u.rawUrl),f,ah.IgnoredSameUrlNavigation)),u.resolve(!1),bt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(Fe(f=>{let m=this.transitions?.getValue();return this.events.next(new ds(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?bt:Promise.resolve(f)}),s2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),$e(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=le(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new uh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:m,source:y,restoredState:D,extras:S}=u,M=new ds(f,this.urlSerializer.serialize(m),y,D);this.events.next(M);let V=gA(this.rootComponentType).snapshot;return this.currentTransition=o=le(j({},u),{targetSnapshot:V,urlAfterRedirects:m,extras:le(j({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let f="";return this.events.next(new $r(u.id,this.urlSerializer.serialize(u.extractedUrl),f,ah.IgnoredByUrlHandlingStrategy)),u.resolve(!1),bt}}),$e(u=>{let l=new ky(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),X(u=>(this.currentTransition=o=le(j({},u),{guards:Tj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),Vj(this.environmentInjector,u=>this.events.next(u)),$e(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ph(this.urlSerializer,u.guardsResult);let l=new Fy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),st(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ht.GuardRejected),!1)),My(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe($e(l=>{let h=new Vy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Fe(l=>{let h=!1;return Z(l).pipe(a2(this.paramsInheritanceStrategy,this.environmentInjector),$e({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ht.NoDataFromResolver)}}))}),$e(l=>{let h=new Ly(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),My(u=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe($e(m=>{h.component=m}),X(()=>{})));for(let m of h.children)f.push(...l(m));return f};return Fa(l(u.targetSnapshot.root)).pipe(Mr(null),Jn(1))}),My(()=>this.afterPreactivation()),Fe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ge(h).pipe(X(()=>o)):Z(o)}),X(u=>{let l=Ej(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=le(j({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),$e(()=>{this.events.next(new Iu)}),bj(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Jn(1),$e({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new lr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),sg(this.transitionAbortSubject.pipe($e(u=>{throw u}))),xo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Ht.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ar(u=>{if(a=!0,wA(u))this.events.next(new ur(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Cj(u)?this.events.next(new hs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Eu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=yn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Cu){let{message:f,cancellationCode:m}=ph(this.urlSerializer,h);this.events.next(new ur(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new hs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return bt}))}))}cancelNavigationTransition(t,r,i){let o=new ur(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _2(n){return n!==yu}var w2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(E2),providedIn:"root"})}}return n})(),tv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},E2=(()=>{class n extends tv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=nu(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>k(I2),providedIn:"root"})}}return n})(),I2=(()=>{class n extends xA{constructor(){super(...arguments),this.location=k(rs),this.urlSerializer=k(Su),this.options=k(Nu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(ov),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new cr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ds)this.stateMemento=this.createStateMemento();else if(t instanceof $r)this.rawUrlTree=r.initialUrl;else if(t instanceof uh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Iu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof ur&&(t.code===Ht.GuardRejected||t.code===Ht.NoDataFromResolver)?this.restoreHistory(r):t instanceof Eu?this.restoreHistory(r,!0):t instanceof lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof cr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=nu(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(gu||{});function RA(n,e){n.events.pipe(st(t=>t instanceof lr||t instanceof ur||t instanceof Eu||t instanceof $r),X(t=>t instanceof lr||t instanceof $r?gu.COMPLETE:(t instanceof ur?t.code===Ht.Redirect||t.code===Ht.SupersededByNewNavigation:!1)?gu.REDIRECTING:gu.FAILED),st(t=>t!==gu.REDIRECTING),Jn(1)).subscribe(()=>{e()})}function D2(n){throw n}var C2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ui=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(jd),this.stateManager=k(xA),this.options=k(Nu,{optional:!0})||{},this.pendingTasks=k(Ni),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(sv),this.urlSerializer=k(Su),this.location=k(rs),this.urlHandlingStrategy=k(ov),this._events=new ke,this.errorHandler=this.options.errorHandler||D2,this.navigated=!1,this.routeReuseStrategy=k(w2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(mh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(vh,{optional:!0}),this.eventsSubscription=new Ue,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ur&&r.code!==Ht.Redirect&&r.code!==Ht.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof lr)this.navigated=!0;else if(r instanceof hs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_2(i.source)},s);this.scheduleNavigation(a,yu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}A2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),yu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(rv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=dA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return hA(f,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=_u(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,yu,null,r)}navigate(t,r={skipLocationChange:!1}){return T2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},C2):r===!1?i=j({},b2):i=r,_u(t))return zT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return zT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,m)=>{a=f,u=m});let h=this.pendingTasks.add();return RA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function A2(n){return!(n instanceof Iu)&&!(n instanceof hs)}var yh=class{};var S2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(st(t=>t instanceof lr),Sr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=kd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ge(i).pipe(Tr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(We(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ge([o,s]).pipe(Tr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(Ui),L(Hd),L(Bt),L(yh),L(iv))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),NA=new q(""),M2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof $r&&t.code===ah.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ch&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ch(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){ab()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function x2(n){return n.routerState.root}function Pu(n,e){return{\u0275kind:n,\u0275providers:e}}function R2(){let n=k(Pt);return e=>{let t=n.get(_n);if(e!==t.components[0])return;let r=n.get(Ui),i=n.get(PA);n.get(av)===1&&r.initialNavigation(),n.get(OA,null,ue.Optional)?.setUpPreloading(),n.get(NA,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var PA=new q("",{factory:()=>new ke}),av=new q("",{providedIn:"root",factory:()=>1});function N2(){return Pu(2,[{provide:av,useValue:0},{provide:$d,multi:!0,deps:[Pt],useFactory:e=>{let t=e.get(mT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ui),o=e.get(PA);RA(i,()=>{r(!0)}),e.get(sv).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function P2(){return Pu(3,[{provide:$d,multi:!0,useFactory:()=>{let e=k(Ui);return()=>{e.setUpLocationChangeListener()}}},{provide:av,useValue:2}])}var OA=new q("");function O2(n){return Pu(0,[{provide:OA,useExisting:S2},{provide:yh,useExisting:n}])}function k2(){return Pu(8,[QT,{provide:vh,useExisting:QT}])}function F2(n){let e=[{provide:SA,useValue:m2},{provide:MA,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Pu(9,e)}var XT=new q("ROUTER_FORROOT_GUARD"),V2=[rs,{provide:Su,useClass:ls},Ui,xu,{provide:fs,useFactory:x2,deps:[Ui]},iv,[]],uv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[V2,[],{provide:mh,multi:!0,useValue:t},{provide:XT,useFactory:B2,deps:[[Ui,new xi,new _d]]},{provide:Nu,useValue:r||{}},r?.useHash?j2():U2(),L2(),r?.preloadingStrategy?O2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?$2(r):[],r?.bindToComponentInputs?k2().\u0275providers:[],r?.enableViewTransitions?F2().\u0275providers:[],q2()]}}static forChild(t){return{ngModule:n,providers:[{provide:mh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(XT,8))}}static{this.\u0275mod=nt({type:n})}static{this.\u0275inj=tt({})}}return n})();function L2(){return{provide:NA,useFactory:()=>{let n=k(DT),e=k(pe),t=k(Nu),r=k(sv),i=k(Su);return t.scrollOffset&&n.setOffset(t.scrollOffset),new M2(i,r,n,e,t)}}}function j2(){return{provide:Vi,useClass:vT}}function U2(){return{provide:Vi,useClass:py}}function B2(n){return"guarded"}function $2(n){return[n.initialNavigation==="disabled"?P2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?N2().\u0275providers:[]]}var eA=new q("");function q2(){return[{provide:eA,useFactory:R2},{provide:ns,multi:!0,useExisting:eA}]}var H2=[],wh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({imports:[uv.forRoot(H2),uv]})};var z2="firebase",G2="10.13.2";ot.registerVersion(z2,G2,"app-compat");var W2="firebase",K2="10.13.2";br(W2,K2,"app");var ms=new nr("ANGULARFIRE2_VERSION");var Q2=(n,e)=>{let t=e?[e]:KI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Bi=class{constructor(){return Q2(Y2)}},Y2="app-check";function cv(){}var Eh=class{zone;delegate;constructor(e,t=Zp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},lv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cv,{},cv,cv)),t.pipe($e({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ih=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Eh(Zone.current)),this.insideAngular=t.run(()=>new Eh(Zone.current,ka)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(pe))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z2(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function kt(n){return J2(Z2())(n)}function J2(n){return function(t){return t=t.lift(new lv(n.ngZone)),t.pipe(dn(n.outsideAngular),Wt(n.insideAngular))}}var tU=new Map,nU={activated:!1,tokenObservers:[]},rU={initialized:!1,enabled:!1};function En(n){return tU.get(n)||Object.assign({},nU)}function UA(){return rU}var iU="https://content-firebaseappcheck.googleapis.com/v1";var oU="exchangeDebugToken",FA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},m6=24*60*60*1e3;var hv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Np,this.pending.promise.catch(t=>{}),yield sU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Np,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function sU(n){return new Promise(e=>{setTimeout(e,n)})}var aU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Hr=new GI("appCheck","AppCheck",aU);function BA(n){if(!En(n).activated)throw Hr.create("use-before-activation",{appName:n.name})}function $A(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Hr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Hr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Hr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function qA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${iU}/projects/${t}/apps/${r}:${oU}?key=${i}`,body:{debug_token:e}}}var uU="firebase-app-check-database",cU=1,fv="firebase-app-check-store";var Dh=null;function lU(){return Dh||(Dh=new Promise((n,e)=>{try{let t=indexedDB.open(uU,cU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Hr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fv,{keyPath:"compositeKey"})}}}catch(t){e(Hr.create("storage-open",{originalErrorMessage:t?.message}))}}),Dh)}function dU(n,e){return hU(fU(n),e)}function hU(n,e){return N(this,null,function*(){let r=(yield lU()).transaction(fv,"readwrite"),o=r.objectStore(fv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Hr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function fU(n){return`${n.options.appId}-${n.name}`}var pv=new Qc("@firebase/app-check");function dv(n,e){return Kc()?dU(n,e).catch(t=>{pv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function HA(){return UA().enabled}function zA(){return N(this,null,function*(){let n=UA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pU={error:"UNKNOWN_ERROR"};function gU(n){return qI.encodeString(JSON.stringify(n),!1)}function gv(n,e=!1){return N(this,null,function*(){let t=n.app;BA(t);let r=En(t),i=r.token,o;if(i&&!Ou(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Ou(u)?i=u:yield dv(t,void 0))}if(!e&&i&&Ou(i))return{token:i.token};let s=!1;if(HA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$A(qA(t,yield zA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield dv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield En(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?pv.warn(u.message):pv.error(u),o=u}let a;return i?o?Ou(i)?a={token:i.token,internalError:o}:a=LA(o):(a={token:i.token},r.token=i,yield dv(t,i)):a=LA(o),s&&_U(t,a),a})}function mU(n){return N(this,null,function*(){let e=n.app;BA(e);let{provider:t}=En(e);if(HA()){let r=yield zA(),{token:i}=yield $A(qA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yU(n,e,t,r){let{app:i}=n,o=En(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ou(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),VA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>VA(n))}function GA(n,e){let t=En(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function VA(n){let{app:e}=n,t=En(e),r=t.tokenRefresher;r||(r=vU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vU(n){let{app:e}=n;return new hv(()=>N(this,null,function*(){let t=En(e),r;if(t.token?r=yield gv(n,!0):r=yield gv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=En(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},FA.RETRIAL_MIN_WAIT,FA.RETRIAL_MAX_WAIT)}function _U(n,e){let t=En(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ou(n){return n.expireTimeMillis-Date.now()>0}function LA(n){return{token:gU(pU),error:n}}var mv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=En(this.app);for(let t of e)GA(this.app,t.next);return Promise.resolve()}};function wU(n,e){return new mv(n,e)}function EU(n){return{getToken:e=>gv(n,e),getLimitedUseToken:()=>mU(n),addTokenListener:e=>yU(n,"INTERNAL",e),removeTokenListener:e=>GA(n.app,e)}}var IU="@firebase/app-check",DU="0.8.8";var CU="app-check",jA="app-check-internal";function bU(){Ma(new gi(CU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return wU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jA).initialize()})),Ma(new gi(jA,n=>{let e=n.getProvider("app-check").getImmediate();return EU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),br(IU,DU)}bU();var TU=["localhost","0.0.0.0","127.0.0.1"],S6=typeof window<"u"&&TU.includes(window.location.hostname);var AU=["ngOnDestroy"],QA=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(AU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let f=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Ch=class{constructor(e){return e}},ys=new q("angularfire2.app.options"),vs=new q("angularfire2.app.name");function ku(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=ot.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ot.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;SU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ch(s)}var SU=(n,...e)=>{oy()&&typeof console<"u"&&console[n](...e)},MU={provide:Ch,useFactory:ku,deps:[ys,pe,[new xi,vs]]},YA=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ys,useValue:t},{provide:vs,useValue:r}]}}constructor(t){ot.registerVersion("angularfire",ms.full,"core"),ot.registerVersion("angularfire",ms.full,"app-compat"),ot.registerVersion("angular",Zb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(ht))};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[MU]})}return n})();function bh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return xU(i,s)||(KA("error",`${e} was already initialized on the ${t} Firebase App with different settings.${RU?" You may need to reload as Firebase is not HMR aware.":""}`),KA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function xU(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var RU=typeof module<"u"&&!!module.hot,KA=(n,...e)=>{oy()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var yv=new q("angularfire2.auth.use-emulator"),vv=new q("angularfire2.auth.settings"),_v=new q("angularfire2.auth.tenant-id"),wv=new q("angularfire2.auth.langugage-code"),Ev=new q("angularfire2.auth.use-device-language"),Iv=new q("angularfire.auth.persistence"),Dv=(n,e,t,r,i,o,s,a)=>bh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),ZA=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,f,m,y){let D=new ke,S=Z(void 0).pipe(Wt(s.outsideAngular),Fe(()=>o.runOutsideAngular(()=>import("./chunk-63EJ5QCV.js"))),X(()=>ku(t,o,r)),X(M=>Dv(M,o,a,l,h,f,u,m)),Al({bufferSize:1,refCount:!1}));if(ar(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{S.pipe(Lt()).subscribe();let M=S.pipe(Fe(F=>F.getRedirectResult().then(G=>G,()=>null)),kt,Al({bufferSize:1,refCount:!1})),V=S.pipe(Fe(F=>new de(G=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))})))),H=S.pipe(Fe(F=>new de(G=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>G.next(ee),ee=>G.error(ee),()=>G.complete()))}))));this.authState=M.pipe(Sl(V),dn(s.outsideAngular),Wt(s.insideAngular)),this.user=M.pipe(Sl(H),dn(s.outsideAngular),Wt(s.insideAngular)),this.idToken=this.user.pipe(Fe(F=>F?ge(F.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Fe(F=>F?ge(F.getIdTokenResult()):Z(null))),this.credential=tg(M,D,this.authState.pipe(st(F=>!F))).pipe(X(F=>F?.user?F:null),dn(s.outsideAngular),Wt(s.insideAngular))}return QA(this,S,o,{spy:{apply:(M,V,H)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&H.then(F=>D.next(F))}}})}static \u0275fac=function(r){return new(r||n)(L(ys),L(vs,8),L(ht),L(pe),L(Ih),L(yv,8),L(vv,8),L(_v,8),L(wv,8),L(Ev,8),L(Iv,8),L(Bi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var JA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XA={};var zr,Cv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,T){for(var _=Array(arguments.length-2),Gn=2;Gn<arguments.length;Gn++)_[Gn-2]=arguments[Gn];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var T=E.g[3],_=v+(T^w&(C^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[C++]=E.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<v;)if(I[C++]=E[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var T=E[C]|0;I&&T==v||(w[C]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=f,C=0;C<E.length;C+=8){var T=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var f=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(S(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(S(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=G(w,v).g;w=V(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function S(E){return E.h==-1}n.l=function(E){return E=V(this,E),S(E)?-1:D(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return S(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var T=I+(this.i(C)&65535)+(E.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(E,v){return E.add(M(v))}n.j=function(E){if(D(this)||D(E))return f;if(S(this))return S(E)?M(this).j(M(E)):M(M(this).j(E));if(S(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var T=this.i(I)>>>16,_=this.i(I)&65535,Gn=E.i(C)>>>16,ca=E.i(C)&65535;w[2*I+2*C]+=_*ca,H(w,2*I+2*C),w[2*I+2*C+1]+=T*ca,H(w,2*I+2*C+1),w[2*I+2*C+1]+=_*Gn,H(w,2*I+2*C+1),w[2*I+2*C+2]+=T*Gn,H(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function H(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function F(E,v){this.g=E,this.h=v}function G(E,v){if(D(v))throw Error("division by zero");if(D(E))return new F(f,f);if(S(E))return v=G(M(E),v),new F(M(v.g),M(v.h));if(S(v))return v=G(E,M(v)),new F(M(v.g),v.h);if(30<E.g.length){if(S(E)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=ee(w),I=ee(I);var C=Y(w,1),T=Y(I,1);for(I=Y(I,2),w=Y(w,2);!D(I);){var _=T.add(I);0>=_.l(E)&&(C=C.add(w),T=_),I=Y(I,1),w=Y(w,1)}return v=V(E,C.j(v)),new F(C,v)}for(C=f;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);S(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);D(T)&&(T=m),C=C.add(T),E=V(E,_)}return new F(C,E)}n.A=function(E){return G(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ee(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function Y(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],T=0;T<I;T++)C[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cv=XA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,zr=XA.Integer=s}).apply(typeof JA<"u"?JA:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dr={};var bv,Tv,_s,Av,Fu,Ah,Sv,Mv,xv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,p){return c==Array.prototype||c==Object.prototype||(c[d]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var d=0;d<c.length;++d){var p=c[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var p=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in p))break e;p=p[b]}c=c[c.length-1],g=p[c],d=d(g),d!=g&&d!=null&&e(p,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var p=0,g=!1,b={next:function(){if(!g&&p<c.length){var R=p++;return{value:d(R,c[R]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,p){return p})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,p){return c.call.apply(c.bind,arguments)}function f(c,d,p){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(c,d){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,d){function p(){}p.prototype=d.prototype,c.aa=d.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(g,b,R){for(var U=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)U[Ce-2]=arguments[Ce];return d.prototype[b].apply(g,U)}}function S(c){let d=c.length;if(0<d){let p=Array(d);for(let g=0;g<d;g++)p[g]=c[g];return p}return[]}function M(c,d){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(u(g)){let b=c.length||0,R=g.length||0;c.length=b+R;for(let U=0;U<R;U++)c[b+U]=g[U]}else c.push(g)}}class V{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Y(c,d,p){for(let g in c)d.call(p,c[g],g,c)}function E(c,d){for(let p in c)d.call(void 0,c[p],p,c)}function v(c){let d={};for(let p in c)d[p]=c[p];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let p,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(p in g)c[p]=g[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(g,p)&&(c[p]=g[p])}}function C(c){var d=1;c=c.split(":");let p=[];for(;0<d&&c.length;)p.push(c.shift()),d--;return c.length&&p.push(c.join(":")),p}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=sp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Gn{constructor(){this.h=this.g=null}add(d,p){let g=ca.get();g.set(d,p),this.h?this.h.next=g:this.g=g,this.h=g}}var ca=new V(()=>new tN,c=>c.reset());class tN{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let la,da=!1,sp=new Gn,LE=()=>{let c=a.Promise.resolve(void 0);la=()=>{c.then(nN)}};var nN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){T(p)}var d=ca;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}da=!1};function Er(){this.s=this.s,this.C=this.C}Er.prototype.s=!1,Er.prototype.ma=function(){this.s||(this.s=!0,this.N())},Er.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var rN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return c}();function ha(c,d){if(pt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{G(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else p=="mouseover"?d=c.fromElement:p=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:iN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ha.aa.h.call(this)}}D(ha,pt);var iN={2:"touch",3:"pen",4:"mouse"};ha.prototype.h=function(){ha.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fa="closure_listenable_"+(1e6*Math.random()|0),oN=0;function sN(c,d,p,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=p,this.capture=!!g,this.ha=b,this.key=++oN,this.da=this.fa=!1}function xc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Rc(c){this.src=c,this.g={},this.h=0}Rc.prototype.add=function(c,d,p,g,b){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var U=up(c,d,g,b);return-1<U?(d=c[U],p||(d.fa=!1)):(d=new sN(d,this.src,R,!!g,b),d.fa=p,c.push(d)),d};function ap(c,d){var p=d.type;if(p in c.g){var g=c.g[p],b=Array.prototype.indexOf.call(g,d,void 0),R;(R=0<=b)&&Array.prototype.splice.call(g,b,1),R&&(xc(d),c.g[p].length==0&&(delete c.g[p],c.h--))}}function up(c,d,p,g){for(var b=0;b<c.length;++b){var R=c[b];if(!R.da&&R.listener==d&&R.capture==!!p&&R.ha==g)return b}return-1}var cp="closure_lm_"+(1e6*Math.random()|0),lp={};function jE(c,d,p,g,b){if(g&&g.once)return BE(c,d,p,g,b);if(Array.isArray(d)){for(var R=0;R<d.length;R++)jE(c,d[R],p,g,b);return null}return p=pp(p),c&&c[fa]?c.K(d,p,l(g)?!!g.capture:!!g,b):UE(c,d,p,!1,g,b)}function UE(c,d,p,g,b,R){if(!d)throw Error("Invalid event type");var U=l(b)?!!b.capture:!!b,Ce=hp(c);if(Ce||(c[cp]=Ce=new Rc(c)),p=Ce.add(d,p,g,U,R),p.proxy)return p;if(g=aN(),p.proxy=g,g.src=c,g.listener=p,c.addEventListener)rN||(b=U),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(qE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function aN(){function c(p){return d.call(c.src,c.listener,p)}let d=uN;return c}function BE(c,d,p,g,b){if(Array.isArray(d)){for(var R=0;R<d.length;R++)BE(c,d[R],p,g,b);return null}return p=pp(p),c&&c[fa]?c.L(d,p,l(g)?!!g.capture:!!g,b):UE(c,d,p,!0,g,b)}function $E(c,d,p,g,b){if(Array.isArray(d))for(var R=0;R<d.length;R++)$E(c,d[R],p,g,b);else g=l(g)?!!g.capture:!!g,p=pp(p),c&&c[fa]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],p=up(R,p,g,b),-1<p&&(xc(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=hp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=up(d,p,g,b)),(p=-1<c?d[c]:null)&&dp(p))}function dp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[fa])ap(d.i,c);else{var p=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(p,g,c.capture):d.detachEvent?d.detachEvent(qE(p),g):d.addListener&&d.removeListener&&d.removeListener(g),(p=hp(d))?(ap(p,c),p.h==0&&(p.src=null,d[cp]=null)):xc(c)}}}function qE(c){return c in lp?lp[c]:lp[c]="on"+c}function uN(c,d){if(c.da)c=!0;else{d=new ha(d,this);var p=c.listener,g=c.ha||c.src;c.fa&&dp(c),c=p.call(g,d)}return c}function hp(c){return c=c[cp],c instanceof Rc?c:null}var fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function pp(c){return typeof c=="function"?c:(c[fp]||(c[fp]=function(d){return c.handleEvent(d)}),c[fp])}function gt(){Er.call(this),this.i=new Rc(this),this.M=this,this.F=null}D(gt,Er),gt.prototype[fa]=!0,gt.prototype.removeEventListener=function(c,d,p,g){$E(this,c,d,p,g)};function It(c,d){var p,g=c.F;if(g)for(p=[];g;g=g.F)p.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new pt(d,c);else if(d instanceof pt)d.target=d.target||c;else{var b=d;d=new pt(g,c),I(d,b)}if(b=!0,p)for(var R=p.length-1;0<=R;R--){var U=d.g=p[R];b=Nc(U,g,!0,d)&&b}if(U=d.g=c,b=Nc(U,g,!0,d)&&b,b=Nc(U,g,!1,d)&&b,p)for(R=0;R<p.length;R++)U=d.g=p[R],b=Nc(U,g,!1,d)&&b}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var p=c.g[d],g=0;g<p.length;g++)xc(p[g]);delete c.g[d],c.h--}}this.F=null},gt.prototype.K=function(c,d,p,g){return this.i.add(String(c),d,!1,p,g)},gt.prototype.L=function(c,d,p,g){return this.i.add(String(c),d,!0,p,g)};function Nc(c,d,p,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,R=0;R<d.length;++R){var U=d[R];if(U&&!U.da&&U.capture==p){var Ce=U.listener,lt=U.ha||U.src;U.fa&&ap(c.i,U),b=Ce.call(lt,g)!==!1&&b}}return b&&!g.defaultPrevented}function HE(c,d,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function zE(c){c.g=HE(()=>{c.g=null,c.i&&(c.i=!1,zE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class cN extends Er{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:zE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pa(c){Er.call(this),this.h=c,this.g={}}D(pa,Er);var GE=[];function WE(c){Y(c.g,function(d,p){this.g.hasOwnProperty(p)&&dp(d)},c),c.g={}}pa.prototype.N=function(){pa.aa.N.call(this),WE(this)},pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gp=a.JSON.stringify,lN=a.JSON.parse,dN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function mp(){}mp.prototype.h=null;function KE(c){return c.h||(c.h=c.i())}function QE(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yp(){pt.call(this,"d")}D(yp,pt);function vp(){pt.call(this,"c")}D(vp,pt);var di={},YE=null;function Pc(){return YE=YE||new gt}di.La="serverreachability";function ZE(c){pt.call(this,di.La,c)}D(ZE,pt);function ma(c){let d=Pc();It(d,new ZE(d))}di.STAT_EVENT="statevent";function JE(c,d){pt.call(this,di.STAT_EVENT,c),this.stat=d}D(JE,pt);function Dt(c){let d=Pc();It(d,new JE(d,c))}di.Ma="timingevent";function XE(c,d){pt.call(this,di.Ma,c),this.size=d}D(XE,pt);function ya(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function va(){this.g=!0}va.prototype.xa=function(){this.g=!1};function hN(c,d,p,g,b,R){c.info(function(){if(c.g)if(R)for(var U="",Ce=R.split("&"),lt=0;lt<Ce.length;lt++){var we=Ce[lt].split("=");if(1<we.length){var mt=we[0];we=we[1];var yt=mt.split("_");U=2<=yt.length&&yt[1]=="type"?U+(mt+"="+we+"&"):U+(mt+"=redacted&")}}else U=null;else U=R;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+p+`
`+U})}function fN(c,d,p,g,b,R,U){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+p+`
`+R+" "+U})}function go(c,d,p,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+gN(c,p)+(g?" "+g:"")})}function pN(c,d){c.info(function(){return"TIMEOUT: "+d})}va.prototype.info=function(){};function gN(c,d){if(!c.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var g=p[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var U=1;U<b.length;U++)b[U]=""}}}}return gp(p)}catch{return d}}var Oc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_p;function kc(){}D(kc,mp),kc.prototype.g=function(){return new XMLHttpRequest},kc.prototype.i=function(){return{}},_p=new kc;function Ir(c,d,p,g){this.j=c,this.i=d,this.l=p,this.R=g||1,this.U=new pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tI}function tI(){this.i=null,this.g="",this.h=!1}var nI={},wp={};function Ep(c,d,p){c.L=1,c.v=jc(Wn(d)),c.m=p,c.P=!0,rI(c,null)}function rI(c,d){c.F=Date.now(),Fc(c),c.A=Wn(c.v);var p=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),yI(p.i,"t",g),c.C=0,p=c.j.J,c.h=new tI,c.g=kI(c.j,p?d:null,!c.m),0<c.O&&(c.M=new cN(m(c.Y,c,c.g),c.O)),d=c.U,p=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(GE[0]=b.toString()),b=GE);for(var R=0;R<b.length;R++){var U=jE(p,b[R],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ma(),hN(c.i,c.u,c.A,c.l,c.R,c.m)}Ir.prototype.ca=function(c){c=c.target;let d=this.M;d&&Kn(c)==3?d.j():this.Y(c)},Ir.prototype.Y=function(c){try{if(c==this.g)e:{let yt=Kn(this.g);var d=this.g.Ba();let vo=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||CI(this.g)))){this.J||yt!=4||d==7||(d==8||0>=vo?ma(3):ma(2)),Ip(this);var p=this.g.Z();this.X=p;t:if(iI(this)){var g=CI(this.g);c="";var b=g.length,R=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),_a(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(R&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,fN(this.i,this.u,this.A,this.l,this.R,yt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,lt=this.g;if((Ce=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ce)){var we=Ce;break t}}we=null}if(p=we)go(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dp(this,p);else{this.o=!1,this.s=3,Dt(12),hi(this),_a(this);break e}}if(this.P){p=!0;let cn;for(;!this.J&&this.C<U.length;)if(cn=mN(this,U),cn==wp){yt==4&&(this.s=4,Dt(14),p=!1),go(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==nI){this.s=4,Dt(15),go(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else go(this.i,this.l,cn,null),Dp(this,cn);if(iI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||U.length!=0||this.h.h||(this.s=1,Dt(16),p=!1),this.o=this.o&&p,!p)go(this.i,this.l,U,"[Invalid Chunked Response]"),hi(this),_a(this);else if(0<U.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Mp(mt),mt.M=!0,Dt(11))}}else go(this.i,this.l,U,null),Dp(this,U);yt==4&&hi(this),this.o&&!this.J&&(yt==4?RI(this.j,this):(this.o=!1,Fc(this)))}else PN(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),hi(this),_a(this)}}}catch{}finally{}};function iI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function mN(c,d){var p=c.C,g=d.indexOf(`
`,p);return g==-1?wp:(p=Number(d.substring(p,g)),isNaN(p)?nI:(g+=1,g+p>d.length?wp:(d=d.slice(g,g+p),c.C=g+p,d)))}Ir.prototype.cancel=function(){this.J=!0,hi(this)};function Fc(c){c.S=Date.now()+c.I,oI(c,c.I)}function oI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ya(m(c.ba,c),d)}function Ip(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ir.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(pN(this.i,this.A),this.L!=2&&(ma(),Dt(17)),hi(this),this.s=2,_a(this)):oI(this,this.S-c)};function _a(c){c.j.G==0||c.J||RI(c.j,c)}function hi(c){Ip(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,WE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Dp(c,d){try{var p=c.j;if(p.G!=0&&(p.g==c||Cp(p.h,c))){if(!c.K&&Cp(p.h,c)&&p.G==3){try{var g=p.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Hc(p),$c(p);else break e;Sp(p),Dt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=ya(m(p.Za,p),6e3));if(1>=uI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else pi(p,11)}else if((c.K||p.g==c)&&Hc(p),!H(d))for(b=p.Da.g.parse(d),d=0;d<b.length;d++){let we=b[d];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let mt=we[3];mt!=null&&(p.la=mt,p.j.info("VER="+p.la));let yt=we[4];yt!=null&&(p.Aa=yt,p.j.info("SVER="+p.Aa));let vo=we[5];vo!=null&&typeof vo=="number"&&0<vo&&(g=1.5*vo,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let cn=c.g;if(cn){let Gc=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gc){var R=g.h;R.g||Gc.indexOf("spdy")==-1&&Gc.indexOf("quic")==-1&&Gc.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(bp(R,R.h),R.h=null))}if(g.D){let xp=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;xp&&(g.ya=xp,Se(g.I,g.D,xp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=c;if(g.qa=OI(g,g.J?g.ia:null,g.W),U.K){cI(g.h,U);var Ce=U,lt=g.L;lt&&(Ce.I=lt),Ce.B&&(Ip(Ce),Fc(Ce)),g.g=U}else MI(g);0<p.i.length&&qc(p)}else we[0]!="stop"&&we[0]!="close"||pi(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?pi(p,7):Ap(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}ma(4)}catch{}}var yN=class{constructor(c,d){this.g=c,this.map=d}};function sI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function uI(c){return c.h?1:c.g?c.g.size:0}function Cp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function bp(c,d){c.g?c.g.add(d):c.h=d}function cI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}sI.prototype.cancel=function(){if(this.i=lI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function lI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let p of c.g.values())d=d.concat(p.D);return d}return S(c.i)}function vN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],p=c.length,g=0;g<p;g++)d.push(c[g]);return d}d=[],p=0;for(g in c)d[p++]=c[g];return d}function _N(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var p=0;p<c;p++)d.push(p);return d}d=[],p=0;for(let g in c)d[p++]=g;return d}}}function dI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var p=_N(c),g=vN(c),b=g.length,R=0;R<b;R++)d.call(void 0,g[R],p&&p[R],c)}var hI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wN(c,d){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var g=c[p].indexOf("="),b=null;if(0<=g){var R=c[p].substring(0,g);b=c[p].substring(g+1)}else R=c[p];d(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function fi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof fi){this.h=c.h,Vc(this,c.j),this.o=c.o,this.g=c.g,Lc(this,c.s),this.l=c.l;var d=c.i,p=new Ia;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),fI(this,p),this.m=c.m}else c&&(d=String(c).match(hI))?(this.h=!1,Vc(this,d[1]||"",!0),this.o=wa(d[2]||""),this.g=wa(d[3]||"",!0),Lc(this,d[4]),this.l=wa(d[5]||"",!0),fI(this,d[6]||"",!0),this.m=wa(d[7]||"")):(this.h=!1,this.i=new Ia(null,this.h))}fi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ea(d,pI,!0),":");var p=this.g;return(p||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ea(d,pI,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Ea(p,p.charAt(0)=="/"?DN:IN,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Ea(p,bN)),c.join("")};function Wn(c){return new fi(c)}function Vc(c,d,p){c.j=p?wa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Lc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function fI(c,d,p){d instanceof Ia?(c.i=d,TN(c.i,c.h)):(p||(d=Ea(d,CN)),c.i=new Ia(d,c.h))}function Se(c,d,p){c.i.set(d,p)}function jc(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function wa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ea(c,d,p){return typeof c=="string"?(c=encodeURI(c).replace(d,EN),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function EN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var pI=/[#\/\?@]/g,IN=/[#\?:]/g,DN=/[#\?]/g,CN=/[#\?@]/g,bN=/#/g;function Ia(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Dr(c){c.g||(c.g=new Map,c.h=0,c.i&&wN(c.i,function(d,p){c.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=Ia.prototype,n.add=function(c,d){Dr(this),this.i=null,c=mo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(d),this.h+=1,this};function gI(c,d){Dr(c),d=mo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function mI(c,d){return Dr(c),d=mo(c,d),c.g.has(d)}n.forEach=function(c,d){Dr(this),this.g.forEach(function(p,g){p.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Dr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let g=0;g<d.length;g++){let b=c[g];for(let R=0;R<b.length;R++)p.push(d[g])}return p},n.V=function(c){Dr(this);let d=[];if(typeof c=="string")mI(this,c)&&(d=d.concat(this.g.get(mo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)d=d.concat(c[p])}return d},n.set=function(c,d){return Dr(this),this.i=null,c=mo(this,c),mI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function yI(c,d,p){gI(c,d),0<p.length&&(c.i=null,c.g.set(mo(c,d),S(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var g=d[p];let R=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var b=R;U[g]!==""&&(b+="="+encodeURIComponent(String(U[g]))),c.push(b)}}return this.i=c.join("&")};function mo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function TN(c,d){d&&!c.j&&(Dr(c),c.i=null,c.g.forEach(function(p,g){var b=g.toLowerCase();g!=b&&(gI(this,g),yI(this,b,p))},c)),c.j=d}function AN(c,d){let p=new va;if(a.Image){let g=new Image;g.onload=y(Cr,p,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Cr,p,"TestLoadImage: error",!1,d,g),g.onabort=y(Cr,p,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Cr,p,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function SN(c,d){let p=new va,g=new AbortController,b=setTimeout(()=>{g.abort(),Cr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(R=>{clearTimeout(b),R.ok?Cr(p,"TestPingServer: ok",!0,d):Cr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Cr(p,"TestPingServer: error",!1,d)})}function Cr(c,d,p,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(p)}catch{}}function MN(){this.g=new dN}function xN(c,d,p){let g=p||"";try{dI(c,function(b,R){let U=b;l(b)&&(U=gp(b)),d.push(g+R+"="+encodeURIComponent(U))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Da(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Da,mp),Da.prototype.g=function(){return new Uc(this.l,this.j)},Da.prototype.i=function(c){return function(){return c}}({});function Uc(c,d){gt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Uc,gt),n=Uc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ba(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function vI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ca(this):ba(this),this.readyState==3&&vI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ca(this))},n.Qa=function(c){this.g&&(this.response=c,Ca(this))},n.ga=function(){this.g&&Ca(this)};function Ca(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ba(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=d.next();return c.join(`\r
`)};function ba(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _I(c){let d="";return Y(c,function(p,g){d+=g,d+=":",d+=p,d+=`\r
`}),d}function Tp(c,d,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=_I(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Se(c,d,p))}function je(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(je,gt);var RN=/^https?$/i,NN=["POST","PUT"];n=je.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_p.g(),this.v=this.o?KE(this.o):KE(_p),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){wI(this,R);return}if(c=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)p.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let R of g.keys())p.set(R,g.get(R));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(NN,d,void 0))||g||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,U]of p)this.g.setRequestHeader(R,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{DI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){wI(this,R)}};function wI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,EI(c),Bc(c)}function EI(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,It(this,"complete"),It(this,"abort"),Bc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bc(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?II(this):this.bb())},n.bb=function(){II(this)};function II(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Kn(c)!=4||c.Z()!=2)){if(c.u&&Kn(c)==4)HE(c.Ea,0,c);else if(It(c,"readystatechange"),Kn(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var g;if(g=U===0){var b=String(c.D).match(hI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!RN.test(b?b.toLowerCase():"")}p=g}if(p)It(c,"complete"),It(c,"success");else{c.m=6;try{var R=2<Kn(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",EI(c)}}finally{Bc(c)}}}}function Bc(c,d){if(c.g){DI(c);let p=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||It(c,"ready");try{p.onreadystatechange=g}catch{}}}function DI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Kn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),lN(d)}};function CI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function PN(c){let d={};c=(c.g&&2<=Kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(H(c[g]))continue;var p=C(c[g]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=d[b]||[];d[b]=R,R.push(p)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(c,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||d}function bI(c){this.Aa=0,this.i=[],this.j=new va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,c),this.cb=Ta("retryDelaySeedMs",1e4,c),this.Wa=Ta("forwardChannelMaxRetries",2,c),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new sI(c&&c.concurrentRequestLimit),this.Da=new MN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bI.prototype,n.la=8,n.G=1,n.connect=function(c,d,p,g){Dt(0),this.W=c,this.H=d||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=OI(this,null,this.W),qc(this)};function Ap(c){if(TI(c),c.G==3){var d=c.U++,p=Wn(c.I);if(Se(p,"SID",c.K),Se(p,"RID",d),Se(p,"TYPE","terminate"),Aa(c,p),d=new Ir(c,c.j,d),d.L=2,d.v=jc(Wn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=kI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Fc(d)}PI(c)}function $c(c){c.g&&(Mp(c),c.g.cancel(),c.g=null)}function TI(c){$c(c),c.u&&(a.clearTimeout(c.u),c.u=null),Hc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function qc(c){if(!aI(c.h)&&!c.s){c.s=!0;var d=c.Ga;la||LE(),da||(la(),da=!0),sp.add(d,c),c.B=0}}function ON(c,d){return uI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ya(m(c.Ga,c,d),NI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Ir(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=SI(this,b,d),p=Wn(this.I),Se(p,"RID",c),Se(p,"CVER",22),this.D&&Se(p,"X-HTTP-Session-Id",this.D),Aa(this,p),R&&(this.O?d="headers="+encodeURIComponent(String(_I(R)))+"&"+d:this.m&&Tp(p,this.m,R)),bp(this.h,b),this.Ua&&Se(p,"TYPE","init"),this.P?(Se(p,"$req",d),Se(p,"SID","null"),b.T=!0,Ep(b,p,null)):Ep(b,p,d),this.G=2}}else this.G==3&&(c?AI(this,c):this.i.length==0||aI(this.h)||AI(this))};function AI(c,d){var p;d?p=d.l:p=c.U++;let g=Wn(c.I);Se(g,"SID",c.K),Se(g,"RID",p),Se(g,"AID",c.T),Aa(c,g),c.m&&c.o&&Tp(g,c.m,c.o),p=new Ir(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),d&&(c.i=d.D.concat(c.i)),d=SI(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bp(c.h,p),Ep(p,g,d)}function Aa(c,d){c.H&&Y(c.H,function(p,g){Se(d,g,p)}),c.l&&dI({},function(p,g){Se(d,g,p)})}function SI(c,d,p){p=Math.min(c.i.length,p);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let R=-1;for(;;){let U=["count="+p];R==-1?0<p?(R=b[0].g,U.push("ofs="+R)):R=0:U.push("ofs="+R);let Ce=!0;for(let lt=0;lt<p;lt++){let we=b[lt].g,mt=b[lt].map;if(we-=R,0>we)R=Math.max(0,b[lt].g-100),Ce=!1;else try{xN(mt,U,"req"+we+"_")}catch{g&&g(mt)}}if(Ce){g=U.join("&");break e}}}return c=c.i.splice(0,p),d.D=c,g}function MI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;la||LE(),da||(la(),da=!0),sp.add(d,c),c.v=0}}function Sp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ya(m(c.Fa,c),NI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,xI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ya(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),$c(this),xI(this))};function Mp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xI(c){c.g=new Ir(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Wn(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),Aa(c,d),c.m&&c.o&&Tp(d,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=jc(Wn(d)),p.m=null,p.P=!0,rI(p,c)}n.Za=function(){this.C!=null&&(this.C=null,$c(this),Sp(this),Dt(19))};function Hc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function RI(c,d){var p=null;if(c.g==d){Hc(c),Mp(c),c.g=null;var g=2}else if(Cp(c.h,d))p=d.D,cI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Pc(),It(g,new XE(g,p)),qc(c)}else MI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&ON(c,d)||g==2&&Sp(c)))switch(p&&0<p.length&&(d=c.h,d.i=d.i.concat(p)),b){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function NI(c,d){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*d}function pi(c,d){if(c.j.info("Error code "+d),d==2){var p=m(c.fb,c),g=c.Xa;let b=!g;g=new fi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vc(g,"https"),jc(g),b?AN(g.toString(),p):SN(g.toString(),p)}else Dt(2);c.G=0,c.l&&c.l.sa(d),PI(c),TI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function PI(c){if(c.G=0,c.ka=[],c.l){let d=lI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function OI(c,d,p){var g=p instanceof fi?Wn(p):new fi(p);if(g.g!="")d&&(g.g=d+"."+g.g),Lc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var R=new fi(null);g&&Vc(R,g),d&&(R.g=d),b&&Lc(R,b),p&&(R.l=p),g=R}return p=c.D,d=c.ya,p&&d&&Se(g,p,d),Se(g,"VER",c.la),Aa(c,g),g}function kI(c,d,p){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new je(new Da({eb:p})):new je(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function FI(){}n=FI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zc(){}zc.prototype.g=function(c,d){return new Vt(c,d)};function Vt(c,d){gt.call(this),this.g=new bI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new yo(this)}D(Vt,gt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Ap(this.g)},Vt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=gp(c),c=p);d.i.push(new yN(d.Ya++,c)),d.G==3&&qc(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Ap(this.g),delete this.g,Vt.aa.N.call(this)};function VI(c){yp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let p in d){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(VI,yp);function LI(){vp.call(this),this.status=1}D(LI,vp);function yo(c){this.g=c}D(yo,FI),yo.prototype.ua=function(){It(this.g,"a")},yo.prototype.ta=function(c){It(this.g,new VI(c))},yo.prototype.sa=function(c){It(this.g,new LI)},yo.prototype.ra=function(){It(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,xv=dr.createWebChannelTransport=function(){return new zc},Mv=dr.getStatEventTarget=function(){return Pc()},Sv=dr.Event=di,Ah=dr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,Fu=dr.ErrorCode=Oc,eI.COMPLETE="complete",Av=dr.EventType=eI,QE.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",gt.prototype.listen=gt.prototype.K,_s=dr.WebChannel=QE,Tv=dr.FetchXmlHttpFactory=Da,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,bv=dr.XhrIo=je}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});var eS="@firebase/firestore";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var Ys="10.13.2";var Jr=new Qc("@firebase/firestore");function Cs(){return Jr.logLevel}function nM(n){Jr.setLogLevel(n)}function O(n,...e){if(Jr.logLevel<=Tn.DEBUG){let t=e.map(kw);Jr.debug(`Firestore (${Ys}): ${n}`,...t)}}function qe(n,...e){if(Jr.logLevel<=Tn.ERROR){let t=e.map(kw);Jr.error(`Firestore (${Ys}): ${n}`,...t)}}function sn(n,...e){if(Jr.logLevel<=Tn.WARN){let t=e.map(kw);Jr.warn(`Firestore (${Ys}): ${n}`,...t)}}function kw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: `+n;throw qe(e),new Error(e)}function Q(n,e){n||z()}function rM(n,e){n||z()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends zI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ze=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Lh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ye.UNAUTHENTICATED))}shutdown(){}},Fv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Vv=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Ze;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ze,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ze)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new Lh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new Ye(e)}},Lv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Lv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Uv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new Uv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function PU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var jh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=PU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function Ps(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iM(n){return n+"\0"}var Le=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Le(0,0))}static max(){return new n(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ye=class n extends Uh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},OU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,He=class n extends Uh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return OU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var Os=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function $v(n){return n.fields.find(e=>e.kind===2)}function qi(n){return n.fields.filter(e=>e.kind!==2)}Os.UNKNOWN_ID=-1;var xs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Ku=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,an.min())}};function oM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Le(t+1,0):new Le(t,r));return new an(i,$.empty(),e)}function sM(n){return new an(n.readTime,n.key,-1)}var an=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),$.empty(),-1)}static max(){return new n(J.max(),$.empty(),-1)}};function Fw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var aM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ui(n){return N(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==aM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var $h=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ze,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Qi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Vw(r.target.error);this.V.reject(new Qi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Qi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Hv(t)}},Xr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Sa())===12.2&&qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Hi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Kc())return!1;if(n.v())return!0;let e=Sa(),t=n.S(e),r=0<t&&t<10,i=uM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Qi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Qi(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=$h.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function uM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var qv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hi(this.B.delete())}},Qi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ci(n){return n.name==="IndexedDbTransactionError"}var Hv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hi(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Hi(this.store.add(e))}get(e){return Hi(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Hi(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Hi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=o=>{let s=Vw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new qv(a),l=t(a.primaryKey,a.value,u);if(l instanceof A){let h=l.catch(f=>(u.done(),A.reject(f)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Hi(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Vw(r.target.error);t(i)}})}var tS=!1;function Vw(n){let e=Xr.S(Sa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tS||(tS=!0,setTimeout(()=>{throw r},0)),r}}return n}var zv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ci(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ui(t)}yield this.X(6e4)}))}},Gv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=sM(o);Fw(s,r)>0&&(r=s)}),new an(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function yc(n){return n==null}function Qu(n){return n===0&&1/n==-1/0}function cM(n){return typeof n=="number"&&Number.isInteger(n)&&!Qu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function St(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nS(e)),e=kU(n.get(t),e);return nS(e)}function kU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function nS(n){return n+""}function Fn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ye(r)}var rS=["userId","batchId"];function Nh(n,e){return[n,St(e)]}function lM(n,e,t){return[n,St(e),t]}var FU={},VU=["prefixPath","collectionGroup","readTime","documentId"],LU=["prefixPath","collectionGroup","documentId"],jU=["collectionGroup","readTime","prefixPath","documentId"],UU=["canonicalId","targetId"],BU=["targetId","path"],$U=["path","targetId"],qU=["collectionId","parent"],HU=["indexId","uid"],zU=["uid","sequenceNumber"],GU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WU=["indexId","uid","orderedDocumentKey"],KU=["userId","collectionPath","documentId"],QU=["userId","collectionPath","largestBatchId"],YU=["userId","collectionGroup","largestBatchId"],dM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZU=[...dM,"documentOverlays"],hM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fM=hM,Lw=[...fM,"indexConfiguration","indexState","indexEntries"],JU=Lw,XU=[...Lw,"globals"];var Yu=class extends Bh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function rt(n,e){let t=B(n);return Xr.F(t._e,e)}function iS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ao(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Re=class n{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ms(this.root,e,this.comparator,!0)}},Ms=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ln=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Te=class n{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qh(this.data.getIterator())}getIteratorFrom(e){return new qh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},qh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ws(n){return n.hasNext()?n.getNext():void 0}var Gt=class n{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new n([])}unionWith(e){let t=new Te(He.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ps(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function gM(){return typeof atob<"u"}var Ge=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var eB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(n){if(Q(!!n),typeof n=="string"){let e=0,t=eB.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ei(n){return typeof n=="string"?Ge.fromBase64String(n):Ge.fromUint8Array(n)}function kf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function jw(n){let e=n.mapValue.fields.__previous_value__;return kf(e)?jw(e):e}function Zu(n){let e=pr(n.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}var Wv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},ti=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Yr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ph={nullValue:"NULL_VALUE"};function Yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kf(n)?4:mM(n)?9007199254740991:Ff(n)?10:11:z()}function Bn(n,e){if(n===e)return!0;let t=Yi(n);if(t!==Yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zu(n).isEqual(Zu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=pr(i.timestampValue),a=pr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ei(i.bytesValue).isEqual(ei(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Qu(s)===Qu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ps(n.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(iS(s)!==iS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Bn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function Ju(n,e){return(n.values||[]).find(t=>Bn(t,e))!==void 0}function ni(n,e){if(n===e)return 0;let t=Yi(n),r=Yi(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return oS(n.timestampValue,e.timestampValue);case 4:return oS(Zu(n),Zu(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ei(o),u=ei(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ne(o.latitude),Ne(s.latitude));return a!==0?a:re(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let f=o.fields||{},m=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=m.value)===null||u===void 0?void 0:u.arrayValue,S=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:sS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Yr.mapValue&&s===Yr.mapValue)return 0;if(o===Yr.mapValue)return 1;if(s===Yr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){let m=re(u[f],h[f]);if(m!==0)return m;let y=ni(a[u[f]],l[h[f]]);if(y!==0)return y}return re(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function oS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=pr(n),r=pr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function sS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ni(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function ks(n){return Kv(n)}function Kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=pr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ei(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Kv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Kv(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Zi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qv(n){return!!n&&"integerValue"in n}function Xu(n){return!!n&&"arrayValue"in n}function aS(n){return!!n&&"nullValue"in n}function uS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oh(n){return!!n&&"mapValue"in n}function Ff(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function qu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ao(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var yM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function tB(n){return"nullValue"in n?Ph:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zi(ti.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ff(n)?yM:{mapValue:{}}:z()}function nB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zi(ti.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?yM:"mapValue"in n?Ff(n)?{mapValue:{}}:Yr:z()}function cS(n,e){let t=ni(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lS(n,e){let t=ni(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Et=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(t)}setAll(e){let t=He.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=qu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ao(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(qu(this.value))}};function vM(n){let e=[];return ao(n.fields,(t,r)=>{let i=new He([t]);if(Oh(r)){let o=vM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var Je=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Et.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Et.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Et.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $n=class{constructor(e,t){this.position=e,this.inclusive=t}};function dS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=ni(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bn(n.position[t],e.position[t]))return!1;return!0}var Ji=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function rB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zh=class{},fe=class n extends zh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jv(e,t,r):t==="array-contains"?new t_(e,r):t==="in"?new Gh(e,r):t==="not-in"?new n_(e,r):t==="array-contains-any"?new r_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Xv(e,r):new e_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ni(t,this.value)):t!==null&&Yi(this.value)===Yi(t)&&this.matchesComparison(ni(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ie=class n extends zh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Fs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Fs(n){return n.op==="and"}function Yv(n){return n.op==="or"}function Uw(n){return _M(n)&&Fs(n)}function _M(n){for(let e of n.filters)if(e instanceof Ie)return!1;return!0}function Zv(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+ks(n.value);if(Uw(n))return n.filters.map(e=>Zv(e)).join(",");{let e=n.filters.map(t=>Zv(t)).join(",");return`${n.op}(${e})`}}function wM(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(n,e):n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&wM(s,i.filters[a]),!0):!1}(n,e):void z()}function EM(n,e){let t=n.filters.concat(e);return Ie.create(t,n.op)}function IM(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${ks(t.value)}`}(n):n instanceof Ie?function(t){return t.op.toString()+" {"+t.getFilters().map(IM).join(" ,")+"}"}(n):"Filter"}var Jv=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Xv=class extends fe{constructor(e,t){super(e,"in",t),this.keys=DM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},e_=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=DM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var t_=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Xu(t)&&Ju(t.arrayValue,this.value)}},Gh=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ju(this.value.arrayValue,t)}},n_=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ju(this.value.arrayValue,t)}},r_=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ju(this.value.arrayValue,r))}};var i_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function o_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new i_(n,e,t,r,i,o,s)}function Xi(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ks(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ks(r)).join(",")),e.ue=t}return e.ue}function vc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hS(n.startAt,e.startAt)&&hS(n.endAt,e.endAt)}function Wh(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Kh(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function fS(n,e,t){let r=Ph,i=!0;for(let o of Kh(n,e)){let s=Ph,a=!0;switch(o.op){case"<":case"<=":s=tB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ph}cS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];cS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function pS(n,e,t){let r=Yr,i=!0;for(let o of Kh(n,e)){let s=Yr,a=!0;switch(o.op){case">=":case">":s=nB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Yr}lS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];lS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var In=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function CM(n,e,t,r,i,o,s,a){return new In(n,e,t,r,i,o,s,a)}function Zs(n){return new In(n)}function gS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bw(n){return n.collectionGroup!==null}function Rs(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Te(He.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ji(o,r))}),t.has(He.keyField().canonicalString())||e.ce.push(new Ji(He.keyField(),r))}return e.ce}function Mt(n){let e=B(n);return e.le||(e.le=iB(e,Rs(n))),e.le}function iB(n,e){if(n.limitType==="F")return o_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ji(i.field,o)});let t=n.endAt?new $n(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $n(n.startAt.position,n.startAt.inclusive):null;return o_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function s_(n,e){let t=n.filters.concat([e]);return new In(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qh(n,e,t){return new In(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _c(n,e){return vc(Mt(n),Mt(e))&&n.limitType===e.limitType}function bM(n){return`${Xi(Mt(n))}|lt:${n.limitType}`}function bs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IM(i)).join(", ")}]`),yc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ks(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ks(i)).join(",")),`Target(${r})`}(Mt(n))}; limitType=${n.limitType})`}function wc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Rs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=dS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Rs(r),i)||r.endAt&&!function(s,a,u){let l=dS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Rs(r),i))}(n,e)}function TM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AM(n){return(e,t)=>{let r=!1;for(let i of Rs(n)){let o=oB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function oB(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ni(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var qn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return pM(this.inner)}size(){return this.innerSize}};var sB=new Re($.comparator);function Ft(){return sB}var SM=new Re($.comparator);function Bu(...n){let e=SM;for(let t of n)e=e.insert(t.key,t);return e}function MM(n){let e=SM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vn(){return Hu()}function xM(){return Hu()}function Hu(){return new qn(n=>n.toString(),(n,e)=>n.isEqual(e))}var aB=new Re($.comparator),uB=new Te($.comparator);function ie(...n){let e=uB;for(let t of n)e=e.add(t);return e}var cB=new Te(re);function $w(){return cB}function qw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qu(e)?"-0":e}}function RM(n){return{integerValue:""+n}}function NM(n,e){return cM(e)?RM(e):qw(n,e)}var Vs=class{constructor(){this._=void 0}};function lB(n,e,t){return n instanceof ri?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kf(o)&&(o=jw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof gr?OM(n,e):n instanceof mr?kM(n,e):function(i,o){let s=PM(i,o),a=mS(s)+mS(i.Pe);return Qv(s)&&Qv(i.Pe)?RM(a):qw(i.serializer,a)}(n,e)}function dB(n,e,t){return n instanceof gr?OM(n,e):n instanceof mr?kM(n,e):t}function PM(n,e){return n instanceof ii?function(r){return Qv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ri=class extends Vs{},gr=class extends Vs{constructor(e){super(),this.elements=e}};function OM(n,e){let t=FM(e);for(let r of n.elements)t.some(i=>Bn(i,r))||t.push(r);return{arrayValue:{values:t}}}var mr=class extends Vs{constructor(e){super(),this.elements=e}};function kM(n,e){let t=FM(e);for(let r of n.elements)t=t.filter(i=>!Bn(i,r));return{arrayValue:{values:t}}}var ii=class extends Vs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function mS(n){return Ne(n.integerValue||n.doubleValue)}function FM(n){return Xu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var eo=class{constructor(e,t){this.field=e,this.transform=t}};function hB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof gr&&i instanceof gr||r instanceof mr&&i instanceof mr?Ps(r.elements,i.elements,Bn):r instanceof ii&&i instanceof ii?Bn(r.Pe,i.Pe):r instanceof ri&&i instanceof ri}(n.transform,e.transform)}var a_=class{constructor(e,t){this.version=e,this.transformResults=t}},Be=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ls=class{};function VM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new si(n.key,Be.none()):new oi(n.key,n.data,Be.none());{let t=n.data,r=Et.empty(),i=new Te(He.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Dn(n.key,r,new Gt(i.toArray()),Be.none())}}function fB(n,e,t){n instanceof oi?function(i,o,s){let a=i.value.clone(),u=vS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Dn?function(i,o,s){if(!kh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=vS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(LM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function zu(n,e,t,r){return n instanceof oi?function(o,s,a,u){if(!kh(o.precondition,s))return a;let l=o.value.clone(),h=_S(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dn?function(o,s,a,u){if(!kh(o.precondition,s))return a;let l=_S(o.fieldTransforms,u,s),h=s.data;return h.setAll(LM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return kh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function pB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=PM(r.transform,i||null);o!=null&&(t===null&&(t=Et.empty()),t.set(r.field,o))}return t||null}function yS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ps(r,i,(o,s)=>hB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var oi=class extends Ls{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Dn=class extends Ls{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function LM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function vS(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,dB(s,a,t[i]))}return r}function _S(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,lB(o,s,e))}return r}var si=class extends Ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ec=class extends Ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var tc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&fB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=zu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=zu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=VM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ps(this.mutations,e.mutations,(t,r)=>yS(t,r))&&Ps(this.baseMutations,e.baseMutations,(t,r)=>yS(t,r))}},u_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return aB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var nc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var c_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ke,me;function jM(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function UM(n){if(n===void 0)return qe("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ke.OK:return x.OK;case Ke.CANCELLED:return x.CANCELLED;case Ke.UNKNOWN:return x.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return x.INTERNAL;case Ke.UNAVAILABLE:return x.UNAVAILABLE;case Ke.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ke.NOT_FOUND:return x.NOT_FOUND;case Ke.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ke.ABORTED:return x.ABORTED;case Ke.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ke.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(me=Ke||(Ke={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var wS=null;function BM(){return new TextEncoder}var gB=new zr([4294967295,4294967295],0);function ES(n){let e=BM().encode(n),t=new Cv;return t.update(e),new Uint8Array(t.digest())}function IS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zr([t,r],0),new zr([i,o],0)]}var l_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ki(`Invalid padding: ${t}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=zr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(zr.fromNumber(r)));return i.compare(gB)===1&&(i=new zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=ES(e),[r,i]=IS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=ES(e),[r,i]=IS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var rc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ic.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Re(re),Ft(),ie())}},ic=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var Ns=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Yh=class{constructor(e,t){this.targetId=e,this.me=t}},Zh=class{constructor(e,t,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Jh=class{constructor(){this.fe=0,this.ge=CS(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new ic(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=CS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},d_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ft(),this.qe=DS(),this.Qe=new Re(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Wh(o))if(r===0){let s=new $(o.path);this.Ue(t,s,Je.newNoDocument(s,J.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}wS?.et(function(h,f,m,y,D){var S,M,V,H,F,G;let ee={localCacheCount:h,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},Y=f.unchangedNames;return Y&&(ee.bloomFilter={applied:D===0,hashCount:(S=Y?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(H=(V=(M=Y?.bits)===null||M===void 0?void 0:M.bitmap)===null||V===void 0?void 0:V.length)!==null&&H!==void 0?H:0,padding:(G=(F=Y?.bits)===null||F===void 0?void 0:F.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ei(r).toUint8Array()}catch(u){if(u instanceof Hh)return sn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new l_(s,i,o)}catch(u){return sn(u instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Wh(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Je.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new rc(e,t,this.Qe,this.ke,r);return this.ke=Ft(),this.qe=DS(),this.Qe=new Re(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Jh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Te(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function DS(){return new Re($.comparator)}function CS(){return new Re($.comparator)}var mB={asc:"ASCENDING",desc:"DESCENDING"},yB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vB={and:"AND",or:"OR"},h_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function f_(n,e){return n.useProto3Json||yc(e)?e:{value:e}}function js(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $M(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _B(n,e){return js(n,e.toTimestamp())}function ze(n){return Q(!!n),J.fromTimestamp(function(t){let r=pr(t);return new Le(r.seconds,r.nanos)}(n))}function Hw(n,e){return p_(n,e).canonicalString()}function p_(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qM(n){let e=ye.fromString(n);return Q(XM(e)),e}function oc(n,e){return Hw(n.databaseId,e.path)}function jn(n,e){let t=qM(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(GM(t))}function HM(n,e){return Hw(n.databaseId,e)}function zM(n){let e=qM(n);return e.length===4?ye.emptyPath():GM(e)}function g_(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GM(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function bS(n,e,t){return{name:oc(n,e),fields:t.value.mapValue.fields}}function WM(n,e,t){let r=jn(n,e.name),i=ze(e.updateTime),o=e.createTime?ze(e.createTime):J.min(),s=new Et({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function wB(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=jn(r,i.found.name),s=ze(i.found.updateTime),a=i.found.createTime?ze(i.found.createTime):J.min(),u=new Et({mapValue:{fields:i.found.fields}});return Je.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=jn(r,i.missing),s=ze(i.readTime);return Je.newNoDocument(o,s)}(n,e):z()}function EB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Q(h===void 0||typeof h=="string"),Ge.fromBase64String(h||"")):(Q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ge.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:UM(l.code);return new P(h,l.message||"")}(s);t=new Zh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=jn(n,r.document.name),o=ze(r.document.updateTime),s=r.document.createTime?ze(r.document.createTime):J.min(),a=new Et({mapValue:{fields:r.document.fields}}),u=Je.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Ns(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=jn(n,r.document),o=r.readTime?ze(r.readTime):J.min(),s=Je.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ns([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=jn(n,r.document),o=r.removedTargetIds||[];t=new Ns([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new c_(i,o),a=r.targetId;t=new Yh(a,s)}}return t}function sc(n,e){let t;if(e instanceof oi)t={update:bS(n,e.key,e.value)};else if(e instanceof si)t={delete:oc(n,e.key)};else if(e instanceof Dn)t={update:bS(n,e.key,e.data),updateMask:AB(e.fieldMask)};else{if(!(e instanceof ec))return z();t={verify:oc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ri)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ii)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:_B(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function m_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Be.updateTime(ze(o.updateTime)):o.exists!==void 0?Be.exists(o.exists):Be.none()}(e.currentDocument):Be.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new ri;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new gr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new mr(h)}else"increment"in a?u=new ii(s,a.increment):z();let l=He.fromServerFormat(a.fieldPath);return new eo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=jn(n,e.update.name),o=new Et({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Gt(l.map(h=>He.fromServerFormat(h)))}(e.updateMask);return new Dn(i,o,s,t,r)}return new oi(i,o,t,r)}if(e.delete){let i=jn(n,e.delete);return new si(i,t)}if(e.verify){let i=jn(n,e.verify);return new ec(i,t)}return z()}function IB(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ze(i.updateTime):ze(o);return s.isEqual(J.min())&&(s=ze(o)),new a_(s,i.transformResults||[])}(t,e))):[]}function KM(n,e){return{documents:[HM(n,e.path)]}}function QM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HM(n,i);let o=function(l){if(l.length!==0)return JM(Ie.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ts(m.field),direction:CB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=f_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function YM(n){let e=zM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(f){let m=ZM(f);return m instanceof Ie&&Uw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(D){return new Ji(As(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,yc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(f){let m=!!f.before,y=f.values||[];return new $n(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let m=!f.before,y=f.values||[];return new $n(y,m)}(t.endAt)),CM(e,i,s,o,a,"F",u,l)}function DB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=As(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=As(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=As(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=As(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(As(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ie.create(t.compositeFilter.filters.map(r=>ZM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function CB(n){return mB[n]}function bB(n){return yB[n]}function TB(n){return vB[n]}function Ts(n){return{fieldPath:n.canonicalString()}}function As(n){return He.fromServerFormat(n.fieldPath)}function JM(n){return n instanceof fe?function(t){if(t.op==="=="){if(uS(t.value))return{unaryFilter:{field:Ts(t.field),op:"IS_NAN"}};if(aS(t.value))return{unaryFilter:{field:Ts(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uS(t.value))return{unaryFilter:{field:Ts(t.field),op:"IS_NOT_NAN"}};if(aS(t.value))return{unaryFilter:{field:Ts(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(t.field),op:bB(t.op),value:t.value}}}(n):n instanceof Ie?function(t){let r=t.getFilters().map(i=>JM(i));return r.length===1?r[0]:{compositeFilter:{op:TB(t.op),filters:r}}}(n):z()}function AB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Us=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xh=class{constructor(e){this.ct=e}};function SB(n,e){let t;if(e.document)t=WM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=no(e.noDocument.readTime);t=Je.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=no(e.unknownDocument.version);t=Je.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Le(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),t}function TS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:oc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:js(o,s.version.toTimestamp()),createTime:js(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:to(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:to(e.version)}}return r}function ef(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function to(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function no(n){let e=new Le(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function zi(n,e){let t=(e.baseMutations||[]).map(o=>m_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>m_(n.ct,o)),i=Le.fromMillis(e.localWriteTimeMs);return new tc(e.batchId,i,t,r)}function $u(n){let e=no(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?no(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),Mt(Zs(zM(o.documents[0])))}(n.query):function(o){return Mt(YM(o))}(n.query),new Us(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ge.fromBase64String(n.resumeToken))}function ex(n,e){let t=to(e.snapshotVersion),r=to(e.lastLimboFreeSnapshotVersion),i;i=Wh(e.target)?KM(n.ct,e.target):QM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zw(n){let e=YM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qh(e,e.limit,"L"):e}function Rv(n,e){return new nc(e.largestBatchId,m_(n.ct,e.overlayMutation))}function AS(n,e){let t=e.path.lastSegment();return[n,St(e.path.popLast()),t]}function SS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:to(r.readTime),documentKey:St(r.documentKey.path),largestBatchId:r.largestBatchId}}var y_=class{getBundleMetadata(e,t){return MS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:no(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return MS(e).put(function(i){return{bundleId:i.id,createTime:to(ze(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return xS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:zw(o.bundledQuery),readTime:no(o.readTime)}}(r)})}saveNamedQuery(e,t){return xS(e).put(function(i){return{name:i.name,readTime:to(ze(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function MS(n){return rt(n,"bundles")}function xS(n){return rt(n,"namedQueries")}var tf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Vu(e).get(AS(this.userId,t)).next(r=>r?Rv(this.serializer,r):null)}getOverlays(e,t){let r=Vn();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new nc(t,s);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(St(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Vu(e).j("collectionPathOverlayIndex",a))}),A.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Vn(),o=St(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Vu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Rv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Vn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let f=Rv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Vu(e).put(function(i,o,s){let[a,u,l]=AS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:sc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Vu(n){return rt(n,"documentOverlays")}var v_=class{Pt(e){return rt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ge.fromUint8Array(r):Ge.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var hr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Qu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=pr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ei(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?mM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ff(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ne(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};hr.vt=new hr;function MB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function RS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=MB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var __=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=RS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=RS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},w_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},E_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Gi=class{constructor(){this.jt=new __,this.Ht=new w_(this.jt),this.Jt=new E_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Wi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Gr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=NS(n.arrayValue,e.arrayValue),t!==0?t:(t=NS(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function NS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var nf=class{constructor(e){this.Xt=new Te((t,r)=>He.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=$v(e);if(t!==void 0&&!this.sn(t))return!1;let r=qi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Te(He.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new xs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new xs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new xs(r.field,r.dir==="asc"?0:1)));return new Os(Os.UNKNOWN_ID,this.collectionId,t,Ku.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function tx(n){var e,t;if(Q(n instanceof fe||n instanceof Ie),n instanceof fe){if(n instanceof Gh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Ie.create(i,"or")}return n}let r=n.filters.map(i=>tx(i));return Ie.create(r,n.op)}function xB(n){if(n.getFilters().length===0)return[];let e=C_(tx(n));return Q(nx(e)),I_(e)||D_(e)?[e]:e.getFilters()}function I_(n){return n instanceof fe}function D_(n){return n instanceof Ie&&Uw(n)}function nx(n){return I_(n)||D_(n)||function(t){if(t instanceof Ie&&Yv(t)){for(let r of t.getFilters())if(!I_(r)&&!D_(r))return!1;return!0}return!1}(n)}function C_(n){if(Q(n instanceof fe||n instanceof Ie),n instanceof fe)return n;if(n.filters.length===1)return C_(n.filters[0]);let e=n.filters.map(r=>C_(r)),t=Ie.create(e,n.op);return t=rf(t),nx(t)?t:(Q(t instanceof Ie),Q(Fs(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>Gw(r,i)))}function Gw(n,e){let t;return Q(n instanceof fe||n instanceof Ie),Q(e instanceof fe||e instanceof Ie),t=n instanceof fe?e instanceof fe?function(i,o){return Ie.create([i,o],"and")}(n,e):PS(n,e):e instanceof fe?PS(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),Fs(i)&&Fs(o))return EM(i,o.getFilters());let s=Yv(i)?i:o,a=Yv(i)?o:i,u=s.filters.map(l=>Gw(l,a));return Ie.create(u,"or")}(n,e),rf(t)}function PS(n,e){if(Fs(e))return EM(e,n.getFilters());{let t=e.filters.map(r=>Gw(n,r));return Ie.create(t,"or")}}function rf(n){if(Q(n instanceof fe||n instanceof Ie),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return rf(e[0]);if(_M(n))return n;let t=e.map(i=>rf(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Ie&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ie.create(r,n.op)}var b_=class{constructor(){this.un=new ac}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(an.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(an.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},ac=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Te(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Te(ye.comparator)).toArray()}};var Sh=new Uint8Array(0),T_=class{constructor(e,t){this.databaseId=t,this.cn=new ac,this.ln=new qn(r=>Xi(r),(r,i)=>vc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:St(i)};return OS(e).put(o)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[iM(t),""],!1,!0);return OS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Fn(s.parent))}return r})}addFieldIndex(e,t){let r=Lu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Is(e);return o.next(a=>{s.put(SS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Lu(e),i=Is(e),o=Es(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Lu(e),r=Es(e),i=Is(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new nf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Es(e),i=!0,o=new Map;return A.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return A.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(u)} to execute ${Xi(t)}`);let h=function(F,G){let ee=$v(G);if(ee===void 0)return null;for(let Y of Kh(F,ee.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,u),f=function(F,G){let ee=new Map;for(let Y of qi(G))for(let E of Kh(F,Y.fieldPath))switch(E.op){case"==":case"in":ee.set(Y.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ee.set(Y.fieldPath.canonicalString(),E.value),Array.from(ee.values())}return null}(l,u),m=function(F,G){let ee=[],Y=!0;for(let E of qi(G)){let v=E.kind===0?fS(F,E.fieldPath,F.startAt):pS(F,E.fieldPath,F.startAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new $n(ee,Y)}(l,u),y=function(F,G){let ee=[],Y=!0;for(let E of qi(G)){let v=E.kind===0?pS(F,E.fieldPath,F.endAt):fS(F,E.fieldPath,F.endAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new $n(ee,Y)}(l,u),D=this.In(u,l,m),S=this.In(u,l,y),M=this.Tn(u,l,f),V=this.En(u.indexId,h,D,m.inclusive,S,y.inclusive,M);return A.forEach(V,H=>r.G(H,t.limit).next(F=>{F.forEach(G=>{let ee=$.fromSegments(G.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=xB(Ie.create(e.filters,"and")).map(r=>o_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let f=0;f<u;++f){let m=t?this.dn(t[f/l]):Sh,y=this.An(e,m,r[f%l],i),D=this.Rn(e,m,o[f%l],s),S=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,D,S))}return h}An(e,t,r,i){let o=new Wi(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Wi(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new nf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Te(He.comparator),h=!1;for(let f of u.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Gi;for(let i of qi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);hr.vt.It(o,s)}return r.zt()}dn(e){let t=new Gi;return hr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Gi;return hr.vt.It(Zi(this.databaseId,t),r.Yt(function(o){let s=qi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Gi);let o=0;for(let s of qi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&Xu(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);hr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Gi;u.seed(a.zt()),hr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Lu(e),i=Is(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,f){let m=f?new Ku(f.sequenceNumber,new an(no(f.readTime),new $(Fn(f.documentKey)),f.largestBatchId)):Ku.empty(),y=h.fields.map(([D,S])=>new xs(He.fromServerFormat(D),S));return new Os(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Lu(e),o=Is(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,u=>o.put(SS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?A.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Es(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Es(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Es(e),o=new Te(Gr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Wi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Te(Gr),i=this.Vn(t,e);if(i==null)return r;let o=$v(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Xu(s))for(let a of s.arrayValue.values||[])r=r.add(new Wi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Wi(t.indexId,e.key,Sh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,f,m){let y=u.getIterator(),D=l.getIterator(),S=ws(y),M=ws(D);for(;S||M;){let V=!1,H=!1;if(S&&M){let F=h(S,M);F<0?H=!0:F>0&&(V=!0)}else S!=null?H=!0:V=!0;V?(f(M),M=ws(D)):H?(m(S),S=ws(y)):(S=ws(y),M=ws(D))}}(i,o,Gr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),A.waitFor(s)}yn(e){let t=1;return Is(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Gr(s,a)).filter((s,a,u)=>!a||Gr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Gr(s,e),u=Gr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Sh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Sh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Gr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kS)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(kS)}};function OS(n){return rt(n,"collectionParents")}function Es(n){return rt(n,"indexEntries")}function Lu(n){return rt(n,"indexConfiguration")}function Is(n){return rt(n,"indexState")}function kS(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Fw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new an(e.readTime,e.documentKey,t)}var FS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},on=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function rx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,f,m)=>(a++,m.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let h of t.mutations){let f=lM(e,h.key.path,t.batchId);o.push(i.delete(f)),l.push(h.key)}return A.waitFor(o).next(()=>l)}function of(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);var sf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ss(e),s=Wr(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new tc(a,t,r,i),l=function(y,D,S){let M=S.baseMutations.map(H=>sc(y.ct,H)),V=S.mutations.map(H=>sc(y.ct,H));return{userId:D,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:M,mutations:V}}(this.serializer,this.userId,u),h=[],f=new Te((m,y)=>re(m.canonicalString(),y.canonicalString()));for(let m of i){let y=lM(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,FU))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),A.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Wr(e).get(t).next(r=>r?(Q(r.userId===this.userId),zi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Wr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=zi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Wr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wr(e).U("userMutationsIndex",t).next(r=>r.map(i=>zi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Nh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ss(e).J({range:i},(s,a,u)=>{let[l,h,f]=s,m=Fn(h);if(l===this.userId&&t.path.isEqual(m))return Wr(e).get(f).next(y=>{if(!y)throw z();Q(y.userId===this.userId),o.push(zi(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(re),i=[];return t.forEach(o=>{let s=Nh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ss(e).J({range:a},(l,h,f)=>{let[m,y,D]=l,S=Fn(y);m===this.userId&&o.path.isEqual(S)?r=r.add(D):f.done()});i.push(u)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Nh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Te(re);return Ss(e).J({range:s},(u,l,h)=>{let[f,m,y]=u,D=Fn(m);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Wr(e).get(o).next(s=>{if(s===null)throw z();Q(s.userId===this.userId),r.push(zi(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ss(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Fn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return ix(e,this.userId,t)}Nn(e){return ox(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function ix(n,e,t){let r=Nh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ss(n).J({range:o,H:!0},(a,u,l)=>{let[h,f,m]=a;h===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Wr(n){return rt(n,"mutations")}function Ss(n){return rt(n,"documentMutations")}function ox(n){return rt(n,"mutationQueues")}var Bs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var A_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Bs(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>J.fromTimestamp(new Le(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ds(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ds(e).J((s,a)=>{let u=$u(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ds(e).J((r,i)=>{let o=$u(i);t(o)})}qn(e){return VS(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return VS(e).put("targetGlobalKey",t)}Kn(e,t){return Ds(e).put(ex(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Xi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ds(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=$u(a);vc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Kr(e);return t.forEach(s=>{let a=St(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=Kr(e);return A.forEach(t,o=>{let s=St(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Kr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Kr(e),o=ie();return i.J({range:r,H:!0},(s,a,u)=>{let l=Fn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=St(t.path),i=IDBKeyRange.bound([r],[iM(r)],!1,!0),o=0;return Kr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ds(e).get(t).next(r=>r?$u(r):null)}};function Ds(n){return rt(n,"targets")}function VS(n){return rt(n,"targetGlobal")}function Kr(n){return rt(n,"targetDocuments")}function LS([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var S_=class{constructor(e){this.Un=e,this.buffer=new Te(LS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();LS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},M_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ci(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ui(t)}yield this.Hn(3e5)}))}},x_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(zt.oe);let r=new S_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(FS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Cs()<=Tn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function RB(n,e){return new x_(n,e)}var R_=class{constructor(e,t){this.db=e,this.garbageCollector=RB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Mh(e,r)}removeReference(e,t,r){return Mh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Mh(e,t)}nr(e,t){return function(i,o){let s=!1;return ox(i).Y(a=>ix(i,a,o).next(u=>(u&&(s=!0),A.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),Kr(e).delete(function(f){return[0,St(f.path)]}(s))))});i.push(u)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Mh(e,t)}tr(e,t){let r=Kr(e),i,o=zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==zt.oe&&t(new $(Fn(i)),o),o=l,i=u):o=zt.oe}).next(()=>{o!==zt.oe&&t(new $(Fn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Mh(n,e){return Kr(n).put(function(r,i){return{targetId:0,path:St(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var af=class{constructor(){this.changes=new qn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var N_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $i(e).put(r)}removeEntry(e,t,r){return $i(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ef(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Je.newInvalidDocument(t);return $i(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ju(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Je.newInvalidDocument(t)};return $i(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ju(t))},(i,o)=>{r={document:this.ir(t,o),size:of(o)}}).next(()=>r)}getEntries(e,t){let r=Ft();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Ft(),i=new Re($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,of(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new Te(BS);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(ju(i.first()),ju(i.last())),s=i.getIterator(),a=s.getNext();return $i(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&BS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(ju(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),ef(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $i(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Ft();for(let f of l){let m=this.ir($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(wc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Ft(),s=US(t,r),a=US(t,an.max());return $i(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let f=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new P_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jS(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return jS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=SB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return Je.newInvalidDocument(e)}};function sx(n){return new N_(n)}var P_=class extends af{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new qn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Te((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=TS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=of(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=TS(this.cr.serializer,s.convertToNoDocument(J.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function jS(n){return rt(n,"remoteDocumentGlobal")}function $i(n){return rt(n,"remoteDocumentsV14")}function ju(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function US(n,e){let t=e.documentKey.path.toArray();return[n,ef(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var O_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var uf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&zu(r.mutation,i,Gt.empty(),Le.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Vn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Bu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Vn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ft(),s=Hu(),a=function(){return Hu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Dn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),zu(h.mutation,l,h.mutation.getFieldMask(),Le.now())):s.set(l.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var f;return a.set(l,new O_(h,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Hu(),i=new Re((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Gt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let f=(i.get(a.batchId)||ie()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,f=xM();h.forEach(m=>{if(!o.has(m)){let y=VM(t.get(m),r.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(Vn()),a=-1,u=o;return s.next(l=>A.forEach(l,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(h=>({batchId:a,changes:MM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Bu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Bu();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,u=>{let l=function(f,m){return new In(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Je.newInvalidDocument(h)))});let a=Bu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&zu(h.mutation,l,Gt.empty(),Le.now()),wc(t,l)&&(a=a.insert(u,l))}),a})}};var k_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ze(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:zw(i.bundledQuery),readTime:ze(i.readTime)}}(t)),A.resolve()}};var F_=class{constructor(){this.overlays=new Re($.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vn();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=Vn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Re((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Vn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Vn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var V_=class{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var uc=class{constructor(){this.Tr=new Te(Qe.Er),this.dr=new Te(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Qe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Qe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ye([])),r=new Qe(t,e),i=new Qe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ye([])),r=new Qe(t,e),i=new Qe(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Qe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var L_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Te(Qe.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new tc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qe(t,0),i=new Qe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(re);return t.forEach(i=>{let o=new Qe(i,0),s=new Qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Qe(new $(o),0),a=new Te(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let o=new Qe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Qe(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var j_=class{constructor(e){this.Mr=e,this.docs=function(){return new Re($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(t))}getEntries(e,t){let r=Ft();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Je.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ft(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Fw(sM(h),r)<=0||(i.has(h.key)||wc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U_(this)}getSize(e){return A.resolve(this.size)}},U_=class extends af{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var B_=class{constructor(e){this.persistence=e,this.Nr=new qn(t=>Xi(t),vc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uc,this.targetCount=0,this.kr=Bs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Bs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var cf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zt(0),this.Kr=!1,this.Kr=!0,this.$r=new V_,this.referenceDelegate=e(this),this.Ur=new B_(this),this.indexManager=new b_,this.remoteDocumentCache=function(i){return new j_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Xh(t),this.Gr=new k_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new F_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new L_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new $_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},$_=class extends Bh{constructor(e){super(),this.currentSequenceNumber=e}},lf=class n{constructor(e){this.persistence=e,this.Jr=new uc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var q_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new $h("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rS,{unique:!0}),u.createObjectStore("documentMutations")}(e),$S(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),$S(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rS,{unique:!0});let f=l.store("mutations"),m=h.map(y=>f.put(y));return A.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:KU});l.createIndex("collectionPathOverlayIndex",QU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",YU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:VU});l.createIndex("documentKeyIndex",LU),l.createIndex("collectionGroupIndex",jU)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:HU}).createIndex("sequenceNumberIndex",zU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:GU}).createIndex("documentKeyIndex",WU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=of(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>A.forEach(a,u=>{Q(u.userId===o.userId);let l=zi(this.serializer,u);return rx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ye(s),l=function(f){return[0,St(f)]}(u);o.push(t.get(l).next(h=>h?A.resolve():(f=>t.put({targetId:0,path:St(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>A.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:qU});let r=t.store("collectionParents"),i=new ac,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:St(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ye(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Fn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=$u(i),s=ex(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new $(ye.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=sx(this.serializer),o=new cf(lf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ie();zi(this.serializer,u).keys().forEach(f=>h=h.add(f)),a.set(u.userId,h)}),A.forEach(a,(u,l)=>{let h=new Ye(l),f=tf.lt(this.serializer,h),m=o.getIndexManager(h),y=sf.lt(h,this.serializer,m,o.referenceDelegate);return new uf(i,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Yu(t,zt.oe),u).next()})})}};function $S(n){n.createObjectStore("targetDocuments",{keyPath:BU}).createIndex("documentTargetsIndex",$U,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",UU,{unique:!0}),n.createObjectStore("targetGlobal")}var Nv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",H_=class n{constructor(e,t,r,i,o,s,a,u,l,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new R_(this,i),this.Ai=t+"main",this.serializer=new Xh(u),this.Ri=new Xr(this.Ai,this.hi,new q_(this.serializer)),this.$r=new v_,this.Ur=new A_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sx(this.serializer),this.Gr=new y_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Nv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ci(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Uu(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return xh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=rt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):Uu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Nv);return!1}}return!(!this.networkEnabled||!this.inForeground)||xh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Yu(e,zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>xh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return sf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?XU:u===16?JU:u===15?Lw:u===14?fM:u===13?hM:u===12?ZU:u===11?dM:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Yu(a,this.Qr?this.Qr.next():zt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,aM);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Uu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Nv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uu(e).put("owner",t)}static D(){return Xr.D()}bi(e){let t=Uu(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Pp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){qe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Uu(n){return rt(n,"owner")}function xh(n){return rt(n,"clientMetadata")}function Ww(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var z_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var G_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var df=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Pp()?8:uM(Sa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new G_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Cs()<=Tn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(Cs()<=Tn.DEBUG&&O("QueryEngine","Query:",bs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Cs()<=Tn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(t))):A.resolve())}Yi(e,t){if(gS(t))return A.resolve(null);let r=Mt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Qh(t,null,"F"),r=Mt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Qh(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return gS(t)||i.isEqual(J.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?A.resolve(null):(Cs()<=Tn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bs(t)),this.rs(e,s,t,oM(i,-1)).next(a=>a))})}ts(e,t){let r=new Te(AM(e));return t.forEach((i,o)=>{wc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Cs()<=Tn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",bs(t)),this.Ji.getDocumentsMatchingQuery(e,t,an.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var W_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Re(re),this._s=new qn(o=>Xi(o),vc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function ax(n,e,t,r){return new W_(n,e,t,r)}function ux(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function NB(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let f=l.batch,m=f.keys(),y=A.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(S=>{let M=l.docVersions.get(D);Q(M!==null),S.version.compareTo(M)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cx(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function PB(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,f)=>{let m=i.get(f);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ge.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(S,M,V){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=Ft(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(lx(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(J.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function lx(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ft();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function OB(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $s(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Us(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function qs(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ci(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function hf(n,e,t){let r=B(n),i=J.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let f=B(u),m=f._s.get(h);return m!==void 0?A.resolve(f.os.get(m)):f.Ur.getTargetData(l,h)}(r,s,Mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:ie())).next(a=>(fx(r,TM(e),a),{documents:a,Ts:o})))}function dx(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function hx(n,e){let t=B(n),r=t.us.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,oM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fx(t,e,i),i))}function fx(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function kB(n,e,t,r){return N(this,null,function*(){let i=B(n),o=ie(),s=Ft();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield $s(i,function(h){return Mt(Zs(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>lx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function FB(r,i){return N(this,arguments,function*(n,e,t=ie()){let o=yield $s(n,Mt(zw(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=ze(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ge.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function qS(n,e){return`firestore_clients_${n}_${e}`}function HS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pv(n,e){return`firestore_targets_${n}_${e}`}var ff=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},pf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=$w();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=cM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},K_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(qe("SharedClientState",`Failed to parse online state: ${e}`),null)}},cc=class{constructor(){this.activeTargetIds=$w()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Wu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Re(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=qS(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new cc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(qS(this.persistenceKey,r));if(i){let o=pf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Pv(this.persistenceKey,e));if(i){let o=Gu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=zt.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){qe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new ff(this.currentUser,e,t,r),o=HS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=HS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Pv(this.persistenceKey,e),o=new Gu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return pf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ff.Rs(new Ye(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Gu.Rs(i,t)}Ls(e){return K_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=$w();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},gf=class{constructor(){this.so=new cc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Q_=class{_o(e){}shutdown(){}};var mf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rh=null;function Ov(){return Rh===null?Rh=function(){return 268435456+Math.round(2147483648*Math.random())}():Rh++,"0x"+Rh.toString(16)}var VB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Y_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var wt="WebChannelConnection",Z_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Ov(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw sn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ys}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=VB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Ov();return new Promise((s,a)=>{let u=new bv;u.setWithCredentials(!0),u.listenOnce(Av.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fu.NO_ERROR:let h=u.getResponseJson();O(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Fu.TIMEOUT:O(wt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:let f=u.getStatus();if(O(wt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(M){let V=M.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(V)>=0?V:x.UNKNOWN}(y.status);a(new P(D,y.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{O(wt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(wt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Ov(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xv(),a=Mv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Tv({})),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let f=s.createWebChannel(h,u),m=!1,y=!1,D=new Y_({Io:M=>{y?O(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(O(wt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),O(wt,`RPC '${e}' stream ${i} sending:`,M),f.send(M))},To:()=>f.close()}),S=(M,V,H)=>{M.listen(V,F=>{try{H(F)}catch(G){setTimeout(()=>{throw G},0)}})};return S(f,_s.EventType.OPEN,()=>{y||(O(wt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),S(f,_s.EventType.CLOSE,()=>{y||(y=!0,O(wt,`RPC '${e}' stream ${i} transport closed`),D.So())}),S(f,_s.EventType.ERROR,M=>{y||(y=!0,sn(wt,`RPC '${e}' stream ${i} transport errored:`,M),D.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),S(f,_s.EventType.MESSAGE,M=>{var V;if(!y){let H=M.data[0];Q(!!H);let F=H,G=F.error||((V=F[0])===null||V===void 0?void 0:V.error);if(G){O(wt,`RPC '${e}' stream ${i} received error:`,G);let ee=G.status,Y=function(w){let I=Ke[w];if(I!==void 0)return UM(I)}(ee),E=G.message;Y===void 0&&(Y=x.INTERNAL,E="Unknown error status: "+ee+" with message "+G.message),y=!0,D.So(new P(Y,E)),f.close()}else O(wt,`RPC '${e}' stream ${i} received:`,H),D.bo(H)}}),S(a,Sv.STAT_EVENT,M=>{M.stat===Ah.PROXY?O(wt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Ah.NOPROXY&&O(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function px(){return typeof window<"u"?window:null}function Fh(){return typeof document<"u"?document:null}function Ec(n){return new h_(n,!0)}var lc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new lc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(qe(t.toString()),qe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},J_=class extends yf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=EB(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?ze(s.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=g_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Wh(u)?{documents:KM(o,u)}:{query:QM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=$M(o,s.resumeToken);let l=f_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=js(o,s.snapshotVersion.toTimestamp());let l=f_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=DB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=g_(this.serializer),t.removeTarget=e,this.a_(t)}},X_=class extends yf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=IB(e.writeResults,e.commitTime),r=ze(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=g_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>sc(this.serializer,r))};this.a_(t)}};var ew=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,p_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,p_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},tw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qe(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var nw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){li(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.L_.add(4),yield Js(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ic(l)})}(this))}))}),this.q_=new tw(r,i)}};function Ic(n){return N(this,null,function*(){if(li(n))for(let e of n.B_)yield e(!0)})}function Js(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Vf(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Yw(t)?Qw(t):ea(t).r_()&&Kw(t,e))}function Hs(n,e){let t=B(n),r=ea(t);t.N_.delete(e),r.r_()&&gx(t,e),t.N_.size===0&&(r.r_()?r.o_():li(t)&&t.q_.set("Unknown"))}function Kw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ea(n).A_(e)}function gx(n,e){n.Q_.xe(e),ea(n).R_(e)}function Qw(n){n.Q_=new d_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ea(n).start(),n.q_.v_()}function Yw(n){return li(n)&&!ea(n).n_()&&n.N_.size>0}function li(n){return B(n).L_.size===0}function mx(n){n.Q_=void 0}function LB(n){return N(this,null,function*(){n.q_.set("Online")})}function jB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{Kw(n,e)})})}function UB(n,e){return N(this,null,function*(){mx(n),Yw(n)?(n.q_.M_(e),Qw(n)):n.q_.set("Unknown")})}function BB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Zh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vf(n,r)}else if(e instanceof Ns?n.Q_.Ke(e):e instanceof Yh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield cx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ge.EMPTY_BYTE_STRING,h.snapshotVersion)),gx(o,u);let f=new Us(h.target,u,l,h.sequenceNumber);Kw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield vf(n,r)}})}function vf(n,e,t){return N(this,null,function*(){if(!ci(e))throw e;n.L_.add(1),yield Js(n),n.q_.set("Offline"),t||(t=()=>cx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ic(n)}))})}function yx(n,e){return e().catch(t=>vf(n,t,e))}function Xs(n){return N(this,null,function*(){let e=B(n),t=ai(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$B(e);)try{let i=yield OB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,qB(e,i)}catch(i){yield vf(e,i)}vx(e)&&_x(e)})}function $B(n){return li(n)&&n.O_.length<10}function qB(n,e){n.O_.push(e);let t=ai(n);t.r_()&&t.V_&&t.m_(e.mutations)}function vx(n){return li(n)&&!ai(n).n_()&&n.O_.length>0}function _x(n){ai(n).start()}function HB(n){return N(this,null,function*(){ai(n).p_()})}function zB(n){return N(this,null,function*(){let e=ai(n);for(let t of n.O_)e.m_(t.mutations)})}function GB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=u_.from(r,e,t);yield yx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Xs(n)})}function WB(n,e){return N(this,null,function*(){e&&ai(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return jM(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();ai(r).s_(),yield yx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Xs(r)}})}(n,e)),vx(n)&&_x(n)})}function zS(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=li(t);t.L_.add(3),yield Js(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ic(t)})}function rw(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield Ic(t)):e||(t.L_.add(2),yield Js(t),t.q_.set("Unknown"))})}function ea(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new J_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:LB.bind(null,n),Ro:jB.bind(null,n),mo:UB.bind(null,n),d_:BB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),Yw(n)?Qw(n):n.q_.set("Unknown")):(yield n.K_.stop(),mx(n))}))),n.K_}function ai(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new X_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HB.bind(null,n),mo:WB.bind(null,n),f_:zB.bind(null,n),g_:GB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Xs(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var iw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ta(n,e){if(qe("AsyncQueue",`${e}: ${n}`),ci(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var _f=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Bu(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var wf=class{constructor(){this.W_=new Re($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},zs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,_f.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ow=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},sw=class{constructor(){this.queries=GS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=GS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function GS(){return new qn(n=>bM(n),_c)}function Zw(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new ow,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ta(s,`Initialization of query '${bs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Xw(t)})}function Jw(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function KB(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Xw(t)}function QB(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Xw(n){n.Y_.forEach(e=>{e.next()})}var aw,WS;(WS=aw||(aw={})).ea="default",WS.Cache="cache";var dc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==aw.Cache}};var uw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Ef=class{constructor(e){this.serializer=e}Es(e){return jn(this.serializer,e)}ds(e){return e.metadata.exists?WM(this.serializer,e.document,!1):Je.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ze(e)}},cw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Ef(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield kB(this.localStore,new Ef(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield FB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function wx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var If=class{constructor(e){this.key=e}},Df=class{constructor(e){this.key=e}},Cf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=AM(e),this.Ra=new _f(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new wf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{let m=i.get(h),y=wc(this.query,f)?f:null,D=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?D!==S&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,f)=>function(y,D){let S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return S(y)-S(D)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new zs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Df(r))}),this.da.forEach(r=>{e.has(r)||t.push(new If(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},lw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},dw=class{constructor(e){this.key=e,this.va=!1}},hw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new qn(a=>bM(a),_c),this.Ma=new Map,this.xa=new Set,this.Oa=new Re($.comparator),this.Na=new Map,this.La=new uc,this.Ba={},this.ka=new Map,this.qa=Bs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function YB(n,e,t=!0){return N(this,null,function*(){let r=Lf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Ex(r,e,t,!0),i})}function ZB(n,e){return N(this,null,function*(){let t=Lf(n);yield Ex(t,e,!0,!1)})}function Ex(n,e,t,r){return N(this,null,function*(){let i=yield $s(n.localStore,Mt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield eE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Vf(n.remoteStore,i),a})}function eE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,m,y)=>function(S,M,V,H){return N(this,null,function*(){let F=M.view.ma(V);F.ns&&(F=yield hf(S.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,F)));let G=H&&H.targetChanges.get(M.targetId),ee=H&&H.targetMismatches.get(M.targetId)!=null,Y=M.view.applyChanges(F,S.isPrimaryClient,G,ee);return fw(S,M.targetId,Y.wa),Y.snapshot})}(n,f,m,y);let o=yield hf(n.localStore,e,!0),s=new Cf(e,o.Ts),a=s.ma(o.documents),u=ic.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);fw(n,t,l.wa);let h=new lw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function JB(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!_c(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield qs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Hs(r.remoteStore,i.targetId),Gs(r,i.targetId)}).catch(ui))):(Gs(r,i.targetId),yield qs(r.localStore,i.targetId,!0))})}function XB(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hs(t.remoteStore,r.targetId))})}function e$(n,e,t){return N(this,null,function*(){let r=iE(n);try{let i=yield function(s,a){let u=B(s),l=Le.now(),h=a.reduce((y,D)=>y.add(D.key),ie()),f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Ft(),S=ie();return u.cs.getEntries(y,h).next(M=>{D=M,D.forEach((V,H)=>{H.isValidDocument()||(S=S.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{f=M;let V=[];for(let H of a){let F=pB(H,f.get(H.key).overlayedDocument);F!=null&&V.push(new Dn(H.key,F,vM(F.value.mapValue),Be.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(M=>{m=M;let V=M.applyToLocalDocumentSet(f,S);return u.documentOverlayCache.saveOverlays(y,M.batchId,V)})}).then(()=>({batchId:m.batchId,changes:MM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Re(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield _r(r,i.changes),yield Xs(r.remoteStore)}catch(i){let o=ta(i,"Failed to persist write");t.reject(o)}})}function Ix(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield PB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield _r(t,r,e)}catch(r){yield ui(r)}})}function KS(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((h,f)=>{for(let m of f.j_)m.Z_(a)&&(l=!0)}),l&&Xw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function t$(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Re($.comparator);s=s.insert(o,Je.newNoDocument(o,J.min()));let a=ie().add(o),u=new rc(J.min(),new Map,new Re(re),s,a);yield Ix(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),rE(r)}else yield qs(r.localStore,e,!1).then(()=>Gs(r,e,t)).catch(ui)})}function n$(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield NB(t.localStore,e);nE(t,r,null),tE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _r(t,i)}catch(i){yield ui(i)}})}function r$(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Q(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);nE(r,e,t),tE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _r(r,i)}catch(i){yield ui(i)}})}function i$(n,e){return N(this,null,function*(){let t=B(n);li(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ta(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function tE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function nE(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Gs(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Dx(n,r)})}function Dx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Hs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rE(n))}function fw(n,e,t){for(let r of t)r instanceof If?(n.La.addReference(r.key,e),o$(n,r)):r instanceof Df?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Dx(n,r.key)):z()}function o$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),rE(n))}function rE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ye.fromString(e)),r=n.qa.next();n.Na.set(r,new dw(t)),n.Oa=n.Oa.insert(t,r),Vf(n.remoteStore,new Us(Mt(Zs(t.path)),r,"TargetPurposeLimboResolution",zt.oe))}}function _r(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=z_.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=B(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>A.forEach(l,m=>A.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>A.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!ci(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let y=h.os.get(m),D=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,S)}}})}(r.localStore,o))})}function s$(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield ux(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _r(t,r.hs)}})}function a$(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function u$(n,e){return N(this,null,function*(){let t=B(n),r=yield hf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&fw(t,e.targetId,i.wa),i})}function c$(n,e){return N(this,null,function*(){let t=B(n);return hx(t.localStore,e).then(r=>_r(t,r))})}function l$(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,u).next(m=>m?l.localDocuments.getDocuments(f,m):A.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Xs(i.remoteStore):t==="acknowledged"||t==="rejected"?(nE(i,e,r||null),tE(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield _r(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function d$(n,e){return N(this,null,function*(){let t=B(n);if(Lf(t),iE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield QS(t,r.toArray());t.Qa=!0,yield rw(t.remoteStore,!0);for(let o of i)Vf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Gs(t,s),qs(t.localStore,s,!0))),Hs(t.remoteStore,s)}),yield i,yield QS(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{Hs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Re($.comparator)}(t),t.Qa=!1,yield rw(t.remoteStore,!1)}})}function QS(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield $s(r.localStore,Mt(u[0]));for(let l of u){let h=r.Fa.get(l),f=yield u$(r,h);f.snapshot&&o.push(f.snapshot)}}else{let l=yield dx(r.localStore,s);a=yield $s(r.localStore,l),yield eE(r,Cx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Cx(n){return CM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function h$(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function f$(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield hx(i.localStore,TM(o[0])),a=rc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ge.EMPTY_BYTE_STRING);yield _r(i,s,a);break}case"rejected":yield qs(i.localStore,e,!0),Gs(i,e,r);break;default:z()}})}function p$(n,e,t){return N(this,null,function*(){let r=Lf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield dx(r.localStore,i),s=yield $s(r.localStore,o);yield eE(r,Cx(o),s.targetId,!1,s.resumeToken),Vf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield qs(r.localStore,i,!1).then(()=>{Hs(r.remoteStore,i),Gs(r,i)}).catch(ui))}})}function Lf(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ix.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t$.bind(null,e),e.Ca.d_=KB.bind(null,e.eventManager),e.Ca.$a=QB.bind(null,e.eventManager),e}function iE(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r$.bind(null,e),e}function g$(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let S=B(y),M=ze(D.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",V=>S.Gr.getBundleMetadata(V,D.id)).then(V=>!!V&&V.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(wx(u));let l=new cw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let f=yield l.complete();return yield _r(o,f.Ia,void 0),yield function(y,D){let S=B(y);return S.persistence.runTransaction("Save bundle","readwrite",M=>S.Gr.saveBundleMetadata(M,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return sn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var hc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Ec(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ax(this.persistence,new df,e.initialUser,this.serializer)}createPersistence(e){return new cf(lf.Zr,this.serializer)}createSharedClientState(e){return new gf}terminate(){return N(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var bf=class n extends hc{constructor(e,t,r){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Rp(n.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield iE(this.Wa.syncEngine),yield Xs(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return ax(this.persistence,new df,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new M_(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new Gv(t,this.persistence);return new zv(e.asyncQueue,r)}createPersistence(e){let t=Ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new H_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,px(),Fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gf}},pw=class n extends bf{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Rp(n.prototype,this,"initialize").call(this,e);let t=this.Wa.syncEngine;this.sharedClientState instanceof Wu&&(this.sharedClientState.syncEngine={no:l$.bind(null,t),ro:f$.bind(null,t),io:p$.bind(null,t),Qi:h$.bind(null,t),eo:c$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield d$(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=px();if(!Wu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},fc=class{initialize(e,t){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s$.bind(null,this.syncEngine),yield rw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new sw}()}createDatastore(e){let t=Ec(e.databaseInfo.databaseId),r=function(o){return new Z_(o)}(e.databaseInfo);return function(o,s,a,u){return new ew(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,a){return new nw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,t=>KS(this.syncEngine,t,0),function(){return mf.D()?new mf:new Q_}())}createSyncEngine(e,t){return function(i,o,s,a,u,l,h){let f=new hw(i,o,s,a,u,l);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return N(this,null,function*(){var e,t;yield function(i){return N(this,null,function*(){let o=B(i);O("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Js(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};function YS(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ws=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):qe("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var gw=class{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new Ze,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let t=this.Ha.decode(e),r=Number(t);isNaN(r)&&this.Za(`length string (${t}) is not valid number`);let i=yield this.Xa(r);return new uw(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let t=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var mw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>oc(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let m=wB(s.serializer,f);l.set(m.key.toString(),m)});let h=[];return o.forEach(f=>{let m=l.get(f.toString());Q(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new si(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new ec(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>sc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?Be.exists(!1):Be.updateTime(t):Be.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Be.updateTime(t)}return Be.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var yw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.nu=r.maxAttempts,this.t_=new lc(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new mw(this.datastore),t=this.su(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let t=this.updateFunction(e);return!yc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!jM(t)}return!1}};var vw=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=jh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){O("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ta(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vh(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield ux(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function _w(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield oE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>zS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>zS(e.remoteStore,i)),n._onlineComponents=e})}function bx(n){return n.name==="FirebaseError"?n.code===x.FAILED_PRECONDITION||n.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function oE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!bx(t))throw t;sn("Error using user provided cache. Falling back to memory cache: "+t),yield Vh(n,new hc)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Vh(n,new hc);return n._offlineComponents})}function jf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield _w(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield _w(n,new fc))),n._onlineComponents})}function Tx(n){return oE(n).then(e=>e.persistence)}function sE(n){return oE(n).then(e=>e.localStore)}function Ax(n){return jf(n).then(e=>e.remoteStore)}function aE(n){return jf(n).then(e=>e.syncEngine)}function m$(n){return jf(n).then(e=>e.datastore)}function Ks(n){return N(this,null,function*(){let e=yield jf(n),t=e.eventManager;return t.onListen=YB.bind(null,e.syncEngine),t.onUnlisten=JB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XB.bind(null,e.syncEngine),t})}function y$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Tx(n),t=yield Ax(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),Ic(o)}(t)}))}function v$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Tx(n),t=yield Ax(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield Js(o),o.q_.set("Offline")})}(t)}))}function _$(n,e){let t=new Ze;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let f=B(l);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ta(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield sE(n),e,t)})),t.promise}function Sx(n,e,t={}){let r=new Ze;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Ws({next:m=>{s.enqueueAndForget(()=>Jw(o,f));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new dc(Zs(a.path),h,{includeMetadataChanges:!0,_a:!0});return Zw(o,f)}(yield Ks(n),n.asyncQueue,e,t,r)})),r.promise}function w$(n,e){let t=new Ze;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield hf(i,o,!0),u=new Cf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=ta(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield sE(n),e,t)})),t.promise}function Mx(n,e,t={}){let r=new Ze;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Ws({next:m=>{s.enqueueAndForget(()=>Jw(o,f)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new dc(a,h,{includeMetadataChanges:!0,_a:!0});return Zw(o,f)}(yield Ks(n),n.asyncQueue,e,t,r)})),r.promise}function E$(n,e){let t=new Ws(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield Ks(n),t)})),()=>{t.za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield Ks(n),t)}))}}function I$(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?BM().encode(s):s,function(h,f){return new gw(h,f)}(function(h,f){if(h instanceof Uint8Array)return YS(h,f);if(h instanceof ArrayBuffer)return YS(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Ec(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){g$(yield aE(n),i,r)}))}function D$(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield sE(n),e)}))}function xx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ZS=new Map;function uE(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cE(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JS(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XS(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Uf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Uf(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Rx(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Tf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ro=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kv;switch(r.type){case"firstParty":return new jv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ZS.get(t);r&&(O("ComponentProvider","Removing Datastore"),ZS.delete(t),r.terminate())}(this),Promise.resolve()}};function Nx(n,e,t,r={}){var i;let o=(n=ve(n,ro))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ye.MOCK_USER;else{a=HI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ye(l)}n._authCredentials=new Fv(new Lh(a,u))}}var ft=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ae=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Un(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Un=class n extends ft{constructor(e,t,r){super(e,t,Zs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ae(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function lE(n,e,...t){if(n=Oe(n),uE("collection","path",e),n instanceof ro){let r=ye.fromString(e,...t);return XS(r),new Un(n,null,r)}{if(!(n instanceof Ae||n instanceof Un))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return XS(r),new Un(n.firestore,null,r)}}function Px(n,e){if(n=ve(n,ro),uE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ft(n,null,function(r){return new In(ye.emptyPath(),r)}(e))}function Dc(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=jh.newId()),uE("doc","path",e),n instanceof ro){let r=ye.fromString(e,...t);return JS(r),new Ae(n,null,new $(r))}{if(!(n instanceof Ae||n instanceof Un))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return JS(r),new Ae(n.firestore,n instanceof Un?n.converter:null,new $(r))}}function dE(n,e){return n=Oe(n),e=Oe(e),(n instanceof Ae||n instanceof Un)&&(e instanceof Ae||e instanceof Un)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hE(n,e){return n=Oe(n),e=Oe(e),n instanceof ft&&e instanceof ft&&n.firestore===e.firestore&&_c(n._query,e._query)&&n.converter===e.converter}var ww=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new lc(this,"async_queue_retry"),this.Eu=()=>{let t=Fh();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Fh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Fh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Ze;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ci(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=iw.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&z()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function Ew(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Iw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ze,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Ox=-1,Pe=class extends ro{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new ww}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||kx(this),this._firestoreClient.terminate()}};function it(n){return n._firestoreClient||kx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Wv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xx(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new vw(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Fx(n,e){zx(n=ve(n,Pe));let t=it(n);if(t._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");sn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new fc;return Lx(t,i,new bf(i,r.cacheSizeBytes,e?.forceOwnership))}function Vx(n){zx(n=ve(n,Pe));let e=it(n);if(e._uninitializedComponentsProvider)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");sn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new fc;return Lx(e,r,new pw(r,t.cacheSizeBytes))}function Lx(n,e,t){let r=new Ze;return n.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Vh(n,t),yield _w(n,e),r.resolve()}catch(i){let o=i;if(!bx(o))throw o;sn("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function jx(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ze;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Xr.D())return Promise.resolve();let i=r+"main";yield Xr.delete(i)})}(Ww(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Ux(n){return function(t){let r=new Ze;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return i$(yield aE(t),r)})),r.promise}(it(n=ve(n,Pe)))}function Bx(n){return y$(it(n=ve(n,Pe)))}function $x(n){return v$(it(n=ve(n,Pe)))}function qx(n,e){let t=it(n=ve(n,Pe)),r=new Iw;return I$(t,n._databaseId,e,r),r}function Hx(n,e){return D$(it(n=ve(n,Pe)),e).then(t=>t?new ft(n,null,t.query):null)}function zx(n){if(n._initialized||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Hn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ge.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Cn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yr=class{constructor(e){this._methodName=e}};var io=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var pc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var C$=/^__.*__$/,Dw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new oi(e,this.data,t,this.fieldTransforms)}},Af=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Gx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Sf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Mf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Gx(this.wu)&&C$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Cw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ec(e)}Nu(e,t,r,i=!1){return new Sf({wu:e,methodName:t,Ou:r,path:He.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function uo(n){let e=n._freezeSettings(),t=Ec(n._databaseId);return new Cw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Bf(n,e,t,r,i,o={}){let s=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);gE("Data must be an object, but it was:",s,r);let a=Qx(r,s),u,l;if(o.merge)u=new Gt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let f of o.mergeFields){let m=Mw(e,f,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Zx(h,m)||h.push(m)}u=new Gt(h),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new Dw(new Et(a),u,l)}var gc=class n extends yr{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Wx(n,e,t){return new Sf({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var bw=class n extends yr{_toFieldTransform(e){return new eo(e.path,new ri)}isEqual(e){return e instanceof n}},Tw=class n extends yr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=Wx(this,e,!0),r=this.Lu.map(o=>co(o,t)),i=new gr(r);return new eo(e.path,i)}isEqual(e){return e instanceof n&&Op(this.Lu,e.Lu)}},Aw=class n extends yr{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){let t=Wx(this,e,!0),r=this.Lu.map(o=>co(o,t)),i=new mr(r);return new eo(e.path,i)}isEqual(e){return e instanceof n&&Op(this.Lu,e.Lu)}},Sw=class n extends yr{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){let t=new ii(e.serializer,NM(e.serializer,this.Bu));return new eo(e.path,t)}isEqual(e){return e instanceof n&&this.Bu===e.Bu}};function fE(n,e,t,r){let i=n.Nu(1,e,t);gE("Data must be an object, but it was:",i,r);let o=[],s=Et.empty();ao(r,(u,l)=>{let h=mE(e,u,t);l=Oe(l);let f=i.Cu(h);if(l instanceof gc)o.push(h);else{let m=co(l,f);m!=null&&(o.push(h),s.set(h,m))}});let a=new Gt(o);return new Af(s,a,i.fieldTransforms)}function pE(n,e,t,r,i,o){let s=n.Nu(1,e,t),a=[Mw(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Mw(e,o[m])),u.push(o[m+1]);let l=[],h=Et.empty();for(let m=a.length-1;m>=0;--m)if(!Zx(l,a[m])){let y=a[m],D=u[m];D=Oe(D);let S=s.Cu(y);if(D instanceof gc)l.push(y);else{let M=co(D,S);M!=null&&(l.push(y),h.set(y,M))}}let f=new Gt(l);return new Af(h,f,s.fieldTransforms)}function Kx(n,e,t,r=!1){return co(t,n.Nu(r?4:3,e))}function co(n,e){if(Yx(n=Oe(n)))return gE("Unsupported field value:",e,n),Qx(n,e);if(n instanceof yr)return function(r,i){if(!Gx(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=co(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Le.fromDate(r);return{timestampValue:js(i.serializer,o)}}if(r instanceof Le){let o=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:js(i.serializer,o)}}if(r instanceof io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hn)return{bytesValue:$M(i.serializer,r._byteString)};if(r instanceof Ae){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return qw(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Uf(r)}`)}(n,e)}function Qx(n,e){let t={};return pM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(n,(r,i)=>{let o=co(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Yx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof io||n instanceof Hn||n instanceof Ae||n instanceof yr||n instanceof pc)}function gE(n,e,t){if(!Yx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Uf(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function Mw(n,e,t){if((e=Oe(e))instanceof Cn)return e._internalPath;if(typeof e=="string")return mE(n,e);throw Mf("Field path arguments must be of type string or ",n,!1,void 0,t)}var b$=new RegExp("[~\\*/\\[\\]]");function mE(n,e,t){if(e.search(b$)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cn(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function Zx(n,e){return n.some(t=>t.isEqual(e))}var oo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ae(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($f("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xw=class extends oo{data(){return super.data()}};function $f(n,e){return typeof e=="string"?mE(n,e):e instanceof Cn?e._internalPath:e._delegate._internalPath}function Jx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mc=class{},so=class extends mc{};function wr(n,e,...t){let r=[];e instanceof mc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Rw).length,a=o.filter(u=>u instanceof xf).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var xf=class n extends so{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return uR(e._query,t),new ft(e.firestore,e.converter,s_(e._query,t))}_parse(e){let t=uo(e.firestore);return function(o,s,a,u,l,h,f){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tM(f,h);let y=[];for(let D of f)y.push(eM(u,o,D));m={arrayValue:{values:y}}}else m=eM(u,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tM(f,h),m=Kx(a,s,f,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Xx(n,e,t){let r=e,i=$f("where",n);return xf._create(i,r,t)}var Rw=class n extends mc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ie.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)uR(s,u),s=s_(s,u)}(e._query,t),new ft(e.firestore,e.converter,s_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Nw=class n extends so{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ji(o,s)}(e._query,this._field,this._direction);return new ft(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new In(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function eR(n,e="asc"){let t=e,r=$f("orderBy",n);return Nw._create(r,t)}var Rf=class n extends so{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ft(e.firestore,e.converter,Qh(e._query,this._limit,this._limitType))}};function tR(n){return Rx("limit",n),Rf._create("limit",n,"F")}function nR(n){return Rx("limitToLast",n),Rf._create("limitToLast",n,"L")}var Nf=class n extends so{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=aR(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(i,o){return new In(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function rR(...n){return Nf._create("startAt",n,!0)}function iR(...n){return Nf._create("startAfter",n,!1)}var Pf=class n extends so{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=aR(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(i,o){return new In(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function oR(...n){return Pf._create("endBefore",n,!1)}function sR(...n){return Pf._create("endAt",n,!0)}function aR(n,e,t,r){if(t[0]=Oe(t[0]),t[0]instanceof oo)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let f of Rs(o))if(f.field.isKeyField())h.push(Zi(s,u.key));else{let m=u.data.field(f.field);if(kf(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=f.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new $n(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=uo(n.firestore);return function(s,a,u,l,h,f){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let S=h[D];if(m[D].field.isKeyField()){if(typeof S!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!Bw(s)&&S.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let M=s.path.child(ye.fromString(S));if(!$.isDocumentKey(M))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let V=new $(M);y.push(Zi(a,V))}else{let M=Kx(u,l,S);y.push(M)}}return new $n(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eM(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bw(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zi(n,new $(r))}if(t instanceof Ae)return Zi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(t)}.`)}function tM(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Qs=class{convertValue(e,t="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ao(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new pc(o)}convertGeoPoint(e){return new io(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=jw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){let t=pr(e);return new Le(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);Q(XM(r));let i=new ti(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||qe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function qf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Pw=class extends Qs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,t)}};var fr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},un=class extends oo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Zr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($f("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Zr=class extends un{data(e={}){return super.data(e)}},bn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zr(this._firestore,this._userDataWriter,r.key,r,new fr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Zr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Zr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:T$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function T$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function yE(n,e){return n instanceof un&&e instanceof un?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bn&&e instanceof bn&&n._firestore===e._firestore&&hE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function cR(n){n=ve(n,Ae);let e=ve(n.firestore,Pe);return Sx(it(e),n._key).then(t=>EE(e,n,t))}var vr=class extends Qs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,t)}};function lR(n){n=ve(n,Ae);let e=ve(n.firestore,Pe),t=it(e),r=new vr(e);return _$(t,n._key).then(i=>new un(e,r,n._key,i,new fr(i!==null&&i.hasLocalMutations,!0),n.converter))}function dR(n){n=ve(n,Ae);let e=ve(n.firestore,Pe);return Sx(it(e),n._key,{source:"server"}).then(t=>EE(e,n,t))}function hR(n){n=ve(n,ft);let e=ve(n.firestore,Pe),t=it(e),r=new vr(e);return Jx(n._query),Mx(t,n._query).then(i=>new bn(e,r,n,i))}function fR(n){n=ve(n,ft);let e=ve(n.firestore,Pe),t=it(e),r=new vr(e);return w$(t,n._query).then(i=>new bn(e,r,n,i))}function pR(n){n=ve(n,ft);let e=ve(n.firestore,Pe),t=it(e),r=new vr(e);return Mx(t,n._query,{source:"server"}).then(i=>new bn(e,r,n,i))}function vE(n,e,t){n=ve(n,Ae);let r=ve(n.firestore,Pe),i=qf(n.converter,e,t);return na(r,[Bf(uo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Be.none())])}function _E(n,e,t,...r){n=ve(n,Ae);let i=ve(n.firestore,Pe),o=uo(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof Cn?pE(o,"updateDoc",n._key,e,t,r):fE(o,"updateDoc",n._key,e),na(i,[s.toMutation(n._key,Be.exists(!0))])}function gR(n){return na(ve(n.firestore,Pe),[new si(n._key,Be.none())])}function mR(n,e){let t=ve(n.firestore,Pe),r=Dc(n),i=qf(n.converter,e);return na(t,[Bf(uo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Be.exists(!1))]).then(()=>r)}function wE(n,...e){var t,r,i;n=Oe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ew(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Ew(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,h;if(n instanceof Ae)l=ve(n.firestore,Pe),h=Zs(n._key.path),u={next:f=>{e[s]&&e[s](EE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ve(n,ft);l=ve(f.firestore,Pe),h=f._query;let m=new vr(l);u={next:y=>{e[s]&&e[s](new bn(l,m,f,y))},error:e[s+1],complete:e[s+2]},Jx(n._query)}return function(m,y,D,S){let M=new Ws(S),V=new dc(y,M,D);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Zw(yield Ks(m),V)})),()=>{M.za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Jw(yield Ks(m),V)}))}}(it(l),h,a,u)}function yR(n,e){return E$(it(n=ve(n,Pe)),Ew(e)?e:{next:e})}function na(n,e){return function(r,i){let o=new Ze;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return e$(yield aE(r),i,o)})),o.promise}(it(n),e)}function EE(n,e,t){let r=t.docs.get(e._key),i=new vr(n);return new un(n,i,e._key,r,new fr(t.hasPendingWrites,t.fromCache),e.converter)}var A$={maxAttempts:5};var Of=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=uo(e)}set(e,t,r){this._verifyNotCommitted();let i=Qr(e,this._firestore),o=qf(i.converter,t,r),s=Bf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Be.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Qr(e,this._firestore),s;return s=typeof(t=Oe(t))=="string"||t instanceof Cn?pE(this._dataReader,"WriteBatch.update",o._key,t,r,i):fE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Be.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Qr(e,this._firestore);return this._mutations=this._mutations.concat(new si(t._key,Be.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Qr(n,e){if((n=Oe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Ow=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=uo(t)}get(t){let r=Qr(t,this._firestore),i=new Pw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new oo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new oo(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Qr(t,this._firestore),s=qf(o.converter,r,i),a=Bf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Qr(t,this._firestore),a;return a=typeof(r=Oe(r))=="string"||r instanceof Cn?pE(this._dataReader,"Transaction.update",s._key,r,i,o):fE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Qr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Qr(e,this._firestore),r=new vr(this._firestore);return super.get(e).then(i=>new un(this._firestore,r,t._key,i._document,new fr(!1,!1),t.converter))}};function vR(n,e,t){n=ve(n,Pe);let r=Object.assign(Object.assign({},A$),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Ze;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield m$(o);new yw(o.asyncQueue,l,a,s,u).ru()})),u.promise}(it(n),i=>e(new Ow(n,i)),r)}function _R(){return new gc("deleteField")}function wR(){return new bw("serverTimestamp")}function ER(...n){return new Tw("arrayUnion",n)}function IR(...n){return new Aw("arrayRemove",n)}function DR(n){return new Sw("increment",n)}(function(e,t=!0){(function(i){Ys=i})(WI),Ma(new gi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Pe(new Vv(r.getProvider("auth-internal")),new Bv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ti(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),br(eS,"4.7.2",e),br(eS,"4.7.2","esm2017")})();var S$="@firebase/firestore-compat",M$="0.3.37";function AE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function CR(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function bR(){if(!gM())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Hf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return bR(),new n(Hn.fromBase64String(e))}static fromUint8Array(e){return CR(),new n(Hn.fromUint8Array(e))}toBase64(){return bR(),this._delegate.toBase64()}toUint8Array(){return CR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function IE(n){return x$(n,["next","error","complete"])}function x$(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var DE=class{enableIndexedDbPersistence(e,t){return Fx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Vx(e._delegate)}clearIndexedDbPersistence(e){return jx(e._delegate)}},zf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ti||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Nx(this._delegate,e,t,r)}enableNetwork(){return Bx(this._delegate)}disableNetwork(){return $x(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ux(this._delegate)}onSnapshotsInSync(e){return yR(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oa(this,lE(this._delegate,e))}catch(t){throw xt(t,"collection()","Firestore.collection()")}}doc(e){try{return new zn(this,Dc(this._delegate,e))}catch(t){throw xt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new po(this,Px(this._delegate,e))}catch(t){throw xt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return vR(this._delegate,t=>e(new Gf(this,t)))}batch(){return it(this._delegate),new Wf(new Of(this._delegate,e=>na(this._delegate,e)))}loadBundle(e){return qx(this._delegate,e)}namedQuery(e){return Hx(this._delegate,e).then(t=>t?new po(this,t):null)}},ra=class extends Qs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hf(new Hn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return zn.forKey(t,this.firestore,null)}};function R$(n){nM(n)}var Gf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ra(e)}get(e){let t=lo(e);return this._delegate.get(t).then(r=>new ho(this._firestore,new un(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=lo(e);return r?(AE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=lo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=lo(e);return this._delegate.delete(t),this}},Wf=class{constructor(e){this._delegate=e}set(e,t,r){let i=lo(e);return r?(AE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=lo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=lo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},ia=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Zr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ra(e),t),i.set(t,o)),o}};ia.INSTANCES=new WeakMap;var zn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ra(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ae(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Ae(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oa(this.firestore,lE(this._delegate,e))}catch(t){throw xt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Oe(e),e instanceof Ae?dE(this._delegate,e):!1}set(e,t){t=AE("DocumentReference.set",t);try{return t?vE(this._delegate,e,t):vE(this._delegate,e)}catch(r){throw xt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?_E(this._delegate,e):_E(this._delegate,e,t,...r)}catch(i){throw xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return gR(this._delegate)}onSnapshot(...e){let t=TR(e),r=AR(e,i=>new ho(this.firestore,new un(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=lR(this._delegate):e?.source==="server"?t=dR(this._delegate):t=cR(this._delegate),t.then(r=>new ho(this.firestore,new un(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xt(n,e,t){return n.message=n.message.replace(e,t),n}function TR(n){for(let e of n)if(typeof e=="object"&&!IE(e))return e;return{}}function AR(n,e){var t,r;let i;return IE(n[0])?i=n[0]:IE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ho=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yE(this._delegate,e._delegate)}},fo=class extends ho{data(e){let t=this._delegate.data(e);return this._delegate._converter||rM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},po=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ra(e)}where(e,t,r){try{return new n(this.firestore,wr(this._delegate,Xx(e,t,r)))}catch(i){throw xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,wr(this._delegate,eR(e,t)))}catch(r){throw xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,wr(this._delegate,tR(e)))}catch(t){throw xt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,wr(this._delegate,nR(e)))}catch(t){throw xt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,wr(this._delegate,rR(...e)))}catch(t){throw xt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,wr(this._delegate,iR(...e)))}catch(t){throw xt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,wr(this._delegate,oR(...e)))}catch(t){throw xt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,wr(this._delegate,sR(...e)))}catch(t){throw xt(t,"endAt()","Query.endAt()")}}isEqual(e){return hE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=fR(this._delegate):e?.source==="server"?t=pR(this._delegate):t=hR(this._delegate),t.then(r=>new Cc(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=TR(e),r=AR(e,i=>new Cc(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},CE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Cc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new fo(this._firestore,r))})}isEqual(e){return yE(this._delegate,e._delegate)}},oa=class n extends po{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new zn(this.firestore,e):null}doc(e){try{return e===void 0?new zn(this.firestore,Dc(this._delegate)):new zn(this.firestore,Dc(this._delegate,e))}catch(t){throw xt(t,"doc()","CollectionReference.doc()")}}add(e){return mR(this._delegate,e).then(t=>new zn(this.firestore,t))}isEqual(e){return dE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function lo(n){return ve(n,Ae)}var bE=class n{constructor(...e){this._delegate=new Cn(...e)}static documentId(){return new n(He.keyField().canonicalString())}isEqual(e){return e=Oe(e),e instanceof Cn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var TE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=wR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=_R();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=ER(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=IR(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=DR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var N$={Firestore:zf,GeoPoint:io,Timestamp:Le,Blob:Hf,Transaction:Gf,WriteBatch:Wf,DocumentReference:zn,DocumentSnapshot:ho,Query:po,QueryDocumentSnapshot:fo,QuerySnapshot:Cc,CollectionReference:oa,FieldPath:bE,FieldValue:TE,setLogLevel:R$,CACHE_SIZE_UNLIMITED:Ox};function P$(n,e){n.INTERNAL.registerComponent(new gi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},N$)))}function O$(n){P$(n,(e,t)=>new zf(e,t,new DE)),n.registerVersion(S$,M$)}O$(ot);function k$(n,e=ka){return new de(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function SR(n,e){return k$(n,e)}function F$(n,e){return SR(n,e).pipe(wi(void 0),Va(),X(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function xE(n,e){return SR(n,e).pipe(X(t=>({payload:t,type:"query"})))}var Kf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=PR(r,t);return new Yf(i,o,this.afs)}snapshotChanges(){return F$(this.ref,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return this.snapshotChanges().pipe(X(({payload:t})=>e.idField?le(j({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ge(this.ref.get(e)).pipe(kt)}};function Qf(n,e){return xE(n,e).pipe(wi(void 0),Va(),X(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function MR(n,e,t){return Qf(n,t).pipe(_i((r,i)=>V$(r,i.map(o=>o.payload),e),[]),rg(),X(r=>r.map(i=>({type:i.type,payload:i}))))}function V$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=L$(n,r))}),n}function SE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function L$(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return SE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return SE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SE(n,e.oldIndex,1);break}return n}function xR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Yf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Qf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(X(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wi(void 0),Va(),st(([r,i])=>i.length>0||!r),X(([,r])=>r),kt)}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=xR(e);return MR(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return xE(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.payload.docs.map(r=>e.idField?le(j({},r.data()),{[e.idField]:r.id}):r.data())),kt)}get(e){return ge(this.query.get(e)).pipe(kt)}add(e){return this.ref.add(e)}doc(e){return new Kf(this.ref.doc(e),this.afs)}},ME=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Qf(this.query,this.afs.schedulers.outsideAngular).pipe(kt):Qf(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.filter(r=>e.indexOf(r.type)>-1)),st(t=>t.length>0),kt)}auditTrail(e){return this.stateChanges(e).pipe(_i((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=xR(e);return MR(this.query,t,this.afs.schedulers.outsideAngular).pipe(kt)}valueChanges(e={}){return xE(this.query,this.afs.schedulers.outsideAngular).pipe(X(r=>r.payload.docs.map(i=>e.idField?j({[e.idField]:i.id},i.data()):i.data())),kt)}get(e){return ge(this.query.get(e)).pipe(kt)}},RR=new q("angularfire2.enableFirestorePersistence"),NR=new q("angularfire2.firestore.persistenceSettings"),j$=new q("angularfire2.firestore.settings"),U$=new q("angularfire2.firestore.use-emulator");function PR(n,e=t=>t){return{query:e(n),ref:n}}var RE=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,f,m,y,D,S,M,V,H){this.schedulers=u;let F=ku(t,a,r),G=h;f&&Dv(F,a,m,D,S,M,y,V),[this.firestore,this.persistenceEnabled$]=bh(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),G&&ee.useEmulator(...G),i&&!ar(s)){let Y=()=>{try{return ge(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Z(!1)}};return[ee,a.runOutsideAngular(Y)]}else return[ee,Z(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=PR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Yf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new ME(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Kf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(ys),L(vs,8),L(RR,8),L(j$,8),L(ht),L(pe),L(Ih),L(NR,8),L(U$,8),L(ZA,8),L(yv,8),L(vv,8),L(_v,8),L(wv,8),L(Ev,8),L(Iv,8),L(Bi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),OR=(()=>{class n{constructor(){ot.registerVersion("angularfire",ms.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:RR,useValue:!0},{provide:NR,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=nt({type:n});static \u0275inj=tt({providers:[RE]})}return n})();var $R=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(De(Pi),De(Lr))}}static{this.\u0275dir=Zt({type:n})}}return n})(),$$=(()=>{class n extends $R{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=nu(n)))(i||n)}})()}static{this.\u0275dir=Zt({type:n,features:[ts]})}}return n})(),qR=new q("");var q$={provide:qR,useExisting:Ya(()=>tp),multi:!0};function H$(){let n=On()?On().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var z$=new q(""),tp=(()=>{class n extends $R{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!H$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Pi),De(Lr),De(z$,8))}}static{this.\u0275dir=Zt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&or("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Xm([q$]),ts]})}}return n})();var G$=new q(""),W$=new q("");function HR(n){return n!=null}function zR(n){return ki(n)?ge(n):n}function GR(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function WR(n,e){return e.map(t=>t(n))}function K$(n){return!n.validate}function KR(n){return n.map(e=>K$(e)?e:t=>e.validate(t))}function Q$(n){if(!n)return null;let e=n.filter(HR);return e.length==0?null:function(t){return GR(WR(t,e))}}function QR(n){return n!=null?Q$(KR(n)):null}function Y$(n){if(!n)return null;let e=n.filter(HR);return e.length==0?null:function(t){let r=WR(t,e).map(zR);return eg(r).pipe(X(GR))}}function YR(n){return n!=null?Y$(KR(n)):null}function kR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Z$(n){return n._rawValidators}function J$(n){return n._rawAsyncValidators}function NE(n){return n?Array.isArray(n)?n:[n]:[]}function Jf(n,e){return Array.isArray(n)?n.includes(e):n===e}function FR(n,e){let t=NE(e);return NE(n).forEach(i=>{Jf(t,i)||t.push(i)}),t}function VR(n,e){return NE(e).filter(t=>!Jf(n,t))}var Xf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=QR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=YR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},PE=class extends Xf{get formDirective(){return null}get path(){return null}},Mc=class extends Xf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},OE=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},X$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},YW=le(j({},X$),{"[class.ng-submitted]":"isSubmitted"}),ZR=(()=>{class n extends OE{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Mc,2))}}static{this.\u0275dir=Zt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Qm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ts]})}}return n})();var bc="VALID",Zf="INVALID",sa="PENDING",Tc="DISABLED",ua=class{},ep=class extends ua{constructor(e,t){super(),this.value=e,this.source=t}},Ac=class extends ua{constructor(e,t){super(),this.pristine=e,this.source=t}},Sc=class extends ua{constructor(e,t){super(),this.touched=e,this.source=t}},aa=class extends ua{constructor(e,t){super(),this.status=e,this.source=t}};function eq(n){return(np(n)?n.validators:n)||null}function tq(n){return Array.isArray(n)?QR(n):n||null}function nq(n,e){return(np(e)?e.asyncValidators:n)||null}function rq(n){return Array.isArray(n)?YR(n):n||null}function np(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var kE=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Gd(()=>this.statusReactive()),this.statusReactive=Od(void 0),this._pristine=Gd(()=>this.pristineReactive()),this.pristineReactive=Od(!0),this._touched=Gd(()=>this.touchedReactive()),this.touchedReactive=Od(!1),this._events=new ke,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Br(this.statusReactive)}set status(e){Br(()=>this.statusReactive.set(e))}get valid(){return this.status===bc}get invalid(){return this.status===Zf}get pending(){return this.status==sa}get disabled(){return this.status===Tc}get enabled(){return this.status!==Tc}get pristine(){return Br(this.pristineReactive)}set pristine(e){Br(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Br(this.touchedReactive)}set touched(e){Br(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VR(e,this._rawAsyncValidators))}hasValidator(e){return Jf(this._rawValidators,e)}hasAsyncValidator(e){return Jf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Sc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Sc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ac(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ac(!0,r))}markAsPending(e={}){this.status=sa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new aa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this.errors=null,this._forEachChild(i=>{i.disable(le(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ep(this.value,r)),this._events.next(new aa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=bc,this._forEachChild(r=>{r.enable(le(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bc||this.status===sa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ep(this.value,t)),this._events.next(new aa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tc:bc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=sa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=zR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new aa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Tc:this.errors?Zf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sa)?sa:this._anyControlsHaveStatus(Zf)?Zf:bc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ac(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Sc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){np(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=tq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rq(this._rawAsyncValidators)}};var JR=new q("CallSetDisabledState",{providedIn:"root",factory:()=>FE}),FE="always";function iq(n,e){return[...e.path,n]}function oq(n,e,t=FE){aq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),uq(n,e),lq(n,e),cq(n,e),sq(n,e)}function LR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function aq(n,e){let t=Z$(n);e.validator!==null?n.setValidators(kR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=J$(n);e.asyncValidator!==null?n.setAsyncValidators(kR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();LR(e._rawValidators,i),LR(e._rawAsyncValidators,i)}function uq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&XR(n,e)})}function cq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&XR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function XR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function dq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function hq(n){return Object.getPrototypeOf(n.constructor)===$$}function fq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===tp?t=o:hq(o)?r=o:i=o}),i||r||t||null}function jR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function UR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var pq=class extends kE{constructor(e=null,t,r){super(eq(t),nq(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),np(t)&&(t.nonNullable||t.initialValueIsDefault)&&(UR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){UR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var gq={provide:Mc,useExisting:Ya(()=>VE)},BR=Promise.resolve(),VE=(()=>{class n extends Mc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new pq,this._registered=!1,this.name="",this.update=new et,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=fq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),dq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){oq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){BR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&zd(r);BR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?iq(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(De(PE,9),De(G$,10),De(W$,10),De(qR,10),De(Fi,8),De(JR,8))}}static{this.\u0275dir=Zt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xm([gq]),ts,Jo]})}}return n})();var mq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=nt({type:n})}static{this.\u0275inj=tt({})}}return n})();var eN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:JR,useValue:t.callSetDisabledState??FE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=nt({type:n})}static{this.\u0275inj=tt({imports:[mq]})}}return n})();var _q=n=>({transform:n});function wq(n,e){if(n&1){let t=zb();at(0,"li"),tn(1),at(2,"button",18),or("click",function(){let i=r0(t).index,o=Fd();return i0(o.deleteName(i))}),tn(3,"Delete"),ut()()}if(n&2){let t=e.$implicit;en(),au(" ",t," ")}}function Eq(n,e){if(n&1&&(at(0,"div",19),tn(1),ut()),n&2){let t=e.$implicit,r=e.index,i=Fd();Ur("ngStyle",i.getDegreePosition(r,t)),en(),au(" ",t," ")}}function Iq(n,e){n&1&&(at(0,"div",20)(1,"p"),tn(2,"Spin stuff to get questions and stuff, also Astro is sexy"),ut()())}function Dq(n,e){if(n&1&&(at(0,"div",20)(1,"p"),tn(2),ut(),at(3,"p",21),tn(4),ut()()),n&2){let t=Fd();en(2),Zm("",t.selectedAsker," must ask ",t.selectedResponder,":"),en(2),Ym(t.selectedQuestion)}}var rp=class n{constructor(e){this.firestore=e}rotationDegrees=0;newName="";names=[];previousIndex=null;previousResponder=null;selectedQuestion="";selectedAsker="";selectedResponder="";newQuestion="";questions=["What is your favorite hobby?","What's the most interesting place you've visited?","What is your dream job?","Who is your role model?","What is your favorite movie?","What is the weirdest food you've ever eaten?","If you could live anywhere in the world, where would it be?","What's one thing you couldn't live without?","What's your favorite book?","What's one thing you're afraid of?"];ngOnInit(){this.firestore.collection("spins").doc("currentSpin").valueChanges().subscribe(e=>{e&&(e.rotationDegrees!==this.rotationDegrees&&(this.rotationDegrees=e.rotationDegrees),this.selectedAsker=e.asker,this.selectedResponder=e.responder,this.selectedQuestion=e.question)}),this.firestore.collection("names").doc("currentNames").valueChanges().subscribe(e=>{e&&e.names&&(this.names=e.names)}),this.firestore.collection("questions").doc("currentQuestions").valueChanges().subscribe(e=>{e&&e.questions&&(this.questions=e.questions)})}addQuestion(){this.newQuestion.trim()&&(this.questions.push(this.newQuestion),this.firestore.collection("questions").doc("currentQuestions").set({questions:ot.firestore.FieldValue.arrayUnion(this.newQuestion)},{merge:!0}).then(()=>{console.log("Question added to Firestore")}).catch(t=>{console.error("Error adding question: ",t)}),this.newQuestion="")}addName(){this.newName&&(this.firestore.collection("names").doc("currentNames").set({names:ot.firestore.FieldValue.arrayUnion(this.newName)},{merge:!0}).then(()=>{console.log("Name added to Firestore")}).catch(t=>{console.error("Error adding name: ",t)}),this.newName="")}deleteName(e){let t=this.names[e];this.firestore.collection("names").doc("currentNames").update({names:ot.firestore.FieldValue.arrayRemove(t)}).then(()=>{console.log("Name deleted from Firestore")}).catch(i=>{console.error("Error deleting name: ",i)})}getDegreePosition(e,t){let o=360/this.names.length*e,s=300,a=250,u=this.getTextWidth(t,"18px Arial");u>100&&(s+=(u-100)/2);let l=o*Math.PI/180,h=Math.cos(l)*s+a,f=Math.sin(l)*s+a;return{left:`${h}px`,top:`${f}px`}}getTextWidth(e,t){let i=document.createElement("canvas").getContext("2d");return i?(i.font=t,i.measureText(e).width):0}isLongName(e){return e.length>10}spin(){if(this.names.length>1){let e,t;do e=Math.floor(Math.random()*this.names.length);while(this.previousIndex===e);this.previousIndex=e;let i=360/this.names.length*e,o=3*360+i,s=4e3,a=this.rotationDegrees;this.firestore.collection("spins").doc("currentSpin").set({rotationDegrees:a+o,asker:"",responder:"",question:""});let u=performance.now(),l=h=>{let f=h-u,m=Math.min(f/s,1),y=this.easeOutCubic(m);if(this.rotationDegrees=a+o*y,m<1)requestAnimationFrame(l);else{this.selectedAsker=this.names[e];do t=Math.floor(Math.random()*this.names.length);while(t===e||t===this.previousResponder);this.selectedResponder=this.names[t],this.previousResponder=t,this.selectedQuestion=this.questions[Math.floor(Math.random()*this.questions.length)],this.firestore.collection("spins").doc("currentSpin").set({rotationDegrees:this.rotationDegrees,asker:this.selectedAsker,responder:this.selectedResponder,question:this.selectedQuestion}).then(()=>{console.log("Final spin data updated in Firestore for synchronization.")}).catch(D=>{console.error("Error updating final spin data: ",D)})}};requestAnimationFrame(l)}}easeOutCubic(e){return 1-Math.pow(1-e,3)}static \u0275fac=function(t){return new(t||n)(De(RE))};static \u0275cmp=Yo({type:n,selectors:[["app-arrow-spinner"]],decls:27,vars:9,consts:[[1,"main-container"],[1,"input-section"],[1,"input-container"],["for","nameInput"],["id","nameInput","placeholder","Add name",3,"ngModelChange","ngModel"],[3,"click"],[1,"names-list"],[4,"ngFor","ngForOf"],[1,"circle-container"],[1,"spin-container"],[1,"circle"],[1,"center-circle"],[1,"arrow",3,"ngStyle"],["class","name-label",3,"ngStyle",4,"ngFor","ngForOf"],["class","question-container",4,"ngIf"],[1,"question-input-section"],["for","questionInput"],["id","questionInput","placeholder","Add a question",2,"margin-left","2px",3,"ngModelChange","ngModel"],[1,"delete-button",3,"click"],[1,"name-label",3,"ngStyle"],[1,"question-container"],[1,"question-text"]],template:function(t,r){t&1&&(at(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),tn(4,"Enter Names: "),ut(),at(5,"input",4),Ld("ngModelChange",function(o){return Jm(r.newName,o)||(r.newName=o),o}),ut(),at(6,"button",5),or("click",function(){return r.addName()}),tn(7,"Add Name"),ut()(),at(8,"div",6)(9,"ul"),su(10,wq,4,1,"li",7),ut()()(),at(11,"div",8)(12,"div",9)(13,"button",5),or("click",function(){return r.spin()}),tn(14,"Spin"),ut()(),at(15,"div",10),Oi(16,"div",11)(17,"div",12),su(18,Eq,2,2,"div",13),ut(),su(19,Iq,3,0,"div",14)(20,Dq,5,3,"div",14),ut(),at(21,"div",15)(22,"label",16),tn(23,"Enter a New Question:"),ut(),at(24,"input",17),Ld("ngModelChange",function(o){return Jm(r.newQuestion,o)||(r.newQuestion=o),o}),ut(),at(25,"button",5),or("click",function(){return r.addQuestion()}),tn(26,"Add Question"),ut()()()),t&2&&(en(5),Vd("ngModel",r.newName),en(5),Ur("ngForOf",r.names),en(7),Ur("ngStyle",Yb(7,_q,"rotate("+r.rotationDegrees+"deg)")),en(),Ur("ngForOf",r.names),en(),Ur("ngIf",!r.selectedQuestion),en(),Ur("ngIf",r.selectedQuestion),en(4),Vd("ngModel",r.newQuestion))},dependencies:[_T,wT,ET,tp,ZR,VE],styles:['.main-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:95.7vh;padding:20px;background-color:#1d1d1d;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.input-section[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#f2f2f2;padding:30px;border-radius:10px;box-shadow:0 4px 8px #00000080;color:#333}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;align-items:center;font-size:16px}input[_ngcontent-%COMP%]{font-size:14px;padding:8px;border:1px solid #ccc;border-radius:5px;width:200px;background-color:#fff;color:#333;box-shadow:inset 0 1px 3px #0000001a}.pointer[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;transform-origin:50% 100%;width:50px;height:150px;transition:transform 1s ease-out}button[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;cursor:pointer;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#ff4736}.delete-button[_ngcontent-%COMP%]{background-color:#ff4d4d;color:#fff;border:none;border-radius:5px;padding:5px 10px;margin-left:10px;cursor:pointer}.delete-button[_ngcontent-%COMP%]:hover{background-color:#ff1a1a}.names-list[_ngcontent-%COMP%]{margin-top:20px;font-size:14px;list-style:none;padding:0;width:100%}.names-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.names-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px 0;padding:8px;background-color:#dedede;border-radius:5px;color:#333;width:100%;display:flex;justify-content:space-between;align-items:center}.circle-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:70%;position:relative}.spin-container[_ngcontent-%COMP%]{position:absolute;top:-100px;display:flex;justify-content:center;align-items:center}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:12px 25px;background-color:#ff6f61;border:none;border-radius:5px;color:#fff;transition:background-color .3s ease}.spin-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff4736}.circle[_ngcontent-%COMP%]{position:relative;width:500px;height:500px;border:4px solid #ff6f61;border-radius:50%;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 20px #00000080;background-color:#292929}.center-circle[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;background-color:#ff6f61;border-radius:50%;z-index:10;box-shadow:0 2px 8px #0000004d;top:50%;left:50%;transform:translate(-50%,-35%)}.arrow[_ngcontent-%COMP%]{position:absolute;width:200px;height:20px;background-color:#ff6f61;top:50%;left:50%;transform-origin:0 50%;transition:transform 1s ease-out;transform:translateY(-50%)}.arrow[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;right:-30px;transform:translateY(-50%);width:0;height:0;border-left:30px solid #ff6f61;border-top:10px solid transparent;border-bottom:10px solid transparent}.name-label[_ngcontent-%COMP%]{position:absolute;font-size:18px;color:#ff6f61;font-weight:700;transform:translate(-50%,-50%);width:auto;text-align:center;word-wrap:break-word;white-space:normal;overflow:hidden;text-overflow:ellipsis}.name-label.long-name[_ngcontent-%COMP%]{font-size:14px}.question-container[_ngcontent-%COMP%]{margin-top:30px;text-align:center;font-size:22px;background-color:#333;padding:15px;border-radius:10px;color:#ff6f61;box-shadow:0 4px 10px #00000080;max-width:700px}.question-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;white-space:normal}.question-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-weight:700}']})};var ip=class n{title="spinArrowApp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yo({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Oi(0,"app-arrow-spinner")},dependencies:[rp]})};var bq={apiKey:"AIzaSyB9ReI8QdMrvsi0gIXlT2CkfFaKWR8ukOE",authDomain:"spinbottleapp.firebaseapp.com",projectId:"spinbottleapp",storageBucket:"spinbottleapp.appspot.com",messagingSenderId:"285539728216",appId:"1:285539728216:web:a069b60b7bb7960410c32d"},op=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=nt({type:n,bootstrap:[ip]});static \u0275inj=tt({providers:[qT()],imports:[BT,eN,wh,YA.initializeApp(bq),OR]})};UT().bootstrapModule(op,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
